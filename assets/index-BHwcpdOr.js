function w0(r,e){for(var t=0;t<e.length;t++){const i=e[t];if(typeof i!="string"&&!Array.isArray(i)){for(const o in i)if(o!=="default"&&!(o in r)){const l=Object.getOwnPropertyDescriptor(i,o);l&&Object.defineProperty(r,o,l.get?l:{enumerable:!0,get:()=>i[o]})}}}return Object.freeze(Object.defineProperty(r,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))i(o);new MutationObserver(o=>{for(const l of o)if(l.type==="childList")for(const h of l.addedNodes)h.tagName==="LINK"&&h.rel==="modulepreload"&&i(h)}).observe(document,{childList:!0,subtree:!0});function t(o){const l={};return o.integrity&&(l.integrity=o.integrity),o.referrerPolicy&&(l.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?l.credentials="include":o.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function i(o){if(o.ep)return;o.ep=!0;const l=t(o);fetch(o.href,l)}})();function T0(r){return r&&r.__esModule&&Object.prototype.hasOwnProperty.call(r,"default")?r.default:r}var Dd={exports:{}},Wa={},bd={exports:{}},xe={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Lg;function I0(){if(Lg)return xe;Lg=1;var r=Symbol.for("react.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),i=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),l=Symbol.for("react.provider"),h=Symbol.for("react.context"),f=Symbol.for("react.forward_ref"),p=Symbol.for("react.suspense"),y=Symbol.for("react.memo"),E=Symbol.for("react.lazy"),T=Symbol.iterator;function S(O){return O===null||typeof O!="object"?null:(O=T&&O[T]||O["@@iterator"],typeof O=="function"?O:null)}var V={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},L=Object.assign,z={};function F(O,q,me){this.props=O,this.context=q,this.refs=z,this.updater=me||V}F.prototype.isReactComponent={},F.prototype.setState=function(O,q){if(typeof O!="object"&&typeof O!="function"&&O!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,O,q,"setState")},F.prototype.forceUpdate=function(O){this.updater.enqueueForceUpdate(this,O,"forceUpdate")};function oe(){}oe.prototype=F.prototype;function Y(O,q,me){this.props=O,this.context=q,this.refs=z,this.updater=me||V}var re=Y.prototype=new oe;re.constructor=Y,L(re,F.prototype),re.isPureReactComponent=!0;var ye=Array.isArray,Re=Object.prototype.hasOwnProperty,ie={current:null},k={key:!0,ref:!0,__self:!0,__source:!0};function A(O,q,me){var ke,H={},ee=null,ue=null;if(q!=null)for(ke in q.ref!==void 0&&(ue=q.ref),q.key!==void 0&&(ee=""+q.key),q)Re.call(q,ke)&&!k.hasOwnProperty(ke)&&(H[ke]=q[ke]);var Ce=arguments.length-2;if(Ce===1)H.children=me;else if(1<Ce){for(var De=Array(Ce),$e=0;$e<Ce;$e++)De[$e]=arguments[$e+2];H.children=De}if(O&&O.defaultProps)for(ke in Ce=O.defaultProps,Ce)H[ke]===void 0&&(H[ke]=Ce[ke]);return{$$typeof:r,type:O,key:ee,ref:ue,props:H,_owner:ie.current}}function C(O,q){return{$$typeof:r,type:O.type,key:q,ref:O.ref,props:O.props,_owner:O._owner}}function x(O){return typeof O=="object"&&O!==null&&O.$$typeof===r}function b(O){var q={"=":"=0",":":"=2"};return"$"+O.replace(/[=:]/g,function(me){return q[me]})}var M=/\/+/g;function R(O,q){return typeof O=="object"&&O!==null&&O.key!=null?b(""+O.key):q.toString(36)}function He(O,q,me,ke,H){var ee=typeof O;(ee==="undefined"||ee==="boolean")&&(O=null);var ue=!1;if(O===null)ue=!0;else switch(ee){case"string":case"number":ue=!0;break;case"object":switch(O.$$typeof){case r:case e:ue=!0}}if(ue)return ue=O,H=H(ue),O=ke===""?"."+R(ue,0):ke,ye(H)?(me="",O!=null&&(me=O.replace(M,"$&/")+"/"),He(H,q,me,"",function($e){return $e})):H!=null&&(x(H)&&(H=C(H,me+(!H.key||ue&&ue.key===H.key?"":(""+H.key).replace(M,"$&/")+"/")+O)),q.push(H)),1;if(ue=0,ke=ke===""?".":ke+":",ye(O))for(var Ce=0;Ce<O.length;Ce++){ee=O[Ce];var De=ke+R(ee,Ce);ue+=He(ee,q,me,De,H)}else if(De=S(O),typeof De=="function")for(O=De.call(O),Ce=0;!(ee=O.next()).done;)ee=ee.value,De=ke+R(ee,Ce++),ue+=He(ee,q,me,De,H);else if(ee==="object")throw q=String(O),Error("Objects are not valid as a React child (found: "+(q==="[object Object]"?"object with keys {"+Object.keys(O).join(", ")+"}":q)+"). If you meant to render a collection of children, use an array instead.");return ue}function rt(O,q,me){if(O==null)return O;var ke=[],H=0;return He(O,ke,"","",function(ee){return q.call(me,ee,H++)}),ke}function at(O){if(O._status===-1){var q=O._result;q=q(),q.then(function(me){(O._status===0||O._status===-1)&&(O._status=1,O._result=me)},function(me){(O._status===0||O._status===-1)&&(O._status=2,O._result=me)}),O._status===-1&&(O._status=0,O._result=q)}if(O._status===1)return O._result.default;throw O._result}var Ue={current:null},se={transition:null},ve={ReactCurrentDispatcher:Ue,ReactCurrentBatchConfig:se,ReactCurrentOwner:ie};function le(){throw Error("act(...) is not supported in production builds of React.")}return xe.Children={map:rt,forEach:function(O,q,me){rt(O,function(){q.apply(this,arguments)},me)},count:function(O){var q=0;return rt(O,function(){q++}),q},toArray:function(O){return rt(O,function(q){return q})||[]},only:function(O){if(!x(O))throw Error("React.Children.only expected to receive a single React element child.");return O}},xe.Component=F,xe.Fragment=t,xe.Profiler=o,xe.PureComponent=Y,xe.StrictMode=i,xe.Suspense=p,xe.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=ve,xe.act=le,xe.cloneElement=function(O,q,me){if(O==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+O+".");var ke=L({},O.props),H=O.key,ee=O.ref,ue=O._owner;if(q!=null){if(q.ref!==void 0&&(ee=q.ref,ue=ie.current),q.key!==void 0&&(H=""+q.key),O.type&&O.type.defaultProps)var Ce=O.type.defaultProps;for(De in q)Re.call(q,De)&&!k.hasOwnProperty(De)&&(ke[De]=q[De]===void 0&&Ce!==void 0?Ce[De]:q[De])}var De=arguments.length-2;if(De===1)ke.children=me;else if(1<De){Ce=Array(De);for(var $e=0;$e<De;$e++)Ce[$e]=arguments[$e+2];ke.children=Ce}return{$$typeof:r,type:O.type,key:H,ref:ee,props:ke,_owner:ue}},xe.createContext=function(O){return O={$$typeof:h,_currentValue:O,_currentValue2:O,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},O.Provider={$$typeof:l,_context:O},O.Consumer=O},xe.createElement=A,xe.createFactory=function(O){var q=A.bind(null,O);return q.type=O,q},xe.createRef=function(){return{current:null}},xe.forwardRef=function(O){return{$$typeof:f,render:O}},xe.isValidElement=x,xe.lazy=function(O){return{$$typeof:E,_payload:{_status:-1,_result:O},_init:at}},xe.memo=function(O,q){return{$$typeof:y,type:O,compare:q===void 0?null:q}},xe.startTransition=function(O){var q=se.transition;se.transition={};try{O()}finally{se.transition=q}},xe.unstable_act=le,xe.useCallback=function(O,q){return Ue.current.useCallback(O,q)},xe.useContext=function(O){return Ue.current.useContext(O)},xe.useDebugValue=function(){},xe.useDeferredValue=function(O){return Ue.current.useDeferredValue(O)},xe.useEffect=function(O,q){return Ue.current.useEffect(O,q)},xe.useId=function(){return Ue.current.useId()},xe.useImperativeHandle=function(O,q,me){return Ue.current.useImperativeHandle(O,q,me)},xe.useInsertionEffect=function(O,q){return Ue.current.useInsertionEffect(O,q)},xe.useLayoutEffect=function(O,q){return Ue.current.useLayoutEffect(O,q)},xe.useMemo=function(O,q){return Ue.current.useMemo(O,q)},xe.useReducer=function(O,q,me){return Ue.current.useReducer(O,q,me)},xe.useRef=function(O){return Ue.current.useRef(O)},xe.useState=function(O){return Ue.current.useState(O)},xe.useSyncExternalStore=function(O,q,me){return Ue.current.useSyncExternalStore(O,q,me)},xe.useTransition=function(){return Ue.current.useTransition()},xe.version="18.3.1",xe}var Mg;function kf(){return Mg||(Mg=1,bd.exports=I0()),bd.exports}/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var jg;function S0(){if(jg)return Wa;jg=1;var r=kf(),e=Symbol.for("react.element"),t=Symbol.for("react.fragment"),i=Object.prototype.hasOwnProperty,o=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,l={key:!0,ref:!0,__self:!0,__source:!0};function h(f,p,y){var E,T={},S=null,V=null;y!==void 0&&(S=""+y),p.key!==void 0&&(S=""+p.key),p.ref!==void 0&&(V=p.ref);for(E in p)i.call(p,E)&&!l.hasOwnProperty(E)&&(T[E]=p[E]);if(f&&f.defaultProps)for(E in p=f.defaultProps,p)T[E]===void 0&&(T[E]=p[E]);return{$$typeof:e,type:f,key:S,ref:V,props:T,_owner:o.current}}return Wa.Fragment=t,Wa.jsx=h,Wa.jsxs=h,Wa}var Fg;function A0(){return Fg||(Fg=1,Dd.exports=S0()),Dd.exports}var w=A0(),Q=kf();const P0=T0(Q),C0=w0({__proto__:null,default:P0},[Q]);var Wu={},Vd={exports:{}},rn={},Od={exports:{}},Ld={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ug;function R0(){return Ug||(Ug=1,(function(r){function e(se,ve){var le=se.length;se.push(ve);e:for(;0<le;){var O=le-1>>>1,q=se[O];if(0<o(q,ve))se[O]=ve,se[le]=q,le=O;else break e}}function t(se){return se.length===0?null:se[0]}function i(se){if(se.length===0)return null;var ve=se[0],le=se.pop();if(le!==ve){se[0]=le;e:for(var O=0,q=se.length,me=q>>>1;O<me;){var ke=2*(O+1)-1,H=se[ke],ee=ke+1,ue=se[ee];if(0>o(H,le))ee<q&&0>o(ue,H)?(se[O]=ue,se[ee]=le,O=ee):(se[O]=H,se[ke]=le,O=ke);else if(ee<q&&0>o(ue,le))se[O]=ue,se[ee]=le,O=ee;else break e}}return ve}function o(se,ve){var le=se.sortIndex-ve.sortIndex;return le!==0?le:se.id-ve.id}if(typeof performance=="object"&&typeof performance.now=="function"){var l=performance;r.unstable_now=function(){return l.now()}}else{var h=Date,f=h.now();r.unstable_now=function(){return h.now()-f}}var p=[],y=[],E=1,T=null,S=3,V=!1,L=!1,z=!1,F=typeof setTimeout=="function"?setTimeout:null,oe=typeof clearTimeout=="function"?clearTimeout:null,Y=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function re(se){for(var ve=t(y);ve!==null;){if(ve.callback===null)i(y);else if(ve.startTime<=se)i(y),ve.sortIndex=ve.expirationTime,e(p,ve);else break;ve=t(y)}}function ye(se){if(z=!1,re(se),!L)if(t(p)!==null)L=!0,at(Re);else{var ve=t(y);ve!==null&&Ue(ye,ve.startTime-se)}}function Re(se,ve){L=!1,z&&(z=!1,oe(A),A=-1),V=!0;var le=S;try{for(re(ve),T=t(p);T!==null&&(!(T.expirationTime>ve)||se&&!b());){var O=T.callback;if(typeof O=="function"){T.callback=null,S=T.priorityLevel;var q=O(T.expirationTime<=ve);ve=r.unstable_now(),typeof q=="function"?T.callback=q:T===t(p)&&i(p),re(ve)}else i(p);T=t(p)}if(T!==null)var me=!0;else{var ke=t(y);ke!==null&&Ue(ye,ke.startTime-ve),me=!1}return me}finally{T=null,S=le,V=!1}}var ie=!1,k=null,A=-1,C=5,x=-1;function b(){return!(r.unstable_now()-x<C)}function M(){if(k!==null){var se=r.unstable_now();x=se;var ve=!0;try{ve=k(!0,se)}finally{ve?R():(ie=!1,k=null)}}else ie=!1}var R;if(typeof Y=="function")R=function(){Y(M)};else if(typeof MessageChannel<"u"){var He=new MessageChannel,rt=He.port2;He.port1.onmessage=M,R=function(){rt.postMessage(null)}}else R=function(){F(M,0)};function at(se){k=se,ie||(ie=!0,R())}function Ue(se,ve){A=F(function(){se(r.unstable_now())},ve)}r.unstable_IdlePriority=5,r.unstable_ImmediatePriority=1,r.unstable_LowPriority=4,r.unstable_NormalPriority=3,r.unstable_Profiling=null,r.unstable_UserBlockingPriority=2,r.unstable_cancelCallback=function(se){se.callback=null},r.unstable_continueExecution=function(){L||V||(L=!0,at(Re))},r.unstable_forceFrameRate=function(se){0>se||125<se?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):C=0<se?Math.floor(1e3/se):5},r.unstable_getCurrentPriorityLevel=function(){return S},r.unstable_getFirstCallbackNode=function(){return t(p)},r.unstable_next=function(se){switch(S){case 1:case 2:case 3:var ve=3;break;default:ve=S}var le=S;S=ve;try{return se()}finally{S=le}},r.unstable_pauseExecution=function(){},r.unstable_requestPaint=function(){},r.unstable_runWithPriority=function(se,ve){switch(se){case 1:case 2:case 3:case 4:case 5:break;default:se=3}var le=S;S=se;try{return ve()}finally{S=le}},r.unstable_scheduleCallback=function(se,ve,le){var O=r.unstable_now();switch(typeof le=="object"&&le!==null?(le=le.delay,le=typeof le=="number"&&0<le?O+le:O):le=O,se){case 1:var q=-1;break;case 2:q=250;break;case 5:q=1073741823;break;case 4:q=1e4;break;default:q=5e3}return q=le+q,se={id:E++,callback:ve,priorityLevel:se,startTime:le,expirationTime:q,sortIndex:-1},le>O?(se.sortIndex=le,e(y,se),t(p)===null&&se===t(y)&&(z?(oe(A),A=-1):z=!0,Ue(ye,le-O))):(se.sortIndex=q,e(p,se),L||V||(L=!0,at(Re))),se},r.unstable_shouldYield=b,r.unstable_wrapCallback=function(se){var ve=S;return function(){var le=S;S=ve;try{return se.apply(this,arguments)}finally{S=le}}}})(Ld)),Ld}var Bg;function k0(){return Bg||(Bg=1,Od.exports=R0()),Od.exports}/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var zg;function N0(){if(zg)return rn;zg=1;var r=kf(),e=k0();function t(n){for(var s="https://reactjs.org/docs/error-decoder.html?invariant="+n,a=1;a<arguments.length;a++)s+="&args[]="+encodeURIComponent(arguments[a]);return"Minified React error #"+n+"; visit "+s+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var i=new Set,o={};function l(n,s){h(n,s),h(n+"Capture",s)}function h(n,s){for(o[n]=s,n=0;n<s.length;n++)i.add(s[n])}var f=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),p=Object.prototype.hasOwnProperty,y=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,E={},T={};function S(n){return p.call(T,n)?!0:p.call(E,n)?!1:y.test(n)?T[n]=!0:(E[n]=!0,!1)}function V(n,s,a,c){if(a!==null&&a.type===0)return!1;switch(typeof s){case"function":case"symbol":return!0;case"boolean":return c?!1:a!==null?!a.acceptsBooleans:(n=n.toLowerCase().slice(0,5),n!=="data-"&&n!=="aria-");default:return!1}}function L(n,s,a,c){if(s===null||typeof s>"u"||V(n,s,a,c))return!0;if(c)return!1;if(a!==null)switch(a.type){case 3:return!s;case 4:return s===!1;case 5:return isNaN(s);case 6:return isNaN(s)||1>s}return!1}function z(n,s,a,c,d,g,_){this.acceptsBooleans=s===2||s===3||s===4,this.attributeName=c,this.attributeNamespace=d,this.mustUseProperty=a,this.propertyName=n,this.type=s,this.sanitizeURL=g,this.removeEmptyString=_}var F={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(n){F[n]=new z(n,0,!1,n,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(n){var s=n[0];F[s]=new z(s,1,!1,n[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(n){F[n]=new z(n,2,!1,n.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(n){F[n]=new z(n,2,!1,n,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(n){F[n]=new z(n,3,!1,n.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(n){F[n]=new z(n,3,!0,n,null,!1,!1)}),["capture","download"].forEach(function(n){F[n]=new z(n,4,!1,n,null,!1,!1)}),["cols","rows","size","span"].forEach(function(n){F[n]=new z(n,6,!1,n,null,!1,!1)}),["rowSpan","start"].forEach(function(n){F[n]=new z(n,5,!1,n.toLowerCase(),null,!1,!1)});var oe=/[\-:]([a-z])/g;function Y(n){return n[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(n){var s=n.replace(oe,Y);F[s]=new z(s,1,!1,n,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(n){var s=n.replace(oe,Y);F[s]=new z(s,1,!1,n,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(n){var s=n.replace(oe,Y);F[s]=new z(s,1,!1,n,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(n){F[n]=new z(n,1,!1,n.toLowerCase(),null,!1,!1)}),F.xlinkHref=new z("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(n){F[n]=new z(n,1,!1,n.toLowerCase(),null,!0,!0)});function re(n,s,a,c){var d=F.hasOwnProperty(s)?F[s]:null;(d!==null?d.type!==0:c||!(2<s.length)||s[0]!=="o"&&s[0]!=="O"||s[1]!=="n"&&s[1]!=="N")&&(L(s,a,d,c)&&(a=null),c||d===null?S(s)&&(a===null?n.removeAttribute(s):n.setAttribute(s,""+a)):d.mustUseProperty?n[d.propertyName]=a===null?d.type===3?!1:"":a:(s=d.attributeName,c=d.attributeNamespace,a===null?n.removeAttribute(s):(d=d.type,a=d===3||d===4&&a===!0?"":""+a,c?n.setAttributeNS(c,s,a):n.setAttribute(s,a))))}var ye=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Re=Symbol.for("react.element"),ie=Symbol.for("react.portal"),k=Symbol.for("react.fragment"),A=Symbol.for("react.strict_mode"),C=Symbol.for("react.profiler"),x=Symbol.for("react.provider"),b=Symbol.for("react.context"),M=Symbol.for("react.forward_ref"),R=Symbol.for("react.suspense"),He=Symbol.for("react.suspense_list"),rt=Symbol.for("react.memo"),at=Symbol.for("react.lazy"),Ue=Symbol.for("react.offscreen"),se=Symbol.iterator;function ve(n){return n===null||typeof n!="object"?null:(n=se&&n[se]||n["@@iterator"],typeof n=="function"?n:null)}var le=Object.assign,O;function q(n){if(O===void 0)try{throw Error()}catch(a){var s=a.stack.trim().match(/\n( *(at )?)/);O=s&&s[1]||""}return`
`+O+n}var me=!1;function ke(n,s){if(!n||me)return"";me=!0;var a=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(s)if(s=function(){throw Error()},Object.defineProperty(s.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(s,[])}catch($){var c=$}Reflect.construct(n,[],s)}else{try{s.call()}catch($){c=$}n.call(s.prototype)}else{try{throw Error()}catch($){c=$}n()}}catch($){if($&&c&&typeof $.stack=="string"){for(var d=$.stack.split(`
`),g=c.stack.split(`
`),_=d.length-1,P=g.length-1;1<=_&&0<=P&&d[_]!==g[P];)P--;for(;1<=_&&0<=P;_--,P--)if(d[_]!==g[P]){if(_!==1||P!==1)do if(_--,P--,0>P||d[_]!==g[P]){var N=`
`+d[_].replace(" at new "," at ");return n.displayName&&N.includes("<anonymous>")&&(N=N.replace("<anonymous>",n.displayName)),N}while(1<=_&&0<=P);break}}}finally{me=!1,Error.prepareStackTrace=a}return(n=n?n.displayName||n.name:"")?q(n):""}function H(n){switch(n.tag){case 5:return q(n.type);case 16:return q("Lazy");case 13:return q("Suspense");case 19:return q("SuspenseList");case 0:case 2:case 15:return n=ke(n.type,!1),n;case 11:return n=ke(n.type.render,!1),n;case 1:return n=ke(n.type,!0),n;default:return""}}function ee(n){if(n==null)return null;if(typeof n=="function")return n.displayName||n.name||null;if(typeof n=="string")return n;switch(n){case k:return"Fragment";case ie:return"Portal";case C:return"Profiler";case A:return"StrictMode";case R:return"Suspense";case He:return"SuspenseList"}if(typeof n=="object")switch(n.$$typeof){case b:return(n.displayName||"Context")+".Consumer";case x:return(n._context.displayName||"Context")+".Provider";case M:var s=n.render;return n=n.displayName,n||(n=s.displayName||s.name||"",n=n!==""?"ForwardRef("+n+")":"ForwardRef"),n;case rt:return s=n.displayName||null,s!==null?s:ee(n.type)||"Memo";case at:s=n._payload,n=n._init;try{return ee(n(s))}catch{}}return null}function ue(n){var s=n.type;switch(n.tag){case 24:return"Cache";case 9:return(s.displayName||"Context")+".Consumer";case 10:return(s._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return n=s.render,n=n.displayName||n.name||"",s.displayName||(n!==""?"ForwardRef("+n+")":"ForwardRef");case 7:return"Fragment";case 5:return s;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return ee(s);case 8:return s===A?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof s=="function")return s.displayName||s.name||null;if(typeof s=="string")return s}return null}function Ce(n){switch(typeof n){case"boolean":case"number":case"string":case"undefined":return n;case"object":return n;default:return""}}function De(n){var s=n.type;return(n=n.nodeName)&&n.toLowerCase()==="input"&&(s==="checkbox"||s==="radio")}function $e(n){var s=De(n)?"checked":"value",a=Object.getOwnPropertyDescriptor(n.constructor.prototype,s),c=""+n[s];if(!n.hasOwnProperty(s)&&typeof a<"u"&&typeof a.get=="function"&&typeof a.set=="function"){var d=a.get,g=a.set;return Object.defineProperty(n,s,{configurable:!0,get:function(){return d.call(this)},set:function(_){c=""+_,g.call(this,_)}}),Object.defineProperty(n,s,{enumerable:a.enumerable}),{getValue:function(){return c},setValue:function(_){c=""+_},stopTracking:function(){n._valueTracker=null,delete n[s]}}}}function Qt(n){n._valueTracker||(n._valueTracker=$e(n))}function mr(n){if(!n)return!1;var s=n._valueTracker;if(!s)return!0;var a=s.getValue(),c="";return n&&(c=De(n)?n.checked?"true":"false":n.value),n=c,n!==a?(s.setValue(n),!0):!1}function Kn(n){if(n=n||(typeof document<"u"?document:void 0),typeof n>"u")return null;try{return n.activeElement||n.body}catch{return n.body}}function $i(n,s){var a=s.checked;return le({},s,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:a??n._wrapperState.initialChecked})}function xs(n,s){var a=s.defaultValue==null?"":s.defaultValue,c=s.checked!=null?s.checked:s.defaultChecked;a=Ce(s.value!=null?s.value:a),n._wrapperState={initialChecked:c,initialValue:a,controlled:s.type==="checkbox"||s.type==="radio"?s.checked!=null:s.value!=null}}function Yo(n,s){s=s.checked,s!=null&&re(n,"checked",s,!1)}function Xo(n,s){Yo(n,s);var a=Ce(s.value),c=s.type;if(a!=null)c==="number"?(a===0&&n.value===""||n.value!=a)&&(n.value=""+a):n.value!==""+a&&(n.value=""+a);else if(c==="submit"||c==="reset"){n.removeAttribute("value");return}s.hasOwnProperty("value")?Ds(n,s.type,a):s.hasOwnProperty("defaultValue")&&Ds(n,s.type,Ce(s.defaultValue)),s.checked==null&&s.defaultChecked!=null&&(n.defaultChecked=!!s.defaultChecked)}function kl(n,s,a){if(s.hasOwnProperty("value")||s.hasOwnProperty("defaultValue")){var c=s.type;if(!(c!=="submit"&&c!=="reset"||s.value!==void 0&&s.value!==null))return;s=""+n._wrapperState.initialValue,a||s===n.value||(n.value=s),n.defaultValue=s}a=n.name,a!==""&&(n.name=""),n.defaultChecked=!!n._wrapperState.initialChecked,a!==""&&(n.name=a)}function Ds(n,s,a){(s!=="number"||Kn(n.ownerDocument)!==n)&&(a==null?n.defaultValue=""+n._wrapperState.initialValue:n.defaultValue!==""+a&&(n.defaultValue=""+a))}var gr=Array.isArray;function yr(n,s,a,c){if(n=n.options,s){s={};for(var d=0;d<a.length;d++)s["$"+a[d]]=!0;for(a=0;a<n.length;a++)d=s.hasOwnProperty("$"+n[a].value),n[a].selected!==d&&(n[a].selected=d),d&&c&&(n[a].defaultSelected=!0)}else{for(a=""+Ce(a),s=null,d=0;d<n.length;d++){if(n[d].value===a){n[d].selected=!0,c&&(n[d].defaultSelected=!0);return}s!==null||n[d].disabled||(s=n[d])}s!==null&&(s.selected=!0)}}function Jo(n,s){if(s.dangerouslySetInnerHTML!=null)throw Error(t(91));return le({},s,{value:void 0,defaultValue:void 0,children:""+n._wrapperState.initialValue})}function bs(n,s){var a=s.value;if(a==null){if(a=s.children,s=s.defaultValue,a!=null){if(s!=null)throw Error(t(92));if(gr(a)){if(1<a.length)throw Error(t(93));a=a[0]}s=a}s==null&&(s=""),a=s}n._wrapperState={initialValue:Ce(a)}}function Vs(n,s){var a=Ce(s.value),c=Ce(s.defaultValue);a!=null&&(a=""+a,a!==n.value&&(n.value=a),s.defaultValue==null&&n.defaultValue!==a&&(n.defaultValue=a)),c!=null&&(n.defaultValue=""+c)}function Zo(n){var s=n.textContent;s===n._wrapperState.initialValue&&s!==""&&s!==null&&(n.value=s)}function yt(n){switch(n){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function vt(n,s){return n==null||n==="http://www.w3.org/1999/xhtml"?yt(s):n==="http://www.w3.org/2000/svg"&&s==="foreignObject"?"http://www.w3.org/1999/xhtml":n}var vr,ea=(function(n){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(s,a,c,d){MSApp.execUnsafeLocalFunction(function(){return n(s,a,c,d)})}:n})(function(n,s){if(n.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in n)n.innerHTML=s;else{for(vr=vr||document.createElement("div"),vr.innerHTML="<svg>"+s.valueOf().toString()+"</svg>",s=vr.firstChild;n.firstChild;)n.removeChild(n.firstChild);for(;s.firstChild;)n.appendChild(s.firstChild)}});function qr(n,s){if(s){var a=n.firstChild;if(a&&a===n.lastChild&&a.nodeType===3){a.nodeValue=s;return}}n.textContent=s}var Wi={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},qi=["Webkit","ms","Moz","O"];Object.keys(Wi).forEach(function(n){qi.forEach(function(s){s=s+n.charAt(0).toUpperCase()+n.substring(1),Wi[s]=Wi[n]})});function ta(n,s,a){return s==null||typeof s=="boolean"||s===""?"":a||typeof s!="number"||s===0||Wi.hasOwnProperty(n)&&Wi[n]?(""+s).trim():s+"px"}function na(n,s){n=n.style;for(var a in s)if(s.hasOwnProperty(a)){var c=a.indexOf("--")===0,d=ta(a,s[a],c);a==="float"&&(a="cssFloat"),c?n.setProperty(a,d):n[a]=d}}var ra=le({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function ia(n,s){if(s){if(ra[n]&&(s.children!=null||s.dangerouslySetInnerHTML!=null))throw Error(t(137,n));if(s.dangerouslySetInnerHTML!=null){if(s.children!=null)throw Error(t(60));if(typeof s.dangerouslySetInnerHTML!="object"||!("__html"in s.dangerouslySetInnerHTML))throw Error(t(61))}if(s.style!=null&&typeof s.style!="object")throw Error(t(62))}}function sa(n,s){if(n.indexOf("-")===-1)return typeof s.is=="string";switch(n){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Hi=null;function Os(n){return n=n.target||n.srcElement||window,n.correspondingUseElement&&(n=n.correspondingUseElement),n.nodeType===3?n.parentNode:n}var Ls=null,gn=null,Qn=null;function Ms(n){if(n=ka(n)){if(typeof Ls!="function")throw Error(t(280));var s=n.stateNode;s&&(s=su(s),Ls(n.stateNode,n.type,s))}}function Yn(n){gn?Qn?Qn.push(n):Qn=[n]:gn=n}function oa(){if(gn){var n=gn,s=Qn;if(Qn=gn=null,Ms(n),s)for(n=0;n<s.length;n++)Ms(s[n])}}function Gi(n,s){return n(s)}function aa(){}var _r=!1;function la(n,s,a){if(_r)return n(s,a);_r=!0;try{return Gi(n,s,a)}finally{_r=!1,(gn!==null||Qn!==null)&&(aa(),oa())}}function lt(n,s){var a=n.stateNode;if(a===null)return null;var c=su(a);if(c===null)return null;a=c[s];e:switch(s){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(c=!c.disabled)||(n=n.type,c=!(n==="button"||n==="input"||n==="select"||n==="textarea")),n=!c;break e;default:n=!1}if(n)return null;if(a&&typeof a!="function")throw Error(t(231,s,typeof a));return a}var js=!1;if(f)try{var Nn={};Object.defineProperty(Nn,"passive",{get:function(){js=!0}}),window.addEventListener("test",Nn,Nn),window.removeEventListener("test",Nn,Nn)}catch{js=!1}function Ki(n,s,a,c,d,g,_,P,N){var $=Array.prototype.slice.call(arguments,3);try{s.apply(a,$)}catch(J){this.onError(J)}}var Qi=!1,Fs=null,xn=!1,ua=null,oh={onError:function(n){Qi=!0,Fs=n}};function Us(n,s,a,c,d,g,_,P,N){Qi=!1,Fs=null,Ki.apply(oh,arguments)}function Nl(n,s,a,c,d,g,_,P,N){if(Us.apply(this,arguments),Qi){if(Qi){var $=Fs;Qi=!1,Fs=null}else throw Error(t(198));xn||(xn=!0,ua=$)}}function Dn(n){var s=n,a=n;if(n.alternate)for(;s.return;)s=s.return;else{n=s;do s=n,(s.flags&4098)!==0&&(a=s.return),n=s.return;while(n)}return s.tag===3?a:null}function Yi(n){if(n.tag===13){var s=n.memoizedState;if(s===null&&(n=n.alternate,n!==null&&(s=n.memoizedState)),s!==null)return s.dehydrated}return null}function bn(n){if(Dn(n)!==n)throw Error(t(188))}function xl(n){var s=n.alternate;if(!s){if(s=Dn(n),s===null)throw Error(t(188));return s!==n?null:n}for(var a=n,c=s;;){var d=a.return;if(d===null)break;var g=d.alternate;if(g===null){if(c=d.return,c!==null){a=c;continue}break}if(d.child===g.child){for(g=d.child;g;){if(g===a)return bn(d),n;if(g===c)return bn(d),s;g=g.sibling}throw Error(t(188))}if(a.return!==c.return)a=d,c=g;else{for(var _=!1,P=d.child;P;){if(P===a){_=!0,a=d,c=g;break}if(P===c){_=!0,c=d,a=g;break}P=P.sibling}if(!_){for(P=g.child;P;){if(P===a){_=!0,a=g,c=d;break}if(P===c){_=!0,c=g,a=d;break}P=P.sibling}if(!_)throw Error(t(189))}}if(a.alternate!==c)throw Error(t(190))}if(a.tag!==3)throw Error(t(188));return a.stateNode.current===a?n:s}function ca(n){return n=xl(n),n!==null?Bs(n):null}function Bs(n){if(n.tag===5||n.tag===6)return n;for(n=n.child;n!==null;){var s=Bs(n);if(s!==null)return s;n=n.sibling}return null}var zs=e.unstable_scheduleCallback,ha=e.unstable_cancelCallback,Dl=e.unstable_shouldYield,ah=e.unstable_requestPaint,Ge=e.unstable_now,bl=e.unstable_getCurrentPriorityLevel,Xi=e.unstable_ImmediatePriority,Hr=e.unstable_UserBlockingPriority,yn=e.unstable_NormalPriority,da=e.unstable_LowPriority,Vl=e.unstable_IdlePriority,Ji=null,ln=null;function Ol(n){if(ln&&typeof ln.onCommitFiberRoot=="function")try{ln.onCommitFiberRoot(Ji,n,void 0,(n.current.flags&128)===128)}catch{}}var qt=Math.clz32?Math.clz32:Ml,fa=Math.log,Ll=Math.LN2;function Ml(n){return n>>>=0,n===0?32:31-(fa(n)/Ll|0)|0}var $s=64,Ws=4194304;function Gr(n){switch(n&-n){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return n&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return n&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return n}}function Zi(n,s){var a=n.pendingLanes;if(a===0)return 0;var c=0,d=n.suspendedLanes,g=n.pingedLanes,_=a&268435455;if(_!==0){var P=_&~d;P!==0?c=Gr(P):(g&=_,g!==0&&(c=Gr(g)))}else _=a&~d,_!==0?c=Gr(_):g!==0&&(c=Gr(g));if(c===0)return 0;if(s!==0&&s!==c&&(s&d)===0&&(d=c&-c,g=s&-s,d>=g||d===16&&(g&4194240)!==0))return s;if((c&4)!==0&&(c|=a&16),s=n.entangledLanes,s!==0)for(n=n.entanglements,s&=c;0<s;)a=31-qt(s),d=1<<a,c|=n[a],s&=~d;return c}function lh(n,s){switch(n){case 1:case 2:case 4:return s+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return s+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Er(n,s){for(var a=n.suspendedLanes,c=n.pingedLanes,d=n.expirationTimes,g=n.pendingLanes;0<g;){var _=31-qt(g),P=1<<_,N=d[_];N===-1?((P&a)===0||(P&c)!==0)&&(d[_]=lh(P,s)):N<=s&&(n.expiredLanes|=P),g&=~P}}function un(n){return n=n.pendingLanes&-1073741825,n!==0?n:n&1073741824?1073741824:0}function es(){var n=$s;return $s<<=1,($s&4194240)===0&&($s=64),n}function Kr(n){for(var s=[],a=0;31>a;a++)s.push(n);return s}function Qr(n,s,a){n.pendingLanes|=s,s!==536870912&&(n.suspendedLanes=0,n.pingedLanes=0),n=n.eventTimes,s=31-qt(s),n[s]=a}function We(n,s){var a=n.pendingLanes&~s;n.pendingLanes=s,n.suspendedLanes=0,n.pingedLanes=0,n.expiredLanes&=s,n.mutableReadLanes&=s,n.entangledLanes&=s,s=n.entanglements;var c=n.eventTimes;for(n=n.expirationTimes;0<a;){var d=31-qt(a),g=1<<d;s[d]=0,c[d]=-1,n[d]=-1,a&=~g}}function Yr(n,s){var a=n.entangledLanes|=s;for(n=n.entanglements;a;){var c=31-qt(a),d=1<<c;d&s|n[c]&s&&(n[c]|=s),a&=~d}}var Oe=0;function Xr(n){return n&=-n,1<n?4<n?(n&268435455)!==0?16:536870912:4:1}var jl,qs,Fl,Ul,Bl,pa=!1,Xn=[],Nt=null,Vn=null,On=null,Jr=new Map,vn=new Map,Jn=[],uh="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function zl(n,s){switch(n){case"focusin":case"focusout":Nt=null;break;case"dragenter":case"dragleave":Vn=null;break;case"mouseover":case"mouseout":On=null;break;case"pointerover":case"pointerout":Jr.delete(s.pointerId);break;case"gotpointercapture":case"lostpointercapture":vn.delete(s.pointerId)}}function Yt(n,s,a,c,d,g){return n===null||n.nativeEvent!==g?(n={blockedOn:s,domEventName:a,eventSystemFlags:c,nativeEvent:g,targetContainers:[d]},s!==null&&(s=ka(s),s!==null&&qs(s)),n):(n.eventSystemFlags|=c,s=n.targetContainers,d!==null&&s.indexOf(d)===-1&&s.push(d),n)}function ch(n,s,a,c,d){switch(s){case"focusin":return Nt=Yt(Nt,n,s,a,c,d),!0;case"dragenter":return Vn=Yt(Vn,n,s,a,c,d),!0;case"mouseover":return On=Yt(On,n,s,a,c,d),!0;case"pointerover":var g=d.pointerId;return Jr.set(g,Yt(Jr.get(g)||null,n,s,a,c,d)),!0;case"gotpointercapture":return g=d.pointerId,vn.set(g,Yt(vn.get(g)||null,n,s,a,c,d)),!0}return!1}function $l(n){var s=ss(n.target);if(s!==null){var a=Dn(s);if(a!==null){if(s=a.tag,s===13){if(s=Yi(a),s!==null){n.blockedOn=s,Bl(n.priority,function(){Fl(a)});return}}else if(s===3&&a.stateNode.current.memoizedState.isDehydrated){n.blockedOn=a.tag===3?a.stateNode.containerInfo:null;return}}}n.blockedOn=null}function wr(n){if(n.blockedOn!==null)return!1;for(var s=n.targetContainers;0<s.length;){var a=Hs(n.domEventName,n.eventSystemFlags,s[0],n.nativeEvent);if(a===null){a=n.nativeEvent;var c=new a.constructor(a.type,a);Hi=c,a.target.dispatchEvent(c),Hi=null}else return s=ka(a),s!==null&&qs(s),n.blockedOn=a,!1;s.shift()}return!0}function ts(n,s,a){wr(n)&&a.delete(s)}function Wl(){pa=!1,Nt!==null&&wr(Nt)&&(Nt=null),Vn!==null&&wr(Vn)&&(Vn=null),On!==null&&wr(On)&&(On=null),Jr.forEach(ts),vn.forEach(ts)}function Ln(n,s){n.blockedOn===s&&(n.blockedOn=null,pa||(pa=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,Wl)))}function Mn(n){function s(d){return Ln(d,n)}if(0<Xn.length){Ln(Xn[0],n);for(var a=1;a<Xn.length;a++){var c=Xn[a];c.blockedOn===n&&(c.blockedOn=null)}}for(Nt!==null&&Ln(Nt,n),Vn!==null&&Ln(Vn,n),On!==null&&Ln(On,n),Jr.forEach(s),vn.forEach(s),a=0;a<Jn.length;a++)c=Jn[a],c.blockedOn===n&&(c.blockedOn=null);for(;0<Jn.length&&(a=Jn[0],a.blockedOn===null);)$l(a),a.blockedOn===null&&Jn.shift()}var Tr=ye.ReactCurrentBatchConfig,Zr=!0;function Je(n,s,a,c){var d=Oe,g=Tr.transition;Tr.transition=null;try{Oe=1,ma(n,s,a,c)}finally{Oe=d,Tr.transition=g}}function hh(n,s,a,c){var d=Oe,g=Tr.transition;Tr.transition=null;try{Oe=4,ma(n,s,a,c)}finally{Oe=d,Tr.transition=g}}function ma(n,s,a,c){if(Zr){var d=Hs(n,s,a,c);if(d===null)Th(n,s,c,ns,a),zl(n,c);else if(ch(d,n,s,a,c))c.stopPropagation();else if(zl(n,c),s&4&&-1<uh.indexOf(n)){for(;d!==null;){var g=ka(d);if(g!==null&&jl(g),g=Hs(n,s,a,c),g===null&&Th(n,s,c,ns,a),g===d)break;d=g}d!==null&&c.stopPropagation()}else Th(n,s,c,null,a)}}var ns=null;function Hs(n,s,a,c){if(ns=null,n=Os(c),n=ss(n),n!==null)if(s=Dn(n),s===null)n=null;else if(a=s.tag,a===13){if(n=Yi(s),n!==null)return n;n=null}else if(a===3){if(s.stateNode.current.memoizedState.isDehydrated)return s.tag===3?s.stateNode.containerInfo:null;n=null}else s!==n&&(n=null);return ns=n,null}function ga(n){switch(n){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(bl()){case Xi:return 1;case Hr:return 4;case yn:case da:return 16;case Vl:return 536870912;default:return 16}default:return 16}}var cn=null,Gs=null,Xt=null;function ya(){if(Xt)return Xt;var n,s=Gs,a=s.length,c,d="value"in cn?cn.value:cn.textContent,g=d.length;for(n=0;n<a&&s[n]===d[n];n++);var _=a-n;for(c=1;c<=_&&s[a-c]===d[g-c];c++);return Xt=d.slice(n,1<c?1-c:void 0)}function Ks(n){var s=n.keyCode;return"charCode"in n?(n=n.charCode,n===0&&s===13&&(n=13)):n=s,n===10&&(n=13),32<=n||n===13?n:0}function Zn(){return!0}function va(){return!1}function xt(n){function s(a,c,d,g,_){this._reactName=a,this._targetInst=d,this.type=c,this.nativeEvent=g,this.target=_,this.currentTarget=null;for(var P in n)n.hasOwnProperty(P)&&(a=n[P],this[P]=a?a(g):g[P]);return this.isDefaultPrevented=(g.defaultPrevented!=null?g.defaultPrevented:g.returnValue===!1)?Zn:va,this.isPropagationStopped=va,this}return le(s.prototype,{preventDefault:function(){this.defaultPrevented=!0;var a=this.nativeEvent;a&&(a.preventDefault?a.preventDefault():typeof a.returnValue!="unknown"&&(a.returnValue=!1),this.isDefaultPrevented=Zn)},stopPropagation:function(){var a=this.nativeEvent;a&&(a.stopPropagation?a.stopPropagation():typeof a.cancelBubble!="unknown"&&(a.cancelBubble=!0),this.isPropagationStopped=Zn)},persist:function(){},isPersistent:Zn}),s}var jn={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(n){return n.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Qs=xt(jn),er=le({},jn,{view:0,detail:0}),dh=xt(er),Ys,Ir,ei,rs=le({},er,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:tr,button:0,buttons:0,relatedTarget:function(n){return n.relatedTarget===void 0?n.fromElement===n.srcElement?n.toElement:n.fromElement:n.relatedTarget},movementX:function(n){return"movementX"in n?n.movementX:(n!==ei&&(ei&&n.type==="mousemove"?(Ys=n.screenX-ei.screenX,Ir=n.screenY-ei.screenY):Ir=Ys=0,ei=n),Ys)},movementY:function(n){return"movementY"in n?n.movementY:Ir}}),Xs=xt(rs),_a=le({},rs,{dataTransfer:0}),ql=xt(_a),Js=le({},er,{relatedTarget:0}),Zs=xt(Js),Hl=le({},jn,{animationName:0,elapsedTime:0,pseudoElement:0}),Sr=xt(Hl),Gl=le({},jn,{clipboardData:function(n){return"clipboardData"in n?n.clipboardData:window.clipboardData}}),Kl=xt(Gl),Ql=le({},jn,{data:0}),Ea=xt(Ql),eo={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Ht={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Yl={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Xl(n){var s=this.nativeEvent;return s.getModifierState?s.getModifierState(n):(n=Yl[n])?!!s[n]:!1}function tr(){return Xl}var u=le({},er,{key:function(n){if(n.key){var s=eo[n.key]||n.key;if(s!=="Unidentified")return s}return n.type==="keypress"?(n=Ks(n),n===13?"Enter":String.fromCharCode(n)):n.type==="keydown"||n.type==="keyup"?Ht[n.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:tr,charCode:function(n){return n.type==="keypress"?Ks(n):0},keyCode:function(n){return n.type==="keydown"||n.type==="keyup"?n.keyCode:0},which:function(n){return n.type==="keypress"?Ks(n):n.type==="keydown"||n.type==="keyup"?n.keyCode:0}}),m=xt(u),v=le({},rs,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),I=xt(v),j=le({},er,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:tr}),W=xt(j),ne=le({},jn,{propertyName:0,elapsedTime:0,pseudoElement:0}),ze=xt(ne),_t=le({},rs,{deltaX:function(n){return"deltaX"in n?n.deltaX:"wheelDeltaX"in n?-n.wheelDeltaX:0},deltaY:function(n){return"deltaY"in n?n.deltaY:"wheelDeltaY"in n?-n.wheelDeltaY:"wheelDelta"in n?-n.wheelDelta:0},deltaZ:0,deltaMode:0}),Le=xt(_t),At=[9,13,27,32],dt=f&&"CompositionEvent"in window,_n=null;f&&"documentMode"in document&&(_n=document.documentMode);var hn=f&&"TextEvent"in window&&!_n,is=f&&(!dt||_n&&8<_n&&11>=_n),to=" ",Np=!1;function xp(n,s){switch(n){case"keyup":return At.indexOf(s.keyCode)!==-1;case"keydown":return s.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Dp(n){return n=n.detail,typeof n=="object"&&"data"in n?n.data:null}var no=!1;function vw(n,s){switch(n){case"compositionend":return Dp(s);case"keypress":return s.which!==32?null:(Np=!0,to);case"textInput":return n=s.data,n===to&&Np?null:n;default:return null}}function _w(n,s){if(no)return n==="compositionend"||!dt&&xp(n,s)?(n=ya(),Xt=Gs=cn=null,no=!1,n):null;switch(n){case"paste":return null;case"keypress":if(!(s.ctrlKey||s.altKey||s.metaKey)||s.ctrlKey&&s.altKey){if(s.char&&1<s.char.length)return s.char;if(s.which)return String.fromCharCode(s.which)}return null;case"compositionend":return is&&s.locale!=="ko"?null:s.data;default:return null}}var Ew={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function bp(n){var s=n&&n.nodeName&&n.nodeName.toLowerCase();return s==="input"?!!Ew[n.type]:s==="textarea"}function Vp(n,s,a,c){Yn(c),s=nu(s,"onChange"),0<s.length&&(a=new Qs("onChange","change",null,a,c),n.push({event:a,listeners:s}))}var wa=null,Ta=null;function ww(n){Jp(n,0)}function Jl(n){var s=ao(n);if(mr(s))return n}function Tw(n,s){if(n==="change")return s}var Op=!1;if(f){var fh;if(f){var ph="oninput"in document;if(!ph){var Lp=document.createElement("div");Lp.setAttribute("oninput","return;"),ph=typeof Lp.oninput=="function"}fh=ph}else fh=!1;Op=fh&&(!document.documentMode||9<document.documentMode)}function Mp(){wa&&(wa.detachEvent("onpropertychange",jp),Ta=wa=null)}function jp(n){if(n.propertyName==="value"&&Jl(Ta)){var s=[];Vp(s,Ta,n,Os(n)),la(ww,s)}}function Iw(n,s,a){n==="focusin"?(Mp(),wa=s,Ta=a,wa.attachEvent("onpropertychange",jp)):n==="focusout"&&Mp()}function Sw(n){if(n==="selectionchange"||n==="keyup"||n==="keydown")return Jl(Ta)}function Aw(n,s){if(n==="click")return Jl(s)}function Pw(n,s){if(n==="input"||n==="change")return Jl(s)}function Cw(n,s){return n===s&&(n!==0||1/n===1/s)||n!==n&&s!==s}var Fn=typeof Object.is=="function"?Object.is:Cw;function Ia(n,s){if(Fn(n,s))return!0;if(typeof n!="object"||n===null||typeof s!="object"||s===null)return!1;var a=Object.keys(n),c=Object.keys(s);if(a.length!==c.length)return!1;for(c=0;c<a.length;c++){var d=a[c];if(!p.call(s,d)||!Fn(n[d],s[d]))return!1}return!0}function Fp(n){for(;n&&n.firstChild;)n=n.firstChild;return n}function Up(n,s){var a=Fp(n);n=0;for(var c;a;){if(a.nodeType===3){if(c=n+a.textContent.length,n<=s&&c>=s)return{node:a,offset:s-n};n=c}e:{for(;a;){if(a.nextSibling){a=a.nextSibling;break e}a=a.parentNode}a=void 0}a=Fp(a)}}function Bp(n,s){return n&&s?n===s?!0:n&&n.nodeType===3?!1:s&&s.nodeType===3?Bp(n,s.parentNode):"contains"in n?n.contains(s):n.compareDocumentPosition?!!(n.compareDocumentPosition(s)&16):!1:!1}function zp(){for(var n=window,s=Kn();s instanceof n.HTMLIFrameElement;){try{var a=typeof s.contentWindow.location.href=="string"}catch{a=!1}if(a)n=s.contentWindow;else break;s=Kn(n.document)}return s}function mh(n){var s=n&&n.nodeName&&n.nodeName.toLowerCase();return s&&(s==="input"&&(n.type==="text"||n.type==="search"||n.type==="tel"||n.type==="url"||n.type==="password")||s==="textarea"||n.contentEditable==="true")}function Rw(n){var s=zp(),a=n.focusedElem,c=n.selectionRange;if(s!==a&&a&&a.ownerDocument&&Bp(a.ownerDocument.documentElement,a)){if(c!==null&&mh(a)){if(s=c.start,n=c.end,n===void 0&&(n=s),"selectionStart"in a)a.selectionStart=s,a.selectionEnd=Math.min(n,a.value.length);else if(n=(s=a.ownerDocument||document)&&s.defaultView||window,n.getSelection){n=n.getSelection();var d=a.textContent.length,g=Math.min(c.start,d);c=c.end===void 0?g:Math.min(c.end,d),!n.extend&&g>c&&(d=c,c=g,g=d),d=Up(a,g);var _=Up(a,c);d&&_&&(n.rangeCount!==1||n.anchorNode!==d.node||n.anchorOffset!==d.offset||n.focusNode!==_.node||n.focusOffset!==_.offset)&&(s=s.createRange(),s.setStart(d.node,d.offset),n.removeAllRanges(),g>c?(n.addRange(s),n.extend(_.node,_.offset)):(s.setEnd(_.node,_.offset),n.addRange(s)))}}for(s=[],n=a;n=n.parentNode;)n.nodeType===1&&s.push({element:n,left:n.scrollLeft,top:n.scrollTop});for(typeof a.focus=="function"&&a.focus(),a=0;a<s.length;a++)n=s[a],n.element.scrollLeft=n.left,n.element.scrollTop=n.top}}var kw=f&&"documentMode"in document&&11>=document.documentMode,ro=null,gh=null,Sa=null,yh=!1;function $p(n,s,a){var c=a.window===a?a.document:a.nodeType===9?a:a.ownerDocument;yh||ro==null||ro!==Kn(c)||(c=ro,"selectionStart"in c&&mh(c)?c={start:c.selectionStart,end:c.selectionEnd}:(c=(c.ownerDocument&&c.ownerDocument.defaultView||window).getSelection(),c={anchorNode:c.anchorNode,anchorOffset:c.anchorOffset,focusNode:c.focusNode,focusOffset:c.focusOffset}),Sa&&Ia(Sa,c)||(Sa=c,c=nu(gh,"onSelect"),0<c.length&&(s=new Qs("onSelect","select",null,s,a),n.push({event:s,listeners:c}),s.target=ro)))}function Zl(n,s){var a={};return a[n.toLowerCase()]=s.toLowerCase(),a["Webkit"+n]="webkit"+s,a["Moz"+n]="moz"+s,a}var io={animationend:Zl("Animation","AnimationEnd"),animationiteration:Zl("Animation","AnimationIteration"),animationstart:Zl("Animation","AnimationStart"),transitionend:Zl("Transition","TransitionEnd")},vh={},Wp={};f&&(Wp=document.createElement("div").style,"AnimationEvent"in window||(delete io.animationend.animation,delete io.animationiteration.animation,delete io.animationstart.animation),"TransitionEvent"in window||delete io.transitionend.transition);function eu(n){if(vh[n])return vh[n];if(!io[n])return n;var s=io[n],a;for(a in s)if(s.hasOwnProperty(a)&&a in Wp)return vh[n]=s[a];return n}var qp=eu("animationend"),Hp=eu("animationiteration"),Gp=eu("animationstart"),Kp=eu("transitionend"),Qp=new Map,Yp="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function ti(n,s){Qp.set(n,s),l(s,[n])}for(var _h=0;_h<Yp.length;_h++){var Eh=Yp[_h],Nw=Eh.toLowerCase(),xw=Eh[0].toUpperCase()+Eh.slice(1);ti(Nw,"on"+xw)}ti(qp,"onAnimationEnd"),ti(Hp,"onAnimationIteration"),ti(Gp,"onAnimationStart"),ti("dblclick","onDoubleClick"),ti("focusin","onFocus"),ti("focusout","onBlur"),ti(Kp,"onTransitionEnd"),h("onMouseEnter",["mouseout","mouseover"]),h("onMouseLeave",["mouseout","mouseover"]),h("onPointerEnter",["pointerout","pointerover"]),h("onPointerLeave",["pointerout","pointerover"]),l("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),l("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),l("onBeforeInput",["compositionend","keypress","textInput","paste"]),l("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Aa="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Dw=new Set("cancel close invalid load scroll toggle".split(" ").concat(Aa));function Xp(n,s,a){var c=n.type||"unknown-event";n.currentTarget=a,Nl(c,s,void 0,n),n.currentTarget=null}function Jp(n,s){s=(s&4)!==0;for(var a=0;a<n.length;a++){var c=n[a],d=c.event;c=c.listeners;e:{var g=void 0;if(s)for(var _=c.length-1;0<=_;_--){var P=c[_],N=P.instance,$=P.currentTarget;if(P=P.listener,N!==g&&d.isPropagationStopped())break e;Xp(d,P,$),g=N}else for(_=0;_<c.length;_++){if(P=c[_],N=P.instance,$=P.currentTarget,P=P.listener,N!==g&&d.isPropagationStopped())break e;Xp(d,P,$),g=N}}}if(xn)throw n=ua,xn=!1,ua=null,n}function Ye(n,s){var a=s[Rh];a===void 0&&(a=s[Rh]=new Set);var c=n+"__bubble";a.has(c)||(Zp(s,n,2,!1),a.add(c))}function wh(n,s,a){var c=0;s&&(c|=4),Zp(a,n,c,s)}var tu="_reactListening"+Math.random().toString(36).slice(2);function Pa(n){if(!n[tu]){n[tu]=!0,i.forEach(function(a){a!=="selectionchange"&&(Dw.has(a)||wh(a,!1,n),wh(a,!0,n))});var s=n.nodeType===9?n:n.ownerDocument;s===null||s[tu]||(s[tu]=!0,wh("selectionchange",!1,s))}}function Zp(n,s,a,c){switch(ga(s)){case 1:var d=Je;break;case 4:d=hh;break;default:d=ma}a=d.bind(null,s,a,n),d=void 0,!js||s!=="touchstart"&&s!=="touchmove"&&s!=="wheel"||(d=!0),c?d!==void 0?n.addEventListener(s,a,{capture:!0,passive:d}):n.addEventListener(s,a,!0):d!==void 0?n.addEventListener(s,a,{passive:d}):n.addEventListener(s,a,!1)}function Th(n,s,a,c,d){var g=c;if((s&1)===0&&(s&2)===0&&c!==null)e:for(;;){if(c===null)return;var _=c.tag;if(_===3||_===4){var P=c.stateNode.containerInfo;if(P===d||P.nodeType===8&&P.parentNode===d)break;if(_===4)for(_=c.return;_!==null;){var N=_.tag;if((N===3||N===4)&&(N=_.stateNode.containerInfo,N===d||N.nodeType===8&&N.parentNode===d))return;_=_.return}for(;P!==null;){if(_=ss(P),_===null)return;if(N=_.tag,N===5||N===6){c=g=_;continue e}P=P.parentNode}}c=c.return}la(function(){var $=g,J=Os(a),Z=[];e:{var X=Qp.get(n);if(X!==void 0){var ce=Qs,fe=n;switch(n){case"keypress":if(Ks(a)===0)break e;case"keydown":case"keyup":ce=m;break;case"focusin":fe="focus",ce=Zs;break;case"focusout":fe="blur",ce=Zs;break;case"beforeblur":case"afterblur":ce=Zs;break;case"click":if(a.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":ce=Xs;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":ce=ql;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":ce=W;break;case qp:case Hp:case Gp:ce=Sr;break;case Kp:ce=ze;break;case"scroll":ce=dh;break;case"wheel":ce=Le;break;case"copy":case"cut":case"paste":ce=Kl;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":ce=I}var pe=(s&4)!==0,ut=!pe&&n==="scroll",U=pe?X!==null?X+"Capture":null:X;pe=[];for(var D=$,B;D!==null;){B=D;var te=B.stateNode;if(B.tag===5&&te!==null&&(B=te,U!==null&&(te=lt(D,U),te!=null&&pe.push(Ca(D,te,B)))),ut)break;D=D.return}0<pe.length&&(X=new ce(X,fe,null,a,J),Z.push({event:X,listeners:pe}))}}if((s&7)===0){e:{if(X=n==="mouseover"||n==="pointerover",ce=n==="mouseout"||n==="pointerout",X&&a!==Hi&&(fe=a.relatedTarget||a.fromElement)&&(ss(fe)||fe[Ar]))break e;if((ce||X)&&(X=J.window===J?J:(X=J.ownerDocument)?X.defaultView||X.parentWindow:window,ce?(fe=a.relatedTarget||a.toElement,ce=$,fe=fe?ss(fe):null,fe!==null&&(ut=Dn(fe),fe!==ut||fe.tag!==5&&fe.tag!==6)&&(fe=null)):(ce=null,fe=$),ce!==fe)){if(pe=Xs,te="onMouseLeave",U="onMouseEnter",D="mouse",(n==="pointerout"||n==="pointerover")&&(pe=I,te="onPointerLeave",U="onPointerEnter",D="pointer"),ut=ce==null?X:ao(ce),B=fe==null?X:ao(fe),X=new pe(te,D+"leave",ce,a,J),X.target=ut,X.relatedTarget=B,te=null,ss(J)===$&&(pe=new pe(U,D+"enter",fe,a,J),pe.target=B,pe.relatedTarget=ut,te=pe),ut=te,ce&&fe)t:{for(pe=ce,U=fe,D=0,B=pe;B;B=so(B))D++;for(B=0,te=U;te;te=so(te))B++;for(;0<D-B;)pe=so(pe),D--;for(;0<B-D;)U=so(U),B--;for(;D--;){if(pe===U||U!==null&&pe===U.alternate)break t;pe=so(pe),U=so(U)}pe=null}else pe=null;ce!==null&&em(Z,X,ce,pe,!1),fe!==null&&ut!==null&&em(Z,ut,fe,pe,!0)}}e:{if(X=$?ao($):window,ce=X.nodeName&&X.nodeName.toLowerCase(),ce==="select"||ce==="input"&&X.type==="file")var ge=Tw;else if(bp(X))if(Op)ge=Pw;else{ge=Sw;var Ee=Iw}else(ce=X.nodeName)&&ce.toLowerCase()==="input"&&(X.type==="checkbox"||X.type==="radio")&&(ge=Aw);if(ge&&(ge=ge(n,$))){Vp(Z,ge,a,J);break e}Ee&&Ee(n,X,$),n==="focusout"&&(Ee=X._wrapperState)&&Ee.controlled&&X.type==="number"&&Ds(X,"number",X.value)}switch(Ee=$?ao($):window,n){case"focusin":(bp(Ee)||Ee.contentEditable==="true")&&(ro=Ee,gh=$,Sa=null);break;case"focusout":Sa=gh=ro=null;break;case"mousedown":yh=!0;break;case"contextmenu":case"mouseup":case"dragend":yh=!1,$p(Z,a,J);break;case"selectionchange":if(kw)break;case"keydown":case"keyup":$p(Z,a,J)}var we;if(dt)e:{switch(n){case"compositionstart":var Se="onCompositionStart";break e;case"compositionend":Se="onCompositionEnd";break e;case"compositionupdate":Se="onCompositionUpdate";break e}Se=void 0}else no?xp(n,a)&&(Se="onCompositionEnd"):n==="keydown"&&a.keyCode===229&&(Se="onCompositionStart");Se&&(is&&a.locale!=="ko"&&(no||Se!=="onCompositionStart"?Se==="onCompositionEnd"&&no&&(we=ya()):(cn=J,Gs="value"in cn?cn.value:cn.textContent,no=!0)),Ee=nu($,Se),0<Ee.length&&(Se=new Ea(Se,n,null,a,J),Z.push({event:Se,listeners:Ee}),we?Se.data=we:(we=Dp(a),we!==null&&(Se.data=we)))),(we=hn?vw(n,a):_w(n,a))&&($=nu($,"onBeforeInput"),0<$.length&&(J=new Ea("onBeforeInput","beforeinput",null,a,J),Z.push({event:J,listeners:$}),J.data=we))}Jp(Z,s)})}function Ca(n,s,a){return{instance:n,listener:s,currentTarget:a}}function nu(n,s){for(var a=s+"Capture",c=[];n!==null;){var d=n,g=d.stateNode;d.tag===5&&g!==null&&(d=g,g=lt(n,a),g!=null&&c.unshift(Ca(n,g,d)),g=lt(n,s),g!=null&&c.push(Ca(n,g,d))),n=n.return}return c}function so(n){if(n===null)return null;do n=n.return;while(n&&n.tag!==5);return n||null}function em(n,s,a,c,d){for(var g=s._reactName,_=[];a!==null&&a!==c;){var P=a,N=P.alternate,$=P.stateNode;if(N!==null&&N===c)break;P.tag===5&&$!==null&&(P=$,d?(N=lt(a,g),N!=null&&_.unshift(Ca(a,N,P))):d||(N=lt(a,g),N!=null&&_.push(Ca(a,N,P)))),a=a.return}_.length!==0&&n.push({event:s,listeners:_})}var bw=/\r\n?/g,Vw=/\u0000|\uFFFD/g;function tm(n){return(typeof n=="string"?n:""+n).replace(bw,`
`).replace(Vw,"")}function ru(n,s,a){if(s=tm(s),tm(n)!==s&&a)throw Error(t(425))}function iu(){}var Ih=null,Sh=null;function Ah(n,s){return n==="textarea"||n==="noscript"||typeof s.children=="string"||typeof s.children=="number"||typeof s.dangerouslySetInnerHTML=="object"&&s.dangerouslySetInnerHTML!==null&&s.dangerouslySetInnerHTML.__html!=null}var Ph=typeof setTimeout=="function"?setTimeout:void 0,Ow=typeof clearTimeout=="function"?clearTimeout:void 0,nm=typeof Promise=="function"?Promise:void 0,Lw=typeof queueMicrotask=="function"?queueMicrotask:typeof nm<"u"?function(n){return nm.resolve(null).then(n).catch(Mw)}:Ph;function Mw(n){setTimeout(function(){throw n})}function Ch(n,s){var a=s,c=0;do{var d=a.nextSibling;if(n.removeChild(a),d&&d.nodeType===8)if(a=d.data,a==="/$"){if(c===0){n.removeChild(d),Mn(s);return}c--}else a!=="$"&&a!=="$?"&&a!=="$!"||c++;a=d}while(a);Mn(s)}function ni(n){for(;n!=null;n=n.nextSibling){var s=n.nodeType;if(s===1||s===3)break;if(s===8){if(s=n.data,s==="$"||s==="$!"||s==="$?")break;if(s==="/$")return null}}return n}function rm(n){n=n.previousSibling;for(var s=0;n;){if(n.nodeType===8){var a=n.data;if(a==="$"||a==="$!"||a==="$?"){if(s===0)return n;s--}else a==="/$"&&s++}n=n.previousSibling}return null}var oo=Math.random().toString(36).slice(2),nr="__reactFiber$"+oo,Ra="__reactProps$"+oo,Ar="__reactContainer$"+oo,Rh="__reactEvents$"+oo,jw="__reactListeners$"+oo,Fw="__reactHandles$"+oo;function ss(n){var s=n[nr];if(s)return s;for(var a=n.parentNode;a;){if(s=a[Ar]||a[nr]){if(a=s.alternate,s.child!==null||a!==null&&a.child!==null)for(n=rm(n);n!==null;){if(a=n[nr])return a;n=rm(n)}return s}n=a,a=n.parentNode}return null}function ka(n){return n=n[nr]||n[Ar],!n||n.tag!==5&&n.tag!==6&&n.tag!==13&&n.tag!==3?null:n}function ao(n){if(n.tag===5||n.tag===6)return n.stateNode;throw Error(t(33))}function su(n){return n[Ra]||null}var kh=[],lo=-1;function ri(n){return{current:n}}function Xe(n){0>lo||(n.current=kh[lo],kh[lo]=null,lo--)}function Ke(n,s){lo++,kh[lo]=n.current,n.current=s}var ii={},Mt=ri(ii),Jt=ri(!1),os=ii;function uo(n,s){var a=n.type.contextTypes;if(!a)return ii;var c=n.stateNode;if(c&&c.__reactInternalMemoizedUnmaskedChildContext===s)return c.__reactInternalMemoizedMaskedChildContext;var d={},g;for(g in a)d[g]=s[g];return c&&(n=n.stateNode,n.__reactInternalMemoizedUnmaskedChildContext=s,n.__reactInternalMemoizedMaskedChildContext=d),d}function Zt(n){return n=n.childContextTypes,n!=null}function ou(){Xe(Jt),Xe(Mt)}function im(n,s,a){if(Mt.current!==ii)throw Error(t(168));Ke(Mt,s),Ke(Jt,a)}function sm(n,s,a){var c=n.stateNode;if(s=s.childContextTypes,typeof c.getChildContext!="function")return a;c=c.getChildContext();for(var d in c)if(!(d in s))throw Error(t(108,ue(n)||"Unknown",d));return le({},a,c)}function au(n){return n=(n=n.stateNode)&&n.__reactInternalMemoizedMergedChildContext||ii,os=Mt.current,Ke(Mt,n),Ke(Jt,Jt.current),!0}function om(n,s,a){var c=n.stateNode;if(!c)throw Error(t(169));a?(n=sm(n,s,os),c.__reactInternalMemoizedMergedChildContext=n,Xe(Jt),Xe(Mt),Ke(Mt,n)):Xe(Jt),Ke(Jt,a)}var Pr=null,lu=!1,Nh=!1;function am(n){Pr===null?Pr=[n]:Pr.push(n)}function Uw(n){lu=!0,am(n)}function si(){if(!Nh&&Pr!==null){Nh=!0;var n=0,s=Oe;try{var a=Pr;for(Oe=1;n<a.length;n++){var c=a[n];do c=c(!0);while(c!==null)}Pr=null,lu=!1}catch(d){throw Pr!==null&&(Pr=Pr.slice(n+1)),zs(Xi,si),d}finally{Oe=s,Nh=!1}}return null}var co=[],ho=0,uu=null,cu=0,En=[],wn=0,as=null,Cr=1,Rr="";function ls(n,s){co[ho++]=cu,co[ho++]=uu,uu=n,cu=s}function lm(n,s,a){En[wn++]=Cr,En[wn++]=Rr,En[wn++]=as,as=n;var c=Cr;n=Rr;var d=32-qt(c)-1;c&=~(1<<d),a+=1;var g=32-qt(s)+d;if(30<g){var _=d-d%5;g=(c&(1<<_)-1).toString(32),c>>=_,d-=_,Cr=1<<32-qt(s)+d|a<<d|c,Rr=g+n}else Cr=1<<g|a<<d|c,Rr=n}function xh(n){n.return!==null&&(ls(n,1),lm(n,1,0))}function Dh(n){for(;n===uu;)uu=co[--ho],co[ho]=null,cu=co[--ho],co[ho]=null;for(;n===as;)as=En[--wn],En[wn]=null,Rr=En[--wn],En[wn]=null,Cr=En[--wn],En[wn]=null}var dn=null,fn=null,Ze=!1,Un=null;function um(n,s){var a=An(5,null,null,0);a.elementType="DELETED",a.stateNode=s,a.return=n,s=n.deletions,s===null?(n.deletions=[a],n.flags|=16):s.push(a)}function cm(n,s){switch(n.tag){case 5:var a=n.type;return s=s.nodeType!==1||a.toLowerCase()!==s.nodeName.toLowerCase()?null:s,s!==null?(n.stateNode=s,dn=n,fn=ni(s.firstChild),!0):!1;case 6:return s=n.pendingProps===""||s.nodeType!==3?null:s,s!==null?(n.stateNode=s,dn=n,fn=null,!0):!1;case 13:return s=s.nodeType!==8?null:s,s!==null?(a=as!==null?{id:Cr,overflow:Rr}:null,n.memoizedState={dehydrated:s,treeContext:a,retryLane:1073741824},a=An(18,null,null,0),a.stateNode=s,a.return=n,n.child=a,dn=n,fn=null,!0):!1;default:return!1}}function bh(n){return(n.mode&1)!==0&&(n.flags&128)===0}function Vh(n){if(Ze){var s=fn;if(s){var a=s;if(!cm(n,s)){if(bh(n))throw Error(t(418));s=ni(a.nextSibling);var c=dn;s&&cm(n,s)?um(c,a):(n.flags=n.flags&-4097|2,Ze=!1,dn=n)}}else{if(bh(n))throw Error(t(418));n.flags=n.flags&-4097|2,Ze=!1,dn=n}}}function hm(n){for(n=n.return;n!==null&&n.tag!==5&&n.tag!==3&&n.tag!==13;)n=n.return;dn=n}function hu(n){if(n!==dn)return!1;if(!Ze)return hm(n),Ze=!0,!1;var s;if((s=n.tag!==3)&&!(s=n.tag!==5)&&(s=n.type,s=s!=="head"&&s!=="body"&&!Ah(n.type,n.memoizedProps)),s&&(s=fn)){if(bh(n))throw dm(),Error(t(418));for(;s;)um(n,s),s=ni(s.nextSibling)}if(hm(n),n.tag===13){if(n=n.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(t(317));e:{for(n=n.nextSibling,s=0;n;){if(n.nodeType===8){var a=n.data;if(a==="/$"){if(s===0){fn=ni(n.nextSibling);break e}s--}else a!=="$"&&a!=="$!"&&a!=="$?"||s++}n=n.nextSibling}fn=null}}else fn=dn?ni(n.stateNode.nextSibling):null;return!0}function dm(){for(var n=fn;n;)n=ni(n.nextSibling)}function fo(){fn=dn=null,Ze=!1}function Oh(n){Un===null?Un=[n]:Un.push(n)}var Bw=ye.ReactCurrentBatchConfig;function Na(n,s,a){if(n=a.ref,n!==null&&typeof n!="function"&&typeof n!="object"){if(a._owner){if(a=a._owner,a){if(a.tag!==1)throw Error(t(309));var c=a.stateNode}if(!c)throw Error(t(147,n));var d=c,g=""+n;return s!==null&&s.ref!==null&&typeof s.ref=="function"&&s.ref._stringRef===g?s.ref:(s=function(_){var P=d.refs;_===null?delete P[g]:P[g]=_},s._stringRef=g,s)}if(typeof n!="string")throw Error(t(284));if(!a._owner)throw Error(t(290,n))}return n}function du(n,s){throw n=Object.prototype.toString.call(s),Error(t(31,n==="[object Object]"?"object with keys {"+Object.keys(s).join(", ")+"}":n))}function fm(n){var s=n._init;return s(n._payload)}function pm(n){function s(U,D){if(n){var B=U.deletions;B===null?(U.deletions=[D],U.flags|=16):B.push(D)}}function a(U,D){if(!n)return null;for(;D!==null;)s(U,D),D=D.sibling;return null}function c(U,D){for(U=new Map;D!==null;)D.key!==null?U.set(D.key,D):U.set(D.index,D),D=D.sibling;return U}function d(U,D){return U=fi(U,D),U.index=0,U.sibling=null,U}function g(U,D,B){return U.index=B,n?(B=U.alternate,B!==null?(B=B.index,B<D?(U.flags|=2,D):B):(U.flags|=2,D)):(U.flags|=1048576,D)}function _(U){return n&&U.alternate===null&&(U.flags|=2),U}function P(U,D,B,te){return D===null||D.tag!==6?(D=Pd(B,U.mode,te),D.return=U,D):(D=d(D,B),D.return=U,D)}function N(U,D,B,te){var ge=B.type;return ge===k?J(U,D,B.props.children,te,B.key):D!==null&&(D.elementType===ge||typeof ge=="object"&&ge!==null&&ge.$$typeof===at&&fm(ge)===D.type)?(te=d(D,B.props),te.ref=Na(U,D,B),te.return=U,te):(te=Lu(B.type,B.key,B.props,null,U.mode,te),te.ref=Na(U,D,B),te.return=U,te)}function $(U,D,B,te){return D===null||D.tag!==4||D.stateNode.containerInfo!==B.containerInfo||D.stateNode.implementation!==B.implementation?(D=Cd(B,U.mode,te),D.return=U,D):(D=d(D,B.children||[]),D.return=U,D)}function J(U,D,B,te,ge){return D===null||D.tag!==7?(D=gs(B,U.mode,te,ge),D.return=U,D):(D=d(D,B),D.return=U,D)}function Z(U,D,B){if(typeof D=="string"&&D!==""||typeof D=="number")return D=Pd(""+D,U.mode,B),D.return=U,D;if(typeof D=="object"&&D!==null){switch(D.$$typeof){case Re:return B=Lu(D.type,D.key,D.props,null,U.mode,B),B.ref=Na(U,null,D),B.return=U,B;case ie:return D=Cd(D,U.mode,B),D.return=U,D;case at:var te=D._init;return Z(U,te(D._payload),B)}if(gr(D)||ve(D))return D=gs(D,U.mode,B,null),D.return=U,D;du(U,D)}return null}function X(U,D,B,te){var ge=D!==null?D.key:null;if(typeof B=="string"&&B!==""||typeof B=="number")return ge!==null?null:P(U,D,""+B,te);if(typeof B=="object"&&B!==null){switch(B.$$typeof){case Re:return B.key===ge?N(U,D,B,te):null;case ie:return B.key===ge?$(U,D,B,te):null;case at:return ge=B._init,X(U,D,ge(B._payload),te)}if(gr(B)||ve(B))return ge!==null?null:J(U,D,B,te,null);du(U,B)}return null}function ce(U,D,B,te,ge){if(typeof te=="string"&&te!==""||typeof te=="number")return U=U.get(B)||null,P(D,U,""+te,ge);if(typeof te=="object"&&te!==null){switch(te.$$typeof){case Re:return U=U.get(te.key===null?B:te.key)||null,N(D,U,te,ge);case ie:return U=U.get(te.key===null?B:te.key)||null,$(D,U,te,ge);case at:var Ee=te._init;return ce(U,D,B,Ee(te._payload),ge)}if(gr(te)||ve(te))return U=U.get(B)||null,J(D,U,te,ge,null);du(D,te)}return null}function fe(U,D,B,te){for(var ge=null,Ee=null,we=D,Se=D=0,Rt=null;we!==null&&Se<B.length;Se++){we.index>Se?(Rt=we,we=null):Rt=we.sibling;var Fe=X(U,we,B[Se],te);if(Fe===null){we===null&&(we=Rt);break}n&&we&&Fe.alternate===null&&s(U,we),D=g(Fe,D,Se),Ee===null?ge=Fe:Ee.sibling=Fe,Ee=Fe,we=Rt}if(Se===B.length)return a(U,we),Ze&&ls(U,Se),ge;if(we===null){for(;Se<B.length;Se++)we=Z(U,B[Se],te),we!==null&&(D=g(we,D,Se),Ee===null?ge=we:Ee.sibling=we,Ee=we);return Ze&&ls(U,Se),ge}for(we=c(U,we);Se<B.length;Se++)Rt=ce(we,U,Se,B[Se],te),Rt!==null&&(n&&Rt.alternate!==null&&we.delete(Rt.key===null?Se:Rt.key),D=g(Rt,D,Se),Ee===null?ge=Rt:Ee.sibling=Rt,Ee=Rt);return n&&we.forEach(function(pi){return s(U,pi)}),Ze&&ls(U,Se),ge}function pe(U,D,B,te){var ge=ve(B);if(typeof ge!="function")throw Error(t(150));if(B=ge.call(B),B==null)throw Error(t(151));for(var Ee=ge=null,we=D,Se=D=0,Rt=null,Fe=B.next();we!==null&&!Fe.done;Se++,Fe=B.next()){we.index>Se?(Rt=we,we=null):Rt=we.sibling;var pi=X(U,we,Fe.value,te);if(pi===null){we===null&&(we=Rt);break}n&&we&&pi.alternate===null&&s(U,we),D=g(pi,D,Se),Ee===null?ge=pi:Ee.sibling=pi,Ee=pi,we=Rt}if(Fe.done)return a(U,we),Ze&&ls(U,Se),ge;if(we===null){for(;!Fe.done;Se++,Fe=B.next())Fe=Z(U,Fe.value,te),Fe!==null&&(D=g(Fe,D,Se),Ee===null?ge=Fe:Ee.sibling=Fe,Ee=Fe);return Ze&&ls(U,Se),ge}for(we=c(U,we);!Fe.done;Se++,Fe=B.next())Fe=ce(we,U,Se,Fe.value,te),Fe!==null&&(n&&Fe.alternate!==null&&we.delete(Fe.key===null?Se:Fe.key),D=g(Fe,D,Se),Ee===null?ge=Fe:Ee.sibling=Fe,Ee=Fe);return n&&we.forEach(function(E0){return s(U,E0)}),Ze&&ls(U,Se),ge}function ut(U,D,B,te){if(typeof B=="object"&&B!==null&&B.type===k&&B.key===null&&(B=B.props.children),typeof B=="object"&&B!==null){switch(B.$$typeof){case Re:e:{for(var ge=B.key,Ee=D;Ee!==null;){if(Ee.key===ge){if(ge=B.type,ge===k){if(Ee.tag===7){a(U,Ee.sibling),D=d(Ee,B.props.children),D.return=U,U=D;break e}}else if(Ee.elementType===ge||typeof ge=="object"&&ge!==null&&ge.$$typeof===at&&fm(ge)===Ee.type){a(U,Ee.sibling),D=d(Ee,B.props),D.ref=Na(U,Ee,B),D.return=U,U=D;break e}a(U,Ee);break}else s(U,Ee);Ee=Ee.sibling}B.type===k?(D=gs(B.props.children,U.mode,te,B.key),D.return=U,U=D):(te=Lu(B.type,B.key,B.props,null,U.mode,te),te.ref=Na(U,D,B),te.return=U,U=te)}return _(U);case ie:e:{for(Ee=B.key;D!==null;){if(D.key===Ee)if(D.tag===4&&D.stateNode.containerInfo===B.containerInfo&&D.stateNode.implementation===B.implementation){a(U,D.sibling),D=d(D,B.children||[]),D.return=U,U=D;break e}else{a(U,D);break}else s(U,D);D=D.sibling}D=Cd(B,U.mode,te),D.return=U,U=D}return _(U);case at:return Ee=B._init,ut(U,D,Ee(B._payload),te)}if(gr(B))return fe(U,D,B,te);if(ve(B))return pe(U,D,B,te);du(U,B)}return typeof B=="string"&&B!==""||typeof B=="number"?(B=""+B,D!==null&&D.tag===6?(a(U,D.sibling),D=d(D,B),D.return=U,U=D):(a(U,D),D=Pd(B,U.mode,te),D.return=U,U=D),_(U)):a(U,D)}return ut}var po=pm(!0),mm=pm(!1),fu=ri(null),pu=null,mo=null,Lh=null;function Mh(){Lh=mo=pu=null}function jh(n){var s=fu.current;Xe(fu),n._currentValue=s}function Fh(n,s,a){for(;n!==null;){var c=n.alternate;if((n.childLanes&s)!==s?(n.childLanes|=s,c!==null&&(c.childLanes|=s)):c!==null&&(c.childLanes&s)!==s&&(c.childLanes|=s),n===a)break;n=n.return}}function go(n,s){pu=n,Lh=mo=null,n=n.dependencies,n!==null&&n.firstContext!==null&&((n.lanes&s)!==0&&(en=!0),n.firstContext=null)}function Tn(n){var s=n._currentValue;if(Lh!==n)if(n={context:n,memoizedValue:s,next:null},mo===null){if(pu===null)throw Error(t(308));mo=n,pu.dependencies={lanes:0,firstContext:n}}else mo=mo.next=n;return s}var us=null;function Uh(n){us===null?us=[n]:us.push(n)}function gm(n,s,a,c){var d=s.interleaved;return d===null?(a.next=a,Uh(s)):(a.next=d.next,d.next=a),s.interleaved=a,kr(n,c)}function kr(n,s){n.lanes|=s;var a=n.alternate;for(a!==null&&(a.lanes|=s),a=n,n=n.return;n!==null;)n.childLanes|=s,a=n.alternate,a!==null&&(a.childLanes|=s),a=n,n=n.return;return a.tag===3?a.stateNode:null}var oi=!1;function Bh(n){n.updateQueue={baseState:n.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function ym(n,s){n=n.updateQueue,s.updateQueue===n&&(s.updateQueue={baseState:n.baseState,firstBaseUpdate:n.firstBaseUpdate,lastBaseUpdate:n.lastBaseUpdate,shared:n.shared,effects:n.effects})}function Nr(n,s){return{eventTime:n,lane:s,tag:0,payload:null,callback:null,next:null}}function ai(n,s,a){var c=n.updateQueue;if(c===null)return null;if(c=c.shared,(je&2)!==0){var d=c.pending;return d===null?s.next=s:(s.next=d.next,d.next=s),c.pending=s,kr(n,a)}return d=c.interleaved,d===null?(s.next=s,Uh(c)):(s.next=d.next,d.next=s),c.interleaved=s,kr(n,a)}function mu(n,s,a){if(s=s.updateQueue,s!==null&&(s=s.shared,(a&4194240)!==0)){var c=s.lanes;c&=n.pendingLanes,a|=c,s.lanes=a,Yr(n,a)}}function vm(n,s){var a=n.updateQueue,c=n.alternate;if(c!==null&&(c=c.updateQueue,a===c)){var d=null,g=null;if(a=a.firstBaseUpdate,a!==null){do{var _={eventTime:a.eventTime,lane:a.lane,tag:a.tag,payload:a.payload,callback:a.callback,next:null};g===null?d=g=_:g=g.next=_,a=a.next}while(a!==null);g===null?d=g=s:g=g.next=s}else d=g=s;a={baseState:c.baseState,firstBaseUpdate:d,lastBaseUpdate:g,shared:c.shared,effects:c.effects},n.updateQueue=a;return}n=a.lastBaseUpdate,n===null?a.firstBaseUpdate=s:n.next=s,a.lastBaseUpdate=s}function gu(n,s,a,c){var d=n.updateQueue;oi=!1;var g=d.firstBaseUpdate,_=d.lastBaseUpdate,P=d.shared.pending;if(P!==null){d.shared.pending=null;var N=P,$=N.next;N.next=null,_===null?g=$:_.next=$,_=N;var J=n.alternate;J!==null&&(J=J.updateQueue,P=J.lastBaseUpdate,P!==_&&(P===null?J.firstBaseUpdate=$:P.next=$,J.lastBaseUpdate=N))}if(g!==null){var Z=d.baseState;_=0,J=$=N=null,P=g;do{var X=P.lane,ce=P.eventTime;if((c&X)===X){J!==null&&(J=J.next={eventTime:ce,lane:0,tag:P.tag,payload:P.payload,callback:P.callback,next:null});e:{var fe=n,pe=P;switch(X=s,ce=a,pe.tag){case 1:if(fe=pe.payload,typeof fe=="function"){Z=fe.call(ce,Z,X);break e}Z=fe;break e;case 3:fe.flags=fe.flags&-65537|128;case 0:if(fe=pe.payload,X=typeof fe=="function"?fe.call(ce,Z,X):fe,X==null)break e;Z=le({},Z,X);break e;case 2:oi=!0}}P.callback!==null&&P.lane!==0&&(n.flags|=64,X=d.effects,X===null?d.effects=[P]:X.push(P))}else ce={eventTime:ce,lane:X,tag:P.tag,payload:P.payload,callback:P.callback,next:null},J===null?($=J=ce,N=Z):J=J.next=ce,_|=X;if(P=P.next,P===null){if(P=d.shared.pending,P===null)break;X=P,P=X.next,X.next=null,d.lastBaseUpdate=X,d.shared.pending=null}}while(!0);if(J===null&&(N=Z),d.baseState=N,d.firstBaseUpdate=$,d.lastBaseUpdate=J,s=d.shared.interleaved,s!==null){d=s;do _|=d.lane,d=d.next;while(d!==s)}else g===null&&(d.shared.lanes=0);ds|=_,n.lanes=_,n.memoizedState=Z}}function _m(n,s,a){if(n=s.effects,s.effects=null,n!==null)for(s=0;s<n.length;s++){var c=n[s],d=c.callback;if(d!==null){if(c.callback=null,c=a,typeof d!="function")throw Error(t(191,d));d.call(c)}}}var xa={},rr=ri(xa),Da=ri(xa),ba=ri(xa);function cs(n){if(n===xa)throw Error(t(174));return n}function zh(n,s){switch(Ke(ba,s),Ke(Da,n),Ke(rr,xa),n=s.nodeType,n){case 9:case 11:s=(s=s.documentElement)?s.namespaceURI:vt(null,"");break;default:n=n===8?s.parentNode:s,s=n.namespaceURI||null,n=n.tagName,s=vt(s,n)}Xe(rr),Ke(rr,s)}function yo(){Xe(rr),Xe(Da),Xe(ba)}function Em(n){cs(ba.current);var s=cs(rr.current),a=vt(s,n.type);s!==a&&(Ke(Da,n),Ke(rr,a))}function $h(n){Da.current===n&&(Xe(rr),Xe(Da))}var et=ri(0);function yu(n){for(var s=n;s!==null;){if(s.tag===13){var a=s.memoizedState;if(a!==null&&(a=a.dehydrated,a===null||a.data==="$?"||a.data==="$!"))return s}else if(s.tag===19&&s.memoizedProps.revealOrder!==void 0){if((s.flags&128)!==0)return s}else if(s.child!==null){s.child.return=s,s=s.child;continue}if(s===n)break;for(;s.sibling===null;){if(s.return===null||s.return===n)return null;s=s.return}s.sibling.return=s.return,s=s.sibling}return null}var Wh=[];function qh(){for(var n=0;n<Wh.length;n++)Wh[n]._workInProgressVersionPrimary=null;Wh.length=0}var vu=ye.ReactCurrentDispatcher,Hh=ye.ReactCurrentBatchConfig,hs=0,tt=null,Et=null,Pt=null,_u=!1,Va=!1,Oa=0,zw=0;function jt(){throw Error(t(321))}function Gh(n,s){if(s===null)return!1;for(var a=0;a<s.length&&a<n.length;a++)if(!Fn(n[a],s[a]))return!1;return!0}function Kh(n,s,a,c,d,g){if(hs=g,tt=s,s.memoizedState=null,s.updateQueue=null,s.lanes=0,vu.current=n===null||n.memoizedState===null?Hw:Gw,n=a(c,d),Va){g=0;do{if(Va=!1,Oa=0,25<=g)throw Error(t(301));g+=1,Pt=Et=null,s.updateQueue=null,vu.current=Kw,n=a(c,d)}while(Va)}if(vu.current=Tu,s=Et!==null&&Et.next!==null,hs=0,Pt=Et=tt=null,_u=!1,s)throw Error(t(300));return n}function Qh(){var n=Oa!==0;return Oa=0,n}function ir(){var n={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Pt===null?tt.memoizedState=Pt=n:Pt=Pt.next=n,Pt}function In(){if(Et===null){var n=tt.alternate;n=n!==null?n.memoizedState:null}else n=Et.next;var s=Pt===null?tt.memoizedState:Pt.next;if(s!==null)Pt=s,Et=n;else{if(n===null)throw Error(t(310));Et=n,n={memoizedState:Et.memoizedState,baseState:Et.baseState,baseQueue:Et.baseQueue,queue:Et.queue,next:null},Pt===null?tt.memoizedState=Pt=n:Pt=Pt.next=n}return Pt}function La(n,s){return typeof s=="function"?s(n):s}function Yh(n){var s=In(),a=s.queue;if(a===null)throw Error(t(311));a.lastRenderedReducer=n;var c=Et,d=c.baseQueue,g=a.pending;if(g!==null){if(d!==null){var _=d.next;d.next=g.next,g.next=_}c.baseQueue=d=g,a.pending=null}if(d!==null){g=d.next,c=c.baseState;var P=_=null,N=null,$=g;do{var J=$.lane;if((hs&J)===J)N!==null&&(N=N.next={lane:0,action:$.action,hasEagerState:$.hasEagerState,eagerState:$.eagerState,next:null}),c=$.hasEagerState?$.eagerState:n(c,$.action);else{var Z={lane:J,action:$.action,hasEagerState:$.hasEagerState,eagerState:$.eagerState,next:null};N===null?(P=N=Z,_=c):N=N.next=Z,tt.lanes|=J,ds|=J}$=$.next}while($!==null&&$!==g);N===null?_=c:N.next=P,Fn(c,s.memoizedState)||(en=!0),s.memoizedState=c,s.baseState=_,s.baseQueue=N,a.lastRenderedState=c}if(n=a.interleaved,n!==null){d=n;do g=d.lane,tt.lanes|=g,ds|=g,d=d.next;while(d!==n)}else d===null&&(a.lanes=0);return[s.memoizedState,a.dispatch]}function Xh(n){var s=In(),a=s.queue;if(a===null)throw Error(t(311));a.lastRenderedReducer=n;var c=a.dispatch,d=a.pending,g=s.memoizedState;if(d!==null){a.pending=null;var _=d=d.next;do g=n(g,_.action),_=_.next;while(_!==d);Fn(g,s.memoizedState)||(en=!0),s.memoizedState=g,s.baseQueue===null&&(s.baseState=g),a.lastRenderedState=g}return[g,c]}function wm(){}function Tm(n,s){var a=tt,c=In(),d=s(),g=!Fn(c.memoizedState,d);if(g&&(c.memoizedState=d,en=!0),c=c.queue,Jh(Am.bind(null,a,c,n),[n]),c.getSnapshot!==s||g||Pt!==null&&Pt.memoizedState.tag&1){if(a.flags|=2048,Ma(9,Sm.bind(null,a,c,d,s),void 0,null),Ct===null)throw Error(t(349));(hs&30)!==0||Im(a,s,d)}return d}function Im(n,s,a){n.flags|=16384,n={getSnapshot:s,value:a},s=tt.updateQueue,s===null?(s={lastEffect:null,stores:null},tt.updateQueue=s,s.stores=[n]):(a=s.stores,a===null?s.stores=[n]:a.push(n))}function Sm(n,s,a,c){s.value=a,s.getSnapshot=c,Pm(s)&&Cm(n)}function Am(n,s,a){return a(function(){Pm(s)&&Cm(n)})}function Pm(n){var s=n.getSnapshot;n=n.value;try{var a=s();return!Fn(n,a)}catch{return!0}}function Cm(n){var s=kr(n,1);s!==null&&Wn(s,n,1,-1)}function Rm(n){var s=ir();return typeof n=="function"&&(n=n()),s.memoizedState=s.baseState=n,n={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:La,lastRenderedState:n},s.queue=n,n=n.dispatch=qw.bind(null,tt,n),[s.memoizedState,n]}function Ma(n,s,a,c){return n={tag:n,create:s,destroy:a,deps:c,next:null},s=tt.updateQueue,s===null?(s={lastEffect:null,stores:null},tt.updateQueue=s,s.lastEffect=n.next=n):(a=s.lastEffect,a===null?s.lastEffect=n.next=n:(c=a.next,a.next=n,n.next=c,s.lastEffect=n)),n}function km(){return In().memoizedState}function Eu(n,s,a,c){var d=ir();tt.flags|=n,d.memoizedState=Ma(1|s,a,void 0,c===void 0?null:c)}function wu(n,s,a,c){var d=In();c=c===void 0?null:c;var g=void 0;if(Et!==null){var _=Et.memoizedState;if(g=_.destroy,c!==null&&Gh(c,_.deps)){d.memoizedState=Ma(s,a,g,c);return}}tt.flags|=n,d.memoizedState=Ma(1|s,a,g,c)}function Nm(n,s){return Eu(8390656,8,n,s)}function Jh(n,s){return wu(2048,8,n,s)}function xm(n,s){return wu(4,2,n,s)}function Dm(n,s){return wu(4,4,n,s)}function bm(n,s){if(typeof s=="function")return n=n(),s(n),function(){s(null)};if(s!=null)return n=n(),s.current=n,function(){s.current=null}}function Vm(n,s,a){return a=a!=null?a.concat([n]):null,wu(4,4,bm.bind(null,s,n),a)}function Zh(){}function Om(n,s){var a=In();s=s===void 0?null:s;var c=a.memoizedState;return c!==null&&s!==null&&Gh(s,c[1])?c[0]:(a.memoizedState=[n,s],n)}function Lm(n,s){var a=In();s=s===void 0?null:s;var c=a.memoizedState;return c!==null&&s!==null&&Gh(s,c[1])?c[0]:(n=n(),a.memoizedState=[n,s],n)}function Mm(n,s,a){return(hs&21)===0?(n.baseState&&(n.baseState=!1,en=!0),n.memoizedState=a):(Fn(a,s)||(a=es(),tt.lanes|=a,ds|=a,n.baseState=!0),s)}function $w(n,s){var a=Oe;Oe=a!==0&&4>a?a:4,n(!0);var c=Hh.transition;Hh.transition={};try{n(!1),s()}finally{Oe=a,Hh.transition=c}}function jm(){return In().memoizedState}function Ww(n,s,a){var c=hi(n);if(a={lane:c,action:a,hasEagerState:!1,eagerState:null,next:null},Fm(n))Um(s,a);else if(a=gm(n,s,a,c),a!==null){var d=Kt();Wn(a,n,c,d),Bm(a,s,c)}}function qw(n,s,a){var c=hi(n),d={lane:c,action:a,hasEagerState:!1,eagerState:null,next:null};if(Fm(n))Um(s,d);else{var g=n.alternate;if(n.lanes===0&&(g===null||g.lanes===0)&&(g=s.lastRenderedReducer,g!==null))try{var _=s.lastRenderedState,P=g(_,a);if(d.hasEagerState=!0,d.eagerState=P,Fn(P,_)){var N=s.interleaved;N===null?(d.next=d,Uh(s)):(d.next=N.next,N.next=d),s.interleaved=d;return}}catch{}finally{}a=gm(n,s,d,c),a!==null&&(d=Kt(),Wn(a,n,c,d),Bm(a,s,c))}}function Fm(n){var s=n.alternate;return n===tt||s!==null&&s===tt}function Um(n,s){Va=_u=!0;var a=n.pending;a===null?s.next=s:(s.next=a.next,a.next=s),n.pending=s}function Bm(n,s,a){if((a&4194240)!==0){var c=s.lanes;c&=n.pendingLanes,a|=c,s.lanes=a,Yr(n,a)}}var Tu={readContext:Tn,useCallback:jt,useContext:jt,useEffect:jt,useImperativeHandle:jt,useInsertionEffect:jt,useLayoutEffect:jt,useMemo:jt,useReducer:jt,useRef:jt,useState:jt,useDebugValue:jt,useDeferredValue:jt,useTransition:jt,useMutableSource:jt,useSyncExternalStore:jt,useId:jt,unstable_isNewReconciler:!1},Hw={readContext:Tn,useCallback:function(n,s){return ir().memoizedState=[n,s===void 0?null:s],n},useContext:Tn,useEffect:Nm,useImperativeHandle:function(n,s,a){return a=a!=null?a.concat([n]):null,Eu(4194308,4,bm.bind(null,s,n),a)},useLayoutEffect:function(n,s){return Eu(4194308,4,n,s)},useInsertionEffect:function(n,s){return Eu(4,2,n,s)},useMemo:function(n,s){var a=ir();return s=s===void 0?null:s,n=n(),a.memoizedState=[n,s],n},useReducer:function(n,s,a){var c=ir();return s=a!==void 0?a(s):s,c.memoizedState=c.baseState=s,n={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:n,lastRenderedState:s},c.queue=n,n=n.dispatch=Ww.bind(null,tt,n),[c.memoizedState,n]},useRef:function(n){var s=ir();return n={current:n},s.memoizedState=n},useState:Rm,useDebugValue:Zh,useDeferredValue:function(n){return ir().memoizedState=n},useTransition:function(){var n=Rm(!1),s=n[0];return n=$w.bind(null,n[1]),ir().memoizedState=n,[s,n]},useMutableSource:function(){},useSyncExternalStore:function(n,s,a){var c=tt,d=ir();if(Ze){if(a===void 0)throw Error(t(407));a=a()}else{if(a=s(),Ct===null)throw Error(t(349));(hs&30)!==0||Im(c,s,a)}d.memoizedState=a;var g={value:a,getSnapshot:s};return d.queue=g,Nm(Am.bind(null,c,g,n),[n]),c.flags|=2048,Ma(9,Sm.bind(null,c,g,a,s),void 0,null),a},useId:function(){var n=ir(),s=Ct.identifierPrefix;if(Ze){var a=Rr,c=Cr;a=(c&~(1<<32-qt(c)-1)).toString(32)+a,s=":"+s+"R"+a,a=Oa++,0<a&&(s+="H"+a.toString(32)),s+=":"}else a=zw++,s=":"+s+"r"+a.toString(32)+":";return n.memoizedState=s},unstable_isNewReconciler:!1},Gw={readContext:Tn,useCallback:Om,useContext:Tn,useEffect:Jh,useImperativeHandle:Vm,useInsertionEffect:xm,useLayoutEffect:Dm,useMemo:Lm,useReducer:Yh,useRef:km,useState:function(){return Yh(La)},useDebugValue:Zh,useDeferredValue:function(n){var s=In();return Mm(s,Et.memoizedState,n)},useTransition:function(){var n=Yh(La)[0],s=In().memoizedState;return[n,s]},useMutableSource:wm,useSyncExternalStore:Tm,useId:jm,unstable_isNewReconciler:!1},Kw={readContext:Tn,useCallback:Om,useContext:Tn,useEffect:Jh,useImperativeHandle:Vm,useInsertionEffect:xm,useLayoutEffect:Dm,useMemo:Lm,useReducer:Xh,useRef:km,useState:function(){return Xh(La)},useDebugValue:Zh,useDeferredValue:function(n){var s=In();return Et===null?s.memoizedState=n:Mm(s,Et.memoizedState,n)},useTransition:function(){var n=Xh(La)[0],s=In().memoizedState;return[n,s]},useMutableSource:wm,useSyncExternalStore:Tm,useId:jm,unstable_isNewReconciler:!1};function Bn(n,s){if(n&&n.defaultProps){s=le({},s),n=n.defaultProps;for(var a in n)s[a]===void 0&&(s[a]=n[a]);return s}return s}function ed(n,s,a,c){s=n.memoizedState,a=a(c,s),a=a==null?s:le({},s,a),n.memoizedState=a,n.lanes===0&&(n.updateQueue.baseState=a)}var Iu={isMounted:function(n){return(n=n._reactInternals)?Dn(n)===n:!1},enqueueSetState:function(n,s,a){n=n._reactInternals;var c=Kt(),d=hi(n),g=Nr(c,d);g.payload=s,a!=null&&(g.callback=a),s=ai(n,g,d),s!==null&&(Wn(s,n,d,c),mu(s,n,d))},enqueueReplaceState:function(n,s,a){n=n._reactInternals;var c=Kt(),d=hi(n),g=Nr(c,d);g.tag=1,g.payload=s,a!=null&&(g.callback=a),s=ai(n,g,d),s!==null&&(Wn(s,n,d,c),mu(s,n,d))},enqueueForceUpdate:function(n,s){n=n._reactInternals;var a=Kt(),c=hi(n),d=Nr(a,c);d.tag=2,s!=null&&(d.callback=s),s=ai(n,d,c),s!==null&&(Wn(s,n,c,a),mu(s,n,c))}};function zm(n,s,a,c,d,g,_){return n=n.stateNode,typeof n.shouldComponentUpdate=="function"?n.shouldComponentUpdate(c,g,_):s.prototype&&s.prototype.isPureReactComponent?!Ia(a,c)||!Ia(d,g):!0}function $m(n,s,a){var c=!1,d=ii,g=s.contextType;return typeof g=="object"&&g!==null?g=Tn(g):(d=Zt(s)?os:Mt.current,c=s.contextTypes,g=(c=c!=null)?uo(n,d):ii),s=new s(a,g),n.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,s.updater=Iu,n.stateNode=s,s._reactInternals=n,c&&(n=n.stateNode,n.__reactInternalMemoizedUnmaskedChildContext=d,n.__reactInternalMemoizedMaskedChildContext=g),s}function Wm(n,s,a,c){n=s.state,typeof s.componentWillReceiveProps=="function"&&s.componentWillReceiveProps(a,c),typeof s.UNSAFE_componentWillReceiveProps=="function"&&s.UNSAFE_componentWillReceiveProps(a,c),s.state!==n&&Iu.enqueueReplaceState(s,s.state,null)}function td(n,s,a,c){var d=n.stateNode;d.props=a,d.state=n.memoizedState,d.refs={},Bh(n);var g=s.contextType;typeof g=="object"&&g!==null?d.context=Tn(g):(g=Zt(s)?os:Mt.current,d.context=uo(n,g)),d.state=n.memoizedState,g=s.getDerivedStateFromProps,typeof g=="function"&&(ed(n,s,g,a),d.state=n.memoizedState),typeof s.getDerivedStateFromProps=="function"||typeof d.getSnapshotBeforeUpdate=="function"||typeof d.UNSAFE_componentWillMount!="function"&&typeof d.componentWillMount!="function"||(s=d.state,typeof d.componentWillMount=="function"&&d.componentWillMount(),typeof d.UNSAFE_componentWillMount=="function"&&d.UNSAFE_componentWillMount(),s!==d.state&&Iu.enqueueReplaceState(d,d.state,null),gu(n,a,d,c),d.state=n.memoizedState),typeof d.componentDidMount=="function"&&(n.flags|=4194308)}function vo(n,s){try{var a="",c=s;do a+=H(c),c=c.return;while(c);var d=a}catch(g){d=`
Error generating stack: `+g.message+`
`+g.stack}return{value:n,source:s,stack:d,digest:null}}function nd(n,s,a){return{value:n,source:null,stack:a??null,digest:s??null}}function rd(n,s){try{console.error(s.value)}catch(a){setTimeout(function(){throw a})}}var Qw=typeof WeakMap=="function"?WeakMap:Map;function qm(n,s,a){a=Nr(-1,a),a.tag=3,a.payload={element:null};var c=s.value;return a.callback=function(){Nu||(Nu=!0,vd=c),rd(n,s)},a}function Hm(n,s,a){a=Nr(-1,a),a.tag=3;var c=n.type.getDerivedStateFromError;if(typeof c=="function"){var d=s.value;a.payload=function(){return c(d)},a.callback=function(){rd(n,s)}}var g=n.stateNode;return g!==null&&typeof g.componentDidCatch=="function"&&(a.callback=function(){rd(n,s),typeof c!="function"&&(ui===null?ui=new Set([this]):ui.add(this));var _=s.stack;this.componentDidCatch(s.value,{componentStack:_!==null?_:""})}),a}function Gm(n,s,a){var c=n.pingCache;if(c===null){c=n.pingCache=new Qw;var d=new Set;c.set(s,d)}else d=c.get(s),d===void 0&&(d=new Set,c.set(s,d));d.has(a)||(d.add(a),n=u0.bind(null,n,s,a),s.then(n,n))}function Km(n){do{var s;if((s=n.tag===13)&&(s=n.memoizedState,s=s!==null?s.dehydrated!==null:!0),s)return n;n=n.return}while(n!==null);return null}function Qm(n,s,a,c,d){return(n.mode&1)===0?(n===s?n.flags|=65536:(n.flags|=128,a.flags|=131072,a.flags&=-52805,a.tag===1&&(a.alternate===null?a.tag=17:(s=Nr(-1,1),s.tag=2,ai(a,s,1))),a.lanes|=1),n):(n.flags|=65536,n.lanes=d,n)}var Yw=ye.ReactCurrentOwner,en=!1;function Gt(n,s,a,c){s.child=n===null?mm(s,null,a,c):po(s,n.child,a,c)}function Ym(n,s,a,c,d){a=a.render;var g=s.ref;return go(s,d),c=Kh(n,s,a,c,g,d),a=Qh(),n!==null&&!en?(s.updateQueue=n.updateQueue,s.flags&=-2053,n.lanes&=~d,xr(n,s,d)):(Ze&&a&&xh(s),s.flags|=1,Gt(n,s,c,d),s.child)}function Xm(n,s,a,c,d){if(n===null){var g=a.type;return typeof g=="function"&&!Ad(g)&&g.defaultProps===void 0&&a.compare===null&&a.defaultProps===void 0?(s.tag=15,s.type=g,Jm(n,s,g,c,d)):(n=Lu(a.type,null,c,s,s.mode,d),n.ref=s.ref,n.return=s,s.child=n)}if(g=n.child,(n.lanes&d)===0){var _=g.memoizedProps;if(a=a.compare,a=a!==null?a:Ia,a(_,c)&&n.ref===s.ref)return xr(n,s,d)}return s.flags|=1,n=fi(g,c),n.ref=s.ref,n.return=s,s.child=n}function Jm(n,s,a,c,d){if(n!==null){var g=n.memoizedProps;if(Ia(g,c)&&n.ref===s.ref)if(en=!1,s.pendingProps=c=g,(n.lanes&d)!==0)(n.flags&131072)!==0&&(en=!0);else return s.lanes=n.lanes,xr(n,s,d)}return id(n,s,a,c,d)}function Zm(n,s,a){var c=s.pendingProps,d=c.children,g=n!==null?n.memoizedState:null;if(c.mode==="hidden")if((s.mode&1)===0)s.memoizedState={baseLanes:0,cachePool:null,transitions:null},Ke(Eo,pn),pn|=a;else{if((a&1073741824)===0)return n=g!==null?g.baseLanes|a:a,s.lanes=s.childLanes=1073741824,s.memoizedState={baseLanes:n,cachePool:null,transitions:null},s.updateQueue=null,Ke(Eo,pn),pn|=n,null;s.memoizedState={baseLanes:0,cachePool:null,transitions:null},c=g!==null?g.baseLanes:a,Ke(Eo,pn),pn|=c}else g!==null?(c=g.baseLanes|a,s.memoizedState=null):c=a,Ke(Eo,pn),pn|=c;return Gt(n,s,d,a),s.child}function eg(n,s){var a=s.ref;(n===null&&a!==null||n!==null&&n.ref!==a)&&(s.flags|=512,s.flags|=2097152)}function id(n,s,a,c,d){var g=Zt(a)?os:Mt.current;return g=uo(s,g),go(s,d),a=Kh(n,s,a,c,g,d),c=Qh(),n!==null&&!en?(s.updateQueue=n.updateQueue,s.flags&=-2053,n.lanes&=~d,xr(n,s,d)):(Ze&&c&&xh(s),s.flags|=1,Gt(n,s,a,d),s.child)}function tg(n,s,a,c,d){if(Zt(a)){var g=!0;au(s)}else g=!1;if(go(s,d),s.stateNode===null)Au(n,s),$m(s,a,c),td(s,a,c,d),c=!0;else if(n===null){var _=s.stateNode,P=s.memoizedProps;_.props=P;var N=_.context,$=a.contextType;typeof $=="object"&&$!==null?$=Tn($):($=Zt(a)?os:Mt.current,$=uo(s,$));var J=a.getDerivedStateFromProps,Z=typeof J=="function"||typeof _.getSnapshotBeforeUpdate=="function";Z||typeof _.UNSAFE_componentWillReceiveProps!="function"&&typeof _.componentWillReceiveProps!="function"||(P!==c||N!==$)&&Wm(s,_,c,$),oi=!1;var X=s.memoizedState;_.state=X,gu(s,c,_,d),N=s.memoizedState,P!==c||X!==N||Jt.current||oi?(typeof J=="function"&&(ed(s,a,J,c),N=s.memoizedState),(P=oi||zm(s,a,P,c,X,N,$))?(Z||typeof _.UNSAFE_componentWillMount!="function"&&typeof _.componentWillMount!="function"||(typeof _.componentWillMount=="function"&&_.componentWillMount(),typeof _.UNSAFE_componentWillMount=="function"&&_.UNSAFE_componentWillMount()),typeof _.componentDidMount=="function"&&(s.flags|=4194308)):(typeof _.componentDidMount=="function"&&(s.flags|=4194308),s.memoizedProps=c,s.memoizedState=N),_.props=c,_.state=N,_.context=$,c=P):(typeof _.componentDidMount=="function"&&(s.flags|=4194308),c=!1)}else{_=s.stateNode,ym(n,s),P=s.memoizedProps,$=s.type===s.elementType?P:Bn(s.type,P),_.props=$,Z=s.pendingProps,X=_.context,N=a.contextType,typeof N=="object"&&N!==null?N=Tn(N):(N=Zt(a)?os:Mt.current,N=uo(s,N));var ce=a.getDerivedStateFromProps;(J=typeof ce=="function"||typeof _.getSnapshotBeforeUpdate=="function")||typeof _.UNSAFE_componentWillReceiveProps!="function"&&typeof _.componentWillReceiveProps!="function"||(P!==Z||X!==N)&&Wm(s,_,c,N),oi=!1,X=s.memoizedState,_.state=X,gu(s,c,_,d);var fe=s.memoizedState;P!==Z||X!==fe||Jt.current||oi?(typeof ce=="function"&&(ed(s,a,ce,c),fe=s.memoizedState),($=oi||zm(s,a,$,c,X,fe,N)||!1)?(J||typeof _.UNSAFE_componentWillUpdate!="function"&&typeof _.componentWillUpdate!="function"||(typeof _.componentWillUpdate=="function"&&_.componentWillUpdate(c,fe,N),typeof _.UNSAFE_componentWillUpdate=="function"&&_.UNSAFE_componentWillUpdate(c,fe,N)),typeof _.componentDidUpdate=="function"&&(s.flags|=4),typeof _.getSnapshotBeforeUpdate=="function"&&(s.flags|=1024)):(typeof _.componentDidUpdate!="function"||P===n.memoizedProps&&X===n.memoizedState||(s.flags|=4),typeof _.getSnapshotBeforeUpdate!="function"||P===n.memoizedProps&&X===n.memoizedState||(s.flags|=1024),s.memoizedProps=c,s.memoizedState=fe),_.props=c,_.state=fe,_.context=N,c=$):(typeof _.componentDidUpdate!="function"||P===n.memoizedProps&&X===n.memoizedState||(s.flags|=4),typeof _.getSnapshotBeforeUpdate!="function"||P===n.memoizedProps&&X===n.memoizedState||(s.flags|=1024),c=!1)}return sd(n,s,a,c,g,d)}function sd(n,s,a,c,d,g){eg(n,s);var _=(s.flags&128)!==0;if(!c&&!_)return d&&om(s,a,!1),xr(n,s,g);c=s.stateNode,Yw.current=s;var P=_&&typeof a.getDerivedStateFromError!="function"?null:c.render();return s.flags|=1,n!==null&&_?(s.child=po(s,n.child,null,g),s.child=po(s,null,P,g)):Gt(n,s,P,g),s.memoizedState=c.state,d&&om(s,a,!0),s.child}function ng(n){var s=n.stateNode;s.pendingContext?im(n,s.pendingContext,s.pendingContext!==s.context):s.context&&im(n,s.context,!1),zh(n,s.containerInfo)}function rg(n,s,a,c,d){return fo(),Oh(d),s.flags|=256,Gt(n,s,a,c),s.child}var od={dehydrated:null,treeContext:null,retryLane:0};function ad(n){return{baseLanes:n,cachePool:null,transitions:null}}function ig(n,s,a){var c=s.pendingProps,d=et.current,g=!1,_=(s.flags&128)!==0,P;if((P=_)||(P=n!==null&&n.memoizedState===null?!1:(d&2)!==0),P?(g=!0,s.flags&=-129):(n===null||n.memoizedState!==null)&&(d|=1),Ke(et,d&1),n===null)return Vh(s),n=s.memoizedState,n!==null&&(n=n.dehydrated,n!==null)?((s.mode&1)===0?s.lanes=1:n.data==="$!"?s.lanes=8:s.lanes=1073741824,null):(_=c.children,n=c.fallback,g?(c=s.mode,g=s.child,_={mode:"hidden",children:_},(c&1)===0&&g!==null?(g.childLanes=0,g.pendingProps=_):g=Mu(_,c,0,null),n=gs(n,c,a,null),g.return=s,n.return=s,g.sibling=n,s.child=g,s.child.memoizedState=ad(a),s.memoizedState=od,n):ld(s,_));if(d=n.memoizedState,d!==null&&(P=d.dehydrated,P!==null))return Xw(n,s,_,c,P,d,a);if(g){g=c.fallback,_=s.mode,d=n.child,P=d.sibling;var N={mode:"hidden",children:c.children};return(_&1)===0&&s.child!==d?(c=s.child,c.childLanes=0,c.pendingProps=N,s.deletions=null):(c=fi(d,N),c.subtreeFlags=d.subtreeFlags&14680064),P!==null?g=fi(P,g):(g=gs(g,_,a,null),g.flags|=2),g.return=s,c.return=s,c.sibling=g,s.child=c,c=g,g=s.child,_=n.child.memoizedState,_=_===null?ad(a):{baseLanes:_.baseLanes|a,cachePool:null,transitions:_.transitions},g.memoizedState=_,g.childLanes=n.childLanes&~a,s.memoizedState=od,c}return g=n.child,n=g.sibling,c=fi(g,{mode:"visible",children:c.children}),(s.mode&1)===0&&(c.lanes=a),c.return=s,c.sibling=null,n!==null&&(a=s.deletions,a===null?(s.deletions=[n],s.flags|=16):a.push(n)),s.child=c,s.memoizedState=null,c}function ld(n,s){return s=Mu({mode:"visible",children:s},n.mode,0,null),s.return=n,n.child=s}function Su(n,s,a,c){return c!==null&&Oh(c),po(s,n.child,null,a),n=ld(s,s.pendingProps.children),n.flags|=2,s.memoizedState=null,n}function Xw(n,s,a,c,d,g,_){if(a)return s.flags&256?(s.flags&=-257,c=nd(Error(t(422))),Su(n,s,_,c)):s.memoizedState!==null?(s.child=n.child,s.flags|=128,null):(g=c.fallback,d=s.mode,c=Mu({mode:"visible",children:c.children},d,0,null),g=gs(g,d,_,null),g.flags|=2,c.return=s,g.return=s,c.sibling=g,s.child=c,(s.mode&1)!==0&&po(s,n.child,null,_),s.child.memoizedState=ad(_),s.memoizedState=od,g);if((s.mode&1)===0)return Su(n,s,_,null);if(d.data==="$!"){if(c=d.nextSibling&&d.nextSibling.dataset,c)var P=c.dgst;return c=P,g=Error(t(419)),c=nd(g,c,void 0),Su(n,s,_,c)}if(P=(_&n.childLanes)!==0,en||P){if(c=Ct,c!==null){switch(_&-_){case 4:d=2;break;case 16:d=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:d=32;break;case 536870912:d=268435456;break;default:d=0}d=(d&(c.suspendedLanes|_))!==0?0:d,d!==0&&d!==g.retryLane&&(g.retryLane=d,kr(n,d),Wn(c,n,d,-1))}return Sd(),c=nd(Error(t(421))),Su(n,s,_,c)}return d.data==="$?"?(s.flags|=128,s.child=n.child,s=c0.bind(null,n),d._reactRetry=s,null):(n=g.treeContext,fn=ni(d.nextSibling),dn=s,Ze=!0,Un=null,n!==null&&(En[wn++]=Cr,En[wn++]=Rr,En[wn++]=as,Cr=n.id,Rr=n.overflow,as=s),s=ld(s,c.children),s.flags|=4096,s)}function sg(n,s,a){n.lanes|=s;var c=n.alternate;c!==null&&(c.lanes|=s),Fh(n.return,s,a)}function ud(n,s,a,c,d){var g=n.memoizedState;g===null?n.memoizedState={isBackwards:s,rendering:null,renderingStartTime:0,last:c,tail:a,tailMode:d}:(g.isBackwards=s,g.rendering=null,g.renderingStartTime=0,g.last=c,g.tail=a,g.tailMode=d)}function og(n,s,a){var c=s.pendingProps,d=c.revealOrder,g=c.tail;if(Gt(n,s,c.children,a),c=et.current,(c&2)!==0)c=c&1|2,s.flags|=128;else{if(n!==null&&(n.flags&128)!==0)e:for(n=s.child;n!==null;){if(n.tag===13)n.memoizedState!==null&&sg(n,a,s);else if(n.tag===19)sg(n,a,s);else if(n.child!==null){n.child.return=n,n=n.child;continue}if(n===s)break e;for(;n.sibling===null;){if(n.return===null||n.return===s)break e;n=n.return}n.sibling.return=n.return,n=n.sibling}c&=1}if(Ke(et,c),(s.mode&1)===0)s.memoizedState=null;else switch(d){case"forwards":for(a=s.child,d=null;a!==null;)n=a.alternate,n!==null&&yu(n)===null&&(d=a),a=a.sibling;a=d,a===null?(d=s.child,s.child=null):(d=a.sibling,a.sibling=null),ud(s,!1,d,a,g);break;case"backwards":for(a=null,d=s.child,s.child=null;d!==null;){if(n=d.alternate,n!==null&&yu(n)===null){s.child=d;break}n=d.sibling,d.sibling=a,a=d,d=n}ud(s,!0,a,null,g);break;case"together":ud(s,!1,null,null,void 0);break;default:s.memoizedState=null}return s.child}function Au(n,s){(s.mode&1)===0&&n!==null&&(n.alternate=null,s.alternate=null,s.flags|=2)}function xr(n,s,a){if(n!==null&&(s.dependencies=n.dependencies),ds|=s.lanes,(a&s.childLanes)===0)return null;if(n!==null&&s.child!==n.child)throw Error(t(153));if(s.child!==null){for(n=s.child,a=fi(n,n.pendingProps),s.child=a,a.return=s;n.sibling!==null;)n=n.sibling,a=a.sibling=fi(n,n.pendingProps),a.return=s;a.sibling=null}return s.child}function Jw(n,s,a){switch(s.tag){case 3:ng(s),fo();break;case 5:Em(s);break;case 1:Zt(s.type)&&au(s);break;case 4:zh(s,s.stateNode.containerInfo);break;case 10:var c=s.type._context,d=s.memoizedProps.value;Ke(fu,c._currentValue),c._currentValue=d;break;case 13:if(c=s.memoizedState,c!==null)return c.dehydrated!==null?(Ke(et,et.current&1),s.flags|=128,null):(a&s.child.childLanes)!==0?ig(n,s,a):(Ke(et,et.current&1),n=xr(n,s,a),n!==null?n.sibling:null);Ke(et,et.current&1);break;case 19:if(c=(a&s.childLanes)!==0,(n.flags&128)!==0){if(c)return og(n,s,a);s.flags|=128}if(d=s.memoizedState,d!==null&&(d.rendering=null,d.tail=null,d.lastEffect=null),Ke(et,et.current),c)break;return null;case 22:case 23:return s.lanes=0,Zm(n,s,a)}return xr(n,s,a)}var ag,cd,lg,ug;ag=function(n,s){for(var a=s.child;a!==null;){if(a.tag===5||a.tag===6)n.appendChild(a.stateNode);else if(a.tag!==4&&a.child!==null){a.child.return=a,a=a.child;continue}if(a===s)break;for(;a.sibling===null;){if(a.return===null||a.return===s)return;a=a.return}a.sibling.return=a.return,a=a.sibling}},cd=function(){},lg=function(n,s,a,c){var d=n.memoizedProps;if(d!==c){n=s.stateNode,cs(rr.current);var g=null;switch(a){case"input":d=$i(n,d),c=$i(n,c),g=[];break;case"select":d=le({},d,{value:void 0}),c=le({},c,{value:void 0}),g=[];break;case"textarea":d=Jo(n,d),c=Jo(n,c),g=[];break;default:typeof d.onClick!="function"&&typeof c.onClick=="function"&&(n.onclick=iu)}ia(a,c);var _;a=null;for($ in d)if(!c.hasOwnProperty($)&&d.hasOwnProperty($)&&d[$]!=null)if($==="style"){var P=d[$];for(_ in P)P.hasOwnProperty(_)&&(a||(a={}),a[_]="")}else $!=="dangerouslySetInnerHTML"&&$!=="children"&&$!=="suppressContentEditableWarning"&&$!=="suppressHydrationWarning"&&$!=="autoFocus"&&(o.hasOwnProperty($)?g||(g=[]):(g=g||[]).push($,null));for($ in c){var N=c[$];if(P=d!=null?d[$]:void 0,c.hasOwnProperty($)&&N!==P&&(N!=null||P!=null))if($==="style")if(P){for(_ in P)!P.hasOwnProperty(_)||N&&N.hasOwnProperty(_)||(a||(a={}),a[_]="");for(_ in N)N.hasOwnProperty(_)&&P[_]!==N[_]&&(a||(a={}),a[_]=N[_])}else a||(g||(g=[]),g.push($,a)),a=N;else $==="dangerouslySetInnerHTML"?(N=N?N.__html:void 0,P=P?P.__html:void 0,N!=null&&P!==N&&(g=g||[]).push($,N)):$==="children"?typeof N!="string"&&typeof N!="number"||(g=g||[]).push($,""+N):$!=="suppressContentEditableWarning"&&$!=="suppressHydrationWarning"&&(o.hasOwnProperty($)?(N!=null&&$==="onScroll"&&Ye("scroll",n),g||P===N||(g=[])):(g=g||[]).push($,N))}a&&(g=g||[]).push("style",a);var $=g;(s.updateQueue=$)&&(s.flags|=4)}},ug=function(n,s,a,c){a!==c&&(s.flags|=4)};function ja(n,s){if(!Ze)switch(n.tailMode){case"hidden":s=n.tail;for(var a=null;s!==null;)s.alternate!==null&&(a=s),s=s.sibling;a===null?n.tail=null:a.sibling=null;break;case"collapsed":a=n.tail;for(var c=null;a!==null;)a.alternate!==null&&(c=a),a=a.sibling;c===null?s||n.tail===null?n.tail=null:n.tail.sibling=null:c.sibling=null}}function Ft(n){var s=n.alternate!==null&&n.alternate.child===n.child,a=0,c=0;if(s)for(var d=n.child;d!==null;)a|=d.lanes|d.childLanes,c|=d.subtreeFlags&14680064,c|=d.flags&14680064,d.return=n,d=d.sibling;else for(d=n.child;d!==null;)a|=d.lanes|d.childLanes,c|=d.subtreeFlags,c|=d.flags,d.return=n,d=d.sibling;return n.subtreeFlags|=c,n.childLanes=a,s}function Zw(n,s,a){var c=s.pendingProps;switch(Dh(s),s.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Ft(s),null;case 1:return Zt(s.type)&&ou(),Ft(s),null;case 3:return c=s.stateNode,yo(),Xe(Jt),Xe(Mt),qh(),c.pendingContext&&(c.context=c.pendingContext,c.pendingContext=null),(n===null||n.child===null)&&(hu(s)?s.flags|=4:n===null||n.memoizedState.isDehydrated&&(s.flags&256)===0||(s.flags|=1024,Un!==null&&(wd(Un),Un=null))),cd(n,s),Ft(s),null;case 5:$h(s);var d=cs(ba.current);if(a=s.type,n!==null&&s.stateNode!=null)lg(n,s,a,c,d),n.ref!==s.ref&&(s.flags|=512,s.flags|=2097152);else{if(!c){if(s.stateNode===null)throw Error(t(166));return Ft(s),null}if(n=cs(rr.current),hu(s)){c=s.stateNode,a=s.type;var g=s.memoizedProps;switch(c[nr]=s,c[Ra]=g,n=(s.mode&1)!==0,a){case"dialog":Ye("cancel",c),Ye("close",c);break;case"iframe":case"object":case"embed":Ye("load",c);break;case"video":case"audio":for(d=0;d<Aa.length;d++)Ye(Aa[d],c);break;case"source":Ye("error",c);break;case"img":case"image":case"link":Ye("error",c),Ye("load",c);break;case"details":Ye("toggle",c);break;case"input":xs(c,g),Ye("invalid",c);break;case"select":c._wrapperState={wasMultiple:!!g.multiple},Ye("invalid",c);break;case"textarea":bs(c,g),Ye("invalid",c)}ia(a,g),d=null;for(var _ in g)if(g.hasOwnProperty(_)){var P=g[_];_==="children"?typeof P=="string"?c.textContent!==P&&(g.suppressHydrationWarning!==!0&&ru(c.textContent,P,n),d=["children",P]):typeof P=="number"&&c.textContent!==""+P&&(g.suppressHydrationWarning!==!0&&ru(c.textContent,P,n),d=["children",""+P]):o.hasOwnProperty(_)&&P!=null&&_==="onScroll"&&Ye("scroll",c)}switch(a){case"input":Qt(c),kl(c,g,!0);break;case"textarea":Qt(c),Zo(c);break;case"select":case"option":break;default:typeof g.onClick=="function"&&(c.onclick=iu)}c=d,s.updateQueue=c,c!==null&&(s.flags|=4)}else{_=d.nodeType===9?d:d.ownerDocument,n==="http://www.w3.org/1999/xhtml"&&(n=yt(a)),n==="http://www.w3.org/1999/xhtml"?a==="script"?(n=_.createElement("div"),n.innerHTML="<script><\/script>",n=n.removeChild(n.firstChild)):typeof c.is=="string"?n=_.createElement(a,{is:c.is}):(n=_.createElement(a),a==="select"&&(_=n,c.multiple?_.multiple=!0:c.size&&(_.size=c.size))):n=_.createElementNS(n,a),n[nr]=s,n[Ra]=c,ag(n,s,!1,!1),s.stateNode=n;e:{switch(_=sa(a,c),a){case"dialog":Ye("cancel",n),Ye("close",n),d=c;break;case"iframe":case"object":case"embed":Ye("load",n),d=c;break;case"video":case"audio":for(d=0;d<Aa.length;d++)Ye(Aa[d],n);d=c;break;case"source":Ye("error",n),d=c;break;case"img":case"image":case"link":Ye("error",n),Ye("load",n),d=c;break;case"details":Ye("toggle",n),d=c;break;case"input":xs(n,c),d=$i(n,c),Ye("invalid",n);break;case"option":d=c;break;case"select":n._wrapperState={wasMultiple:!!c.multiple},d=le({},c,{value:void 0}),Ye("invalid",n);break;case"textarea":bs(n,c),d=Jo(n,c),Ye("invalid",n);break;default:d=c}ia(a,d),P=d;for(g in P)if(P.hasOwnProperty(g)){var N=P[g];g==="style"?na(n,N):g==="dangerouslySetInnerHTML"?(N=N?N.__html:void 0,N!=null&&ea(n,N)):g==="children"?typeof N=="string"?(a!=="textarea"||N!=="")&&qr(n,N):typeof N=="number"&&qr(n,""+N):g!=="suppressContentEditableWarning"&&g!=="suppressHydrationWarning"&&g!=="autoFocus"&&(o.hasOwnProperty(g)?N!=null&&g==="onScroll"&&Ye("scroll",n):N!=null&&re(n,g,N,_))}switch(a){case"input":Qt(n),kl(n,c,!1);break;case"textarea":Qt(n),Zo(n);break;case"option":c.value!=null&&n.setAttribute("value",""+Ce(c.value));break;case"select":n.multiple=!!c.multiple,g=c.value,g!=null?yr(n,!!c.multiple,g,!1):c.defaultValue!=null&&yr(n,!!c.multiple,c.defaultValue,!0);break;default:typeof d.onClick=="function"&&(n.onclick=iu)}switch(a){case"button":case"input":case"select":case"textarea":c=!!c.autoFocus;break e;case"img":c=!0;break e;default:c=!1}}c&&(s.flags|=4)}s.ref!==null&&(s.flags|=512,s.flags|=2097152)}return Ft(s),null;case 6:if(n&&s.stateNode!=null)ug(n,s,n.memoizedProps,c);else{if(typeof c!="string"&&s.stateNode===null)throw Error(t(166));if(a=cs(ba.current),cs(rr.current),hu(s)){if(c=s.stateNode,a=s.memoizedProps,c[nr]=s,(g=c.nodeValue!==a)&&(n=dn,n!==null))switch(n.tag){case 3:ru(c.nodeValue,a,(n.mode&1)!==0);break;case 5:n.memoizedProps.suppressHydrationWarning!==!0&&ru(c.nodeValue,a,(n.mode&1)!==0)}g&&(s.flags|=4)}else c=(a.nodeType===9?a:a.ownerDocument).createTextNode(c),c[nr]=s,s.stateNode=c}return Ft(s),null;case 13:if(Xe(et),c=s.memoizedState,n===null||n.memoizedState!==null&&n.memoizedState.dehydrated!==null){if(Ze&&fn!==null&&(s.mode&1)!==0&&(s.flags&128)===0)dm(),fo(),s.flags|=98560,g=!1;else if(g=hu(s),c!==null&&c.dehydrated!==null){if(n===null){if(!g)throw Error(t(318));if(g=s.memoizedState,g=g!==null?g.dehydrated:null,!g)throw Error(t(317));g[nr]=s}else fo(),(s.flags&128)===0&&(s.memoizedState=null),s.flags|=4;Ft(s),g=!1}else Un!==null&&(wd(Un),Un=null),g=!0;if(!g)return s.flags&65536?s:null}return(s.flags&128)!==0?(s.lanes=a,s):(c=c!==null,c!==(n!==null&&n.memoizedState!==null)&&c&&(s.child.flags|=8192,(s.mode&1)!==0&&(n===null||(et.current&1)!==0?wt===0&&(wt=3):Sd())),s.updateQueue!==null&&(s.flags|=4),Ft(s),null);case 4:return yo(),cd(n,s),n===null&&Pa(s.stateNode.containerInfo),Ft(s),null;case 10:return jh(s.type._context),Ft(s),null;case 17:return Zt(s.type)&&ou(),Ft(s),null;case 19:if(Xe(et),g=s.memoizedState,g===null)return Ft(s),null;if(c=(s.flags&128)!==0,_=g.rendering,_===null)if(c)ja(g,!1);else{if(wt!==0||n!==null&&(n.flags&128)!==0)for(n=s.child;n!==null;){if(_=yu(n),_!==null){for(s.flags|=128,ja(g,!1),c=_.updateQueue,c!==null&&(s.updateQueue=c,s.flags|=4),s.subtreeFlags=0,c=a,a=s.child;a!==null;)g=a,n=c,g.flags&=14680066,_=g.alternate,_===null?(g.childLanes=0,g.lanes=n,g.child=null,g.subtreeFlags=0,g.memoizedProps=null,g.memoizedState=null,g.updateQueue=null,g.dependencies=null,g.stateNode=null):(g.childLanes=_.childLanes,g.lanes=_.lanes,g.child=_.child,g.subtreeFlags=0,g.deletions=null,g.memoizedProps=_.memoizedProps,g.memoizedState=_.memoizedState,g.updateQueue=_.updateQueue,g.type=_.type,n=_.dependencies,g.dependencies=n===null?null:{lanes:n.lanes,firstContext:n.firstContext}),a=a.sibling;return Ke(et,et.current&1|2),s.child}n=n.sibling}g.tail!==null&&Ge()>wo&&(s.flags|=128,c=!0,ja(g,!1),s.lanes=4194304)}else{if(!c)if(n=yu(_),n!==null){if(s.flags|=128,c=!0,a=n.updateQueue,a!==null&&(s.updateQueue=a,s.flags|=4),ja(g,!0),g.tail===null&&g.tailMode==="hidden"&&!_.alternate&&!Ze)return Ft(s),null}else 2*Ge()-g.renderingStartTime>wo&&a!==1073741824&&(s.flags|=128,c=!0,ja(g,!1),s.lanes=4194304);g.isBackwards?(_.sibling=s.child,s.child=_):(a=g.last,a!==null?a.sibling=_:s.child=_,g.last=_)}return g.tail!==null?(s=g.tail,g.rendering=s,g.tail=s.sibling,g.renderingStartTime=Ge(),s.sibling=null,a=et.current,Ke(et,c?a&1|2:a&1),s):(Ft(s),null);case 22:case 23:return Id(),c=s.memoizedState!==null,n!==null&&n.memoizedState!==null!==c&&(s.flags|=8192),c&&(s.mode&1)!==0?(pn&1073741824)!==0&&(Ft(s),s.subtreeFlags&6&&(s.flags|=8192)):Ft(s),null;case 24:return null;case 25:return null}throw Error(t(156,s.tag))}function e0(n,s){switch(Dh(s),s.tag){case 1:return Zt(s.type)&&ou(),n=s.flags,n&65536?(s.flags=n&-65537|128,s):null;case 3:return yo(),Xe(Jt),Xe(Mt),qh(),n=s.flags,(n&65536)!==0&&(n&128)===0?(s.flags=n&-65537|128,s):null;case 5:return $h(s),null;case 13:if(Xe(et),n=s.memoizedState,n!==null&&n.dehydrated!==null){if(s.alternate===null)throw Error(t(340));fo()}return n=s.flags,n&65536?(s.flags=n&-65537|128,s):null;case 19:return Xe(et),null;case 4:return yo(),null;case 10:return jh(s.type._context),null;case 22:case 23:return Id(),null;case 24:return null;default:return null}}var Pu=!1,Ut=!1,t0=typeof WeakSet=="function"?WeakSet:Set,de=null;function _o(n,s){var a=n.ref;if(a!==null)if(typeof a=="function")try{a(null)}catch(c){it(n,s,c)}else a.current=null}function hd(n,s,a){try{a()}catch(c){it(n,s,c)}}var cg=!1;function n0(n,s){if(Ih=Zr,n=zp(),mh(n)){if("selectionStart"in n)var a={start:n.selectionStart,end:n.selectionEnd};else e:{a=(a=n.ownerDocument)&&a.defaultView||window;var c=a.getSelection&&a.getSelection();if(c&&c.rangeCount!==0){a=c.anchorNode;var d=c.anchorOffset,g=c.focusNode;c=c.focusOffset;try{a.nodeType,g.nodeType}catch{a=null;break e}var _=0,P=-1,N=-1,$=0,J=0,Z=n,X=null;t:for(;;){for(var ce;Z!==a||d!==0&&Z.nodeType!==3||(P=_+d),Z!==g||c!==0&&Z.nodeType!==3||(N=_+c),Z.nodeType===3&&(_+=Z.nodeValue.length),(ce=Z.firstChild)!==null;)X=Z,Z=ce;for(;;){if(Z===n)break t;if(X===a&&++$===d&&(P=_),X===g&&++J===c&&(N=_),(ce=Z.nextSibling)!==null)break;Z=X,X=Z.parentNode}Z=ce}a=P===-1||N===-1?null:{start:P,end:N}}else a=null}a=a||{start:0,end:0}}else a=null;for(Sh={focusedElem:n,selectionRange:a},Zr=!1,de=s;de!==null;)if(s=de,n=s.child,(s.subtreeFlags&1028)!==0&&n!==null)n.return=s,de=n;else for(;de!==null;){s=de;try{var fe=s.alternate;if((s.flags&1024)!==0)switch(s.tag){case 0:case 11:case 15:break;case 1:if(fe!==null){var pe=fe.memoizedProps,ut=fe.memoizedState,U=s.stateNode,D=U.getSnapshotBeforeUpdate(s.elementType===s.type?pe:Bn(s.type,pe),ut);U.__reactInternalSnapshotBeforeUpdate=D}break;case 3:var B=s.stateNode.containerInfo;B.nodeType===1?B.textContent="":B.nodeType===9&&B.documentElement&&B.removeChild(B.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(t(163))}}catch(te){it(s,s.return,te)}if(n=s.sibling,n!==null){n.return=s.return,de=n;break}de=s.return}return fe=cg,cg=!1,fe}function Fa(n,s,a){var c=s.updateQueue;if(c=c!==null?c.lastEffect:null,c!==null){var d=c=c.next;do{if((d.tag&n)===n){var g=d.destroy;d.destroy=void 0,g!==void 0&&hd(s,a,g)}d=d.next}while(d!==c)}}function Cu(n,s){if(s=s.updateQueue,s=s!==null?s.lastEffect:null,s!==null){var a=s=s.next;do{if((a.tag&n)===n){var c=a.create;a.destroy=c()}a=a.next}while(a!==s)}}function dd(n){var s=n.ref;if(s!==null){var a=n.stateNode;switch(n.tag){case 5:n=a;break;default:n=a}typeof s=="function"?s(n):s.current=n}}function hg(n){var s=n.alternate;s!==null&&(n.alternate=null,hg(s)),n.child=null,n.deletions=null,n.sibling=null,n.tag===5&&(s=n.stateNode,s!==null&&(delete s[nr],delete s[Ra],delete s[Rh],delete s[jw],delete s[Fw])),n.stateNode=null,n.return=null,n.dependencies=null,n.memoizedProps=null,n.memoizedState=null,n.pendingProps=null,n.stateNode=null,n.updateQueue=null}function dg(n){return n.tag===5||n.tag===3||n.tag===4}function fg(n){e:for(;;){for(;n.sibling===null;){if(n.return===null||dg(n.return))return null;n=n.return}for(n.sibling.return=n.return,n=n.sibling;n.tag!==5&&n.tag!==6&&n.tag!==18;){if(n.flags&2||n.child===null||n.tag===4)continue e;n.child.return=n,n=n.child}if(!(n.flags&2))return n.stateNode}}function fd(n,s,a){var c=n.tag;if(c===5||c===6)n=n.stateNode,s?a.nodeType===8?a.parentNode.insertBefore(n,s):a.insertBefore(n,s):(a.nodeType===8?(s=a.parentNode,s.insertBefore(n,a)):(s=a,s.appendChild(n)),a=a._reactRootContainer,a!=null||s.onclick!==null||(s.onclick=iu));else if(c!==4&&(n=n.child,n!==null))for(fd(n,s,a),n=n.sibling;n!==null;)fd(n,s,a),n=n.sibling}function pd(n,s,a){var c=n.tag;if(c===5||c===6)n=n.stateNode,s?a.insertBefore(n,s):a.appendChild(n);else if(c!==4&&(n=n.child,n!==null))for(pd(n,s,a),n=n.sibling;n!==null;)pd(n,s,a),n=n.sibling}var Dt=null,zn=!1;function li(n,s,a){for(a=a.child;a!==null;)pg(n,s,a),a=a.sibling}function pg(n,s,a){if(ln&&typeof ln.onCommitFiberUnmount=="function")try{ln.onCommitFiberUnmount(Ji,a)}catch{}switch(a.tag){case 5:Ut||_o(a,s);case 6:var c=Dt,d=zn;Dt=null,li(n,s,a),Dt=c,zn=d,Dt!==null&&(zn?(n=Dt,a=a.stateNode,n.nodeType===8?n.parentNode.removeChild(a):n.removeChild(a)):Dt.removeChild(a.stateNode));break;case 18:Dt!==null&&(zn?(n=Dt,a=a.stateNode,n.nodeType===8?Ch(n.parentNode,a):n.nodeType===1&&Ch(n,a),Mn(n)):Ch(Dt,a.stateNode));break;case 4:c=Dt,d=zn,Dt=a.stateNode.containerInfo,zn=!0,li(n,s,a),Dt=c,zn=d;break;case 0:case 11:case 14:case 15:if(!Ut&&(c=a.updateQueue,c!==null&&(c=c.lastEffect,c!==null))){d=c=c.next;do{var g=d,_=g.destroy;g=g.tag,_!==void 0&&((g&2)!==0||(g&4)!==0)&&hd(a,s,_),d=d.next}while(d!==c)}li(n,s,a);break;case 1:if(!Ut&&(_o(a,s),c=a.stateNode,typeof c.componentWillUnmount=="function"))try{c.props=a.memoizedProps,c.state=a.memoizedState,c.componentWillUnmount()}catch(P){it(a,s,P)}li(n,s,a);break;case 21:li(n,s,a);break;case 22:a.mode&1?(Ut=(c=Ut)||a.memoizedState!==null,li(n,s,a),Ut=c):li(n,s,a);break;default:li(n,s,a)}}function mg(n){var s=n.updateQueue;if(s!==null){n.updateQueue=null;var a=n.stateNode;a===null&&(a=n.stateNode=new t0),s.forEach(function(c){var d=h0.bind(null,n,c);a.has(c)||(a.add(c),c.then(d,d))})}}function $n(n,s){var a=s.deletions;if(a!==null)for(var c=0;c<a.length;c++){var d=a[c];try{var g=n,_=s,P=_;e:for(;P!==null;){switch(P.tag){case 5:Dt=P.stateNode,zn=!1;break e;case 3:Dt=P.stateNode.containerInfo,zn=!0;break e;case 4:Dt=P.stateNode.containerInfo,zn=!0;break e}P=P.return}if(Dt===null)throw Error(t(160));pg(g,_,d),Dt=null,zn=!1;var N=d.alternate;N!==null&&(N.return=null),d.return=null}catch($){it(d,s,$)}}if(s.subtreeFlags&12854)for(s=s.child;s!==null;)gg(s,n),s=s.sibling}function gg(n,s){var a=n.alternate,c=n.flags;switch(n.tag){case 0:case 11:case 14:case 15:if($n(s,n),sr(n),c&4){try{Fa(3,n,n.return),Cu(3,n)}catch(pe){it(n,n.return,pe)}try{Fa(5,n,n.return)}catch(pe){it(n,n.return,pe)}}break;case 1:$n(s,n),sr(n),c&512&&a!==null&&_o(a,a.return);break;case 5:if($n(s,n),sr(n),c&512&&a!==null&&_o(a,a.return),n.flags&32){var d=n.stateNode;try{qr(d,"")}catch(pe){it(n,n.return,pe)}}if(c&4&&(d=n.stateNode,d!=null)){var g=n.memoizedProps,_=a!==null?a.memoizedProps:g,P=n.type,N=n.updateQueue;if(n.updateQueue=null,N!==null)try{P==="input"&&g.type==="radio"&&g.name!=null&&Yo(d,g),sa(P,_);var $=sa(P,g);for(_=0;_<N.length;_+=2){var J=N[_],Z=N[_+1];J==="style"?na(d,Z):J==="dangerouslySetInnerHTML"?ea(d,Z):J==="children"?qr(d,Z):re(d,J,Z,$)}switch(P){case"input":Xo(d,g);break;case"textarea":Vs(d,g);break;case"select":var X=d._wrapperState.wasMultiple;d._wrapperState.wasMultiple=!!g.multiple;var ce=g.value;ce!=null?yr(d,!!g.multiple,ce,!1):X!==!!g.multiple&&(g.defaultValue!=null?yr(d,!!g.multiple,g.defaultValue,!0):yr(d,!!g.multiple,g.multiple?[]:"",!1))}d[Ra]=g}catch(pe){it(n,n.return,pe)}}break;case 6:if($n(s,n),sr(n),c&4){if(n.stateNode===null)throw Error(t(162));d=n.stateNode,g=n.memoizedProps;try{d.nodeValue=g}catch(pe){it(n,n.return,pe)}}break;case 3:if($n(s,n),sr(n),c&4&&a!==null&&a.memoizedState.isDehydrated)try{Mn(s.containerInfo)}catch(pe){it(n,n.return,pe)}break;case 4:$n(s,n),sr(n);break;case 13:$n(s,n),sr(n),d=n.child,d.flags&8192&&(g=d.memoizedState!==null,d.stateNode.isHidden=g,!g||d.alternate!==null&&d.alternate.memoizedState!==null||(yd=Ge())),c&4&&mg(n);break;case 22:if(J=a!==null&&a.memoizedState!==null,n.mode&1?(Ut=($=Ut)||J,$n(s,n),Ut=$):$n(s,n),sr(n),c&8192){if($=n.memoizedState!==null,(n.stateNode.isHidden=$)&&!J&&(n.mode&1)!==0)for(de=n,J=n.child;J!==null;){for(Z=de=J;de!==null;){switch(X=de,ce=X.child,X.tag){case 0:case 11:case 14:case 15:Fa(4,X,X.return);break;case 1:_o(X,X.return);var fe=X.stateNode;if(typeof fe.componentWillUnmount=="function"){c=X,a=X.return;try{s=c,fe.props=s.memoizedProps,fe.state=s.memoizedState,fe.componentWillUnmount()}catch(pe){it(c,a,pe)}}break;case 5:_o(X,X.return);break;case 22:if(X.memoizedState!==null){_g(Z);continue}}ce!==null?(ce.return=X,de=ce):_g(Z)}J=J.sibling}e:for(J=null,Z=n;;){if(Z.tag===5){if(J===null){J=Z;try{d=Z.stateNode,$?(g=d.style,typeof g.setProperty=="function"?g.setProperty("display","none","important"):g.display="none"):(P=Z.stateNode,N=Z.memoizedProps.style,_=N!=null&&N.hasOwnProperty("display")?N.display:null,P.style.display=ta("display",_))}catch(pe){it(n,n.return,pe)}}}else if(Z.tag===6){if(J===null)try{Z.stateNode.nodeValue=$?"":Z.memoizedProps}catch(pe){it(n,n.return,pe)}}else if((Z.tag!==22&&Z.tag!==23||Z.memoizedState===null||Z===n)&&Z.child!==null){Z.child.return=Z,Z=Z.child;continue}if(Z===n)break e;for(;Z.sibling===null;){if(Z.return===null||Z.return===n)break e;J===Z&&(J=null),Z=Z.return}J===Z&&(J=null),Z.sibling.return=Z.return,Z=Z.sibling}}break;case 19:$n(s,n),sr(n),c&4&&mg(n);break;case 21:break;default:$n(s,n),sr(n)}}function sr(n){var s=n.flags;if(s&2){try{e:{for(var a=n.return;a!==null;){if(dg(a)){var c=a;break e}a=a.return}throw Error(t(160))}switch(c.tag){case 5:var d=c.stateNode;c.flags&32&&(qr(d,""),c.flags&=-33);var g=fg(n);pd(n,g,d);break;case 3:case 4:var _=c.stateNode.containerInfo,P=fg(n);fd(n,P,_);break;default:throw Error(t(161))}}catch(N){it(n,n.return,N)}n.flags&=-3}s&4096&&(n.flags&=-4097)}function r0(n,s,a){de=n,yg(n)}function yg(n,s,a){for(var c=(n.mode&1)!==0;de!==null;){var d=de,g=d.child;if(d.tag===22&&c){var _=d.memoizedState!==null||Pu;if(!_){var P=d.alternate,N=P!==null&&P.memoizedState!==null||Ut;P=Pu;var $=Ut;if(Pu=_,(Ut=N)&&!$)for(de=d;de!==null;)_=de,N=_.child,_.tag===22&&_.memoizedState!==null?Eg(d):N!==null?(N.return=_,de=N):Eg(d);for(;g!==null;)de=g,yg(g),g=g.sibling;de=d,Pu=P,Ut=$}vg(n)}else(d.subtreeFlags&8772)!==0&&g!==null?(g.return=d,de=g):vg(n)}}function vg(n){for(;de!==null;){var s=de;if((s.flags&8772)!==0){var a=s.alternate;try{if((s.flags&8772)!==0)switch(s.tag){case 0:case 11:case 15:Ut||Cu(5,s);break;case 1:var c=s.stateNode;if(s.flags&4&&!Ut)if(a===null)c.componentDidMount();else{var d=s.elementType===s.type?a.memoizedProps:Bn(s.type,a.memoizedProps);c.componentDidUpdate(d,a.memoizedState,c.__reactInternalSnapshotBeforeUpdate)}var g=s.updateQueue;g!==null&&_m(s,g,c);break;case 3:var _=s.updateQueue;if(_!==null){if(a=null,s.child!==null)switch(s.child.tag){case 5:a=s.child.stateNode;break;case 1:a=s.child.stateNode}_m(s,_,a)}break;case 5:var P=s.stateNode;if(a===null&&s.flags&4){a=P;var N=s.memoizedProps;switch(s.type){case"button":case"input":case"select":case"textarea":N.autoFocus&&a.focus();break;case"img":N.src&&(a.src=N.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(s.memoizedState===null){var $=s.alternate;if($!==null){var J=$.memoizedState;if(J!==null){var Z=J.dehydrated;Z!==null&&Mn(Z)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(t(163))}Ut||s.flags&512&&dd(s)}catch(X){it(s,s.return,X)}}if(s===n){de=null;break}if(a=s.sibling,a!==null){a.return=s.return,de=a;break}de=s.return}}function _g(n){for(;de!==null;){var s=de;if(s===n){de=null;break}var a=s.sibling;if(a!==null){a.return=s.return,de=a;break}de=s.return}}function Eg(n){for(;de!==null;){var s=de;try{switch(s.tag){case 0:case 11:case 15:var a=s.return;try{Cu(4,s)}catch(N){it(s,a,N)}break;case 1:var c=s.stateNode;if(typeof c.componentDidMount=="function"){var d=s.return;try{c.componentDidMount()}catch(N){it(s,d,N)}}var g=s.return;try{dd(s)}catch(N){it(s,g,N)}break;case 5:var _=s.return;try{dd(s)}catch(N){it(s,_,N)}}}catch(N){it(s,s.return,N)}if(s===n){de=null;break}var P=s.sibling;if(P!==null){P.return=s.return,de=P;break}de=s.return}}var i0=Math.ceil,Ru=ye.ReactCurrentDispatcher,md=ye.ReactCurrentOwner,Sn=ye.ReactCurrentBatchConfig,je=0,Ct=null,ft=null,bt=0,pn=0,Eo=ri(0),wt=0,Ua=null,ds=0,ku=0,gd=0,Ba=null,tn=null,yd=0,wo=1/0,Dr=null,Nu=!1,vd=null,ui=null,xu=!1,ci=null,Du=0,za=0,_d=null,bu=-1,Vu=0;function Kt(){return(je&6)!==0?Ge():bu!==-1?bu:bu=Ge()}function hi(n){return(n.mode&1)===0?1:(je&2)!==0&&bt!==0?bt&-bt:Bw.transition!==null?(Vu===0&&(Vu=es()),Vu):(n=Oe,n!==0||(n=window.event,n=n===void 0?16:ga(n.type)),n)}function Wn(n,s,a,c){if(50<za)throw za=0,_d=null,Error(t(185));Qr(n,a,c),((je&2)===0||n!==Ct)&&(n===Ct&&((je&2)===0&&(ku|=a),wt===4&&di(n,bt)),nn(n,c),a===1&&je===0&&(s.mode&1)===0&&(wo=Ge()+500,lu&&si()))}function nn(n,s){var a=n.callbackNode;Er(n,s);var c=Zi(n,n===Ct?bt:0);if(c===0)a!==null&&ha(a),n.callbackNode=null,n.callbackPriority=0;else if(s=c&-c,n.callbackPriority!==s){if(a!=null&&ha(a),s===1)n.tag===0?Uw(Tg.bind(null,n)):am(Tg.bind(null,n)),Lw(function(){(je&6)===0&&si()}),a=null;else{switch(Xr(c)){case 1:a=Xi;break;case 4:a=Hr;break;case 16:a=yn;break;case 536870912:a=Vl;break;default:a=yn}a=Ng(a,wg.bind(null,n))}n.callbackPriority=s,n.callbackNode=a}}function wg(n,s){if(bu=-1,Vu=0,(je&6)!==0)throw Error(t(327));var a=n.callbackNode;if(To()&&n.callbackNode!==a)return null;var c=Zi(n,n===Ct?bt:0);if(c===0)return null;if((c&30)!==0||(c&n.expiredLanes)!==0||s)s=Ou(n,c);else{s=c;var d=je;je|=2;var g=Sg();(Ct!==n||bt!==s)&&(Dr=null,wo=Ge()+500,ps(n,s));do try{a0();break}catch(P){Ig(n,P)}while(!0);Mh(),Ru.current=g,je=d,ft!==null?s=0:(Ct=null,bt=0,s=wt)}if(s!==0){if(s===2&&(d=un(n),d!==0&&(c=d,s=Ed(n,d))),s===1)throw a=Ua,ps(n,0),di(n,c),nn(n,Ge()),a;if(s===6)di(n,c);else{if(d=n.current.alternate,(c&30)===0&&!s0(d)&&(s=Ou(n,c),s===2&&(g=un(n),g!==0&&(c=g,s=Ed(n,g))),s===1))throw a=Ua,ps(n,0),di(n,c),nn(n,Ge()),a;switch(n.finishedWork=d,n.finishedLanes=c,s){case 0:case 1:throw Error(t(345));case 2:ms(n,tn,Dr);break;case 3:if(di(n,c),(c&130023424)===c&&(s=yd+500-Ge(),10<s)){if(Zi(n,0)!==0)break;if(d=n.suspendedLanes,(d&c)!==c){Kt(),n.pingedLanes|=n.suspendedLanes&d;break}n.timeoutHandle=Ph(ms.bind(null,n,tn,Dr),s);break}ms(n,tn,Dr);break;case 4:if(di(n,c),(c&4194240)===c)break;for(s=n.eventTimes,d=-1;0<c;){var _=31-qt(c);g=1<<_,_=s[_],_>d&&(d=_),c&=~g}if(c=d,c=Ge()-c,c=(120>c?120:480>c?480:1080>c?1080:1920>c?1920:3e3>c?3e3:4320>c?4320:1960*i0(c/1960))-c,10<c){n.timeoutHandle=Ph(ms.bind(null,n,tn,Dr),c);break}ms(n,tn,Dr);break;case 5:ms(n,tn,Dr);break;default:throw Error(t(329))}}}return nn(n,Ge()),n.callbackNode===a?wg.bind(null,n):null}function Ed(n,s){var a=Ba;return n.current.memoizedState.isDehydrated&&(ps(n,s).flags|=256),n=Ou(n,s),n!==2&&(s=tn,tn=a,s!==null&&wd(s)),n}function wd(n){tn===null?tn=n:tn.push.apply(tn,n)}function s0(n){for(var s=n;;){if(s.flags&16384){var a=s.updateQueue;if(a!==null&&(a=a.stores,a!==null))for(var c=0;c<a.length;c++){var d=a[c],g=d.getSnapshot;d=d.value;try{if(!Fn(g(),d))return!1}catch{return!1}}}if(a=s.child,s.subtreeFlags&16384&&a!==null)a.return=s,s=a;else{if(s===n)break;for(;s.sibling===null;){if(s.return===null||s.return===n)return!0;s=s.return}s.sibling.return=s.return,s=s.sibling}}return!0}function di(n,s){for(s&=~gd,s&=~ku,n.suspendedLanes|=s,n.pingedLanes&=~s,n=n.expirationTimes;0<s;){var a=31-qt(s),c=1<<a;n[a]=-1,s&=~c}}function Tg(n){if((je&6)!==0)throw Error(t(327));To();var s=Zi(n,0);if((s&1)===0)return nn(n,Ge()),null;var a=Ou(n,s);if(n.tag!==0&&a===2){var c=un(n);c!==0&&(s=c,a=Ed(n,c))}if(a===1)throw a=Ua,ps(n,0),di(n,s),nn(n,Ge()),a;if(a===6)throw Error(t(345));return n.finishedWork=n.current.alternate,n.finishedLanes=s,ms(n,tn,Dr),nn(n,Ge()),null}function Td(n,s){var a=je;je|=1;try{return n(s)}finally{je=a,je===0&&(wo=Ge()+500,lu&&si())}}function fs(n){ci!==null&&ci.tag===0&&(je&6)===0&&To();var s=je;je|=1;var a=Sn.transition,c=Oe;try{if(Sn.transition=null,Oe=1,n)return n()}finally{Oe=c,Sn.transition=a,je=s,(je&6)===0&&si()}}function Id(){pn=Eo.current,Xe(Eo)}function ps(n,s){n.finishedWork=null,n.finishedLanes=0;var a=n.timeoutHandle;if(a!==-1&&(n.timeoutHandle=-1,Ow(a)),ft!==null)for(a=ft.return;a!==null;){var c=a;switch(Dh(c),c.tag){case 1:c=c.type.childContextTypes,c!=null&&ou();break;case 3:yo(),Xe(Jt),Xe(Mt),qh();break;case 5:$h(c);break;case 4:yo();break;case 13:Xe(et);break;case 19:Xe(et);break;case 10:jh(c.type._context);break;case 22:case 23:Id()}a=a.return}if(Ct=n,ft=n=fi(n.current,null),bt=pn=s,wt=0,Ua=null,gd=ku=ds=0,tn=Ba=null,us!==null){for(s=0;s<us.length;s++)if(a=us[s],c=a.interleaved,c!==null){a.interleaved=null;var d=c.next,g=a.pending;if(g!==null){var _=g.next;g.next=d,c.next=_}a.pending=c}us=null}return n}function Ig(n,s){do{var a=ft;try{if(Mh(),vu.current=Tu,_u){for(var c=tt.memoizedState;c!==null;){var d=c.queue;d!==null&&(d.pending=null),c=c.next}_u=!1}if(hs=0,Pt=Et=tt=null,Va=!1,Oa=0,md.current=null,a===null||a.return===null){wt=1,Ua=s,ft=null;break}e:{var g=n,_=a.return,P=a,N=s;if(s=bt,P.flags|=32768,N!==null&&typeof N=="object"&&typeof N.then=="function"){var $=N,J=P,Z=J.tag;if((J.mode&1)===0&&(Z===0||Z===11||Z===15)){var X=J.alternate;X?(J.updateQueue=X.updateQueue,J.memoizedState=X.memoizedState,J.lanes=X.lanes):(J.updateQueue=null,J.memoizedState=null)}var ce=Km(_);if(ce!==null){ce.flags&=-257,Qm(ce,_,P,g,s),ce.mode&1&&Gm(g,$,s),s=ce,N=$;var fe=s.updateQueue;if(fe===null){var pe=new Set;pe.add(N),s.updateQueue=pe}else fe.add(N);break e}else{if((s&1)===0){Gm(g,$,s),Sd();break e}N=Error(t(426))}}else if(Ze&&P.mode&1){var ut=Km(_);if(ut!==null){(ut.flags&65536)===0&&(ut.flags|=256),Qm(ut,_,P,g,s),Oh(vo(N,P));break e}}g=N=vo(N,P),wt!==4&&(wt=2),Ba===null?Ba=[g]:Ba.push(g),g=_;do{switch(g.tag){case 3:g.flags|=65536,s&=-s,g.lanes|=s;var U=qm(g,N,s);vm(g,U);break e;case 1:P=N;var D=g.type,B=g.stateNode;if((g.flags&128)===0&&(typeof D.getDerivedStateFromError=="function"||B!==null&&typeof B.componentDidCatch=="function"&&(ui===null||!ui.has(B)))){g.flags|=65536,s&=-s,g.lanes|=s;var te=Hm(g,P,s);vm(g,te);break e}}g=g.return}while(g!==null)}Pg(a)}catch(ge){s=ge,ft===a&&a!==null&&(ft=a=a.return);continue}break}while(!0)}function Sg(){var n=Ru.current;return Ru.current=Tu,n===null?Tu:n}function Sd(){(wt===0||wt===3||wt===2)&&(wt=4),Ct===null||(ds&268435455)===0&&(ku&268435455)===0||di(Ct,bt)}function Ou(n,s){var a=je;je|=2;var c=Sg();(Ct!==n||bt!==s)&&(Dr=null,ps(n,s));do try{o0();break}catch(d){Ig(n,d)}while(!0);if(Mh(),je=a,Ru.current=c,ft!==null)throw Error(t(261));return Ct=null,bt=0,wt}function o0(){for(;ft!==null;)Ag(ft)}function a0(){for(;ft!==null&&!Dl();)Ag(ft)}function Ag(n){var s=kg(n.alternate,n,pn);n.memoizedProps=n.pendingProps,s===null?Pg(n):ft=s,md.current=null}function Pg(n){var s=n;do{var a=s.alternate;if(n=s.return,(s.flags&32768)===0){if(a=Zw(a,s,pn),a!==null){ft=a;return}}else{if(a=e0(a,s),a!==null){a.flags&=32767,ft=a;return}if(n!==null)n.flags|=32768,n.subtreeFlags=0,n.deletions=null;else{wt=6,ft=null;return}}if(s=s.sibling,s!==null){ft=s;return}ft=s=n}while(s!==null);wt===0&&(wt=5)}function ms(n,s,a){var c=Oe,d=Sn.transition;try{Sn.transition=null,Oe=1,l0(n,s,a,c)}finally{Sn.transition=d,Oe=c}return null}function l0(n,s,a,c){do To();while(ci!==null);if((je&6)!==0)throw Error(t(327));a=n.finishedWork;var d=n.finishedLanes;if(a===null)return null;if(n.finishedWork=null,n.finishedLanes=0,a===n.current)throw Error(t(177));n.callbackNode=null,n.callbackPriority=0;var g=a.lanes|a.childLanes;if(We(n,g),n===Ct&&(ft=Ct=null,bt=0),(a.subtreeFlags&2064)===0&&(a.flags&2064)===0||xu||(xu=!0,Ng(yn,function(){return To(),null})),g=(a.flags&15990)!==0,(a.subtreeFlags&15990)!==0||g){g=Sn.transition,Sn.transition=null;var _=Oe;Oe=1;var P=je;je|=4,md.current=null,n0(n,a),gg(a,n),Rw(Sh),Zr=!!Ih,Sh=Ih=null,n.current=a,r0(a),ah(),je=P,Oe=_,Sn.transition=g}else n.current=a;if(xu&&(xu=!1,ci=n,Du=d),g=n.pendingLanes,g===0&&(ui=null),Ol(a.stateNode),nn(n,Ge()),s!==null)for(c=n.onRecoverableError,a=0;a<s.length;a++)d=s[a],c(d.value,{componentStack:d.stack,digest:d.digest});if(Nu)throw Nu=!1,n=vd,vd=null,n;return(Du&1)!==0&&n.tag!==0&&To(),g=n.pendingLanes,(g&1)!==0?n===_d?za++:(za=0,_d=n):za=0,si(),null}function To(){if(ci!==null){var n=Xr(Du),s=Sn.transition,a=Oe;try{if(Sn.transition=null,Oe=16>n?16:n,ci===null)var c=!1;else{if(n=ci,ci=null,Du=0,(je&6)!==0)throw Error(t(331));var d=je;for(je|=4,de=n.current;de!==null;){var g=de,_=g.child;if((de.flags&16)!==0){var P=g.deletions;if(P!==null){for(var N=0;N<P.length;N++){var $=P[N];for(de=$;de!==null;){var J=de;switch(J.tag){case 0:case 11:case 15:Fa(8,J,g)}var Z=J.child;if(Z!==null)Z.return=J,de=Z;else for(;de!==null;){J=de;var X=J.sibling,ce=J.return;if(hg(J),J===$){de=null;break}if(X!==null){X.return=ce,de=X;break}de=ce}}}var fe=g.alternate;if(fe!==null){var pe=fe.child;if(pe!==null){fe.child=null;do{var ut=pe.sibling;pe.sibling=null,pe=ut}while(pe!==null)}}de=g}}if((g.subtreeFlags&2064)!==0&&_!==null)_.return=g,de=_;else e:for(;de!==null;){if(g=de,(g.flags&2048)!==0)switch(g.tag){case 0:case 11:case 15:Fa(9,g,g.return)}var U=g.sibling;if(U!==null){U.return=g.return,de=U;break e}de=g.return}}var D=n.current;for(de=D;de!==null;){_=de;var B=_.child;if((_.subtreeFlags&2064)!==0&&B!==null)B.return=_,de=B;else e:for(_=D;de!==null;){if(P=de,(P.flags&2048)!==0)try{switch(P.tag){case 0:case 11:case 15:Cu(9,P)}}catch(ge){it(P,P.return,ge)}if(P===_){de=null;break e}var te=P.sibling;if(te!==null){te.return=P.return,de=te;break e}de=P.return}}if(je=d,si(),ln&&typeof ln.onPostCommitFiberRoot=="function")try{ln.onPostCommitFiberRoot(Ji,n)}catch{}c=!0}return c}finally{Oe=a,Sn.transition=s}}return!1}function Cg(n,s,a){s=vo(a,s),s=qm(n,s,1),n=ai(n,s,1),s=Kt(),n!==null&&(Qr(n,1,s),nn(n,s))}function it(n,s,a){if(n.tag===3)Cg(n,n,a);else for(;s!==null;){if(s.tag===3){Cg(s,n,a);break}else if(s.tag===1){var c=s.stateNode;if(typeof s.type.getDerivedStateFromError=="function"||typeof c.componentDidCatch=="function"&&(ui===null||!ui.has(c))){n=vo(a,n),n=Hm(s,n,1),s=ai(s,n,1),n=Kt(),s!==null&&(Qr(s,1,n),nn(s,n));break}}s=s.return}}function u0(n,s,a){var c=n.pingCache;c!==null&&c.delete(s),s=Kt(),n.pingedLanes|=n.suspendedLanes&a,Ct===n&&(bt&a)===a&&(wt===4||wt===3&&(bt&130023424)===bt&&500>Ge()-yd?ps(n,0):gd|=a),nn(n,s)}function Rg(n,s){s===0&&((n.mode&1)===0?s=1:(s=Ws,Ws<<=1,(Ws&130023424)===0&&(Ws=4194304)));var a=Kt();n=kr(n,s),n!==null&&(Qr(n,s,a),nn(n,a))}function c0(n){var s=n.memoizedState,a=0;s!==null&&(a=s.retryLane),Rg(n,a)}function h0(n,s){var a=0;switch(n.tag){case 13:var c=n.stateNode,d=n.memoizedState;d!==null&&(a=d.retryLane);break;case 19:c=n.stateNode;break;default:throw Error(t(314))}c!==null&&c.delete(s),Rg(n,a)}var kg;kg=function(n,s,a){if(n!==null)if(n.memoizedProps!==s.pendingProps||Jt.current)en=!0;else{if((n.lanes&a)===0&&(s.flags&128)===0)return en=!1,Jw(n,s,a);en=(n.flags&131072)!==0}else en=!1,Ze&&(s.flags&1048576)!==0&&lm(s,cu,s.index);switch(s.lanes=0,s.tag){case 2:var c=s.type;Au(n,s),n=s.pendingProps;var d=uo(s,Mt.current);go(s,a),d=Kh(null,s,c,n,d,a);var g=Qh();return s.flags|=1,typeof d=="object"&&d!==null&&typeof d.render=="function"&&d.$$typeof===void 0?(s.tag=1,s.memoizedState=null,s.updateQueue=null,Zt(c)?(g=!0,au(s)):g=!1,s.memoizedState=d.state!==null&&d.state!==void 0?d.state:null,Bh(s),d.updater=Iu,s.stateNode=d,d._reactInternals=s,td(s,c,n,a),s=sd(null,s,c,!0,g,a)):(s.tag=0,Ze&&g&&xh(s),Gt(null,s,d,a),s=s.child),s;case 16:c=s.elementType;e:{switch(Au(n,s),n=s.pendingProps,d=c._init,c=d(c._payload),s.type=c,d=s.tag=f0(c),n=Bn(c,n),d){case 0:s=id(null,s,c,n,a);break e;case 1:s=tg(null,s,c,n,a);break e;case 11:s=Ym(null,s,c,n,a);break e;case 14:s=Xm(null,s,c,Bn(c.type,n),a);break e}throw Error(t(306,c,""))}return s;case 0:return c=s.type,d=s.pendingProps,d=s.elementType===c?d:Bn(c,d),id(n,s,c,d,a);case 1:return c=s.type,d=s.pendingProps,d=s.elementType===c?d:Bn(c,d),tg(n,s,c,d,a);case 3:e:{if(ng(s),n===null)throw Error(t(387));c=s.pendingProps,g=s.memoizedState,d=g.element,ym(n,s),gu(s,c,null,a);var _=s.memoizedState;if(c=_.element,g.isDehydrated)if(g={element:c,isDehydrated:!1,cache:_.cache,pendingSuspenseBoundaries:_.pendingSuspenseBoundaries,transitions:_.transitions},s.updateQueue.baseState=g,s.memoizedState=g,s.flags&256){d=vo(Error(t(423)),s),s=rg(n,s,c,a,d);break e}else if(c!==d){d=vo(Error(t(424)),s),s=rg(n,s,c,a,d);break e}else for(fn=ni(s.stateNode.containerInfo.firstChild),dn=s,Ze=!0,Un=null,a=mm(s,null,c,a),s.child=a;a;)a.flags=a.flags&-3|4096,a=a.sibling;else{if(fo(),c===d){s=xr(n,s,a);break e}Gt(n,s,c,a)}s=s.child}return s;case 5:return Em(s),n===null&&Vh(s),c=s.type,d=s.pendingProps,g=n!==null?n.memoizedProps:null,_=d.children,Ah(c,d)?_=null:g!==null&&Ah(c,g)&&(s.flags|=32),eg(n,s),Gt(n,s,_,a),s.child;case 6:return n===null&&Vh(s),null;case 13:return ig(n,s,a);case 4:return zh(s,s.stateNode.containerInfo),c=s.pendingProps,n===null?s.child=po(s,null,c,a):Gt(n,s,c,a),s.child;case 11:return c=s.type,d=s.pendingProps,d=s.elementType===c?d:Bn(c,d),Ym(n,s,c,d,a);case 7:return Gt(n,s,s.pendingProps,a),s.child;case 8:return Gt(n,s,s.pendingProps.children,a),s.child;case 12:return Gt(n,s,s.pendingProps.children,a),s.child;case 10:e:{if(c=s.type._context,d=s.pendingProps,g=s.memoizedProps,_=d.value,Ke(fu,c._currentValue),c._currentValue=_,g!==null)if(Fn(g.value,_)){if(g.children===d.children&&!Jt.current){s=xr(n,s,a);break e}}else for(g=s.child,g!==null&&(g.return=s);g!==null;){var P=g.dependencies;if(P!==null){_=g.child;for(var N=P.firstContext;N!==null;){if(N.context===c){if(g.tag===1){N=Nr(-1,a&-a),N.tag=2;var $=g.updateQueue;if($!==null){$=$.shared;var J=$.pending;J===null?N.next=N:(N.next=J.next,J.next=N),$.pending=N}}g.lanes|=a,N=g.alternate,N!==null&&(N.lanes|=a),Fh(g.return,a,s),P.lanes|=a;break}N=N.next}}else if(g.tag===10)_=g.type===s.type?null:g.child;else if(g.tag===18){if(_=g.return,_===null)throw Error(t(341));_.lanes|=a,P=_.alternate,P!==null&&(P.lanes|=a),Fh(_,a,s),_=g.sibling}else _=g.child;if(_!==null)_.return=g;else for(_=g;_!==null;){if(_===s){_=null;break}if(g=_.sibling,g!==null){g.return=_.return,_=g;break}_=_.return}g=_}Gt(n,s,d.children,a),s=s.child}return s;case 9:return d=s.type,c=s.pendingProps.children,go(s,a),d=Tn(d),c=c(d),s.flags|=1,Gt(n,s,c,a),s.child;case 14:return c=s.type,d=Bn(c,s.pendingProps),d=Bn(c.type,d),Xm(n,s,c,d,a);case 15:return Jm(n,s,s.type,s.pendingProps,a);case 17:return c=s.type,d=s.pendingProps,d=s.elementType===c?d:Bn(c,d),Au(n,s),s.tag=1,Zt(c)?(n=!0,au(s)):n=!1,go(s,a),$m(s,c,d),td(s,c,d,a),sd(null,s,c,!0,n,a);case 19:return og(n,s,a);case 22:return Zm(n,s,a)}throw Error(t(156,s.tag))};function Ng(n,s){return zs(n,s)}function d0(n,s,a,c){this.tag=n,this.key=a,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=s,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=c,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function An(n,s,a,c){return new d0(n,s,a,c)}function Ad(n){return n=n.prototype,!(!n||!n.isReactComponent)}function f0(n){if(typeof n=="function")return Ad(n)?1:0;if(n!=null){if(n=n.$$typeof,n===M)return 11;if(n===rt)return 14}return 2}function fi(n,s){var a=n.alternate;return a===null?(a=An(n.tag,s,n.key,n.mode),a.elementType=n.elementType,a.type=n.type,a.stateNode=n.stateNode,a.alternate=n,n.alternate=a):(a.pendingProps=s,a.type=n.type,a.flags=0,a.subtreeFlags=0,a.deletions=null),a.flags=n.flags&14680064,a.childLanes=n.childLanes,a.lanes=n.lanes,a.child=n.child,a.memoizedProps=n.memoizedProps,a.memoizedState=n.memoizedState,a.updateQueue=n.updateQueue,s=n.dependencies,a.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext},a.sibling=n.sibling,a.index=n.index,a.ref=n.ref,a}function Lu(n,s,a,c,d,g){var _=2;if(c=n,typeof n=="function")Ad(n)&&(_=1);else if(typeof n=="string")_=5;else e:switch(n){case k:return gs(a.children,d,g,s);case A:_=8,d|=8;break;case C:return n=An(12,a,s,d|2),n.elementType=C,n.lanes=g,n;case R:return n=An(13,a,s,d),n.elementType=R,n.lanes=g,n;case He:return n=An(19,a,s,d),n.elementType=He,n.lanes=g,n;case Ue:return Mu(a,d,g,s);default:if(typeof n=="object"&&n!==null)switch(n.$$typeof){case x:_=10;break e;case b:_=9;break e;case M:_=11;break e;case rt:_=14;break e;case at:_=16,c=null;break e}throw Error(t(130,n==null?n:typeof n,""))}return s=An(_,a,s,d),s.elementType=n,s.type=c,s.lanes=g,s}function gs(n,s,a,c){return n=An(7,n,c,s),n.lanes=a,n}function Mu(n,s,a,c){return n=An(22,n,c,s),n.elementType=Ue,n.lanes=a,n.stateNode={isHidden:!1},n}function Pd(n,s,a){return n=An(6,n,null,s),n.lanes=a,n}function Cd(n,s,a){return s=An(4,n.children!==null?n.children:[],n.key,s),s.lanes=a,s.stateNode={containerInfo:n.containerInfo,pendingChildren:null,implementation:n.implementation},s}function p0(n,s,a,c,d){this.tag=s,this.containerInfo=n,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Kr(0),this.expirationTimes=Kr(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Kr(0),this.identifierPrefix=c,this.onRecoverableError=d,this.mutableSourceEagerHydrationData=null}function Rd(n,s,a,c,d,g,_,P,N){return n=new p0(n,s,a,P,N),s===1?(s=1,g===!0&&(s|=8)):s=0,g=An(3,null,null,s),n.current=g,g.stateNode=n,g.memoizedState={element:c,isDehydrated:a,cache:null,transitions:null,pendingSuspenseBoundaries:null},Bh(g),n}function m0(n,s,a){var c=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:ie,key:c==null?null:""+c,children:n,containerInfo:s,implementation:a}}function xg(n){if(!n)return ii;n=n._reactInternals;e:{if(Dn(n)!==n||n.tag!==1)throw Error(t(170));var s=n;do{switch(s.tag){case 3:s=s.stateNode.context;break e;case 1:if(Zt(s.type)){s=s.stateNode.__reactInternalMemoizedMergedChildContext;break e}}s=s.return}while(s!==null);throw Error(t(171))}if(n.tag===1){var a=n.type;if(Zt(a))return sm(n,a,s)}return s}function Dg(n,s,a,c,d,g,_,P,N){return n=Rd(a,c,!0,n,d,g,_,P,N),n.context=xg(null),a=n.current,c=Kt(),d=hi(a),g=Nr(c,d),g.callback=s??null,ai(a,g,d),n.current.lanes=d,Qr(n,d,c),nn(n,c),n}function ju(n,s,a,c){var d=s.current,g=Kt(),_=hi(d);return a=xg(a),s.context===null?s.context=a:s.pendingContext=a,s=Nr(g,_),s.payload={element:n},c=c===void 0?null:c,c!==null&&(s.callback=c),n=ai(d,s,_),n!==null&&(Wn(n,d,_,g),mu(n,d,_)),_}function Fu(n){if(n=n.current,!n.child)return null;switch(n.child.tag){case 5:return n.child.stateNode;default:return n.child.stateNode}}function bg(n,s){if(n=n.memoizedState,n!==null&&n.dehydrated!==null){var a=n.retryLane;n.retryLane=a!==0&&a<s?a:s}}function kd(n,s){bg(n,s),(n=n.alternate)&&bg(n,s)}function g0(){return null}var Vg=typeof reportError=="function"?reportError:function(n){console.error(n)};function Nd(n){this._internalRoot=n}Uu.prototype.render=Nd.prototype.render=function(n){var s=this._internalRoot;if(s===null)throw Error(t(409));ju(n,s,null,null)},Uu.prototype.unmount=Nd.prototype.unmount=function(){var n=this._internalRoot;if(n!==null){this._internalRoot=null;var s=n.containerInfo;fs(function(){ju(null,n,null,null)}),s[Ar]=null}};function Uu(n){this._internalRoot=n}Uu.prototype.unstable_scheduleHydration=function(n){if(n){var s=Ul();n={blockedOn:null,target:n,priority:s};for(var a=0;a<Jn.length&&s!==0&&s<Jn[a].priority;a++);Jn.splice(a,0,n),a===0&&$l(n)}};function xd(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11)}function Bu(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11&&(n.nodeType!==8||n.nodeValue!==" react-mount-point-unstable "))}function Og(){}function y0(n,s,a,c,d){if(d){if(typeof c=="function"){var g=c;c=function(){var $=Fu(_);g.call($)}}var _=Dg(s,c,n,0,null,!1,!1,"",Og);return n._reactRootContainer=_,n[Ar]=_.current,Pa(n.nodeType===8?n.parentNode:n),fs(),_}for(;d=n.lastChild;)n.removeChild(d);if(typeof c=="function"){var P=c;c=function(){var $=Fu(N);P.call($)}}var N=Rd(n,0,!1,null,null,!1,!1,"",Og);return n._reactRootContainer=N,n[Ar]=N.current,Pa(n.nodeType===8?n.parentNode:n),fs(function(){ju(s,N,a,c)}),N}function zu(n,s,a,c,d){var g=a._reactRootContainer;if(g){var _=g;if(typeof d=="function"){var P=d;d=function(){var N=Fu(_);P.call(N)}}ju(s,_,n,d)}else _=y0(a,s,n,d,c);return Fu(_)}jl=function(n){switch(n.tag){case 3:var s=n.stateNode;if(s.current.memoizedState.isDehydrated){var a=Gr(s.pendingLanes);a!==0&&(Yr(s,a|1),nn(s,Ge()),(je&6)===0&&(wo=Ge()+500,si()))}break;case 13:fs(function(){var c=kr(n,1);if(c!==null){var d=Kt();Wn(c,n,1,d)}}),kd(n,1)}},qs=function(n){if(n.tag===13){var s=kr(n,134217728);if(s!==null){var a=Kt();Wn(s,n,134217728,a)}kd(n,134217728)}},Fl=function(n){if(n.tag===13){var s=hi(n),a=kr(n,s);if(a!==null){var c=Kt();Wn(a,n,s,c)}kd(n,s)}},Ul=function(){return Oe},Bl=function(n,s){var a=Oe;try{return Oe=n,s()}finally{Oe=a}},Ls=function(n,s,a){switch(s){case"input":if(Xo(n,a),s=a.name,a.type==="radio"&&s!=null){for(a=n;a.parentNode;)a=a.parentNode;for(a=a.querySelectorAll("input[name="+JSON.stringify(""+s)+'][type="radio"]'),s=0;s<a.length;s++){var c=a[s];if(c!==n&&c.form===n.form){var d=su(c);if(!d)throw Error(t(90));mr(c),Xo(c,d)}}}break;case"textarea":Vs(n,a);break;case"select":s=a.value,s!=null&&yr(n,!!a.multiple,s,!1)}},Gi=Td,aa=fs;var v0={usingClientEntryPoint:!1,Events:[ka,ao,su,Yn,oa,Td]},$a={findFiberByHostInstance:ss,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},_0={bundleType:$a.bundleType,version:$a.version,rendererPackageName:$a.rendererPackageName,rendererConfig:$a.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:ye.ReactCurrentDispatcher,findHostInstanceByFiber:function(n){return n=ca(n),n===null?null:n.stateNode},findFiberByHostInstance:$a.findFiberByHostInstance||g0,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var $u=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!$u.isDisabled&&$u.supportsFiber)try{Ji=$u.inject(_0),ln=$u}catch{}}return rn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=v0,rn.createPortal=function(n,s){var a=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!xd(s))throw Error(t(200));return m0(n,s,null,a)},rn.createRoot=function(n,s){if(!xd(n))throw Error(t(299));var a=!1,c="",d=Vg;return s!=null&&(s.unstable_strictMode===!0&&(a=!0),s.identifierPrefix!==void 0&&(c=s.identifierPrefix),s.onRecoverableError!==void 0&&(d=s.onRecoverableError)),s=Rd(n,1,!1,null,null,a,!1,c,d),n[Ar]=s.current,Pa(n.nodeType===8?n.parentNode:n),new Nd(s)},rn.findDOMNode=function(n){if(n==null)return null;if(n.nodeType===1)return n;var s=n._reactInternals;if(s===void 0)throw typeof n.render=="function"?Error(t(188)):(n=Object.keys(n).join(","),Error(t(268,n)));return n=ca(s),n=n===null?null:n.stateNode,n},rn.flushSync=function(n){return fs(n)},rn.hydrate=function(n,s,a){if(!Bu(s))throw Error(t(200));return zu(null,n,s,!0,a)},rn.hydrateRoot=function(n,s,a){if(!xd(n))throw Error(t(405));var c=a!=null&&a.hydratedSources||null,d=!1,g="",_=Vg;if(a!=null&&(a.unstable_strictMode===!0&&(d=!0),a.identifierPrefix!==void 0&&(g=a.identifierPrefix),a.onRecoverableError!==void 0&&(_=a.onRecoverableError)),s=Dg(s,null,n,1,a??null,d,!1,g,_),n[Ar]=s.current,Pa(n),c)for(n=0;n<c.length;n++)a=c[n],d=a._getVersion,d=d(a._source),s.mutableSourceEagerHydrationData==null?s.mutableSourceEagerHydrationData=[a,d]:s.mutableSourceEagerHydrationData.push(a,d);return new Uu(s)},rn.render=function(n,s,a){if(!Bu(s))throw Error(t(200));return zu(null,n,s,!1,a)},rn.unmountComponentAtNode=function(n){if(!Bu(n))throw Error(t(40));return n._reactRootContainer?(fs(function(){zu(null,null,n,!1,function(){n._reactRootContainer=null,n[Ar]=null})}),!0):!1},rn.unstable_batchedUpdates=Td,rn.unstable_renderSubtreeIntoContainer=function(n,s,a,c){if(!Bu(a))throw Error(t(200));if(n==null||n._reactInternals===void 0)throw Error(t(38));return zu(n,s,a,!1,c)},rn.version="18.3.1-next-f1338f8080-20240426",rn}var $g;function bv(){if($g)return Vd.exports;$g=1;function r(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(r)}catch(e){console.error(e)}}return r(),Vd.exports=N0(),Vd.exports}var Wg;function x0(){if(Wg)return Wu;Wg=1;var r=bv();return Wu.createRoot=r.createRoot,Wu.hydrateRoot=r.hydrateRoot,Wu}var D0=x0();bv();/**
 * @remix-run/router v1.23.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function rl(){return rl=Object.assign?Object.assign.bind():function(r){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(r[i]=t[i])}return r},rl.apply(this,arguments)}var wi;(function(r){r.Pop="POP",r.Push="PUSH",r.Replace="REPLACE"})(wi||(wi={}));const qg="popstate";function b0(r){r===void 0&&(r={});function e(i,o){let{pathname:l,search:h,hash:f}=i.location;return Jd("",{pathname:l,search:h,hash:f},o.state&&o.state.usr||null,o.state&&o.state.key||"default")}function t(i,o){return typeof o=="string"?o:uc(o)}return O0(e,t,null,r)}function ht(r,e){if(r===!1||r===null||typeof r>"u")throw new Error(e)}function Nf(r,e){if(!r){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function V0(){return Math.random().toString(36).substr(2,8)}function Hg(r,e){return{usr:r.state,key:r.key,idx:e}}function Jd(r,e,t,i){return t===void 0&&(t=null),rl({pathname:typeof r=="string"?r:r.pathname,search:"",hash:""},typeof e=="string"?Fo(e):e,{state:t,key:e&&e.key||i||V0()})}function uc(r){let{pathname:e="/",search:t="",hash:i=""}=r;return t&&t!=="?"&&(e+=t.charAt(0)==="?"?t:"?"+t),i&&i!=="#"&&(e+=i.charAt(0)==="#"?i:"#"+i),e}function Fo(r){let e={};if(r){let t=r.indexOf("#");t>=0&&(e.hash=r.substr(t),r=r.substr(0,t));let i=r.indexOf("?");i>=0&&(e.search=r.substr(i),r=r.substr(0,i)),r&&(e.pathname=r)}return e}function O0(r,e,t,i){i===void 0&&(i={});let{window:o=document.defaultView,v5Compat:l=!1}=i,h=o.history,f=wi.Pop,p=null,y=E();y==null&&(y=0,h.replaceState(rl({},h.state,{idx:y}),""));function E(){return(h.state||{idx:null}).idx}function T(){f=wi.Pop;let F=E(),oe=F==null?null:F-y;y=F,p&&p({action:f,location:z.location,delta:oe})}function S(F,oe){f=wi.Push;let Y=Jd(z.location,F,oe);y=E()+1;let re=Hg(Y,y),ye=z.createHref(Y);try{h.pushState(re,"",ye)}catch(Re){if(Re instanceof DOMException&&Re.name==="DataCloneError")throw Re;o.location.assign(ye)}l&&p&&p({action:f,location:z.location,delta:1})}function V(F,oe){f=wi.Replace;let Y=Jd(z.location,F,oe);y=E();let re=Hg(Y,y),ye=z.createHref(Y);h.replaceState(re,"",ye),l&&p&&p({action:f,location:z.location,delta:0})}function L(F){let oe=o.location.origin!=="null"?o.location.origin:o.location.href,Y=typeof F=="string"?F:uc(F);return Y=Y.replace(/ $/,"%20"),ht(oe,"No window.location.(origin|href) available to create URL for href: "+Y),new URL(Y,oe)}let z={get action(){return f},get location(){return r(o,h)},listen(F){if(p)throw new Error("A history only accepts one active listener");return o.addEventListener(qg,T),p=F,()=>{o.removeEventListener(qg,T),p=null}},createHref(F){return e(o,F)},createURL:L,encodeLocation(F){let oe=L(F);return{pathname:oe.pathname,search:oe.search,hash:oe.hash}},push:S,replace:V,go(F){return h.go(F)}};return z}var Gg;(function(r){r.data="data",r.deferred="deferred",r.redirect="redirect",r.error="error"})(Gg||(Gg={}));function L0(r,e,t){return t===void 0&&(t="/"),M0(r,e,t)}function M0(r,e,t,i){let o=typeof e=="string"?Fo(e):e,l=xf(o.pathname||"/",t);if(l==null)return null;let h=Vv(r);j0(h);let f=null;for(let p=0;f==null&&p<h.length;++p){let y=Y0(l);f=G0(h[p],y)}return f}function Vv(r,e,t,i){e===void 0&&(e=[]),t===void 0&&(t=[]),i===void 0&&(i="");let o=(l,h,f)=>{let p={relativePath:f===void 0?l.path||"":f,caseSensitive:l.caseSensitive===!0,childrenIndex:h,route:l};p.relativePath.startsWith("/")&&(ht(p.relativePath.startsWith(i),'Absolute route path "'+p.relativePath+'" nested under path '+('"'+i+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),p.relativePath=p.relativePath.slice(i.length));let y=Ii([i,p.relativePath]),E=t.concat(p);l.children&&l.children.length>0&&(ht(l.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+y+'".')),Vv(l.children,e,E,y)),!(l.path==null&&!l.index)&&e.push({path:y,score:q0(y,l.index),routesMeta:E})};return r.forEach((l,h)=>{var f;if(l.path===""||!((f=l.path)!=null&&f.includes("?")))o(l,h);else for(let p of Ov(l.path))o(l,h,p)}),e}function Ov(r){let e=r.split("/");if(e.length===0)return[];let[t,...i]=e,o=t.endsWith("?"),l=t.replace(/\?$/,"");if(i.length===0)return o?[l,""]:[l];let h=Ov(i.join("/")),f=[];return f.push(...h.map(p=>p===""?l:[l,p].join("/"))),o&&f.push(...h),f.map(p=>r.startsWith("/")&&p===""?"/":p)}function j0(r){r.sort((e,t)=>e.score!==t.score?t.score-e.score:H0(e.routesMeta.map(i=>i.childrenIndex),t.routesMeta.map(i=>i.childrenIndex)))}const F0=/^:[\w-]+$/,U0=3,B0=2,z0=1,$0=10,W0=-2,Kg=r=>r==="*";function q0(r,e){let t=r.split("/"),i=t.length;return t.some(Kg)&&(i+=W0),e&&(i+=B0),t.filter(o=>!Kg(o)).reduce((o,l)=>o+(F0.test(l)?U0:l===""?z0:$0),i)}function H0(r,e){return r.length===e.length&&r.slice(0,-1).every((i,o)=>i===e[o])?r[r.length-1]-e[e.length-1]:0}function G0(r,e,t){let{routesMeta:i}=r,o={},l="/",h=[];for(let f=0;f<i.length;++f){let p=i[f],y=f===i.length-1,E=l==="/"?e:e.slice(l.length)||"/",T=K0({path:p.relativePath,caseSensitive:p.caseSensitive,end:y},E),S=p.route;if(!T)return null;Object.assign(o,T.params),h.push({params:o,pathname:Ii([l,T.pathname]),pathnameBase:tT(Ii([l,T.pathnameBase])),route:S}),T.pathnameBase!=="/"&&(l=Ii([l,T.pathnameBase]))}return h}function K0(r,e){typeof r=="string"&&(r={path:r,caseSensitive:!1,end:!0});let[t,i]=Q0(r.path,r.caseSensitive,r.end),o=e.match(t);if(!o)return null;let l=o[0],h=l.replace(/(.)\/+$/,"$1"),f=o.slice(1);return{params:i.reduce((y,E,T)=>{let{paramName:S,isOptional:V}=E;if(S==="*"){let z=f[T]||"";h=l.slice(0,l.length-z.length).replace(/(.)\/+$/,"$1")}const L=f[T];return V&&!L?y[S]=void 0:y[S]=(L||"").replace(/%2F/g,"/"),y},{}),pathname:l,pathnameBase:h,pattern:r}}function Q0(r,e,t){e===void 0&&(e=!1),t===void 0&&(t=!0),Nf(r==="*"||!r.endsWith("*")||r.endsWith("/*"),'Route path "'+r+'" will be treated as if it were '+('"'+r.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+r.replace(/\*$/,"/*")+'".'));let i=[],o="^"+r.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(h,f,p)=>(i.push({paramName:f,isOptional:p!=null}),p?"/?([^\\/]+)?":"/([^\\/]+)"));return r.endsWith("*")?(i.push({paramName:"*"}),o+=r==="*"||r==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):t?o+="\\/*$":r!==""&&r!=="/"&&(o+="(?:(?=\\/|$))"),[new RegExp(o,e?void 0:"i"),i]}function Y0(r){try{return r.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return Nf(!1,'The URL path "'+r+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),r}}function xf(r,e){if(e==="/")return r;if(!r.toLowerCase().startsWith(e.toLowerCase()))return null;let t=e.endsWith("/")?e.length-1:e.length,i=r.charAt(t);return i&&i!=="/"?null:r.slice(t)||"/"}const X0=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,J0=r=>X0.test(r);function Z0(r,e){e===void 0&&(e="/");let{pathname:t,search:i="",hash:o=""}=typeof r=="string"?Fo(r):r,l;if(t)if(J0(t))l=t;else{if(t.includes("//")){let h=t;t=t.replace(/\/\/+/g,"/"),Nf(!1,"Pathnames cannot have embedded double slashes - normalizing "+(h+" -> "+t))}t.startsWith("/")?l=Qg(t.substring(1),"/"):l=Qg(t,e)}else l=e;return{pathname:l,search:nT(i),hash:rT(o)}}function Qg(r,e){let t=e.replace(/\/+$/,"").split("/");return r.split("/").forEach(o=>{o===".."?t.length>1&&t.pop():o!=="."&&t.push(o)}),t.length>1?t.join("/"):"/"}function Md(r,e,t,i){return"Cannot include a '"+r+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(i)+"].  Please separate it out to the ")+("`to."+t+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function eT(r){return r.filter((e,t)=>t===0||e.route.path&&e.route.path.length>0)}function Df(r,e){let t=eT(r);return e?t.map((i,o)=>o===t.length-1?i.pathname:i.pathnameBase):t.map(i=>i.pathnameBase)}function bf(r,e,t,i){i===void 0&&(i=!1);let o;typeof r=="string"?o=Fo(r):(o=rl({},r),ht(!o.pathname||!o.pathname.includes("?"),Md("?","pathname","search",o)),ht(!o.pathname||!o.pathname.includes("#"),Md("#","pathname","hash",o)),ht(!o.search||!o.search.includes("#"),Md("#","search","hash",o)));let l=r===""||o.pathname==="",h=l?"/":o.pathname,f;if(h==null)f=t;else{let T=e.length-1;if(!i&&h.startsWith("..")){let S=h.split("/");for(;S[0]==="..";)S.shift(),T-=1;o.pathname=S.join("/")}f=T>=0?e[T]:"/"}let p=Z0(o,f),y=h&&h!=="/"&&h.endsWith("/"),E=(l||h===".")&&t.endsWith("/");return!p.pathname.endsWith("/")&&(y||E)&&(p.pathname+="/"),p}const Ii=r=>r.join("/").replace(/\/\/+/g,"/"),tT=r=>r.replace(/\/+$/,"").replace(/^\/*/,"/"),nT=r=>!r||r==="?"?"":r.startsWith("?")?r:"?"+r,rT=r=>!r||r==="#"?"":r.startsWith("#")?r:"#"+r;function iT(r){return r!=null&&typeof r.status=="number"&&typeof r.statusText=="string"&&typeof r.internal=="boolean"&&"data"in r}const Lv=["post","put","patch","delete"];new Set(Lv);const sT=["get",...Lv];new Set(sT);/**
 * React Router v6.30.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function il(){return il=Object.assign?Object.assign.bind():function(r){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(r[i]=t[i])}return r},il.apply(this,arguments)}const Vf=Q.createContext(null),oT=Q.createContext(null),Mi=Q.createContext(null),Vc=Q.createContext(null),$r=Q.createContext({outlet:null,matches:[],isDataRoute:!1}),Mv=Q.createContext(null);function aT(r,e){let{relative:t}=e===void 0?{}:e;Uo()||ht(!1);let{basename:i,navigator:o}=Q.useContext(Mi),{hash:l,pathname:h,search:f}=Fv(r,{relative:t}),p=h;return i!=="/"&&(p=h==="/"?i:Ii([i,h])),o.createHref({pathname:p,search:f,hash:l})}function Uo(){return Q.useContext(Vc)!=null}function Bo(){return Uo()||ht(!1),Q.useContext(Vc).location}function jv(r){Q.useContext(Mi).static||Q.useLayoutEffect(r)}function zo(){let{isDataRoute:r}=Q.useContext($r);return r?wT():lT()}function lT(){Uo()||ht(!1);let r=Q.useContext(Vf),{basename:e,future:t,navigator:i}=Q.useContext(Mi),{matches:o}=Q.useContext($r),{pathname:l}=Bo(),h=JSON.stringify(Df(o,t.v7_relativeSplatPath)),f=Q.useRef(!1);return jv(()=>{f.current=!0}),Q.useCallback(function(y,E){if(E===void 0&&(E={}),!f.current)return;if(typeof y=="number"){i.go(y);return}let T=bf(y,JSON.parse(h),l,E.relative==="path");r==null&&e!=="/"&&(T.pathname=T.pathname==="/"?e:Ii([e,T.pathname])),(E.replace?i.replace:i.push)(T,E.state,E)},[e,i,h,l,r])}function uT(){let{matches:r}=Q.useContext($r),e=r[r.length-1];return e?e.params:{}}function Fv(r,e){let{relative:t}=e===void 0?{}:e,{future:i}=Q.useContext(Mi),{matches:o}=Q.useContext($r),{pathname:l}=Bo(),h=JSON.stringify(Df(o,i.v7_relativeSplatPath));return Q.useMemo(()=>bf(r,JSON.parse(h),l,t==="path"),[r,h,l,t])}function cT(r,e){return hT(r,e)}function hT(r,e,t,i){Uo()||ht(!1);let{navigator:o}=Q.useContext(Mi),{matches:l}=Q.useContext($r),h=l[l.length-1],f=h?h.params:{};h&&h.pathname;let p=h?h.pathnameBase:"/";h&&h.route;let y=Bo(),E;if(e){var T;let F=typeof e=="string"?Fo(e):e;p==="/"||(T=F.pathname)!=null&&T.startsWith(p)||ht(!1),E=F}else E=y;let S=E.pathname||"/",V=S;if(p!=="/"){let F=p.replace(/^\//,"").split("/");V="/"+S.replace(/^\//,"").split("/").slice(F.length).join("/")}let L=L0(r,{pathname:V}),z=gT(L&&L.map(F=>Object.assign({},F,{params:Object.assign({},f,F.params),pathname:Ii([p,o.encodeLocation?o.encodeLocation(F.pathname).pathname:F.pathname]),pathnameBase:F.pathnameBase==="/"?p:Ii([p,o.encodeLocation?o.encodeLocation(F.pathnameBase).pathname:F.pathnameBase])})),l,t,i);return e&&z?Q.createElement(Vc.Provider,{value:{location:il({pathname:"/",search:"",hash:"",state:null,key:"default"},E),navigationType:wi.Pop}},z):z}function dT(){let r=ET(),e=iT(r)?r.status+" "+r.statusText:r instanceof Error?r.message:JSON.stringify(r),t=r instanceof Error?r.stack:null,o={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return Q.createElement(Q.Fragment,null,Q.createElement("h2",null,"Unexpected Application Error!"),Q.createElement("h3",{style:{fontStyle:"italic"}},e),t?Q.createElement("pre",{style:o},t):null,null)}const fT=Q.createElement(dT,null);class pT extends Q.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,t){return t.location!==e.location||t.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:t.error,location:t.location,revalidation:e.revalidation||t.revalidation}}componentDidCatch(e,t){console.error("React Router caught the following error during render",e,t)}render(){return this.state.error!==void 0?Q.createElement($r.Provider,{value:this.props.routeContext},Q.createElement(Mv.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function mT(r){let{routeContext:e,match:t,children:i}=r,o=Q.useContext(Vf);return o&&o.static&&o.staticContext&&(t.route.errorElement||t.route.ErrorBoundary)&&(o.staticContext._deepestRenderedBoundaryId=t.route.id),Q.createElement($r.Provider,{value:e},i)}function gT(r,e,t,i){var o;if(e===void 0&&(e=[]),t===void 0&&(t=null),i===void 0&&(i=null),r==null){var l;if(!t)return null;if(t.errors)r=t.matches;else if((l=i)!=null&&l.v7_partialHydration&&e.length===0&&!t.initialized&&t.matches.length>0)r=t.matches;else return null}let h=r,f=(o=t)==null?void 0:o.errors;if(f!=null){let E=h.findIndex(T=>T.route.id&&(f==null?void 0:f[T.route.id])!==void 0);E>=0||ht(!1),h=h.slice(0,Math.min(h.length,E+1))}let p=!1,y=-1;if(t&&i&&i.v7_partialHydration)for(let E=0;E<h.length;E++){let T=h[E];if((T.route.HydrateFallback||T.route.hydrateFallbackElement)&&(y=E),T.route.id){let{loaderData:S,errors:V}=t,L=T.route.loader&&S[T.route.id]===void 0&&(!V||V[T.route.id]===void 0);if(T.route.lazy||L){p=!0,y>=0?h=h.slice(0,y+1):h=[h[0]];break}}}return h.reduceRight((E,T,S)=>{let V,L=!1,z=null,F=null;t&&(V=f&&T.route.id?f[T.route.id]:void 0,z=T.route.errorElement||fT,p&&(y<0&&S===0?(TT("route-fallback"),L=!0,F=null):y===S&&(L=!0,F=T.route.hydrateFallbackElement||null)));let oe=e.concat(h.slice(0,S+1)),Y=()=>{let re;return V?re=z:L?re=F:T.route.Component?re=Q.createElement(T.route.Component,null):T.route.element?re=T.route.element:re=E,Q.createElement(mT,{match:T,routeContext:{outlet:E,matches:oe,isDataRoute:t!=null},children:re})};return t&&(T.route.ErrorBoundary||T.route.errorElement||S===0)?Q.createElement(pT,{location:t.location,revalidation:t.revalidation,component:z,error:V,children:Y(),routeContext:{outlet:null,matches:oe,isDataRoute:!0}}):Y()},null)}var Uv=(function(r){return r.UseBlocker="useBlocker",r.UseRevalidator="useRevalidator",r.UseNavigateStable="useNavigate",r})(Uv||{}),Bv=(function(r){return r.UseBlocker="useBlocker",r.UseLoaderData="useLoaderData",r.UseActionData="useActionData",r.UseRouteError="useRouteError",r.UseNavigation="useNavigation",r.UseRouteLoaderData="useRouteLoaderData",r.UseMatches="useMatches",r.UseRevalidator="useRevalidator",r.UseNavigateStable="useNavigate",r.UseRouteId="useRouteId",r})(Bv||{});function yT(r){let e=Q.useContext(Vf);return e||ht(!1),e}function vT(r){let e=Q.useContext(oT);return e||ht(!1),e}function _T(r){let e=Q.useContext($r);return e||ht(!1),e}function zv(r){let e=_T(),t=e.matches[e.matches.length-1];return t.route.id||ht(!1),t.route.id}function ET(){var r;let e=Q.useContext(Mv),t=vT(),i=zv();return e!==void 0?e:(r=t.errors)==null?void 0:r[i]}function wT(){let{router:r}=yT(Uv.UseNavigateStable),e=zv(Bv.UseNavigateStable),t=Q.useRef(!1);return jv(()=>{t.current=!0}),Q.useCallback(function(o,l){l===void 0&&(l={}),t.current&&(typeof o=="number"?r.navigate(o):r.navigate(o,il({fromRouteId:e},l)))},[r,e])}const Yg={};function TT(r,e,t){Yg[r]||(Yg[r]=!0)}function IT(r,e){r==null||r.v7_startTransition,r==null||r.v7_relativeSplatPath}function cc(r){let{to:e,replace:t,state:i,relative:o}=r;Uo()||ht(!1);let{future:l,static:h}=Q.useContext(Mi),{matches:f}=Q.useContext($r),{pathname:p}=Bo(),y=zo(),E=bf(e,Df(f,l.v7_relativeSplatPath),p,o==="path"),T=JSON.stringify(E);return Q.useEffect(()=>y(JSON.parse(T),{replace:t,state:i,relative:o}),[y,T,o,t,i]),null}function gi(r){ht(!1)}function ST(r){let{basename:e="/",children:t=null,location:i,navigationType:o=wi.Pop,navigator:l,static:h=!1,future:f}=r;Uo()&&ht(!1);let p=e.replace(/^\/*/,"/"),y=Q.useMemo(()=>({basename:p,navigator:l,static:h,future:il({v7_relativeSplatPath:!1},f)}),[p,f,l,h]);typeof i=="string"&&(i=Fo(i));let{pathname:E="/",search:T="",hash:S="",state:V=null,key:L="default"}=i,z=Q.useMemo(()=>{let F=xf(E,p);return F==null?null:{location:{pathname:F,search:T,hash:S,state:V,key:L},navigationType:o}},[p,E,T,S,V,L,o]);return z==null?null:Q.createElement(Mi.Provider,{value:y},Q.createElement(Vc.Provider,{children:t,value:z}))}function AT(r){let{children:e,location:t}=r;return cT(Zd(e),t)}new Promise(()=>{});function Zd(r,e){e===void 0&&(e=[]);let t=[];return Q.Children.forEach(r,(i,o)=>{if(!Q.isValidElement(i))return;let l=[...e,o];if(i.type===Q.Fragment){t.push.apply(t,Zd(i.props.children,l));return}i.type!==gi&&ht(!1),!i.props.index||!i.props.children||ht(!1);let h={id:i.props.id||l.join("-"),caseSensitive:i.props.caseSensitive,element:i.props.element,Component:i.props.Component,index:i.props.index,path:i.props.path,loader:i.props.loader,action:i.props.action,errorElement:i.props.errorElement,ErrorBoundary:i.props.ErrorBoundary,hasErrorBoundary:i.props.ErrorBoundary!=null||i.props.errorElement!=null,shouldRevalidate:i.props.shouldRevalidate,handle:i.props.handle,lazy:i.props.lazy};i.props.children&&(h.children=Zd(i.props.children,l)),t.push(h)}),t}/**
 * React Router DOM v6.30.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function ef(){return ef=Object.assign?Object.assign.bind():function(r){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(r[i]=t[i])}return r},ef.apply(this,arguments)}function PT(r,e){if(r==null)return{};var t={},i=Object.keys(r),o,l;for(l=0;l<i.length;l++)o=i[l],!(e.indexOf(o)>=0)&&(t[o]=r[o]);return t}function CT(r){return!!(r.metaKey||r.altKey||r.ctrlKey||r.shiftKey)}function RT(r,e){return r.button===0&&(!e||e==="_self")&&!CT(r)}const kT=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],NT="6";try{window.__reactRouterVersion=NT}catch{}const xT="startTransition",Xg=C0[xT];function DT(r){let{basename:e,children:t,future:i,window:o}=r,l=Q.useRef();l.current==null&&(l.current=b0({window:o,v5Compat:!0}));let h=l.current,[f,p]=Q.useState({action:h.action,location:h.location}),{v7_startTransition:y}=i||{},E=Q.useCallback(T=>{y&&Xg?Xg(()=>p(T)):p(T)},[p,y]);return Q.useLayoutEffect(()=>h.listen(E),[h,E]),Q.useEffect(()=>IT(i),[i]),Q.createElement(ST,{basename:e,children:t,location:f.location,navigationType:f.action,navigator:h,future:i})}const bT=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",VT=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,ar=Q.forwardRef(function(e,t){let{onClick:i,relative:o,reloadDocument:l,replace:h,state:f,target:p,to:y,preventScrollReset:E,viewTransition:T}=e,S=PT(e,kT),{basename:V}=Q.useContext(Mi),L,z=!1;if(typeof y=="string"&&VT.test(y)&&(L=y,bT))try{let re=new URL(window.location.href),ye=y.startsWith("//")?new URL(re.protocol+y):new URL(y),Re=xf(ye.pathname,V);ye.origin===re.origin&&Re!=null?y=Re+ye.search+ye.hash:z=!0}catch{}let F=aT(y,{relative:o}),oe=OT(y,{replace:h,state:f,target:p,preventScrollReset:E,relative:o,viewTransition:T});function Y(re){i&&i(re),re.defaultPrevented||oe(re)}return Q.createElement("a",ef({},S,{href:L||F,onClick:z||l?i:Y,ref:t,target:p}))});var Jg;(function(r){r.UseScrollRestoration="useScrollRestoration",r.UseSubmit="useSubmit",r.UseSubmitFetcher="useSubmitFetcher",r.UseFetcher="useFetcher",r.useViewTransitionState="useViewTransitionState"})(Jg||(Jg={}));var Zg;(function(r){r.UseFetcher="useFetcher",r.UseFetchers="useFetchers",r.UseScrollRestoration="useScrollRestoration"})(Zg||(Zg={}));function OT(r,e){let{target:t,replace:i,state:o,preventScrollReset:l,relative:h,viewTransition:f}=e===void 0?{}:e,p=zo(),y=Bo(),E=Fv(r,{relative:h});return Q.useCallback(T=>{if(RT(T,t)){T.preventDefault();let S=i!==void 0?i:uc(y)===uc(E);p(r,{replace:S,state:o,preventScrollReset:l,relative:h,viewTransition:f})}},[y,p,E,i,o,t,r,l,h,f])}const LT=()=>{};var ey={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $v=function(r){const e=[];let t=0;for(let i=0;i<r.length;i++){let o=r.charCodeAt(i);o<128?e[t++]=o:o<2048?(e[t++]=o>>6|192,e[t++]=o&63|128):(o&64512)===55296&&i+1<r.length&&(r.charCodeAt(i+1)&64512)===56320?(o=65536+((o&1023)<<10)+(r.charCodeAt(++i)&1023),e[t++]=o>>18|240,e[t++]=o>>12&63|128,e[t++]=o>>6&63|128,e[t++]=o&63|128):(e[t++]=o>>12|224,e[t++]=o>>6&63|128,e[t++]=o&63|128)}return e},MT=function(r){const e=[];let t=0,i=0;for(;t<r.length;){const o=r[t++];if(o<128)e[i++]=String.fromCharCode(o);else if(o>191&&o<224){const l=r[t++];e[i++]=String.fromCharCode((o&31)<<6|l&63)}else if(o>239&&o<365){const l=r[t++],h=r[t++],f=r[t++],p=((o&7)<<18|(l&63)<<12|(h&63)<<6|f&63)-65536;e[i++]=String.fromCharCode(55296+(p>>10)),e[i++]=String.fromCharCode(56320+(p&1023))}else{const l=r[t++],h=r[t++];e[i++]=String.fromCharCode((o&15)<<12|(l&63)<<6|h&63)}}return e.join("")},Wv={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(r,e){if(!Array.isArray(r))throw Error("encodeByteArray takes an array as a parameter");this.init_();const t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,i=[];for(let o=0;o<r.length;o+=3){const l=r[o],h=o+1<r.length,f=h?r[o+1]:0,p=o+2<r.length,y=p?r[o+2]:0,E=l>>2,T=(l&3)<<4|f>>4;let S=(f&15)<<2|y>>6,V=y&63;p||(V=64,h||(S=64)),i.push(t[E],t[T],t[S],t[V])}return i.join("")},encodeString(r,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(r):this.encodeByteArray($v(r),e)},decodeString(r,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(r):MT(this.decodeStringToByteArray(r,e))},decodeStringToByteArray(r,e){this.init_();const t=e?this.charToByteMapWebSafe_:this.charToByteMap_,i=[];for(let o=0;o<r.length;){const l=t[r.charAt(o++)],f=o<r.length?t[r.charAt(o)]:0;++o;const y=o<r.length?t[r.charAt(o)]:64;++o;const T=o<r.length?t[r.charAt(o)]:64;if(++o,l==null||f==null||y==null||T==null)throw new jT;const S=l<<2|f>>4;if(i.push(S),y!==64){const V=f<<4&240|y>>2;if(i.push(V),T!==64){const L=y<<6&192|T;i.push(L)}}}return i},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let r=0;r<this.ENCODED_VALS.length;r++)this.byteToCharMap_[r]=this.ENCODED_VALS.charAt(r),this.charToByteMap_[this.byteToCharMap_[r]]=r,this.byteToCharMapWebSafe_[r]=this.ENCODED_VALS_WEBSAFE.charAt(r),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[r]]=r,r>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(r)]=r,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(r)]=r)}}};class jT extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const FT=function(r){const e=$v(r);return Wv.encodeByteArray(e,!0)},hc=function(r){return FT(r).replace(/\./g,"")},qv=function(r){try{return Wv.decodeString(r,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function UT(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const BT=()=>UT().__FIREBASE_DEFAULTS__,zT=()=>{if(typeof process>"u"||typeof ey>"u")return;const r=ey.__FIREBASE_DEFAULTS__;if(r)return JSON.parse(r)},$T=()=>{if(typeof document>"u")return;let r;try{r=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=r&&qv(r[1]);return e&&JSON.parse(e)},Oc=()=>{try{return LT()||BT()||zT()||$T()}catch(r){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${r}`);return}},Hv=r=>{var e,t;return(t=(e=Oc())===null||e===void 0?void 0:e.emulatorHosts)===null||t===void 0?void 0:t[r]},WT=r=>{const e=Hv(r);if(!e)return;const t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const i=parseInt(e.substring(t+1),10);return e[0]==="["?[e.substring(1,t-1),i]:[e.substring(0,t),i]},Gv=()=>{var r;return(r=Oc())===null||r===void 0?void 0:r.config},Kv=r=>{var e;return(e=Oc())===null||e===void 0?void 0:e[`_${r}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qT{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,i)=>{t?this.reject(t):this.resolve(i),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,i))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $o(r){try{return(r.startsWith("http://")||r.startsWith("https://")?new URL(r).hostname:r).endsWith(".cloudworkstations.dev")}catch{return!1}}async function Qv(r){return(await fetch(r,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function HT(r,e){if(r.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const t={alg:"none",type:"JWT"},i=e||"demo-project",o=r.iat||0,l=r.sub||r.user_id;if(!l)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const h=Object.assign({iss:`https://securetoken.google.com/${i}`,aud:i,iat:o,exp:o+3600,auth_time:o,sub:l,user_id:l,firebase:{sign_in_provider:"custom",identities:{}}},r);return[hc(JSON.stringify(t)),hc(JSON.stringify(h)),""].join(".")}const Xa={};function GT(){const r={prod:[],emulator:[]};for(const e of Object.keys(Xa))Xa[e]?r.emulator.push(e):r.prod.push(e);return r}function KT(r){let e=document.getElementById(r),t=!1;return e||(e=document.createElement("div"),e.setAttribute("id",r),t=!0),{created:t,element:e}}let ty=!1;function Yv(r,e){if(typeof window>"u"||typeof document>"u"||!$o(window.location.host)||Xa[r]===e||Xa[r]||ty)return;Xa[r]=e;function t(S){return`__firebase__banner__${S}`}const i="__firebase__banner",l=GT().prod.length>0;function h(){const S=document.getElementById(i);S&&S.remove()}function f(S){S.style.display="flex",S.style.background="#7faaf0",S.style.position="fixed",S.style.bottom="5px",S.style.left="5px",S.style.padding=".5em",S.style.borderRadius="5px",S.style.alignItems="center"}function p(S,V){S.setAttribute("width","24"),S.setAttribute("id",V),S.setAttribute("height","24"),S.setAttribute("viewBox","0 0 24 24"),S.setAttribute("fill","none"),S.style.marginLeft="-6px"}function y(){const S=document.createElement("span");return S.style.cursor="pointer",S.style.marginLeft="16px",S.style.fontSize="24px",S.innerHTML=" &times;",S.onclick=()=>{ty=!0,h()},S}function E(S,V){S.setAttribute("id",V),S.innerText="Learn more",S.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",S.setAttribute("target","__blank"),S.style.paddingLeft="5px",S.style.textDecoration="underline"}function T(){const S=KT(i),V=t("text"),L=document.getElementById(V)||document.createElement("span"),z=t("learnmore"),F=document.getElementById(z)||document.createElement("a"),oe=t("preprendIcon"),Y=document.getElementById(oe)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(S.created){const re=S.element;f(re),E(F,z);const ye=y();p(Y,oe),re.append(Y,L,F,ye),document.body.appendChild(re)}l?(L.innerText="Preview backend disconnected.",Y.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(Y.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,L.innerText="Preview backend running in this workspace."),L.setAttribute("id",V)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",T):T()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Wt(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function QT(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Wt())}function YT(){var r;const e=(r=Oc())===null||r===void 0?void 0:r.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function XT(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function JT(){const r=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof r=="object"&&r.id!==void 0}function ZT(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function eI(){const r=Wt();return r.indexOf("MSIE ")>=0||r.indexOf("Trident/")>=0}function tI(){return!YT()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function nI(){try{return typeof indexedDB=="object"}catch{return!1}}function rI(){return new Promise((r,e)=>{try{let t=!0;const i="validate-browser-context-for-indexeddb-analytics-module",o=self.indexedDB.open(i);o.onsuccess=()=>{o.result.close(),t||self.indexedDB.deleteDatabase(i),r(!0)},o.onupgradeneeded=()=>{t=!1},o.onerror=()=>{var l;e(((l=o.error)===null||l===void 0?void 0:l.message)||"")}}catch(t){e(t)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iI="FirebaseError";class Wr extends Error{constructor(e,t,i){super(t),this.code=e,this.customData=i,this.name=iI,Object.setPrototypeOf(this,Wr.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,gl.prototype.create)}}class gl{constructor(e,t,i){this.service=e,this.serviceName=t,this.errors=i}create(e,...t){const i=t[0]||{},o=`${this.service}/${e}`,l=this.errors[e],h=l?sI(l,i):"Error",f=`${this.serviceName}: ${h} (${o}).`;return new Wr(o,f,i)}}function sI(r,e){return r.replace(oI,(t,i)=>{const o=e[i];return o!=null?String(o):`<${i}?>`})}const oI=/\{\$([^}]+)}/g;function aI(r){for(const e in r)if(Object.prototype.hasOwnProperty.call(r,e))return!1;return!0}function ws(r,e){if(r===e)return!0;const t=Object.keys(r),i=Object.keys(e);for(const o of t){if(!i.includes(o))return!1;const l=r[o],h=e[o];if(ny(l)&&ny(h)){if(!ws(l,h))return!1}else if(l!==h)return!1}for(const o of i)if(!t.includes(o))return!1;return!0}function ny(r){return r!==null&&typeof r=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yl(r){const e=[];for(const[t,i]of Object.entries(r))Array.isArray(i)?i.forEach(o=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(o))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(i));return e.length?"&"+e.join("&"):""}function qa(r){const e={};return r.replace(/^\?/,"").split("&").forEach(i=>{if(i){const[o,l]=i.split("=");e[decodeURIComponent(o)]=decodeURIComponent(l)}}),e}function Ha(r){const e=r.indexOf("?");if(!e)return"";const t=r.indexOf("#",e);return r.substring(e,t>0?t:void 0)}function lI(r,e){const t=new uI(r,e);return t.subscribe.bind(t)}class uI{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(i=>{this.error(i)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,i){let o;if(e===void 0&&t===void 0&&i===void 0)throw new Error("Missing Observer.");cI(e,["next","error","complete"])?o=e:o={next:e,error:t,complete:i},o.next===void 0&&(o.next=jd),o.error===void 0&&(o.error=jd),o.complete===void 0&&(o.complete=jd);const l=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?o.error(this.finalError):o.complete()}catch{}}),this.observers.push(o),l}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(i){typeof console<"u"&&console.error&&console.error(i)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function cI(r,e){if(typeof r!="object"||r===null)return!1;for(const t of e)if(t in r&&typeof r[t]=="function")return!0;return!1}function jd(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function St(r){return r&&r._delegate?r._delegate:r}class Ts{constructor(e,t,i){this.name=e,this.instanceFactory=t,this.type=i,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ys="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hI{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const i=new qT;if(this.instancesDeferred.set(t,i),this.isInitialized(t)||this.shouldAutoInitialize())try{const o=this.getOrInitializeService({instanceIdentifier:t});o&&i.resolve(o)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){var t;const i=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),o=(t=e==null?void 0:e.optional)!==null&&t!==void 0?t:!1;if(this.isInitialized(i)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:i})}catch(l){if(o)return null;throw l}else{if(o)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(fI(e))try{this.getOrInitializeService({instanceIdentifier:ys})}catch{}for(const[t,i]of this.instancesDeferred.entries()){const o=this.normalizeInstanceIdentifier(t);try{const l=this.getOrInitializeService({instanceIdentifier:o});i.resolve(l)}catch{}}}}clearInstance(e=ys){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=ys){return this.instances.has(e)}getOptions(e=ys){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e,i=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(i))throw Error(`${this.name}(${i}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const o=this.getOrInitializeService({instanceIdentifier:i,options:t});for(const[l,h]of this.instancesDeferred.entries()){const f=this.normalizeInstanceIdentifier(l);i===f&&h.resolve(o)}return o}onInit(e,t){var i;const o=this.normalizeInstanceIdentifier(t),l=(i=this.onInitCallbacks.get(o))!==null&&i!==void 0?i:new Set;l.add(e),this.onInitCallbacks.set(o,l);const h=this.instances.get(o);return h&&e(h,o),()=>{l.delete(e)}}invokeOnInitCallbacks(e,t){const i=this.onInitCallbacks.get(t);if(i)for(const o of i)try{o(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let i=this.instances.get(e);if(!i&&this.component&&(i=this.component.instanceFactory(this.container,{instanceIdentifier:dI(e),options:t}),this.instances.set(e,i),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(i,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,i)}catch{}return i||null}normalizeInstanceIdentifier(e=ys){return this.component?this.component.multipleInstances?e:ys:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function dI(r){return r===ys?void 0:r}function fI(r){return r.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pI{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new hI(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var be;(function(r){r[r.DEBUG=0]="DEBUG",r[r.VERBOSE=1]="VERBOSE",r[r.INFO=2]="INFO",r[r.WARN=3]="WARN",r[r.ERROR=4]="ERROR",r[r.SILENT=5]="SILENT"})(be||(be={}));const mI={debug:be.DEBUG,verbose:be.VERBOSE,info:be.INFO,warn:be.WARN,error:be.ERROR,silent:be.SILENT},gI=be.INFO,yI={[be.DEBUG]:"log",[be.VERBOSE]:"log",[be.INFO]:"info",[be.WARN]:"warn",[be.ERROR]:"error"},vI=(r,e,...t)=>{if(e<r.logLevel)return;const i=new Date().toISOString(),o=yI[e];if(o)console[o](`[${i}]  ${r.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class Of{constructor(e){this.name=e,this._logLevel=gI,this._logHandler=vI,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in be))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?mI[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,be.DEBUG,...e),this._logHandler(this,be.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,be.VERBOSE,...e),this._logHandler(this,be.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,be.INFO,...e),this._logHandler(this,be.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,be.WARN,...e),this._logHandler(this,be.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,be.ERROR,...e),this._logHandler(this,be.ERROR,...e)}}const _I=(r,e)=>e.some(t=>r instanceof t);let ry,iy;function EI(){return ry||(ry=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function wI(){return iy||(iy=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const Xv=new WeakMap,tf=new WeakMap,Jv=new WeakMap,Fd=new WeakMap,Lf=new WeakMap;function TI(r){const e=new Promise((t,i)=>{const o=()=>{r.removeEventListener("success",l),r.removeEventListener("error",h)},l=()=>{t(Si(r.result)),o()},h=()=>{i(r.error),o()};r.addEventListener("success",l),r.addEventListener("error",h)});return e.then(t=>{t instanceof IDBCursor&&Xv.set(t,r)}).catch(()=>{}),Lf.set(e,r),e}function II(r){if(tf.has(r))return;const e=new Promise((t,i)=>{const o=()=>{r.removeEventListener("complete",l),r.removeEventListener("error",h),r.removeEventListener("abort",h)},l=()=>{t(),o()},h=()=>{i(r.error||new DOMException("AbortError","AbortError")),o()};r.addEventListener("complete",l),r.addEventListener("error",h),r.addEventListener("abort",h)});tf.set(r,e)}let nf={get(r,e,t){if(r instanceof IDBTransaction){if(e==="done")return tf.get(r);if(e==="objectStoreNames")return r.objectStoreNames||Jv.get(r);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return Si(r[e])},set(r,e,t){return r[e]=t,!0},has(r,e){return r instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in r}};function SI(r){nf=r(nf)}function AI(r){return r===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){const i=r.call(Ud(this),e,...t);return Jv.set(i,e.sort?e.sort():[e]),Si(i)}:wI().includes(r)?function(...e){return r.apply(Ud(this),e),Si(Xv.get(this))}:function(...e){return Si(r.apply(Ud(this),e))}}function PI(r){return typeof r=="function"?AI(r):(r instanceof IDBTransaction&&II(r),_I(r,EI())?new Proxy(r,nf):r)}function Si(r){if(r instanceof IDBRequest)return TI(r);if(Fd.has(r))return Fd.get(r);const e=PI(r);return e!==r&&(Fd.set(r,e),Lf.set(e,r)),e}const Ud=r=>Lf.get(r);function CI(r,e,{blocked:t,upgrade:i,blocking:o,terminated:l}={}){const h=indexedDB.open(r,e),f=Si(h);return i&&h.addEventListener("upgradeneeded",p=>{i(Si(h.result),p.oldVersion,p.newVersion,Si(h.transaction),p)}),t&&h.addEventListener("blocked",p=>t(p.oldVersion,p.newVersion,p)),f.then(p=>{l&&p.addEventListener("close",()=>l()),o&&p.addEventListener("versionchange",y=>o(y.oldVersion,y.newVersion,y))}).catch(()=>{}),f}const RI=["get","getKey","getAll","getAllKeys","count"],kI=["put","add","delete","clear"],Bd=new Map;function sy(r,e){if(!(r instanceof IDBDatabase&&!(e in r)&&typeof e=="string"))return;if(Bd.get(e))return Bd.get(e);const t=e.replace(/FromIndex$/,""),i=e!==t,o=kI.includes(t);if(!(t in(i?IDBIndex:IDBObjectStore).prototype)||!(o||RI.includes(t)))return;const l=async function(h,...f){const p=this.transaction(h,o?"readwrite":"readonly");let y=p.store;return i&&(y=y.index(f.shift())),(await Promise.all([y[t](...f),o&&p.done]))[0]};return Bd.set(e,l),l}SI(r=>({...r,get:(e,t,i)=>sy(e,t)||r.get(e,t,i),has:(e,t)=>!!sy(e,t)||r.has(e,t)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NI{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(xI(t)){const i=t.getImmediate();return`${i.library}/${i.version}`}else return null}).filter(t=>t).join(" ")}}function xI(r){const e=r.getComponent();return(e==null?void 0:e.type)==="VERSION"}const rf="@firebase/app",oy="0.13.2";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jr=new Of("@firebase/app"),DI="@firebase/app-compat",bI="@firebase/analytics-compat",VI="@firebase/analytics",OI="@firebase/app-check-compat",LI="@firebase/app-check",MI="@firebase/auth",jI="@firebase/auth-compat",FI="@firebase/database",UI="@firebase/data-connect",BI="@firebase/database-compat",zI="@firebase/functions",$I="@firebase/functions-compat",WI="@firebase/installations",qI="@firebase/installations-compat",HI="@firebase/messaging",GI="@firebase/messaging-compat",KI="@firebase/performance",QI="@firebase/performance-compat",YI="@firebase/remote-config",XI="@firebase/remote-config-compat",JI="@firebase/storage",ZI="@firebase/storage-compat",eS="@firebase/firestore",tS="@firebase/ai",nS="@firebase/firestore-compat",rS="firebase",iS="11.10.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sf="[DEFAULT]",sS={[rf]:"fire-core",[DI]:"fire-core-compat",[VI]:"fire-analytics",[bI]:"fire-analytics-compat",[LI]:"fire-app-check",[OI]:"fire-app-check-compat",[MI]:"fire-auth",[jI]:"fire-auth-compat",[FI]:"fire-rtdb",[UI]:"fire-data-connect",[BI]:"fire-rtdb-compat",[zI]:"fire-fn",[$I]:"fire-fn-compat",[WI]:"fire-iid",[qI]:"fire-iid-compat",[HI]:"fire-fcm",[GI]:"fire-fcm-compat",[KI]:"fire-perf",[QI]:"fire-perf-compat",[YI]:"fire-rc",[XI]:"fire-rc-compat",[JI]:"fire-gcs",[ZI]:"fire-gcs-compat",[eS]:"fire-fst",[nS]:"fire-fst-compat",[tS]:"fire-vertex","fire-js":"fire-js",[rS]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dc=new Map,oS=new Map,of=new Map;function ay(r,e){try{r.container.addComponent(e)}catch(t){jr.debug(`Component ${e.name} failed to register with FirebaseApp ${r.name}`,t)}}function bo(r){const e=r.name;if(of.has(e))return jr.debug(`There were multiple attempts to register component ${e}.`),!1;of.set(e,r);for(const t of dc.values())ay(t,r);for(const t of oS.values())ay(t,r);return!0}function Mf(r,e){const t=r.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),r.container.getProvider(e)}function Cn(r){return r==null?!1:r.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aS={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Ai=new gl("app","Firebase",aS);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lS{constructor(e,t,i){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=i,this.container.addComponent(new Ts("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Ai.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Wo=iS;function Zv(r,e={}){let t=r;typeof e!="object"&&(e={name:e});const i=Object.assign({name:sf,automaticDataCollectionEnabled:!0},e),o=i.name;if(typeof o!="string"||!o)throw Ai.create("bad-app-name",{appName:String(o)});if(t||(t=Gv()),!t)throw Ai.create("no-options");const l=dc.get(o);if(l){if(ws(t,l.options)&&ws(i,l.config))return l;throw Ai.create("duplicate-app",{appName:o})}const h=new pI(o);for(const p of of.values())h.addComponent(p);const f=new lS(t,i,h);return dc.set(o,f),f}function e_(r=sf){const e=dc.get(r);if(!e&&r===sf&&Gv())return Zv();if(!e)throw Ai.create("no-app",{appName:r});return e}function Pi(r,e,t){var i;let o=(i=sS[r])!==null&&i!==void 0?i:r;t&&(o+=`-${t}`);const l=o.match(/\s|\//),h=e.match(/\s|\//);if(l||h){const f=[`Unable to register library "${o}" with version "${e}":`];l&&f.push(`library name "${o}" contains illegal characters (whitespace or "/")`),l&&h&&f.push("and"),h&&f.push(`version name "${e}" contains illegal characters (whitespace or "/")`),jr.warn(f.join(" "));return}bo(new Ts(`${o}-version`,()=>({library:o,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uS="firebase-heartbeat-database",cS=1,sl="firebase-heartbeat-store";let zd=null;function t_(){return zd||(zd=CI(uS,cS,{upgrade:(r,e)=>{switch(e){case 0:try{r.createObjectStore(sl)}catch(t){console.warn(t)}}}}).catch(r=>{throw Ai.create("idb-open",{originalErrorMessage:r.message})})),zd}async function hS(r){try{const t=(await t_()).transaction(sl),i=await t.objectStore(sl).get(n_(r));return await t.done,i}catch(e){if(e instanceof Wr)jr.warn(e.message);else{const t=Ai.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});jr.warn(t.message)}}}async function ly(r,e){try{const i=(await t_()).transaction(sl,"readwrite");await i.objectStore(sl).put(e,n_(r)),await i.done}catch(t){if(t instanceof Wr)jr.warn(t.message);else{const i=Ai.create("idb-set",{originalErrorMessage:t==null?void 0:t.message});jr.warn(i.message)}}}function n_(r){return`${r.name}!${r.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dS=1024,fS=30;class pS{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new gS(t),this._heartbeatsCachePromise=this._storage.read().then(i=>(this._heartbeatsCache=i,i))}async triggerHeartbeat(){var e,t;try{const o=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),l=uy();if(((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===l||this._heartbeatsCache.heartbeats.some(h=>h.date===l))return;if(this._heartbeatsCache.heartbeats.push({date:l,agent:o}),this._heartbeatsCache.heartbeats.length>fS){const h=yS(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(h,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(i){jr.warn(i)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const t=uy(),{heartbeatsToSend:i,unsentEntries:o}=mS(this._heartbeatsCache.heartbeats),l=hc(JSON.stringify({version:2,heartbeats:i}));return this._heartbeatsCache.lastSentHeartbeatDate=t,o.length>0?(this._heartbeatsCache.heartbeats=o,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),l}catch(t){return jr.warn(t),""}}}function uy(){return new Date().toISOString().substring(0,10)}function mS(r,e=dS){const t=[];let i=r.slice();for(const o of r){const l=t.find(h=>h.agent===o.agent);if(l){if(l.dates.push(o.date),cy(t)>e){l.dates.pop();break}}else if(t.push({agent:o.agent,dates:[o.date]}),cy(t)>e){t.pop();break}i=i.slice(1)}return{heartbeatsToSend:t,unsentEntries:i}}class gS{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return nI()?rI().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const t=await hS(this.app);return t!=null&&t.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var t;if(await this._canUseIndexedDBPromise){const o=await this.read();return ly(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:o.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var t;if(await this._canUseIndexedDBPromise){const o=await this.read();return ly(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:o.lastSentHeartbeatDate,heartbeats:[...o.heartbeats,...e.heartbeats]})}else return}}function cy(r){return hc(JSON.stringify({version:2,heartbeats:r})).length}function yS(r){if(r.length===0)return-1;let e=0,t=r[0].date;for(let i=1;i<r.length;i++)r[i].date<t&&(t=r[i].date,e=i);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vS(r){bo(new Ts("platform-logger",e=>new NI(e),"PRIVATE")),bo(new Ts("heartbeat",e=>new pS(e),"PRIVATE")),Pi(rf,oy,r),Pi(rf,oy,"esm2017"),Pi("fire-js","")}vS("");function jf(r,e){var t={};for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&e.indexOf(i)<0&&(t[i]=r[i]);if(r!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,i=Object.getOwnPropertySymbols(r);o<i.length;o++)e.indexOf(i[o])<0&&Object.prototype.propertyIsEnumerable.call(r,i[o])&&(t[i[o]]=r[i[o]]);return t}function r_(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const _S=r_,i_=new gl("auth","Firebase",r_());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fc=new Of("@firebase/auth");function ES(r,...e){fc.logLevel<=be.WARN&&fc.warn(`Auth (${Wo}): ${r}`,...e)}function Zu(r,...e){fc.logLevel<=be.ERROR&&fc.error(`Auth (${Wo}): ${r}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Hn(r,...e){throw Ff(r,...e)}function lr(r,...e){return Ff(r,...e)}function s_(r,e,t){const i=Object.assign(Object.assign({},_S()),{[e]:t});return new gl("auth","Firebase",i).create(e,{appName:r.name})}function Lr(r){return s_(r,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function Ff(r,...e){if(typeof r!="string"){const t=e[0],i=[...e.slice(1)];return i[0]&&(i[0].appName=r.name),r._errorFactory.create(t,...i)}return i_.create(r,...e)}function Te(r,e,...t){if(!r)throw Ff(e,...t)}function Vr(r){const e="INTERNAL ASSERTION FAILED: "+r;throw Zu(e),new Error(e)}function Fr(r,e){r||Vr(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function af(){var r;return typeof self<"u"&&((r=self.location)===null||r===void 0?void 0:r.href)||""}function wS(){return hy()==="http:"||hy()==="https:"}function hy(){var r;return typeof self<"u"&&((r=self.location)===null||r===void 0?void 0:r.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function TS(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(wS()||JT()||"connection"in navigator)?navigator.onLine:!0}function IS(){if(typeof navigator>"u")return null;const r=navigator;return r.languages&&r.languages[0]||r.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vl{constructor(e,t){this.shortDelay=e,this.longDelay=t,Fr(t>e,"Short delay should be less than long delay!"),this.isMobile=QT()||ZT()}get(){return TS()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Uf(r,e){Fr(r.emulator,"Emulator should always be set here");const{url:t}=r.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class o_{static initialize(e,t,i){this.fetchImpl=e,t&&(this.headersImpl=t),i&&(this.responseImpl=i)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Vr("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Vr("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Vr("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const SS={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const AS=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],PS=new vl(3e4,6e4);function ji(r,e){return r.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:r.tenantId}):e}async function Fi(r,e,t,i,o={}){return a_(r,o,async()=>{let l={},h={};i&&(e==="GET"?h=i:l={body:JSON.stringify(i)});const f=yl(Object.assign({key:r.config.apiKey},h)).slice(1),p=await r._getAdditionalHeaders();p["Content-Type"]="application/json",r.languageCode&&(p["X-Firebase-Locale"]=r.languageCode);const y=Object.assign({method:e,headers:p},l);return XT()||(y.referrerPolicy="no-referrer"),r.emulatorConfig&&$o(r.emulatorConfig.host)&&(y.credentials="include"),o_.fetch()(await l_(r,r.config.apiHost,t,f),y)})}async function a_(r,e,t){r._canInitEmulator=!1;const i=Object.assign(Object.assign({},SS),e);try{const o=new RS(r),l=await Promise.race([t(),o.promise]);o.clearNetworkTimeout();const h=await l.json();if("needConfirmation"in h)throw qu(r,"account-exists-with-different-credential",h);if(l.ok&&!("errorMessage"in h))return h;{const f=l.ok?h.errorMessage:h.error.message,[p,y]=f.split(" : ");if(p==="FEDERATED_USER_ID_ALREADY_LINKED")throw qu(r,"credential-already-in-use",h);if(p==="EMAIL_EXISTS")throw qu(r,"email-already-in-use",h);if(p==="USER_DISABLED")throw qu(r,"user-disabled",h);const E=i[p]||p.toLowerCase().replace(/[_\s]+/g,"-");if(y)throw s_(r,E,y);Hn(r,E)}}catch(o){if(o instanceof Wr)throw o;Hn(r,"network-request-failed",{message:String(o)})}}async function _l(r,e,t,i,o={}){const l=await Fi(r,e,t,i,o);return"mfaPendingCredential"in l&&Hn(r,"multi-factor-auth-required",{_serverResponse:l}),l}async function l_(r,e,t,i){const o=`${e}${t}?${i}`,l=r,h=l.config.emulator?Uf(r.config,o):`${r.config.apiScheme}://${o}`;return AS.includes(t)&&(await l._persistenceManagerAvailable,l._getPersistenceType()==="COOKIE")?l._getPersistence()._getFinalTarget(h).toString():h}function CS(r){switch(r){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class RS{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,i)=>{this.timer=setTimeout(()=>i(lr(this.auth,"network-request-failed")),PS.get())})}}function qu(r,e,t){const i={appName:r.name};t.email&&(i.email=t.email),t.phoneNumber&&(i.phoneNumber=t.phoneNumber);const o=lr(r,e,i);return o.customData._tokenResponse=t,o}function dy(r){return r!==void 0&&r.enterprise!==void 0}class kS{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const t of this.recaptchaEnforcementState)if(t.provider&&t.provider===e)return CS(t.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function NS(r,e){return Fi(r,"GET","/v2/recaptchaConfig",ji(r,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function xS(r,e){return Fi(r,"POST","/v1/accounts:delete",e)}async function pc(r,e){return Fi(r,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ja(r){if(r)try{const e=new Date(Number(r));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function DS(r,e=!1){const t=St(r),i=await t.getIdToken(e),o=Bf(i);Te(o&&o.exp&&o.auth_time&&o.iat,t.auth,"internal-error");const l=typeof o.firebase=="object"?o.firebase:void 0,h=l==null?void 0:l.sign_in_provider;return{claims:o,token:i,authTime:Ja($d(o.auth_time)),issuedAtTime:Ja($d(o.iat)),expirationTime:Ja($d(o.exp)),signInProvider:h||null,signInSecondFactor:(l==null?void 0:l.sign_in_second_factor)||null}}function $d(r){return Number(r)*1e3}function Bf(r){const[e,t,i]=r.split(".");if(e===void 0||t===void 0||i===void 0)return Zu("JWT malformed, contained fewer than 3 sections"),null;try{const o=qv(t);return o?JSON.parse(o):(Zu("Failed to decode base64 JWT payload"),null)}catch(o){return Zu("Caught error parsing JWT payload as JSON",o==null?void 0:o.toString()),null}}function fy(r){const e=Bf(r);return Te(e,"internal-error"),Te(typeof e.exp<"u","internal-error"),Te(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ol(r,e,t=!1){if(t)return e;try{return await e}catch(i){throw i instanceof Wr&&bS(i)&&r.auth.currentUser===r&&await r.auth.signOut(),i}}function bS({code:r}){return r==="auth/user-disabled"||r==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VS{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var t;if(e){const i=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),i}else{this.errorBackoff=3e4;const o=((t=this.user.stsTokenManager.expirationTime)!==null&&t!==void 0?t:0)-Date.now()-3e5;return Math.max(0,o)}}schedule(e=!1){if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lf{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=Ja(this.lastLoginAt),this.creationTime=Ja(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function mc(r){var e;const t=r.auth,i=await r.getIdToken(),o=await ol(r,pc(t,{idToken:i}));Te(o==null?void 0:o.users.length,t,"internal-error");const l=o.users[0];r._notifyReloadListener(l);const h=!((e=l.providerUserInfo)===null||e===void 0)&&e.length?u_(l.providerUserInfo):[],f=LS(r.providerData,h),p=r.isAnonymous,y=!(r.email&&l.passwordHash)&&!(f!=null&&f.length),E=p?y:!1,T={uid:l.localId,displayName:l.displayName||null,photoURL:l.photoUrl||null,email:l.email||null,emailVerified:l.emailVerified||!1,phoneNumber:l.phoneNumber||null,tenantId:l.tenantId||null,providerData:f,metadata:new lf(l.createdAt,l.lastLoginAt),isAnonymous:E};Object.assign(r,T)}async function OS(r){const e=St(r);await mc(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function LS(r,e){return[...r.filter(i=>!e.some(o=>o.providerId===i.providerId)),...e]}function u_(r){return r.map(e=>{var{providerId:t}=e,i=jf(e,["providerId"]);return{providerId:t,uid:i.rawId||"",displayName:i.displayName||null,email:i.email||null,phoneNumber:i.phoneNumber||null,photoURL:i.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function MS(r,e){const t=await a_(r,{},async()=>{const i=yl({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:o,apiKey:l}=r.config,h=await l_(r,o,"/v1/token",`key=${l}`),f=await r._getAdditionalHeaders();f["Content-Type"]="application/x-www-form-urlencoded";const p={method:"POST",headers:f,body:i};return r.emulatorConfig&&$o(r.emulatorConfig.host)&&(p.credentials="include"),o_.fetch()(h,p)});return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}}async function jS(r,e){return Fi(r,"POST","/v2/accounts:revokeToken",ji(r,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ko{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Te(e.idToken,"internal-error"),Te(typeof e.idToken<"u","internal-error"),Te(typeof e.refreshToken<"u","internal-error");const t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):fy(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){Te(e.length!==0,"internal-error");const t=fy(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e,t=!1){return!t&&this.accessToken&&!this.isExpired?this.accessToken:(Te(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:i,refreshToken:o,expiresIn:l}=await MS(e,t);this.updateTokensAndExpiration(i,o,Number(l))}updateTokensAndExpiration(e,t,i){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+i*1e3}static fromJSON(e,t){const{refreshToken:i,accessToken:o,expirationTime:l}=t,h=new ko;return i&&(Te(typeof i=="string","internal-error",{appName:e}),h.refreshToken=i),o&&(Te(typeof o=="string","internal-error",{appName:e}),h.accessToken=o),l&&(Te(typeof l=="number","internal-error",{appName:e}),h.expirationTime=l),h}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new ko,this.toJSON())}_performRefresh(){return Vr("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mi(r,e){Te(typeof r=="string"||typeof r>"u","internal-error",{appName:e})}class qn{constructor(e){var{uid:t,auth:i,stsTokenManager:o}=e,l=jf(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new VS(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=i,this.stsTokenManager=o,this.accessToken=o.accessToken,this.displayName=l.displayName||null,this.email=l.email||null,this.emailVerified=l.emailVerified||!1,this.phoneNumber=l.phoneNumber||null,this.photoURL=l.photoURL||null,this.isAnonymous=l.isAnonymous||!1,this.tenantId=l.tenantId||null,this.providerData=l.providerData?[...l.providerData]:[],this.metadata=new lf(l.createdAt||void 0,l.lastLoginAt||void 0)}async getIdToken(e){const t=await ol(this,this.stsTokenManager.getToken(this.auth,e));return Te(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return DS(this,e)}reload(){return OS(this)}_assign(e){this!==e&&(Te(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>Object.assign({},t)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new qn(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return t.metadata._copy(this.metadata),t}_onReload(e){Te(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,t=!1){let i=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),i=!0),t&&await mc(this),await this.auth._persistUserIfCurrent(this),i&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Cn(this.auth.app))return Promise.reject(Lr(this.auth));const e=await this.getIdToken();return await ol(this,xS(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){var i,o,l,h,f,p,y,E;const T=(i=t.displayName)!==null&&i!==void 0?i:void 0,S=(o=t.email)!==null&&o!==void 0?o:void 0,V=(l=t.phoneNumber)!==null&&l!==void 0?l:void 0,L=(h=t.photoURL)!==null&&h!==void 0?h:void 0,z=(f=t.tenantId)!==null&&f!==void 0?f:void 0,F=(p=t._redirectEventId)!==null&&p!==void 0?p:void 0,oe=(y=t.createdAt)!==null&&y!==void 0?y:void 0,Y=(E=t.lastLoginAt)!==null&&E!==void 0?E:void 0,{uid:re,emailVerified:ye,isAnonymous:Re,providerData:ie,stsTokenManager:k}=t;Te(re&&k,e,"internal-error");const A=ko.fromJSON(this.name,k);Te(typeof re=="string",e,"internal-error"),mi(T,e.name),mi(S,e.name),Te(typeof ye=="boolean",e,"internal-error"),Te(typeof Re=="boolean",e,"internal-error"),mi(V,e.name),mi(L,e.name),mi(z,e.name),mi(F,e.name),mi(oe,e.name),mi(Y,e.name);const C=new qn({uid:re,auth:e,email:S,emailVerified:ye,displayName:T,isAnonymous:Re,photoURL:L,phoneNumber:V,tenantId:z,stsTokenManager:A,createdAt:oe,lastLoginAt:Y});return ie&&Array.isArray(ie)&&(C.providerData=ie.map(x=>Object.assign({},x))),F&&(C._redirectEventId=F),C}static async _fromIdTokenResponse(e,t,i=!1){const o=new ko;o.updateFromServerResponse(t);const l=new qn({uid:t.localId,auth:e,stsTokenManager:o,isAnonymous:i});return await mc(l),l}static async _fromGetAccountInfoResponse(e,t,i){const o=t.users[0];Te(o.localId!==void 0,"internal-error");const l=o.providerUserInfo!==void 0?u_(o.providerUserInfo):[],h=!(o.email&&o.passwordHash)&&!(l!=null&&l.length),f=new ko;f.updateFromIdToken(i);const p=new qn({uid:o.localId,auth:e,stsTokenManager:f,isAnonymous:h}),y={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:l,metadata:new lf(o.createdAt,o.lastLoginAt),isAnonymous:!(o.email&&o.passwordHash)&&!(l!=null&&l.length)};return Object.assign(p,y),p}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const py=new Map;function Or(r){Fr(r instanceof Function,"Expected a class definition");let e=py.get(r);return e?(Fr(e instanceof r,"Instance stored in cache mismatched with class"),e):(e=new r,py.set(r,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class c_{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return t===void 0?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}c_.type="NONE";const my=c_;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ec(r,e,t){return`firebase:${r}:${e}:${t}`}class No{constructor(e,t,i){this.persistence=e,this.auth=t,this.userKey=i;const{config:o,name:l}=this.auth;this.fullUserKey=ec(this.userKey,o.apiKey,l),this.fullPersistenceKey=ec("persistence",o.apiKey,l),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const t=await pc(this.auth,{idToken:e}).catch(()=>{});return t?qn._fromGetAccountInfoResponse(this.auth,t,e):null}return qn._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t,i="authUser"){if(!t.length)return new No(Or(my),e,i);const o=(await Promise.all(t.map(async y=>{if(await y._isAvailable())return y}))).filter(y=>y);let l=o[0]||Or(my);const h=ec(i,e.config.apiKey,e.name);let f=null;for(const y of t)try{const E=await y._get(h);if(E){let T;if(typeof E=="string"){const S=await pc(e,{idToken:E}).catch(()=>{});if(!S)break;T=await qn._fromGetAccountInfoResponse(e,S,E)}else T=qn._fromJSON(e,E);y!==l&&(f=T),l=y;break}}catch{}const p=o.filter(y=>y._shouldAllowMigration);return!l._shouldAllowMigration||!p.length?new No(l,e,i):(l=p[0],f&&await l._set(h,f.toJSON()),await Promise.all(t.map(async y=>{if(y!==l)try{await y._remove(h)}catch{}})),new No(l,e,i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gy(r){const e=r.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(p_(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(h_(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(g_(e))return"Blackberry";if(y_(e))return"Webos";if(d_(e))return"Safari";if((e.includes("chrome/")||f_(e))&&!e.includes("edge/"))return"Chrome";if(m_(e))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,i=r.match(t);if((i==null?void 0:i.length)===2)return i[1]}return"Other"}function h_(r=Wt()){return/firefox\//i.test(r)}function d_(r=Wt()){const e=r.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function f_(r=Wt()){return/crios\//i.test(r)}function p_(r=Wt()){return/iemobile/i.test(r)}function m_(r=Wt()){return/android/i.test(r)}function g_(r=Wt()){return/blackberry/i.test(r)}function y_(r=Wt()){return/webos/i.test(r)}function zf(r=Wt()){return/iphone|ipad|ipod/i.test(r)||/macintosh/i.test(r)&&/mobile/i.test(r)}function FS(r=Wt()){var e;return zf(r)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function US(){return eI()&&document.documentMode===10}function v_(r=Wt()){return zf(r)||m_(r)||y_(r)||g_(r)||/windows phone/i.test(r)||p_(r)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function __(r,e=[]){let t;switch(r){case"Browser":t=gy(Wt());break;case"Worker":t=`${gy(Wt())}-${r}`;break;default:t=r}const i=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${Wo}/${i}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BS{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const i=l=>new Promise((h,f)=>{try{const p=e(l);h(p)}catch(p){f(p)}});i.onAbort=t,this.queue.push(i);const o=this.queue.length-1;return()=>{this.queue[o]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const i of this.queue)await i(e),i.onAbort&&t.push(i.onAbort)}catch(i){t.reverse();for(const o of t)try{o()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:i==null?void 0:i.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function zS(r,e={}){return Fi(r,"GET","/v2/passwordPolicy",ji(r,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $S=6;class WS{constructor(e){var t,i,o,l;const h=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(t=h.minPasswordLength)!==null&&t!==void 0?t:$S,h.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=h.maxPasswordLength),h.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=h.containsLowercaseCharacter),h.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=h.containsUppercaseCharacter),h.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=h.containsNumericCharacter),h.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=h.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(o=(i=e.allowedNonAlphanumericCharacters)===null||i===void 0?void 0:i.join(""))!==null&&o!==void 0?o:"",this.forceUpgradeOnSignin=(l=e.forceUpgradeOnSignin)!==null&&l!==void 0?l:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var t,i,o,l,h,f;const p={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,p),this.validatePasswordCharacterOptions(e,p),p.isValid&&(p.isValid=(t=p.meetsMinPasswordLength)!==null&&t!==void 0?t:!0),p.isValid&&(p.isValid=(i=p.meetsMaxPasswordLength)!==null&&i!==void 0?i:!0),p.isValid&&(p.isValid=(o=p.containsLowercaseLetter)!==null&&o!==void 0?o:!0),p.isValid&&(p.isValid=(l=p.containsUppercaseLetter)!==null&&l!==void 0?l:!0),p.isValid&&(p.isValid=(h=p.containsNumericCharacter)!==null&&h!==void 0?h:!0),p.isValid&&(p.isValid=(f=p.containsNonAlphanumericCharacter)!==null&&f!==void 0?f:!0),p}validatePasswordLengthOptions(e,t){const i=this.customStrengthOptions.minPasswordLength,o=this.customStrengthOptions.maxPasswordLength;i&&(t.meetsMinPasswordLength=e.length>=i),o&&(t.meetsMaxPasswordLength=e.length<=o)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let i;for(let o=0;o<e.length;o++)i=e.charAt(o),this.updatePasswordCharacterOptionsStatuses(t,i>="a"&&i<="z",i>="A"&&i<="Z",i>="0"&&i<="9",this.allowedNonAlphanumericCharacters.includes(i))}updatePasswordCharacterOptionsStatuses(e,t,i,o,l){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=i)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=o)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=l))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qS{constructor(e,t,i,o){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=i,this.config=o,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new yy(this),this.idTokenSubscription=new yy(this),this.beforeStateQueue=new BS(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=i_,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=o.sdkClientVersion,this._persistenceManagerAvailable=new Promise(l=>this._resolvePersistenceManagerAvailable=l)}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=Or(t)),this._initializationPromise=this.queue(async()=>{var i,o,l;if(!this._deleted&&(this.persistenceManager=await No.create(this,e),(i=this._resolvePersistenceManagerAvailable)===null||i===void 0||i.call(this),!this._deleted)){if(!((o=this._popupRedirectResolver)===null||o===void 0)&&o._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(t),this.lastNotifiedUid=((l=this.currentUser)===null||l===void 0?void 0:l.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const t=await pc(this,{idToken:e}),i=await qn._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(i)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var t;if(Cn(this.app)){const h=this.app.settings.authIdToken;return h?new Promise(f=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(h).then(f,f))}):this.directlySetCurrentUser(null)}const i=await this.assertedPersistence.getCurrentUser();let o=i,l=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const h=(t=this.redirectUser)===null||t===void 0?void 0:t._redirectEventId,f=o==null?void 0:o._redirectEventId,p=await this.tryRedirectSignIn(e);(!h||h===f)&&(p!=null&&p.user)&&(o=p.user,l=!0)}if(!o)return this.directlySetCurrentUser(null);if(!o._redirectEventId){if(l)try{await this.beforeStateQueue.runMiddleware(o)}catch(h){o=i,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(h))}return o?this.reloadAndSetCurrentUserOrClear(o):this.directlySetCurrentUser(null)}return Te(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===o._redirectEventId?this.directlySetCurrentUser(o):this.reloadAndSetCurrentUserOrClear(o)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await mc(e)}catch(t){if((t==null?void 0:t.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=IS()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(Cn(this.app))return Promise.reject(Lr(this));const t=e?St(e):null;return t&&Te(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e,t=!1){if(!this._deleted)return e&&Te(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return Cn(this.app)?Promise.reject(Lr(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return Cn(this.app)?Promise.reject(Lr(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Or(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await zS(this),t=new WS(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new gl("auth","Firebase",e())}onAuthStateChanged(e,t,i){return this.registerStateListener(this.authStateSubscription,e,t,i)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,i){return this.registerStateListener(this.idTokenSubscription,e,t,i)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{const i=this.onAuthStateChanged(()=>{i(),e()},t)}})}async revokeAccessToken(e){if(this.currentUser){const t=await this.currentUser.getIdToken(),i={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(i.tenantId=this.tenantId),await jS(this,i)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,t){const i=await this.getOrInitRedirectPersistenceManager(t);return e===null?i.removeCurrentUser():i.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&Or(e)||this._popupRedirectResolver;Te(t,this,"argument-error"),this.redirectPersistenceManager=await No.create(this,[Or(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var t,i;return this._isInitialized&&await this.queue(async()=>{}),((t=this._currentUser)===null||t===void 0?void 0:t._redirectEventId)===e?this._currentUser:((i=this.redirectUser)===null||i===void 0?void 0:i._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const i=(t=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&t!==void 0?t:null;this.lastNotifiedUid!==i&&(this.lastNotifiedUid=i,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,i,o){if(this._deleted)return()=>{};const l=typeof t=="function"?t:t.next.bind(t);let h=!1;const f=this._isInitialized?Promise.resolve():this._initializationPromise;if(Te(f,this,"internal-error"),f.then(()=>{h||l(this.currentUser)}),typeof t=="function"){const p=e.addObserver(t,i,o);return()=>{h=!0,p()}}else{const p=e.addObserver(t);return()=>{h=!0,p()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Te(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=__(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const t={"X-Client-Version":this.clientVersion};this.app.options.appId&&(t["X-Firebase-gmpid"]=this.app.options.appId);const i=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());i&&(t["X-Firebase-Client"]=i);const o=await this._getAppCheckToken();return o&&(t["X-Firebase-AppCheck"]=o),t}async _getAppCheckToken(){var e;if(Cn(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const t=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return t!=null&&t.error&&ES(`Error while retrieving App Check token: ${t.error}`),t==null?void 0:t.token}}function Cs(r){return St(r)}class yy{constructor(e){this.auth=e,this.observer=null,this.addObserver=lI(t=>this.observer=t)}get next(){return Te(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Lc={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function HS(r){Lc=r}function E_(r){return Lc.loadJS(r)}function GS(){return Lc.recaptchaEnterpriseScript}function KS(){return Lc.gapiScript}function QS(r){return`__${r}${Math.floor(Math.random()*1e6)}`}class YS{constructor(){this.enterprise=new XS}ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}class XS{ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}const JS="recaptcha-enterprise",w_="NO_RECAPTCHA";class ZS{constructor(e){this.type=JS,this.auth=Cs(e)}async verify(e="verify",t=!1){async function i(l){if(!t){if(l.tenantId==null&&l._agentRecaptchaConfig!=null)return l._agentRecaptchaConfig.siteKey;if(l.tenantId!=null&&l._tenantRecaptchaConfigs[l.tenantId]!==void 0)return l._tenantRecaptchaConfigs[l.tenantId].siteKey}return new Promise(async(h,f)=>{NS(l,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(p=>{if(p.recaptchaKey===void 0)f(new Error("recaptcha Enterprise site key undefined"));else{const y=new kS(p);return l.tenantId==null?l._agentRecaptchaConfig=y:l._tenantRecaptchaConfigs[l.tenantId]=y,h(y.siteKey)}}).catch(p=>{f(p)})})}function o(l,h,f){const p=window.grecaptcha;dy(p)?p.enterprise.ready(()=>{p.enterprise.execute(l,{action:e}).then(y=>{h(y)}).catch(()=>{h(w_)})}):f(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new YS().execute("siteKey",{action:"verify"}):new Promise((l,h)=>{i(this.auth).then(f=>{if(!t&&dy(window.grecaptcha))o(f,l,h);else{if(typeof window>"u"){h(new Error("RecaptchaVerifier is only supported in browser"));return}let p=GS();p.length!==0&&(p+=f),E_(p).then(()=>{o(f,l,h)}).catch(y=>{h(y)})}}).catch(f=>{h(f)})})}}async function vy(r,e,t,i=!1,o=!1){const l=new ZS(r);let h;if(o)h=w_;else try{h=await l.verify(t)}catch{h=await l.verify(t,!0)}const f=Object.assign({},e);if(t==="mfaSmsEnrollment"||t==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in f){const p=f.phoneEnrollmentInfo.phoneNumber,y=f.phoneEnrollmentInfo.recaptchaToken;Object.assign(f,{phoneEnrollmentInfo:{phoneNumber:p,recaptchaToken:y,captchaResponse:h,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in f){const p=f.phoneSignInInfo.recaptchaToken;Object.assign(f,{phoneSignInInfo:{recaptchaToken:p,captchaResponse:h,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return f}return i?Object.assign(f,{captchaResp:h}):Object.assign(f,{captchaResponse:h}),Object.assign(f,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(f,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),f}async function uf(r,e,t,i,o){var l;if(!((l=r._getRecaptchaConfig())===null||l===void 0)&&l.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const h=await vy(r,e,t,t==="getOobCode");return i(r,h)}else return i(r,e).catch(async h=>{if(h.code==="auth/missing-recaptcha-token"){console.log(`${t} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const f=await vy(r,e,t,t==="getOobCode");return i(r,f)}else return Promise.reject(h)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function eA(r,e){const t=Mf(r,"auth");if(t.isInitialized()){const o=t.getImmediate(),l=t.getOptions();if(ws(l,e??{}))return o;Hn(o,"already-initialized")}return t.initialize({options:e})}function tA(r,e){const t=(e==null?void 0:e.persistence)||[],i=(Array.isArray(t)?t:[t]).map(Or);e!=null&&e.errorMap&&r._updateErrorMap(e.errorMap),r._initializeWithPersistence(i,e==null?void 0:e.popupRedirectResolver)}function nA(r,e,t){const i=Cs(r);Te(/^https?:\/\//.test(e),i,"invalid-emulator-scheme");const o=!1,l=T_(e),{host:h,port:f}=rA(e),p=f===null?"":`:${f}`,y={url:`${l}//${h}${p}/`},E=Object.freeze({host:h,port:f,protocol:l.replace(":",""),options:Object.freeze({disableWarnings:o})});if(!i._canInitEmulator){Te(i.config.emulator&&i.emulatorConfig,i,"emulator-config-failed"),Te(ws(y,i.config.emulator)&&ws(E,i.emulatorConfig),i,"emulator-config-failed");return}i.config.emulator=y,i.emulatorConfig=E,i.settings.appVerificationDisabledForTesting=!0,$o(h)?(Qv(`${l}//${h}${p}`),Yv("Auth",!0)):iA()}function T_(r){const e=r.indexOf(":");return e<0?"":r.substr(0,e+1)}function rA(r){const e=T_(r),t=/(\/\/)?([^?#/]+)/.exec(r.substr(e.length));if(!t)return{host:"",port:null};const i=t[2].split("@").pop()||"",o=/^(\[[^\]]+\])(:|$)/.exec(i);if(o){const l=o[1];return{host:l,port:_y(i.substr(l.length+1))}}else{const[l,h]=i.split(":");return{host:l,port:_y(h)}}}function _y(r){if(!r)return null;const e=Number(r);return isNaN(e)?null:e}function iA(){function r(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",r):r())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $f{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return Vr("not implemented")}_getIdTokenResponse(e){return Vr("not implemented")}_linkToIdToken(e,t){return Vr("not implemented")}_getReauthenticationResolver(e){return Vr("not implemented")}}async function sA(r,e){return Fi(r,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function oA(r,e){return _l(r,"POST","/v1/accounts:signInWithPassword",ji(r,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function aA(r,e){return _l(r,"POST","/v1/accounts:signInWithEmailLink",ji(r,e))}async function lA(r,e){return _l(r,"POST","/v1/accounts:signInWithEmailLink",ji(r,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class al extends $f{constructor(e,t,i,o=null){super("password",i),this._email=e,this._password=t,this._tenantId=o}static _fromEmailAndPassword(e,t){return new al(e,t,"password")}static _fromEmailAndCode(e,t,i=null){return new al(e,t,"emailLink",i)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e;if(t!=null&&t.email&&(t!=null&&t.password)){if(t.signInMethod==="password")return this._fromEmailAndPassword(t.email,t.password);if(t.signInMethod==="emailLink")return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const t={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return uf(e,t,"signInWithPassword",oA);case"emailLink":return aA(e,{email:this._email,oobCode:this._password});default:Hn(e,"internal-error")}}async _linkToIdToken(e,t){switch(this.signInMethod){case"password":const i={idToken:t,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return uf(e,i,"signUpPassword",sA);case"emailLink":return lA(e,{idToken:t,email:this._email,oobCode:this._password});default:Hn(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function xo(r,e){return _l(r,"POST","/v1/accounts:signInWithIdp",ji(r,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uA="http://localhost";class Is extends $f{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new Is(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):Hn("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e,{providerId:i,signInMethod:o}=t,l=jf(t,["providerId","signInMethod"]);if(!i||!o)return null;const h=new Is(i,o);return h.idToken=l.idToken||void 0,h.accessToken=l.accessToken||void 0,h.secret=l.secret,h.nonce=l.nonce,h.pendingToken=l.pendingToken||null,h}_getIdTokenResponse(e){const t=this.buildRequest();return xo(e,t)}_linkToIdToken(e,t){const i=this.buildRequest();return i.idToken=t,xo(e,i)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,xo(e,t)}buildRequest(){const e={requestUri:uA,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=yl(t)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cA(r){switch(r){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function hA(r){const e=qa(Ha(r)).link,t=e?qa(Ha(e)).deep_link_id:null,i=qa(Ha(r)).deep_link_id;return(i?qa(Ha(i)).link:null)||i||t||e||r}class Wf{constructor(e){var t,i,o,l,h,f;const p=qa(Ha(e)),y=(t=p.apiKey)!==null&&t!==void 0?t:null,E=(i=p.oobCode)!==null&&i!==void 0?i:null,T=cA((o=p.mode)!==null&&o!==void 0?o:null);Te(y&&E&&T,"argument-error"),this.apiKey=y,this.operation=T,this.code=E,this.continueUrl=(l=p.continueUrl)!==null&&l!==void 0?l:null,this.languageCode=(h=p.lang)!==null&&h!==void 0?h:null,this.tenantId=(f=p.tenantId)!==null&&f!==void 0?f:null}static parseLink(e){const t=hA(e);try{return new Wf(t)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qo{constructor(){this.providerId=qo.PROVIDER_ID}static credential(e,t){return al._fromEmailAndPassword(e,t)}static credentialWithLink(e,t){const i=Wf.parseLink(t);return Te(i,"argument-error"),al._fromEmailAndCode(e,i.code,i.tenantId)}}qo.PROVIDER_ID="password";qo.EMAIL_PASSWORD_SIGN_IN_METHOD="password";qo.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class I_{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class El extends I_{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yi extends El{constructor(){super("facebook.com")}static credential(e){return Is._fromParams({providerId:yi.PROVIDER_ID,signInMethod:yi.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return yi.credentialFromTaggedObject(e)}static credentialFromError(e){return yi.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return yi.credential(e.oauthAccessToken)}catch{return null}}}yi.FACEBOOK_SIGN_IN_METHOD="facebook.com";yi.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vi extends El{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return Is._fromParams({providerId:vi.PROVIDER_ID,signInMethod:vi.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return vi.credentialFromTaggedObject(e)}static credentialFromError(e){return vi.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:t,oauthAccessToken:i}=e;if(!t&&!i)return null;try{return vi.credential(t,i)}catch{return null}}}vi.GOOGLE_SIGN_IN_METHOD="google.com";vi.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _i extends El{constructor(){super("github.com")}static credential(e){return Is._fromParams({providerId:_i.PROVIDER_ID,signInMethod:_i.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return _i.credentialFromTaggedObject(e)}static credentialFromError(e){return _i.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return _i.credential(e.oauthAccessToken)}catch{return null}}}_i.GITHUB_SIGN_IN_METHOD="github.com";_i.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ei extends El{constructor(){super("twitter.com")}static credential(e,t){return Is._fromParams({providerId:Ei.PROVIDER_ID,signInMethod:Ei.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return Ei.credentialFromTaggedObject(e)}static credentialFromError(e){return Ei.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:t,oauthTokenSecret:i}=e;if(!t||!i)return null;try{return Ei.credential(t,i)}catch{return null}}}Ei.TWITTER_SIGN_IN_METHOD="twitter.com";Ei.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function dA(r,e){return _l(r,"POST","/v1/accounts:signUp",ji(r,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ss{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,i,o=!1){const l=await qn._fromIdTokenResponse(e,i,o),h=Ey(i);return new Ss({user:l,providerId:h,_tokenResponse:i,operationType:t})}static async _forOperation(e,t,i){await e._updateTokensIfNecessary(i,!0);const o=Ey(i);return new Ss({user:e,providerId:o,_tokenResponse:i,operationType:t})}}function Ey(r){return r.providerId?r.providerId:"phoneNumber"in r?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gc extends Wr{constructor(e,t,i,o){var l;super(t.code,t.message),this.operationType=i,this.user=o,Object.setPrototypeOf(this,gc.prototype),this.customData={appName:e.name,tenantId:(l=e.tenantId)!==null&&l!==void 0?l:void 0,_serverResponse:t.customData._serverResponse,operationType:i}}static _fromErrorAndOperation(e,t,i,o){return new gc(e,t,i,o)}}function S_(r,e,t,i){return(e==="reauthenticate"?t._getReauthenticationResolver(r):t._getIdTokenResponse(r)).catch(l=>{throw l.code==="auth/multi-factor-auth-required"?gc._fromErrorAndOperation(r,l,e,i):l})}async function fA(r,e,t=!1){const i=await ol(r,e._linkToIdToken(r.auth,await r.getIdToken()),t);return Ss._forOperation(r,"link",i)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function pA(r,e,t=!1){const{auth:i}=r;if(Cn(i.app))return Promise.reject(Lr(i));const o="reauthenticate";try{const l=await ol(r,S_(i,o,e,r),t);Te(l.idToken,i,"internal-error");const h=Bf(l.idToken);Te(h,i,"internal-error");const{sub:f}=h;return Te(r.uid===f,i,"user-mismatch"),Ss._forOperation(r,o,l)}catch(l){throw(l==null?void 0:l.code)==="auth/user-not-found"&&Hn(i,"user-mismatch"),l}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function A_(r,e,t=!1){if(Cn(r.app))return Promise.reject(Lr(r));const i="signIn",o=await S_(r,i,e),l=await Ss._fromIdTokenResponse(r,i,o);return t||await r._updateCurrentUser(l.user),l}async function mA(r,e){return A_(Cs(r),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function P_(r){const e=Cs(r);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function gA(r,e,t){if(Cn(r.app))return Promise.reject(Lr(r));const i=Cs(r),h=await uf(i,{returnSecureToken:!0,email:e,password:t,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",dA).catch(p=>{throw p.code==="auth/password-does-not-meet-requirements"&&P_(r),p}),f=await Ss._fromIdTokenResponse(i,"signIn",h);return await i._updateCurrentUser(f.user),f}function yA(r,e,t){return Cn(r.app)?Promise.reject(Lr(r)):mA(St(r),qo.credential(e,t)).catch(async i=>{throw i.code==="auth/password-does-not-meet-requirements"&&P_(r),i})}function vA(r,e,t,i){return St(r).onIdTokenChanged(e,t,i)}function _A(r,e,t){return St(r).beforeAuthStateChanged(e,t)}function EA(r,e,t,i){return St(r).onAuthStateChanged(e,t,i)}function wA(r){return St(r).signOut()}const yc="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class C_{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(yc,"1"),this.storage.removeItem(yc),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const TA=1e3,IA=10;class R_ extends C_{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=v_(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const i=this.storage.getItem(t),o=this.localCache[t];i!==o&&e(t,o,i)}}onStorageEvent(e,t=!1){if(!e.key){this.forAllChangedKeys((h,f,p)=>{this.notifyListeners(h,p)});return}const i=e.key;t?this.detachListener():this.stopPolling();const o=()=>{const h=this.storage.getItem(i);!t&&this.localCache[i]===h||this.notifyListeners(i,h)},l=this.storage.getItem(i);US()&&l!==e.newValue&&e.newValue!==e.oldValue?setTimeout(o,IA):o()}notifyListeners(e,t){this.localCache[e]=t;const i=this.listeners[e];if(i)for(const o of Array.from(i))o(t&&JSON.parse(t))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,t,i)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:i}),!0)})},TA)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}R_.type="LOCAL";const SA=R_;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class k_ extends C_{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,t){}_removeListener(e,t){}}k_.type="SESSION";const N_=k_;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function AA(r){return Promise.all(r.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mc{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find(o=>o.isListeningto(e));if(t)return t;const i=new Mc(e);return this.receivers.push(i),i}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:i,eventType:o,data:l}=t.data,h=this.handlersMap[o];if(!(h!=null&&h.size))return;t.ports[0].postMessage({status:"ack",eventId:i,eventType:o});const f=Array.from(h).map(async y=>y(t.origin,l)),p=await AA(f);t.ports[0].postMessage({status:"done",eventId:i,eventType:o,response:p})}_subscribe(e,t){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),(!t||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Mc.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qf(r="",e=10){let t="";for(let i=0;i<e;i++)t+=Math.floor(Math.random()*10);return r+t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PA{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t,i=50){const o=typeof MessageChannel<"u"?new MessageChannel:null;if(!o)throw new Error("connection_unavailable");let l,h;return new Promise((f,p)=>{const y=qf("",20);o.port1.start();const E=setTimeout(()=>{p(new Error("unsupported_event"))},i);h={messageChannel:o,onMessage(T){const S=T;if(S.data.eventId===y)switch(S.data.status){case"ack":clearTimeout(E),l=setTimeout(()=>{p(new Error("timeout"))},3e3);break;case"done":clearTimeout(l),f(S.data.response);break;default:clearTimeout(E),clearTimeout(l),p(new Error("invalid_response"));break}}},this.handlers.add(h),o.port1.addEventListener("message",h.onMessage),this.target.postMessage({eventType:e,eventId:y,data:t},[o.port2])}).finally(()=>{h&&this.removeMessageHandler(h)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ur(){return window}function CA(r){ur().location.href=r}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function x_(){return typeof ur().WorkerGlobalScope<"u"&&typeof ur().importScripts=="function"}async function RA(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function kA(){var r;return((r=navigator==null?void 0:navigator.serviceWorker)===null||r===void 0?void 0:r.controller)||null}function NA(){return x_()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const D_="firebaseLocalStorageDb",xA=1,vc="firebaseLocalStorage",b_="fbase_key";class wl{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}}function jc(r,e){return r.transaction([vc],e?"readwrite":"readonly").objectStore(vc)}function DA(){const r=indexedDB.deleteDatabase(D_);return new wl(r).toPromise()}function cf(){const r=indexedDB.open(D_,xA);return new Promise((e,t)=>{r.addEventListener("error",()=>{t(r.error)}),r.addEventListener("upgradeneeded",()=>{const i=r.result;try{i.createObjectStore(vc,{keyPath:b_})}catch(o){t(o)}}),r.addEventListener("success",async()=>{const i=r.result;i.objectStoreNames.contains(vc)?e(i):(i.close(),await DA(),e(await cf()))})})}async function wy(r,e,t){const i=jc(r,!0).put({[b_]:e,value:t});return new wl(i).toPromise()}async function bA(r,e){const t=jc(r,!1).get(e),i=await new wl(t).toPromise();return i===void 0?null:i.value}function Ty(r,e){const t=jc(r,!0).delete(e);return new wl(t).toPromise()}const VA=800,OA=3;class V_{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await cf(),this.db)}async _withRetries(e){let t=0;for(;;)try{const i=await this._openDb();return await e(i)}catch(i){if(t++>OA)throw i;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return x_()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Mc._getInstance(NA()),this.receiver._subscribe("keyChanged",async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)})),this.receiver._subscribe("ping",async(e,t)=>["keyChanged"])}async initializeSender(){var e,t;if(this.activeServiceWorker=await RA(),!this.activeServiceWorker)return;this.sender=new PA(this.activeServiceWorker);const i=await this.sender._send("ping",{},800);i&&!((e=i[0])===null||e===void 0)&&e.fulfilled&&!((t=i[0])===null||t===void 0)&&t.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||kA()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await cf();return await wy(e,yc,"1"),await Ty(e,yc),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite(async()=>(await this._withRetries(i=>wy(i,e,t)),this.localCache[e]=t,this.notifyServiceWorker(e)))}async _get(e){const t=await this._withRetries(i=>bA(i,e));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(t=>Ty(t,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(o=>{const l=jc(o,!1).getAll();return new wl(l).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const t=[],i=new Set;if(e.length!==0)for(const{fbase_key:o,value:l}of e)i.add(o),JSON.stringify(this.localCache[o])!==JSON.stringify(l)&&(this.notifyListeners(o,l),t.push(o));for(const o of Object.keys(this.localCache))this.localCache[o]&&!i.has(o)&&(this.notifyListeners(o,null),t.push(o));return t}notifyListeners(e,t){this.localCache[e]=t;const i=this.listeners[e];if(i)for(const o of Array.from(i))o(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),VA)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}V_.type="LOCAL";const LA=V_;new vl(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function MA(r,e){return e?Or(e):(Te(r._popupRedirectResolver,r,"argument-error"),r._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hf extends $f{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return xo(e,this._buildIdpRequest())}_linkToIdToken(e,t){return xo(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return xo(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function jA(r){return A_(r.auth,new Hf(r),r.bypassAuthState)}function FA(r){const{auth:e,user:t}=r;return Te(t,e,"internal-error"),pA(t,new Hf(r),r.bypassAuthState)}async function UA(r){const{auth:e,user:t}=r;return Te(t,e,"internal-error"),fA(t,new Hf(r),r.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class O_{constructor(e,t,i,o,l=!1){this.auth=e,this.resolver=i,this.user=o,this.bypassAuthState=l,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise(async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(i){this.reject(i)}})}async onAuthEvent(e){const{urlResponse:t,sessionId:i,postBody:o,tenantId:l,error:h,type:f}=e;if(h){this.reject(h);return}const p={auth:this.auth,requestUri:t,sessionId:i,tenantId:l||void 0,postBody:o||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(f)(p))}catch(y){this.reject(y)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return jA;case"linkViaPopup":case"linkViaRedirect":return UA;case"reauthViaPopup":case"reauthViaRedirect":return FA;default:Hn(this.auth,"internal-error")}}resolve(e){Fr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Fr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const BA=new vl(2e3,1e4);class Ro extends O_{constructor(e,t,i,o,l){super(e,t,o,l),this.provider=i,this.authWindow=null,this.pollId=null,Ro.currentPopupAction&&Ro.currentPopupAction.cancel(),Ro.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return Te(e,this.auth,"internal-error"),e}async onExecution(){Fr(this.filter.length===1,"Popup operations only handle one event");const e=qf();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(t=>{this.reject(t)}),this.resolver._isIframeWebStorageSupported(this.auth,t=>{t||this.reject(lr(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(lr(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Ro.currentPopupAction=null}pollUserCancellation(){const e=()=>{var t,i;if(!((i=(t=this.authWindow)===null||t===void 0?void 0:t.window)===null||i===void 0)&&i.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(lr(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,BA.get())};e()}}Ro.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zA="pendingRedirect",tc=new Map;class $A extends O_{constructor(e,t,i=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,i),this.eventId=null}async execute(){let e=tc.get(this.auth._key());if(!e){try{const i=await WA(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(i)}catch(t){e=()=>Promise.reject(t)}tc.set(this.auth._key(),e)}return this.bypassAuthState||tc.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function WA(r,e){const t=GA(e),i=HA(r);if(!await i._isAvailable())return!1;const o=await i._get(t)==="true";return await i._remove(t),o}function qA(r,e){tc.set(r._key(),e)}function HA(r){return Or(r._redirectPersistence)}function GA(r){return ec(zA,r.config.apiKey,r.name)}async function KA(r,e,t=!1){if(Cn(r.app))return Promise.reject(Lr(r));const i=Cs(r),o=MA(i,e),h=await new $A(i,o,t).execute();return h&&!t&&(delete h.user._redirectEventId,await i._persistUserIfCurrent(h.user),await i._setRedirectUser(null,e)),h}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const QA=600*1e3;class YA{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(i=>{this.isEventForConsumer(e,i)&&(t=!0,this.sendToConsumer(e,i),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!XA(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){var i;if(e.error&&!L_(e)){const o=((i=e.error.code)===null||i===void 0?void 0:i.split("auth/")[1])||"internal-error";t.onError(lr(this.auth,o))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const i=t.eventId===null||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&i}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=QA&&this.cachedEventUids.clear(),this.cachedEventUids.has(Iy(e))}saveEventToCache(e){this.cachedEventUids.add(Iy(e)),this.lastProcessedEventTime=Date.now()}}function Iy(r){return[r.type,r.eventId,r.sessionId,r.tenantId].filter(e=>e).join("-")}function L_({type:r,error:e}){return r==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function XA(r){switch(r.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return L_(r);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function JA(r,e={}){return Fi(r,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ZA=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,eP=/^https?/;async function tP(r){if(r.config.emulator)return;const{authorizedDomains:e}=await JA(r);for(const t of e)try{if(nP(t))return}catch{}Hn(r,"unauthorized-domain")}function nP(r){const e=af(),{protocol:t,hostname:i}=new URL(e);if(r.startsWith("chrome-extension://")){const h=new URL(r);return h.hostname===""&&i===""?t==="chrome-extension:"&&r.replace("chrome-extension://","")===e.replace("chrome-extension://",""):t==="chrome-extension:"&&h.hostname===i}if(!eP.test(t))return!1;if(ZA.test(r))return i===r;const o=r.replace(/\./g,"\\.");return new RegExp("^(.+\\."+o+"|"+o+")$","i").test(i)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rP=new vl(3e4,6e4);function Sy(){const r=ur().___jsl;if(r!=null&&r.H){for(const e of Object.keys(r.H))if(r.H[e].r=r.H[e].r||[],r.H[e].L=r.H[e].L||[],r.H[e].r=[...r.H[e].L],r.CP)for(let t=0;t<r.CP.length;t++)r.CP[t]=null}}function iP(r){return new Promise((e,t)=>{var i,o,l;function h(){Sy(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{Sy(),t(lr(r,"network-request-failed"))},timeout:rP.get()})}if(!((o=(i=ur().gapi)===null||i===void 0?void 0:i.iframes)===null||o===void 0)&&o.Iframe)e(gapi.iframes.getContext());else if(!((l=ur().gapi)===null||l===void 0)&&l.load)h();else{const f=QS("iframefcb");return ur()[f]=()=>{gapi.load?h():t(lr(r,"network-request-failed"))},E_(`${KS()}?onload=${f}`).catch(p=>t(p))}}).catch(e=>{throw nc=null,e})}let nc=null;function sP(r){return nc=nc||iP(r),nc}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oP=new vl(5e3,15e3),aP="__/auth/iframe",lP="emulator/auth/iframe",uP={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},cP=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function hP(r){const e=r.config;Te(e.authDomain,r,"auth-domain-config-required");const t=e.emulator?Uf(e,lP):`https://${r.config.authDomain}/${aP}`,i={apiKey:e.apiKey,appName:r.name,v:Wo},o=cP.get(r.config.apiHost);o&&(i.eid=o);const l=r._getFrameworks();return l.length&&(i.fw=l.join(",")),`${t}?${yl(i).slice(1)}`}async function dP(r){const e=await sP(r),t=ur().gapi;return Te(t,r,"internal-error"),e.open({where:document.body,url:hP(r),messageHandlersFilter:t.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:uP,dontclear:!0},i=>new Promise(async(o,l)=>{await i.restyle({setHideOnLeave:!1});const h=lr(r,"network-request-failed"),f=ur().setTimeout(()=>{l(h)},oP.get());function p(){ur().clearTimeout(f),o(i)}i.ping(p).then(p,()=>{l(h)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fP={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},pP=500,mP=600,gP="_blank",yP="http://localhost";class Ay{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function vP(r,e,t,i=pP,o=mP){const l=Math.max((window.screen.availHeight-o)/2,0).toString(),h=Math.max((window.screen.availWidth-i)/2,0).toString();let f="";const p=Object.assign(Object.assign({},fP),{width:i.toString(),height:o.toString(),top:l,left:h}),y=Wt().toLowerCase();t&&(f=f_(y)?gP:t),h_(y)&&(e=e||yP,p.scrollbars="yes");const E=Object.entries(p).reduce((S,[V,L])=>`${S}${V}=${L},`,"");if(FS(y)&&f!=="_self")return _P(e||"",f),new Ay(null);const T=window.open(e||"",f,E);Te(T,r,"popup-blocked");try{T.focus()}catch{}return new Ay(T)}function _P(r,e){const t=document.createElement("a");t.href=r,t.target=e;const i=document.createEvent("MouseEvent");i.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),t.dispatchEvent(i)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const EP="__/auth/handler",wP="emulator/auth/handler",TP=encodeURIComponent("fac");async function Py(r,e,t,i,o,l){Te(r.config.authDomain,r,"auth-domain-config-required"),Te(r.config.apiKey,r,"invalid-api-key");const h={apiKey:r.config.apiKey,appName:r.name,authType:t,redirectUrl:i,v:Wo,eventId:o};if(e instanceof I_){e.setDefaultLanguage(r.languageCode),h.providerId=e.providerId||"",aI(e.getCustomParameters())||(h.customParameters=JSON.stringify(e.getCustomParameters()));for(const[E,T]of Object.entries({}))h[E]=T}if(e instanceof El){const E=e.getScopes().filter(T=>T!=="");E.length>0&&(h.scopes=E.join(","))}r.tenantId&&(h.tid=r.tenantId);const f=h;for(const E of Object.keys(f))f[E]===void 0&&delete f[E];const p=await r._getAppCheckToken(),y=p?`#${TP}=${encodeURIComponent(p)}`:"";return`${IP(r)}?${yl(f).slice(1)}${y}`}function IP({config:r}){return r.emulator?Uf(r,wP):`https://${r.authDomain}/${EP}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Wd="webStorageSupport";class SP{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=N_,this._completeRedirectFn=KA,this._overrideRedirectResult=qA}async _openPopup(e,t,i,o){var l;Fr((l=this.eventManagers[e._key()])===null||l===void 0?void 0:l.manager,"_initialize() not called before _openPopup()");const h=await Py(e,t,i,af(),o);return vP(e,h,qf())}async _openRedirect(e,t,i,o){await this._originValidation(e);const l=await Py(e,t,i,af(),o);return CA(l),new Promise(()=>{})}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:o,promise:l}=this.eventManagers[t];return o?Promise.resolve(o):(Fr(l,"If manager is not set, promise should be"),l)}const i=this.initAndGetManager(e);return this.eventManagers[t]={promise:i},i.catch(()=>{delete this.eventManagers[t]}),i}async initAndGetManager(e){const t=await dP(e),i=new YA(e);return t.register("authEvent",o=>(Te(o==null?void 0:o.authEvent,e,"invalid-auth-event"),{status:i.onEvent(o.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:i},this.iframes[e._key()]=t,i}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(Wd,{type:Wd},o=>{var l;const h=(l=o==null?void 0:o[0])===null||l===void 0?void 0:l[Wd];h!==void 0&&t(!!h),Hn(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=tP(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return v_()||d_()||zf()}}const AP=SP;var Cy="@firebase/auth",Ry="1.10.8";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PP{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged(i=>{e((i==null?void 0:i.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){Te(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function CP(r){switch(r){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function RP(r){bo(new Ts("auth",(e,{options:t})=>{const i=e.getProvider("app").getImmediate(),o=e.getProvider("heartbeat"),l=e.getProvider("app-check-internal"),{apiKey:h,authDomain:f}=i.options;Te(h&&!h.includes(":"),"invalid-api-key",{appName:i.name});const p={apiKey:h,authDomain:f,clientPlatform:r,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:__(r)},y=new qS(i,o,l,p);return tA(y,t),y},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,i)=>{e.getProvider("auth-internal").initialize()})),bo(new Ts("auth-internal",e=>{const t=Cs(e.getProvider("auth").getImmediate());return(i=>new PP(i))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),Pi(Cy,Ry,CP(r)),Pi(Cy,Ry,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kP=300,NP=Kv("authIdTokenMaxAge")||kP;let ky=null;const xP=r=>async e=>{const t=e&&await e.getIdTokenResult(),i=t&&(new Date().getTime()-Date.parse(t.issuedAtTime))/1e3;if(i&&i>NP)return;const o=t==null?void 0:t.token;ky!==o&&(ky=o,await fetch(r,{method:o?"POST":"DELETE",headers:o?{Authorization:`Bearer ${o}`}:{}}))};function DP(r=e_()){const e=Mf(r,"auth");if(e.isInitialized())return e.getImmediate();const t=eA(r,{popupRedirectResolver:AP,persistence:[LA,SA,N_]}),i=Kv("authTokenSyncURL");if(i&&typeof isSecureContext=="boolean"&&isSecureContext){const l=new URL(i,location.origin);if(location.origin===l.origin){const h=xP(l.toString());_A(t,h,()=>h(t.currentUser)),vA(t,f=>h(f))}}const o=Hv("auth");return o&&nA(t,`http://${o}`),t}function bP(){var r,e;return(e=(r=document.getElementsByTagName("head"))===null||r===void 0?void 0:r[0])!==null&&e!==void 0?e:document}HS({loadJS(r){return new Promise((e,t)=>{const i=document.createElement("script");i.setAttribute("src",r),i.onload=e,i.onerror=o=>{const l=lr("internal-error");l.customData=o,t(l)},i.type="text/javascript",i.charset="UTF-8",bP().appendChild(i)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});RP("Browser");var VP="firebase",OP="11.10.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Pi(VP,OP,"app");var Ny=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Ci,M_;(function(){var r;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(k,A){function C(){}C.prototype=A.prototype,k.D=A.prototype,k.prototype=new C,k.prototype.constructor=k,k.C=function(x,b,M){for(var R=Array(arguments.length-2),He=2;He<arguments.length;He++)R[He-2]=arguments[He];return A.prototype[b].apply(x,R)}}function t(){this.blockSize=-1}function i(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(i,t),i.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function o(k,A,C){C||(C=0);var x=Array(16);if(typeof A=="string")for(var b=0;16>b;++b)x[b]=A.charCodeAt(C++)|A.charCodeAt(C++)<<8|A.charCodeAt(C++)<<16|A.charCodeAt(C++)<<24;else for(b=0;16>b;++b)x[b]=A[C++]|A[C++]<<8|A[C++]<<16|A[C++]<<24;A=k.g[0],C=k.g[1],b=k.g[2];var M=k.g[3],R=A+(M^C&(b^M))+x[0]+3614090360&4294967295;A=C+(R<<7&4294967295|R>>>25),R=M+(b^A&(C^b))+x[1]+3905402710&4294967295,M=A+(R<<12&4294967295|R>>>20),R=b+(C^M&(A^C))+x[2]+606105819&4294967295,b=M+(R<<17&4294967295|R>>>15),R=C+(A^b&(M^A))+x[3]+3250441966&4294967295,C=b+(R<<22&4294967295|R>>>10),R=A+(M^C&(b^M))+x[4]+4118548399&4294967295,A=C+(R<<7&4294967295|R>>>25),R=M+(b^A&(C^b))+x[5]+1200080426&4294967295,M=A+(R<<12&4294967295|R>>>20),R=b+(C^M&(A^C))+x[6]+2821735955&4294967295,b=M+(R<<17&4294967295|R>>>15),R=C+(A^b&(M^A))+x[7]+4249261313&4294967295,C=b+(R<<22&4294967295|R>>>10),R=A+(M^C&(b^M))+x[8]+1770035416&4294967295,A=C+(R<<7&4294967295|R>>>25),R=M+(b^A&(C^b))+x[9]+2336552879&4294967295,M=A+(R<<12&4294967295|R>>>20),R=b+(C^M&(A^C))+x[10]+4294925233&4294967295,b=M+(R<<17&4294967295|R>>>15),R=C+(A^b&(M^A))+x[11]+2304563134&4294967295,C=b+(R<<22&4294967295|R>>>10),R=A+(M^C&(b^M))+x[12]+1804603682&4294967295,A=C+(R<<7&4294967295|R>>>25),R=M+(b^A&(C^b))+x[13]+4254626195&4294967295,M=A+(R<<12&4294967295|R>>>20),R=b+(C^M&(A^C))+x[14]+2792965006&4294967295,b=M+(R<<17&4294967295|R>>>15),R=C+(A^b&(M^A))+x[15]+1236535329&4294967295,C=b+(R<<22&4294967295|R>>>10),R=A+(b^M&(C^b))+x[1]+4129170786&4294967295,A=C+(R<<5&4294967295|R>>>27),R=M+(C^b&(A^C))+x[6]+3225465664&4294967295,M=A+(R<<9&4294967295|R>>>23),R=b+(A^C&(M^A))+x[11]+643717713&4294967295,b=M+(R<<14&4294967295|R>>>18),R=C+(M^A&(b^M))+x[0]+3921069994&4294967295,C=b+(R<<20&4294967295|R>>>12),R=A+(b^M&(C^b))+x[5]+3593408605&4294967295,A=C+(R<<5&4294967295|R>>>27),R=M+(C^b&(A^C))+x[10]+38016083&4294967295,M=A+(R<<9&4294967295|R>>>23),R=b+(A^C&(M^A))+x[15]+3634488961&4294967295,b=M+(R<<14&4294967295|R>>>18),R=C+(M^A&(b^M))+x[4]+3889429448&4294967295,C=b+(R<<20&4294967295|R>>>12),R=A+(b^M&(C^b))+x[9]+568446438&4294967295,A=C+(R<<5&4294967295|R>>>27),R=M+(C^b&(A^C))+x[14]+3275163606&4294967295,M=A+(R<<9&4294967295|R>>>23),R=b+(A^C&(M^A))+x[3]+4107603335&4294967295,b=M+(R<<14&4294967295|R>>>18),R=C+(M^A&(b^M))+x[8]+1163531501&4294967295,C=b+(R<<20&4294967295|R>>>12),R=A+(b^M&(C^b))+x[13]+2850285829&4294967295,A=C+(R<<5&4294967295|R>>>27),R=M+(C^b&(A^C))+x[2]+4243563512&4294967295,M=A+(R<<9&4294967295|R>>>23),R=b+(A^C&(M^A))+x[7]+1735328473&4294967295,b=M+(R<<14&4294967295|R>>>18),R=C+(M^A&(b^M))+x[12]+2368359562&4294967295,C=b+(R<<20&4294967295|R>>>12),R=A+(C^b^M)+x[5]+4294588738&4294967295,A=C+(R<<4&4294967295|R>>>28),R=M+(A^C^b)+x[8]+2272392833&4294967295,M=A+(R<<11&4294967295|R>>>21),R=b+(M^A^C)+x[11]+1839030562&4294967295,b=M+(R<<16&4294967295|R>>>16),R=C+(b^M^A)+x[14]+4259657740&4294967295,C=b+(R<<23&4294967295|R>>>9),R=A+(C^b^M)+x[1]+2763975236&4294967295,A=C+(R<<4&4294967295|R>>>28),R=M+(A^C^b)+x[4]+1272893353&4294967295,M=A+(R<<11&4294967295|R>>>21),R=b+(M^A^C)+x[7]+4139469664&4294967295,b=M+(R<<16&4294967295|R>>>16),R=C+(b^M^A)+x[10]+3200236656&4294967295,C=b+(R<<23&4294967295|R>>>9),R=A+(C^b^M)+x[13]+681279174&4294967295,A=C+(R<<4&4294967295|R>>>28),R=M+(A^C^b)+x[0]+3936430074&4294967295,M=A+(R<<11&4294967295|R>>>21),R=b+(M^A^C)+x[3]+3572445317&4294967295,b=M+(R<<16&4294967295|R>>>16),R=C+(b^M^A)+x[6]+76029189&4294967295,C=b+(R<<23&4294967295|R>>>9),R=A+(C^b^M)+x[9]+3654602809&4294967295,A=C+(R<<4&4294967295|R>>>28),R=M+(A^C^b)+x[12]+3873151461&4294967295,M=A+(R<<11&4294967295|R>>>21),R=b+(M^A^C)+x[15]+530742520&4294967295,b=M+(R<<16&4294967295|R>>>16),R=C+(b^M^A)+x[2]+3299628645&4294967295,C=b+(R<<23&4294967295|R>>>9),R=A+(b^(C|~M))+x[0]+4096336452&4294967295,A=C+(R<<6&4294967295|R>>>26),R=M+(C^(A|~b))+x[7]+1126891415&4294967295,M=A+(R<<10&4294967295|R>>>22),R=b+(A^(M|~C))+x[14]+2878612391&4294967295,b=M+(R<<15&4294967295|R>>>17),R=C+(M^(b|~A))+x[5]+4237533241&4294967295,C=b+(R<<21&4294967295|R>>>11),R=A+(b^(C|~M))+x[12]+1700485571&4294967295,A=C+(R<<6&4294967295|R>>>26),R=M+(C^(A|~b))+x[3]+2399980690&4294967295,M=A+(R<<10&4294967295|R>>>22),R=b+(A^(M|~C))+x[10]+4293915773&4294967295,b=M+(R<<15&4294967295|R>>>17),R=C+(M^(b|~A))+x[1]+2240044497&4294967295,C=b+(R<<21&4294967295|R>>>11),R=A+(b^(C|~M))+x[8]+1873313359&4294967295,A=C+(R<<6&4294967295|R>>>26),R=M+(C^(A|~b))+x[15]+4264355552&4294967295,M=A+(R<<10&4294967295|R>>>22),R=b+(A^(M|~C))+x[6]+2734768916&4294967295,b=M+(R<<15&4294967295|R>>>17),R=C+(M^(b|~A))+x[13]+1309151649&4294967295,C=b+(R<<21&4294967295|R>>>11),R=A+(b^(C|~M))+x[4]+4149444226&4294967295,A=C+(R<<6&4294967295|R>>>26),R=M+(C^(A|~b))+x[11]+3174756917&4294967295,M=A+(R<<10&4294967295|R>>>22),R=b+(A^(M|~C))+x[2]+718787259&4294967295,b=M+(R<<15&4294967295|R>>>17),R=C+(M^(b|~A))+x[9]+3951481745&4294967295,k.g[0]=k.g[0]+A&4294967295,k.g[1]=k.g[1]+(b+(R<<21&4294967295|R>>>11))&4294967295,k.g[2]=k.g[2]+b&4294967295,k.g[3]=k.g[3]+M&4294967295}i.prototype.u=function(k,A){A===void 0&&(A=k.length);for(var C=A-this.blockSize,x=this.B,b=this.h,M=0;M<A;){if(b==0)for(;M<=C;)o(this,k,M),M+=this.blockSize;if(typeof k=="string"){for(;M<A;)if(x[b++]=k.charCodeAt(M++),b==this.blockSize){o(this,x),b=0;break}}else for(;M<A;)if(x[b++]=k[M++],b==this.blockSize){o(this,x),b=0;break}}this.h=b,this.o+=A},i.prototype.v=function(){var k=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);k[0]=128;for(var A=1;A<k.length-8;++A)k[A]=0;var C=8*this.o;for(A=k.length-8;A<k.length;++A)k[A]=C&255,C/=256;for(this.u(k),k=Array(16),A=C=0;4>A;++A)for(var x=0;32>x;x+=8)k[C++]=this.g[A]>>>x&255;return k};function l(k,A){var C=f;return Object.prototype.hasOwnProperty.call(C,k)?C[k]:C[k]=A(k)}function h(k,A){this.h=A;for(var C=[],x=!0,b=k.length-1;0<=b;b--){var M=k[b]|0;x&&M==A||(C[b]=M,x=!1)}this.g=C}var f={};function p(k){return-128<=k&&128>k?l(k,function(A){return new h([A|0],0>A?-1:0)}):new h([k|0],0>k?-1:0)}function y(k){if(isNaN(k)||!isFinite(k))return T;if(0>k)return F(y(-k));for(var A=[],C=1,x=0;k>=C;x++)A[x]=k/C|0,C*=4294967296;return new h(A,0)}function E(k,A){if(k.length==0)throw Error("number format error: empty string");if(A=A||10,2>A||36<A)throw Error("radix out of range: "+A);if(k.charAt(0)=="-")return F(E(k.substring(1),A));if(0<=k.indexOf("-"))throw Error('number format error: interior "-" character');for(var C=y(Math.pow(A,8)),x=T,b=0;b<k.length;b+=8){var M=Math.min(8,k.length-b),R=parseInt(k.substring(b,b+M),A);8>M?(M=y(Math.pow(A,M)),x=x.j(M).add(y(R))):(x=x.j(C),x=x.add(y(R)))}return x}var T=p(0),S=p(1),V=p(16777216);r=h.prototype,r.m=function(){if(z(this))return-F(this).m();for(var k=0,A=1,C=0;C<this.g.length;C++){var x=this.i(C);k+=(0<=x?x:4294967296+x)*A,A*=4294967296}return k},r.toString=function(k){if(k=k||10,2>k||36<k)throw Error("radix out of range: "+k);if(L(this))return"0";if(z(this))return"-"+F(this).toString(k);for(var A=y(Math.pow(k,6)),C=this,x="";;){var b=ye(C,A).g;C=oe(C,b.j(A));var M=((0<C.g.length?C.g[0]:C.h)>>>0).toString(k);if(C=b,L(C))return M+x;for(;6>M.length;)M="0"+M;x=M+x}},r.i=function(k){return 0>k?0:k<this.g.length?this.g[k]:this.h};function L(k){if(k.h!=0)return!1;for(var A=0;A<k.g.length;A++)if(k.g[A]!=0)return!1;return!0}function z(k){return k.h==-1}r.l=function(k){return k=oe(this,k),z(k)?-1:L(k)?0:1};function F(k){for(var A=k.g.length,C=[],x=0;x<A;x++)C[x]=~k.g[x];return new h(C,~k.h).add(S)}r.abs=function(){return z(this)?F(this):this},r.add=function(k){for(var A=Math.max(this.g.length,k.g.length),C=[],x=0,b=0;b<=A;b++){var M=x+(this.i(b)&65535)+(k.i(b)&65535),R=(M>>>16)+(this.i(b)>>>16)+(k.i(b)>>>16);x=R>>>16,M&=65535,R&=65535,C[b]=R<<16|M}return new h(C,C[C.length-1]&-2147483648?-1:0)};function oe(k,A){return k.add(F(A))}r.j=function(k){if(L(this)||L(k))return T;if(z(this))return z(k)?F(this).j(F(k)):F(F(this).j(k));if(z(k))return F(this.j(F(k)));if(0>this.l(V)&&0>k.l(V))return y(this.m()*k.m());for(var A=this.g.length+k.g.length,C=[],x=0;x<2*A;x++)C[x]=0;for(x=0;x<this.g.length;x++)for(var b=0;b<k.g.length;b++){var M=this.i(x)>>>16,R=this.i(x)&65535,He=k.i(b)>>>16,rt=k.i(b)&65535;C[2*x+2*b]+=R*rt,Y(C,2*x+2*b),C[2*x+2*b+1]+=M*rt,Y(C,2*x+2*b+1),C[2*x+2*b+1]+=R*He,Y(C,2*x+2*b+1),C[2*x+2*b+2]+=M*He,Y(C,2*x+2*b+2)}for(x=0;x<A;x++)C[x]=C[2*x+1]<<16|C[2*x];for(x=A;x<2*A;x++)C[x]=0;return new h(C,0)};function Y(k,A){for(;(k[A]&65535)!=k[A];)k[A+1]+=k[A]>>>16,k[A]&=65535,A++}function re(k,A){this.g=k,this.h=A}function ye(k,A){if(L(A))throw Error("division by zero");if(L(k))return new re(T,T);if(z(k))return A=ye(F(k),A),new re(F(A.g),F(A.h));if(z(A))return A=ye(k,F(A)),new re(F(A.g),A.h);if(30<k.g.length){if(z(k)||z(A))throw Error("slowDivide_ only works with positive integers.");for(var C=S,x=A;0>=x.l(k);)C=Re(C),x=Re(x);var b=ie(C,1),M=ie(x,1);for(x=ie(x,2),C=ie(C,2);!L(x);){var R=M.add(x);0>=R.l(k)&&(b=b.add(C),M=R),x=ie(x,1),C=ie(C,1)}return A=oe(k,b.j(A)),new re(b,A)}for(b=T;0<=k.l(A);){for(C=Math.max(1,Math.floor(k.m()/A.m())),x=Math.ceil(Math.log(C)/Math.LN2),x=48>=x?1:Math.pow(2,x-48),M=y(C),R=M.j(A);z(R)||0<R.l(k);)C-=x,M=y(C),R=M.j(A);L(M)&&(M=S),b=b.add(M),k=oe(k,R)}return new re(b,k)}r.A=function(k){return ye(this,k).h},r.and=function(k){for(var A=Math.max(this.g.length,k.g.length),C=[],x=0;x<A;x++)C[x]=this.i(x)&k.i(x);return new h(C,this.h&k.h)},r.or=function(k){for(var A=Math.max(this.g.length,k.g.length),C=[],x=0;x<A;x++)C[x]=this.i(x)|k.i(x);return new h(C,this.h|k.h)},r.xor=function(k){for(var A=Math.max(this.g.length,k.g.length),C=[],x=0;x<A;x++)C[x]=this.i(x)^k.i(x);return new h(C,this.h^k.h)};function Re(k){for(var A=k.g.length+1,C=[],x=0;x<A;x++)C[x]=k.i(x)<<1|k.i(x-1)>>>31;return new h(C,k.h)}function ie(k,A){var C=A>>5;A%=32;for(var x=k.g.length-C,b=[],M=0;M<x;M++)b[M]=0<A?k.i(M+C)>>>A|k.i(M+C+1)<<32-A:k.i(M+C);return new h(b,k.h)}i.prototype.digest=i.prototype.v,i.prototype.reset=i.prototype.s,i.prototype.update=i.prototype.u,M_=i,h.prototype.add=h.prototype.add,h.prototype.multiply=h.prototype.j,h.prototype.modulo=h.prototype.A,h.prototype.compare=h.prototype.l,h.prototype.toNumber=h.prototype.m,h.prototype.toString=h.prototype.toString,h.prototype.getBits=h.prototype.i,h.fromNumber=y,h.fromString=E,Ci=h}).apply(typeof Ny<"u"?Ny:typeof self<"u"?self:typeof window<"u"?window:{});var Hu=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var j_,Ga,F_,rc,hf,U_,B_,z_;(function(){var r,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(u,m,v){return u==Array.prototype||u==Object.prototype||(u[m]=v.value),u};function t(u){u=[typeof globalThis=="object"&&globalThis,u,typeof window=="object"&&window,typeof self=="object"&&self,typeof Hu=="object"&&Hu];for(var m=0;m<u.length;++m){var v=u[m];if(v&&v.Math==Math)return v}throw Error("Cannot find global object")}var i=t(this);function o(u,m){if(m)e:{var v=i;u=u.split(".");for(var I=0;I<u.length-1;I++){var j=u[I];if(!(j in v))break e;v=v[j]}u=u[u.length-1],I=v[u],m=m(I),m!=I&&m!=null&&e(v,u,{configurable:!0,writable:!0,value:m})}}function l(u,m){u instanceof String&&(u+="");var v=0,I=!1,j={next:function(){if(!I&&v<u.length){var W=v++;return{value:m(W,u[W]),done:!1}}return I=!0,{done:!0,value:void 0}}};return j[Symbol.iterator]=function(){return j},j}o("Array.prototype.values",function(u){return u||function(){return l(this,function(m,v){return v})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var h=h||{},f=this||self;function p(u){var m=typeof u;return m=m!="object"?m:u?Array.isArray(u)?"array":m:"null",m=="array"||m=="object"&&typeof u.length=="number"}function y(u){var m=typeof u;return m=="object"&&u!=null||m=="function"}function E(u,m,v){return u.call.apply(u.bind,arguments)}function T(u,m,v){if(!u)throw Error();if(2<arguments.length){var I=Array.prototype.slice.call(arguments,2);return function(){var j=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(j,I),u.apply(m,j)}}return function(){return u.apply(m,arguments)}}function S(u,m,v){return S=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?E:T,S.apply(null,arguments)}function V(u,m){var v=Array.prototype.slice.call(arguments,1);return function(){var I=v.slice();return I.push.apply(I,arguments),u.apply(this,I)}}function L(u,m){function v(){}v.prototype=m.prototype,u.aa=m.prototype,u.prototype=new v,u.prototype.constructor=u,u.Qb=function(I,j,W){for(var ne=Array(arguments.length-2),ze=2;ze<arguments.length;ze++)ne[ze-2]=arguments[ze];return m.prototype[j].apply(I,ne)}}function z(u){const m=u.length;if(0<m){const v=Array(m);for(let I=0;I<m;I++)v[I]=u[I];return v}return[]}function F(u,m){for(let v=1;v<arguments.length;v++){const I=arguments[v];if(p(I)){const j=u.length||0,W=I.length||0;u.length=j+W;for(let ne=0;ne<W;ne++)u[j+ne]=I[ne]}else u.push(I)}}class oe{constructor(m,v){this.i=m,this.j=v,this.h=0,this.g=null}get(){let m;return 0<this.h?(this.h--,m=this.g,this.g=m.next,m.next=null):m=this.i(),m}}function Y(u){return/^[\s\xa0]*$/.test(u)}function re(){var u=f.navigator;return u&&(u=u.userAgent)?u:""}function ye(u){return ye[" "](u),u}ye[" "]=function(){};var Re=re().indexOf("Gecko")!=-1&&!(re().toLowerCase().indexOf("webkit")!=-1&&re().indexOf("Edge")==-1)&&!(re().indexOf("Trident")!=-1||re().indexOf("MSIE")!=-1)&&re().indexOf("Edge")==-1;function ie(u,m,v){for(const I in u)m.call(v,u[I],I,u)}function k(u,m){for(const v in u)m.call(void 0,u[v],v,u)}function A(u){const m={};for(const v in u)m[v]=u[v];return m}const C="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function x(u,m){let v,I;for(let j=1;j<arguments.length;j++){I=arguments[j];for(v in I)u[v]=I[v];for(let W=0;W<C.length;W++)v=C[W],Object.prototype.hasOwnProperty.call(I,v)&&(u[v]=I[v])}}function b(u){var m=1;u=u.split(":");const v=[];for(;0<m&&u.length;)v.push(u.shift()),m--;return u.length&&v.push(u.join(":")),v}function M(u){f.setTimeout(()=>{throw u},0)}function R(){var u=ve;let m=null;return u.g&&(m=u.g,u.g=u.g.next,u.g||(u.h=null),m.next=null),m}class He{constructor(){this.h=this.g=null}add(m,v){const I=rt.get();I.set(m,v),this.h?this.h.next=I:this.g=I,this.h=I}}var rt=new oe(()=>new at,u=>u.reset());class at{constructor(){this.next=this.g=this.h=null}set(m,v){this.h=m,this.g=v,this.next=null}reset(){this.next=this.g=this.h=null}}let Ue,se=!1,ve=new He,le=()=>{const u=f.Promise.resolve(void 0);Ue=()=>{u.then(O)}};var O=()=>{for(var u;u=R();){try{u.h.call(u.g)}catch(v){M(v)}var m=rt;m.j(u),100>m.h&&(m.h++,u.next=m.g,m.g=u)}se=!1};function q(){this.s=this.s,this.C=this.C}q.prototype.s=!1,q.prototype.ma=function(){this.s||(this.s=!0,this.N())},q.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function me(u,m){this.type=u,this.g=this.target=m,this.defaultPrevented=!1}me.prototype.h=function(){this.defaultPrevented=!0};var ke=(function(){if(!f.addEventListener||!Object.defineProperty)return!1;var u=!1,m=Object.defineProperty({},"passive",{get:function(){u=!0}});try{const v=()=>{};f.addEventListener("test",v,m),f.removeEventListener("test",v,m)}catch{}return u})();function H(u,m){if(me.call(this,u?u.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,u){var v=this.type=u.type,I=u.changedTouches&&u.changedTouches.length?u.changedTouches[0]:null;if(this.target=u.target||u.srcElement,this.g=m,m=u.relatedTarget){if(Re){e:{try{ye(m.nodeName);var j=!0;break e}catch{}j=!1}j||(m=null)}}else v=="mouseover"?m=u.fromElement:v=="mouseout"&&(m=u.toElement);this.relatedTarget=m,I?(this.clientX=I.clientX!==void 0?I.clientX:I.pageX,this.clientY=I.clientY!==void 0?I.clientY:I.pageY,this.screenX=I.screenX||0,this.screenY=I.screenY||0):(this.clientX=u.clientX!==void 0?u.clientX:u.pageX,this.clientY=u.clientY!==void 0?u.clientY:u.pageY,this.screenX=u.screenX||0,this.screenY=u.screenY||0),this.button=u.button,this.key=u.key||"",this.ctrlKey=u.ctrlKey,this.altKey=u.altKey,this.shiftKey=u.shiftKey,this.metaKey=u.metaKey,this.pointerId=u.pointerId||0,this.pointerType=typeof u.pointerType=="string"?u.pointerType:ee[u.pointerType]||"",this.state=u.state,this.i=u,u.defaultPrevented&&H.aa.h.call(this)}}L(H,me);var ee={2:"touch",3:"pen",4:"mouse"};H.prototype.h=function(){H.aa.h.call(this);var u=this.i;u.preventDefault?u.preventDefault():u.returnValue=!1};var ue="closure_listenable_"+(1e6*Math.random()|0),Ce=0;function De(u,m,v,I,j){this.listener=u,this.proxy=null,this.src=m,this.type=v,this.capture=!!I,this.ha=j,this.key=++Ce,this.da=this.fa=!1}function $e(u){u.da=!0,u.listener=null,u.proxy=null,u.src=null,u.ha=null}function Qt(u){this.src=u,this.g={},this.h=0}Qt.prototype.add=function(u,m,v,I,j){var W=u.toString();u=this.g[W],u||(u=this.g[W]=[],this.h++);var ne=Kn(u,m,I,j);return-1<ne?(m=u[ne],v||(m.fa=!1)):(m=new De(m,this.src,W,!!I,j),m.fa=v,u.push(m)),m};function mr(u,m){var v=m.type;if(v in u.g){var I=u.g[v],j=Array.prototype.indexOf.call(I,m,void 0),W;(W=0<=j)&&Array.prototype.splice.call(I,j,1),W&&($e(m),u.g[v].length==0&&(delete u.g[v],u.h--))}}function Kn(u,m,v,I){for(var j=0;j<u.length;++j){var W=u[j];if(!W.da&&W.listener==m&&W.capture==!!v&&W.ha==I)return j}return-1}var $i="closure_lm_"+(1e6*Math.random()|0),xs={};function Yo(u,m,v,I,j){if(Array.isArray(m)){for(var W=0;W<m.length;W++)Yo(u,m[W],v,I,j);return null}return v=Zo(v),u&&u[ue]?u.K(m,v,y(I)?!!I.capture:!1,j):Xo(u,m,v,!1,I,j)}function Xo(u,m,v,I,j,W){if(!m)throw Error("Invalid event type");var ne=y(j)?!!j.capture:!!j,ze=bs(u);if(ze||(u[$i]=ze=new Qt(u)),v=ze.add(m,v,I,ne,W),v.proxy)return v;if(I=kl(),v.proxy=I,I.src=u,I.listener=v,u.addEventListener)ke||(j=ne),j===void 0&&(j=!1),u.addEventListener(m.toString(),I,j);else if(u.attachEvent)u.attachEvent(yr(m.toString()),I);else if(u.addListener&&u.removeListener)u.addListener(I);else throw Error("addEventListener and attachEvent are unavailable.");return v}function kl(){function u(v){return m.call(u.src,u.listener,v)}const m=Jo;return u}function Ds(u,m,v,I,j){if(Array.isArray(m))for(var W=0;W<m.length;W++)Ds(u,m[W],v,I,j);else I=y(I)?!!I.capture:!!I,v=Zo(v),u&&u[ue]?(u=u.i,m=String(m).toString(),m in u.g&&(W=u.g[m],v=Kn(W,v,I,j),-1<v&&($e(W[v]),Array.prototype.splice.call(W,v,1),W.length==0&&(delete u.g[m],u.h--)))):u&&(u=bs(u))&&(m=u.g[m.toString()],u=-1,m&&(u=Kn(m,v,I,j)),(v=-1<u?m[u]:null)&&gr(v))}function gr(u){if(typeof u!="number"&&u&&!u.da){var m=u.src;if(m&&m[ue])mr(m.i,u);else{var v=u.type,I=u.proxy;m.removeEventListener?m.removeEventListener(v,I,u.capture):m.detachEvent?m.detachEvent(yr(v),I):m.addListener&&m.removeListener&&m.removeListener(I),(v=bs(m))?(mr(v,u),v.h==0&&(v.src=null,m[$i]=null)):$e(u)}}}function yr(u){return u in xs?xs[u]:xs[u]="on"+u}function Jo(u,m){if(u.da)u=!0;else{m=new H(m,this);var v=u.listener,I=u.ha||u.src;u.fa&&gr(u),u=v.call(I,m)}return u}function bs(u){return u=u[$i],u instanceof Qt?u:null}var Vs="__closure_events_fn_"+(1e9*Math.random()>>>0);function Zo(u){return typeof u=="function"?u:(u[Vs]||(u[Vs]=function(m){return u.handleEvent(m)}),u[Vs])}function yt(){q.call(this),this.i=new Qt(this),this.M=this,this.F=null}L(yt,q),yt.prototype[ue]=!0,yt.prototype.removeEventListener=function(u,m,v,I){Ds(this,u,m,v,I)};function vt(u,m){var v,I=u.F;if(I)for(v=[];I;I=I.F)v.push(I);if(u=u.M,I=m.type||m,typeof m=="string")m=new me(m,u);else if(m instanceof me)m.target=m.target||u;else{var j=m;m=new me(I,u),x(m,j)}if(j=!0,v)for(var W=v.length-1;0<=W;W--){var ne=m.g=v[W];j=vr(ne,I,!0,m)&&j}if(ne=m.g=u,j=vr(ne,I,!0,m)&&j,j=vr(ne,I,!1,m)&&j,v)for(W=0;W<v.length;W++)ne=m.g=v[W],j=vr(ne,I,!1,m)&&j}yt.prototype.N=function(){if(yt.aa.N.call(this),this.i){var u=this.i,m;for(m in u.g){for(var v=u.g[m],I=0;I<v.length;I++)$e(v[I]);delete u.g[m],u.h--}}this.F=null},yt.prototype.K=function(u,m,v,I){return this.i.add(String(u),m,!1,v,I)},yt.prototype.L=function(u,m,v,I){return this.i.add(String(u),m,!0,v,I)};function vr(u,m,v,I){if(m=u.i.g[String(m)],!m)return!0;m=m.concat();for(var j=!0,W=0;W<m.length;++W){var ne=m[W];if(ne&&!ne.da&&ne.capture==v){var ze=ne.listener,_t=ne.ha||ne.src;ne.fa&&mr(u.i,ne),j=ze.call(_t,I)!==!1&&j}}return j&&!I.defaultPrevented}function ea(u,m,v){if(typeof u=="function")v&&(u=S(u,v));else if(u&&typeof u.handleEvent=="function")u=S(u.handleEvent,u);else throw Error("Invalid listener argument");return 2147483647<Number(m)?-1:f.setTimeout(u,m||0)}function qr(u){u.g=ea(()=>{u.g=null,u.i&&(u.i=!1,qr(u))},u.l);const m=u.h;u.h=null,u.m.apply(null,m)}class Wi extends q{constructor(m,v){super(),this.m=m,this.l=v,this.h=null,this.i=!1,this.g=null}j(m){this.h=arguments,this.g?this.i=!0:qr(this)}N(){super.N(),this.g&&(f.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function qi(u){q.call(this),this.h=u,this.g={}}L(qi,q);var ta=[];function na(u){ie(u.g,function(m,v){this.g.hasOwnProperty(v)&&gr(m)},u),u.g={}}qi.prototype.N=function(){qi.aa.N.call(this),na(this)},qi.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var ra=f.JSON.stringify,ia=f.JSON.parse,sa=class{stringify(u){return f.JSON.stringify(u,void 0)}parse(u){return f.JSON.parse(u,void 0)}};function Hi(){}Hi.prototype.h=null;function Os(u){return u.h||(u.h=u.i())}function Ls(){}var gn={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function Qn(){me.call(this,"d")}L(Qn,me);function Ms(){me.call(this,"c")}L(Ms,me);var Yn={},oa=null;function Gi(){return oa=oa||new yt}Yn.La="serverreachability";function aa(u){me.call(this,Yn.La,u)}L(aa,me);function _r(u){const m=Gi();vt(m,new aa(m))}Yn.STAT_EVENT="statevent";function la(u,m){me.call(this,Yn.STAT_EVENT,u),this.stat=m}L(la,me);function lt(u){const m=Gi();vt(m,new la(m,u))}Yn.Ma="timingevent";function js(u,m){me.call(this,Yn.Ma,u),this.size=m}L(js,me);function Nn(u,m){if(typeof u!="function")throw Error("Fn must not be null and must be a function");return f.setTimeout(function(){u()},m)}function Ki(){this.g=!0}Ki.prototype.xa=function(){this.g=!1};function Qi(u,m,v,I,j,W){u.info(function(){if(u.g)if(W)for(var ne="",ze=W.split("&"),_t=0;_t<ze.length;_t++){var Le=ze[_t].split("=");if(1<Le.length){var At=Le[0];Le=Le[1];var dt=At.split("_");ne=2<=dt.length&&dt[1]=="type"?ne+(At+"="+Le+"&"):ne+(At+"=redacted&")}}else ne=null;else ne=W;return"XMLHTTP REQ ("+I+") [attempt "+j+"]: "+m+`
`+v+`
`+ne})}function Fs(u,m,v,I,j,W,ne){u.info(function(){return"XMLHTTP RESP ("+I+") [ attempt "+j+"]: "+m+`
`+v+`
`+W+" "+ne})}function xn(u,m,v,I){u.info(function(){return"XMLHTTP TEXT ("+m+"): "+oh(u,v)+(I?" "+I:"")})}function ua(u,m){u.info(function(){return"TIMEOUT: "+m})}Ki.prototype.info=function(){};function oh(u,m){if(!u.g)return m;if(!m)return null;try{var v=JSON.parse(m);if(v){for(u=0;u<v.length;u++)if(Array.isArray(v[u])){var I=v[u];if(!(2>I.length)){var j=I[1];if(Array.isArray(j)&&!(1>j.length)){var W=j[0];if(W!="noop"&&W!="stop"&&W!="close")for(var ne=1;ne<j.length;ne++)j[ne]=""}}}}return ra(v)}catch{return m}}var Us={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},Nl={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},Dn;function Yi(){}L(Yi,Hi),Yi.prototype.g=function(){return new XMLHttpRequest},Yi.prototype.i=function(){return{}},Dn=new Yi;function bn(u,m,v,I){this.j=u,this.i=m,this.l=v,this.R=I||1,this.U=new qi(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new xl}function xl(){this.i=null,this.g="",this.h=!1}var ca={},Bs={};function zs(u,m,v){u.L=1,u.v=Yr(un(m)),u.m=v,u.P=!0,ha(u,null)}function ha(u,m){u.F=Date.now(),Ge(u),u.A=un(u.v);var v=u.A,I=u.R;Array.isArray(I)||(I=[String(I)]),Jr(v.i,"t",I),u.C=0,v=u.j.J,u.h=new xl,u.g=Ql(u.j,v?m:null,!u.m),0<u.O&&(u.M=new Wi(S(u.Y,u,u.g),u.O)),m=u.U,v=u.g,I=u.ca;var j="readystatechange";Array.isArray(j)||(j&&(ta[0]=j.toString()),j=ta);for(var W=0;W<j.length;W++){var ne=Yo(v,j[W],I||m.handleEvent,!1,m.h||m);if(!ne)break;m.g[ne.key]=ne}m=u.H?A(u.H):{},u.m?(u.u||(u.u="POST"),m["Content-Type"]="application/x-www-form-urlencoded",u.g.ea(u.A,u.u,u.m,m)):(u.u="GET",u.g.ea(u.A,u.u,null,m)),_r(),Qi(u.i,u.u,u.A,u.l,u.R,u.m)}bn.prototype.ca=function(u){u=u.target;const m=this.M;m&&Xt(u)==3?m.j():this.Y(u)},bn.prototype.Y=function(u){try{if(u==this.g)e:{const dt=Xt(this.g);var m=this.g.Ba();const _n=this.g.Z();if(!(3>dt)&&(dt!=3||this.g&&(this.h.h||this.g.oa()||ya(this.g)))){this.J||dt!=4||m==7||(m==8||0>=_n?_r(3):_r(2)),Xi(this);var v=this.g.Z();this.X=v;t:if(Dl(this)){var I=ya(this.g);u="";var j=I.length,W=Xt(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){yn(this),Hr(this);var ne="";break t}this.h.i=new f.TextDecoder}for(m=0;m<j;m++)this.h.h=!0,u+=this.h.i.decode(I[m],{stream:!(W&&m==j-1)});I.length=0,this.h.g+=u,this.C=0,ne=this.h.g}else ne=this.g.oa();if(this.o=v==200,Fs(this.i,this.u,this.A,this.l,this.R,dt,v),this.o){if(this.T&&!this.K){t:{if(this.g){var ze,_t=this.g;if((ze=_t.g?_t.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!Y(ze)){var Le=ze;break t}}Le=null}if(v=Le)xn(this.i,this.l,v,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,da(this,v);else{this.o=!1,this.s=3,lt(12),yn(this),Hr(this);break e}}if(this.P){v=!0;let hn;for(;!this.J&&this.C<ne.length;)if(hn=ah(this,ne),hn==Bs){dt==4&&(this.s=4,lt(14),v=!1),xn(this.i,this.l,null,"[Incomplete Response]");break}else if(hn==ca){this.s=4,lt(15),xn(this.i,this.l,ne,"[Invalid Chunk]"),v=!1;break}else xn(this.i,this.l,hn,null),da(this,hn);if(Dl(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),dt!=4||ne.length!=0||this.h.h||(this.s=1,lt(16),v=!1),this.o=this.o&&v,!v)xn(this.i,this.l,ne,"[Invalid Chunked Response]"),yn(this),Hr(this);else if(0<ne.length&&!this.W){this.W=!0;var At=this.j;At.g==this&&At.ba&&!At.M&&(At.j.info("Great, no buffering proxy detected. Bytes received: "+ne.length),_a(At),At.M=!0,lt(11))}}else xn(this.i,this.l,ne,null),da(this,ne);dt==4&&yn(this),this.o&&!this.J&&(dt==4?Zs(this.j,this):(this.o=!1,Ge(this)))}else Ks(this.g),v==400&&0<ne.indexOf("Unknown SID")?(this.s=3,lt(12)):(this.s=0,lt(13)),yn(this),Hr(this)}}}catch{}finally{}};function Dl(u){return u.g?u.u=="GET"&&u.L!=2&&u.j.Ca:!1}function ah(u,m){var v=u.C,I=m.indexOf(`
`,v);return I==-1?Bs:(v=Number(m.substring(v,I)),isNaN(v)?ca:(I+=1,I+v>m.length?Bs:(m=m.slice(I,I+v),u.C=I+v,m)))}bn.prototype.cancel=function(){this.J=!0,yn(this)};function Ge(u){u.S=Date.now()+u.I,bl(u,u.I)}function bl(u,m){if(u.B!=null)throw Error("WatchDog timer not null");u.B=Nn(S(u.ba,u),m)}function Xi(u){u.B&&(f.clearTimeout(u.B),u.B=null)}bn.prototype.ba=function(){this.B=null;const u=Date.now();0<=u-this.S?(ua(this.i,this.A),this.L!=2&&(_r(),lt(17)),yn(this),this.s=2,Hr(this)):bl(this,this.S-u)};function Hr(u){u.j.G==0||u.J||Zs(u.j,u)}function yn(u){Xi(u);var m=u.M;m&&typeof m.ma=="function"&&m.ma(),u.M=null,na(u.U),u.g&&(m=u.g,u.g=null,m.abort(),m.ma())}function da(u,m){try{var v=u.j;if(v.G!=0&&(v.g==u||qt(v.h,u))){if(!u.K&&qt(v.h,u)&&v.G==3){try{var I=v.Da.g.parse(m)}catch{I=null}if(Array.isArray(I)&&I.length==3){var j=I;if(j[0]==0){e:if(!v.u){if(v.g)if(v.g.F+3e3<u.F)Js(v),jn(v);else break e;Xs(v),lt(18)}}else v.za=j[1],0<v.za-v.T&&37500>j[2]&&v.F&&v.v==0&&!v.C&&(v.C=Nn(S(v.Za,v),6e3));if(1>=Ol(v.h)&&v.ca){try{v.ca()}catch{}v.ca=void 0}}else Sr(v,11)}else if((u.K||v.g==u)&&Js(v),!Y(m))for(j=v.Da.g.parse(m),m=0;m<j.length;m++){let Le=j[m];if(v.T=Le[0],Le=Le[1],v.G==2)if(Le[0]=="c"){v.K=Le[1],v.ia=Le[2];const At=Le[3];At!=null&&(v.la=At,v.j.info("VER="+v.la));const dt=Le[4];dt!=null&&(v.Aa=dt,v.j.info("SVER="+v.Aa));const _n=Le[5];_n!=null&&typeof _n=="number"&&0<_n&&(I=1.5*_n,v.L=I,v.j.info("backChannelRequestTimeoutMs_="+I)),I=v;const hn=u.g;if(hn){const is=hn.g?hn.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(is){var W=I.h;W.g||is.indexOf("spdy")==-1&&is.indexOf("quic")==-1&&is.indexOf("h2")==-1||(W.j=W.l,W.g=new Set,W.h&&(fa(W,W.h),W.h=null))}if(I.D){const to=hn.g?hn.g.getResponseHeader("X-HTTP-Session-Id"):null;to&&(I.ya=to,We(I.I,I.D,to))}}v.G=3,v.l&&v.l.ua(),v.ba&&(v.R=Date.now()-u.F,v.j.info("Handshake RTT: "+v.R+"ms")),I=v;var ne=u;if(I.qa=Kl(I,I.J?I.ia:null,I.W),ne.K){Ll(I.h,ne);var ze=ne,_t=I.L;_t&&(ze.I=_t),ze.B&&(Xi(ze),Ge(ze)),I.g=ne}else rs(I);0<v.i.length&&er(v)}else Le[0]!="stop"&&Le[0]!="close"||Sr(v,7);else v.G==3&&(Le[0]=="stop"||Le[0]=="close"?Le[0]=="stop"?Sr(v,7):xt(v):Le[0]!="noop"&&v.l&&v.l.ta(Le),v.v=0)}}_r(4)}catch{}}var Vl=class{constructor(u,m){this.g=u,this.map=m}};function Ji(u){this.l=u||10,f.PerformanceNavigationTiming?(u=f.performance.getEntriesByType("navigation"),u=0<u.length&&(u[0].nextHopProtocol=="hq"||u[0].nextHopProtocol=="h2")):u=!!(f.chrome&&f.chrome.loadTimes&&f.chrome.loadTimes()&&f.chrome.loadTimes().wasFetchedViaSpdy),this.j=u?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function ln(u){return u.h?!0:u.g?u.g.size>=u.j:!1}function Ol(u){return u.h?1:u.g?u.g.size:0}function qt(u,m){return u.h?u.h==m:u.g?u.g.has(m):!1}function fa(u,m){u.g?u.g.add(m):u.h=m}function Ll(u,m){u.h&&u.h==m?u.h=null:u.g&&u.g.has(m)&&u.g.delete(m)}Ji.prototype.cancel=function(){if(this.i=Ml(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const u of this.g.values())u.cancel();this.g.clear()}};function Ml(u){if(u.h!=null)return u.i.concat(u.h.D);if(u.g!=null&&u.g.size!==0){let m=u.i;for(const v of u.g.values())m=m.concat(v.D);return m}return z(u.i)}function $s(u){if(u.V&&typeof u.V=="function")return u.V();if(typeof Map<"u"&&u instanceof Map||typeof Set<"u"&&u instanceof Set)return Array.from(u.values());if(typeof u=="string")return u.split("");if(p(u)){for(var m=[],v=u.length,I=0;I<v;I++)m.push(u[I]);return m}m=[],v=0;for(I in u)m[v++]=u[I];return m}function Ws(u){if(u.na&&typeof u.na=="function")return u.na();if(!u.V||typeof u.V!="function"){if(typeof Map<"u"&&u instanceof Map)return Array.from(u.keys());if(!(typeof Set<"u"&&u instanceof Set)){if(p(u)||typeof u=="string"){var m=[];u=u.length;for(var v=0;v<u;v++)m.push(v);return m}m=[],v=0;for(const I in u)m[v++]=I;return m}}}function Gr(u,m){if(u.forEach&&typeof u.forEach=="function")u.forEach(m,void 0);else if(p(u)||typeof u=="string")Array.prototype.forEach.call(u,m,void 0);else for(var v=Ws(u),I=$s(u),j=I.length,W=0;W<j;W++)m.call(void 0,I[W],v&&v[W],u)}var Zi=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function lh(u,m){if(u){u=u.split("&");for(var v=0;v<u.length;v++){var I=u[v].indexOf("="),j=null;if(0<=I){var W=u[v].substring(0,I);j=u[v].substring(I+1)}else W=u[v];m(W,j?decodeURIComponent(j.replace(/\+/g," ")):"")}}}function Er(u){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,u instanceof Er){this.h=u.h,es(this,u.j),this.o=u.o,this.g=u.g,Kr(this,u.s),this.l=u.l;var m=u.i,v=new Xn;v.i=m.i,m.g&&(v.g=new Map(m.g),v.h=m.h),Qr(this,v),this.m=u.m}else u&&(m=String(u).match(Zi))?(this.h=!1,es(this,m[1]||"",!0),this.o=Oe(m[2]||""),this.g=Oe(m[3]||"",!0),Kr(this,m[4]),this.l=Oe(m[5]||"",!0),Qr(this,m[6]||"",!0),this.m=Oe(m[7]||"")):(this.h=!1,this.i=new Xn(null,this.h))}Er.prototype.toString=function(){var u=[],m=this.j;m&&u.push(Xr(m,qs,!0),":");var v=this.g;return(v||m=="file")&&(u.push("//"),(m=this.o)&&u.push(Xr(m,qs,!0),"@"),u.push(encodeURIComponent(String(v)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),v=this.s,v!=null&&u.push(":",String(v))),(v=this.l)&&(this.g&&v.charAt(0)!="/"&&u.push("/"),u.push(Xr(v,v.charAt(0)=="/"?Ul:Fl,!0))),(v=this.i.toString())&&u.push("?",v),(v=this.m)&&u.push("#",Xr(v,pa)),u.join("")};function un(u){return new Er(u)}function es(u,m,v){u.j=v?Oe(m,!0):m,u.j&&(u.j=u.j.replace(/:$/,""))}function Kr(u,m){if(m){if(m=Number(m),isNaN(m)||0>m)throw Error("Bad port number "+m);u.s=m}else u.s=null}function Qr(u,m,v){m instanceof Xn?(u.i=m,Jn(u.i,u.h)):(v||(m=Xr(m,Bl)),u.i=new Xn(m,u.h))}function We(u,m,v){u.i.set(m,v)}function Yr(u){return We(u,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),u}function Oe(u,m){return u?m?decodeURI(u.replace(/%25/g,"%2525")):decodeURIComponent(u):""}function Xr(u,m,v){return typeof u=="string"?(u=encodeURI(u).replace(m,jl),v&&(u=u.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),u):null}function jl(u){return u=u.charCodeAt(0),"%"+(u>>4&15).toString(16)+(u&15).toString(16)}var qs=/[#\/\?@]/g,Fl=/[#\?:]/g,Ul=/[#\?]/g,Bl=/[#\?@]/g,pa=/#/g;function Xn(u,m){this.h=this.g=null,this.i=u||null,this.j=!!m}function Nt(u){u.g||(u.g=new Map,u.h=0,u.i&&lh(u.i,function(m,v){u.add(decodeURIComponent(m.replace(/\+/g," ")),v)}))}r=Xn.prototype,r.add=function(u,m){Nt(this),this.i=null,u=vn(this,u);var v=this.g.get(u);return v||this.g.set(u,v=[]),v.push(m),this.h+=1,this};function Vn(u,m){Nt(u),m=vn(u,m),u.g.has(m)&&(u.i=null,u.h-=u.g.get(m).length,u.g.delete(m))}function On(u,m){return Nt(u),m=vn(u,m),u.g.has(m)}r.forEach=function(u,m){Nt(this),this.g.forEach(function(v,I){v.forEach(function(j){u.call(m,j,I,this)},this)},this)},r.na=function(){Nt(this);const u=Array.from(this.g.values()),m=Array.from(this.g.keys()),v=[];for(let I=0;I<m.length;I++){const j=u[I];for(let W=0;W<j.length;W++)v.push(m[I])}return v},r.V=function(u){Nt(this);let m=[];if(typeof u=="string")On(this,u)&&(m=m.concat(this.g.get(vn(this,u))));else{u=Array.from(this.g.values());for(let v=0;v<u.length;v++)m=m.concat(u[v])}return m},r.set=function(u,m){return Nt(this),this.i=null,u=vn(this,u),On(this,u)&&(this.h-=this.g.get(u).length),this.g.set(u,[m]),this.h+=1,this},r.get=function(u,m){return u?(u=this.V(u),0<u.length?String(u[0]):m):m};function Jr(u,m,v){Vn(u,m),0<v.length&&(u.i=null,u.g.set(vn(u,m),z(v)),u.h+=v.length)}r.toString=function(){if(this.i)return this.i;if(!this.g)return"";const u=[],m=Array.from(this.g.keys());for(var v=0;v<m.length;v++){var I=m[v];const W=encodeURIComponent(String(I)),ne=this.V(I);for(I=0;I<ne.length;I++){var j=W;ne[I]!==""&&(j+="="+encodeURIComponent(String(ne[I]))),u.push(j)}}return this.i=u.join("&")};function vn(u,m){return m=String(m),u.j&&(m=m.toLowerCase()),m}function Jn(u,m){m&&!u.j&&(Nt(u),u.i=null,u.g.forEach(function(v,I){var j=I.toLowerCase();I!=j&&(Vn(this,I),Jr(this,j,v))},u)),u.j=m}function uh(u,m){const v=new Ki;if(f.Image){const I=new Image;I.onload=V(Yt,v,"TestLoadImage: loaded",!0,m,I),I.onerror=V(Yt,v,"TestLoadImage: error",!1,m,I),I.onabort=V(Yt,v,"TestLoadImage: abort",!1,m,I),I.ontimeout=V(Yt,v,"TestLoadImage: timeout",!1,m,I),f.setTimeout(function(){I.ontimeout&&I.ontimeout()},1e4),I.src=u}else m(!1)}function zl(u,m){const v=new Ki,I=new AbortController,j=setTimeout(()=>{I.abort(),Yt(v,"TestPingServer: timeout",!1,m)},1e4);fetch(u,{signal:I.signal}).then(W=>{clearTimeout(j),W.ok?Yt(v,"TestPingServer: ok",!0,m):Yt(v,"TestPingServer: server error",!1,m)}).catch(()=>{clearTimeout(j),Yt(v,"TestPingServer: error",!1,m)})}function Yt(u,m,v,I,j){try{j&&(j.onload=null,j.onerror=null,j.onabort=null,j.ontimeout=null),I(v)}catch{}}function ch(){this.g=new sa}function $l(u,m,v){const I=v||"";try{Gr(u,function(j,W){let ne=j;y(j)&&(ne=ra(j)),m.push(I+W+"="+encodeURIComponent(ne))})}catch(j){throw m.push(I+"type="+encodeURIComponent("_badmap")),j}}function wr(u){this.l=u.Ub||null,this.j=u.eb||!1}L(wr,Hi),wr.prototype.g=function(){return new ts(this.l,this.j)},wr.prototype.i=(function(u){return function(){return u}})({});function ts(u,m){yt.call(this),this.D=u,this.o=m,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}L(ts,yt),r=ts.prototype,r.open=function(u,m){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=u,this.A=m,this.readyState=1,Mn(this)},r.send=function(u){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const m={headers:this.u,method:this.B,credentials:this.m,cache:void 0};u&&(m.body=u),(this.D||f).fetch(new Request(this.A,m)).then(this.Sa.bind(this),this.ga.bind(this))},r.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Ln(this)),this.readyState=0},r.Sa=function(u){if(this.g&&(this.l=u,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=u.headers,this.readyState=2,Mn(this)),this.g&&(this.readyState=3,Mn(this),this.g)))if(this.responseType==="arraybuffer")u.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof f.ReadableStream<"u"&&"body"in u){if(this.j=u.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;Wl(this)}else u.text().then(this.Ra.bind(this),this.ga.bind(this))};function Wl(u){u.j.read().then(u.Pa.bind(u)).catch(u.ga.bind(u))}r.Pa=function(u){if(this.g){if(this.o&&u.value)this.response.push(u.value);else if(!this.o){var m=u.value?u.value:new Uint8Array(0);(m=this.v.decode(m,{stream:!u.done}))&&(this.response=this.responseText+=m)}u.done?Ln(this):Mn(this),this.readyState==3&&Wl(this)}},r.Ra=function(u){this.g&&(this.response=this.responseText=u,Ln(this))},r.Qa=function(u){this.g&&(this.response=u,Ln(this))},r.ga=function(){this.g&&Ln(this)};function Ln(u){u.readyState=4,u.l=null,u.j=null,u.v=null,Mn(u)}r.setRequestHeader=function(u,m){this.u.append(u,m)},r.getResponseHeader=function(u){return this.h&&this.h.get(u.toLowerCase())||""},r.getAllResponseHeaders=function(){if(!this.h)return"";const u=[],m=this.h.entries();for(var v=m.next();!v.done;)v=v.value,u.push(v[0]+": "+v[1]),v=m.next();return u.join(`\r
`)};function Mn(u){u.onreadystatechange&&u.onreadystatechange.call(u)}Object.defineProperty(ts.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(u){this.m=u?"include":"same-origin"}});function Tr(u){let m="";return ie(u,function(v,I){m+=I,m+=":",m+=v,m+=`\r
`}),m}function Zr(u,m,v){e:{for(I in v){var I=!1;break e}I=!0}I||(v=Tr(v),typeof u=="string"?v!=null&&encodeURIComponent(String(v)):We(u,m,v))}function Je(u){yt.call(this),this.headers=new Map,this.o=u||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}L(Je,yt);var hh=/^https?$/i,ma=["POST","PUT"];r=Je.prototype,r.Ha=function(u){this.J=u},r.ea=function(u,m,v,I){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+u);m=m?m.toUpperCase():"GET",this.D=u,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Dn.g(),this.v=this.o?Os(this.o):Os(Dn),this.g.onreadystatechange=S(this.Ea,this);try{this.B=!0,this.g.open(m,String(u),!0),this.B=!1}catch(W){ns(this,W);return}if(u=v||"",v=new Map(this.headers),I)if(Object.getPrototypeOf(I)===Object.prototype)for(var j in I)v.set(j,I[j]);else if(typeof I.keys=="function"&&typeof I.get=="function")for(const W of I.keys())v.set(W,I.get(W));else throw Error("Unknown input type for opt_headers: "+String(I));I=Array.from(v.keys()).find(W=>W.toLowerCase()=="content-type"),j=f.FormData&&u instanceof f.FormData,!(0<=Array.prototype.indexOf.call(ma,m,void 0))||I||j||v.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[W,ne]of v)this.g.setRequestHeader(W,ne);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{Gs(this),this.u=!0,this.g.send(u),this.u=!1}catch(W){ns(this,W)}};function ns(u,m){u.h=!1,u.g&&(u.j=!0,u.g.abort(),u.j=!1),u.l=m,u.m=5,Hs(u),cn(u)}function Hs(u){u.A||(u.A=!0,vt(u,"complete"),vt(u,"error"))}r.abort=function(u){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=u||7,vt(this,"complete"),vt(this,"abort"),cn(this))},r.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),cn(this,!0)),Je.aa.N.call(this)},r.Ea=function(){this.s||(this.B||this.u||this.j?ga(this):this.bb())},r.bb=function(){ga(this)};function ga(u){if(u.h&&typeof h<"u"&&(!u.v[1]||Xt(u)!=4||u.Z()!=2)){if(u.u&&Xt(u)==4)ea(u.Ea,0,u);else if(vt(u,"readystatechange"),Xt(u)==4){u.h=!1;try{const ne=u.Z();e:switch(ne){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var m=!0;break e;default:m=!1}var v;if(!(v=m)){var I;if(I=ne===0){var j=String(u.D).match(Zi)[1]||null;!j&&f.self&&f.self.location&&(j=f.self.location.protocol.slice(0,-1)),I=!hh.test(j?j.toLowerCase():"")}v=I}if(v)vt(u,"complete"),vt(u,"success");else{u.m=6;try{var W=2<Xt(u)?u.g.statusText:""}catch{W=""}u.l=W+" ["+u.Z()+"]",Hs(u)}}finally{cn(u)}}}}function cn(u,m){if(u.g){Gs(u);const v=u.g,I=u.v[0]?()=>{}:null;u.g=null,u.v=null,m||vt(u,"ready");try{v.onreadystatechange=I}catch{}}}function Gs(u){u.I&&(f.clearTimeout(u.I),u.I=null)}r.isActive=function(){return!!this.g};function Xt(u){return u.g?u.g.readyState:0}r.Z=function(){try{return 2<Xt(this)?this.g.status:-1}catch{return-1}},r.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},r.Oa=function(u){if(this.g){var m=this.g.responseText;return u&&m.indexOf(u)==0&&(m=m.substring(u.length)),ia(m)}};function ya(u){try{if(!u.g)return null;if("response"in u.g)return u.g.response;switch(u.H){case"":case"text":return u.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in u.g)return u.g.mozResponseArrayBuffer}return null}catch{return null}}function Ks(u){const m={};u=(u.g&&2<=Xt(u)&&u.g.getAllResponseHeaders()||"").split(`\r
`);for(let I=0;I<u.length;I++){if(Y(u[I]))continue;var v=b(u[I]);const j=v[0];if(v=v[1],typeof v!="string")continue;v=v.trim();const W=m[j]||[];m[j]=W,W.push(v)}k(m,function(I){return I.join(", ")})}r.Ba=function(){return this.m},r.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function Zn(u,m,v){return v&&v.internalChannelParams&&v.internalChannelParams[u]||m}function va(u){this.Aa=0,this.i=[],this.j=new Ki,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Zn("failFast",!1,u),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Zn("baseRetryDelayMs",5e3,u),this.cb=Zn("retryDelaySeedMs",1e4,u),this.Wa=Zn("forwardChannelMaxRetries",2,u),this.wa=Zn("forwardChannelRequestTimeoutMs",2e4,u),this.pa=u&&u.xmlHttpFactory||void 0,this.Xa=u&&u.Tb||void 0,this.Ca=u&&u.useFetchStreams||!1,this.L=void 0,this.J=u&&u.supportsCrossDomainXhr||!1,this.K="",this.h=new Ji(u&&u.concurrentRequestLimit),this.Da=new ch,this.P=u&&u.fastHandshake||!1,this.O=u&&u.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=u&&u.Rb||!1,u&&u.xa&&this.j.xa(),u&&u.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&u&&u.detectBufferingProxy||!1,this.ja=void 0,u&&u.longPollingTimeout&&0<u.longPollingTimeout&&(this.ja=u.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}r=va.prototype,r.la=8,r.G=1,r.connect=function(u,m,v,I){lt(0),this.W=u,this.H=m||{},v&&I!==void 0&&(this.H.OSID=v,this.H.OAID=I),this.F=this.X,this.I=Kl(this,null,this.W),er(this)};function xt(u){if(Qs(u),u.G==3){var m=u.U++,v=un(u.I);if(We(v,"SID",u.K),We(v,"RID",m),We(v,"TYPE","terminate"),Ir(u,v),m=new bn(u,u.j,m),m.L=2,m.v=Yr(un(v)),v=!1,f.navigator&&f.navigator.sendBeacon)try{v=f.navigator.sendBeacon(m.v.toString(),"")}catch{}!v&&f.Image&&(new Image().src=m.v,v=!0),v||(m.g=Ql(m.j,null),m.g.ea(m.v)),m.F=Date.now(),Ge(m)}Gl(u)}function jn(u){u.g&&(_a(u),u.g.cancel(),u.g=null)}function Qs(u){jn(u),u.u&&(f.clearTimeout(u.u),u.u=null),Js(u),u.h.cancel(),u.s&&(typeof u.s=="number"&&f.clearTimeout(u.s),u.s=null)}function er(u){if(!ln(u.h)&&!u.s){u.s=!0;var m=u.Ga;Ue||le(),se||(Ue(),se=!0),ve.add(m,u),u.B=0}}function dh(u,m){return Ol(u.h)>=u.h.j-(u.s?1:0)?!1:u.s?(u.i=m.D.concat(u.i),!0):u.G==1||u.G==2||u.B>=(u.Va?0:u.Wa)?!1:(u.s=Nn(S(u.Ga,u,m),Hl(u,u.B)),u.B++,!0)}r.Ga=function(u){if(this.s)if(this.s=null,this.G==1){if(!u){this.U=Math.floor(1e5*Math.random()),u=this.U++;const j=new bn(this,this.j,u);let W=this.o;if(this.S&&(W?(W=A(W),x(W,this.S)):W=this.S),this.m!==null||this.O||(j.H=W,W=null),this.P)e:{for(var m=0,v=0;v<this.i.length;v++){t:{var I=this.i[v];if("__data__"in I.map&&(I=I.map.__data__,typeof I=="string")){I=I.length;break t}I=void 0}if(I===void 0)break;if(m+=I,4096<m){m=v;break e}if(m===4096||v===this.i.length-1){m=v+1;break e}}m=1e3}else m=1e3;m=ei(this,j,m),v=un(this.I),We(v,"RID",u),We(v,"CVER",22),this.D&&We(v,"X-HTTP-Session-Id",this.D),Ir(this,v),W&&(this.O?m="headers="+encodeURIComponent(String(Tr(W)))+"&"+m:this.m&&Zr(v,this.m,W)),fa(this.h,j),this.Ua&&We(v,"TYPE","init"),this.P?(We(v,"$req",m),We(v,"SID","null"),j.T=!0,zs(j,v,null)):zs(j,v,m),this.G=2}}else this.G==3&&(u?Ys(this,u):this.i.length==0||ln(this.h)||Ys(this))};function Ys(u,m){var v;m?v=m.l:v=u.U++;const I=un(u.I);We(I,"SID",u.K),We(I,"RID",v),We(I,"AID",u.T),Ir(u,I),u.m&&u.o&&Zr(I,u.m,u.o),v=new bn(u,u.j,v,u.B+1),u.m===null&&(v.H=u.o),m&&(u.i=m.D.concat(u.i)),m=ei(u,v,1e3),v.I=Math.round(.5*u.wa)+Math.round(.5*u.wa*Math.random()),fa(u.h,v),zs(v,I,m)}function Ir(u,m){u.H&&ie(u.H,function(v,I){We(m,I,v)}),u.l&&Gr({},function(v,I){We(m,I,v)})}function ei(u,m,v){v=Math.min(u.i.length,v);var I=u.l?S(u.l.Na,u.l,u):null;e:{var j=u.i;let W=-1;for(;;){const ne=["count="+v];W==-1?0<v?(W=j[0].g,ne.push("ofs="+W)):W=0:ne.push("ofs="+W);let ze=!0;for(let _t=0;_t<v;_t++){let Le=j[_t].g;const At=j[_t].map;if(Le-=W,0>Le)W=Math.max(0,j[_t].g-100),ze=!1;else try{$l(At,ne,"req"+Le+"_")}catch{I&&I(At)}}if(ze){I=ne.join("&");break e}}}return u=u.i.splice(0,v),m.D=u,I}function rs(u){if(!u.g&&!u.u){u.Y=1;var m=u.Fa;Ue||le(),se||(Ue(),se=!0),ve.add(m,u),u.v=0}}function Xs(u){return u.g||u.u||3<=u.v?!1:(u.Y++,u.u=Nn(S(u.Fa,u),Hl(u,u.v)),u.v++,!0)}r.Fa=function(){if(this.u=null,ql(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var u=2*this.R;this.j.info("BP detection timer enabled: "+u),this.A=Nn(S(this.ab,this),u)}},r.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,lt(10),jn(this),ql(this))};function _a(u){u.A!=null&&(f.clearTimeout(u.A),u.A=null)}function ql(u){u.g=new bn(u,u.j,"rpc",u.Y),u.m===null&&(u.g.H=u.o),u.g.O=0;var m=un(u.qa);We(m,"RID","rpc"),We(m,"SID",u.K),We(m,"AID",u.T),We(m,"CI",u.F?"0":"1"),!u.F&&u.ja&&We(m,"TO",u.ja),We(m,"TYPE","xmlhttp"),Ir(u,m),u.m&&u.o&&Zr(m,u.m,u.o),u.L&&(u.g.I=u.L);var v=u.g;u=u.ia,v.L=1,v.v=Yr(un(m)),v.m=null,v.P=!0,ha(v,u)}r.Za=function(){this.C!=null&&(this.C=null,jn(this),Xs(this),lt(19))};function Js(u){u.C!=null&&(f.clearTimeout(u.C),u.C=null)}function Zs(u,m){var v=null;if(u.g==m){Js(u),_a(u),u.g=null;var I=2}else if(qt(u.h,m))v=m.D,Ll(u.h,m),I=1;else return;if(u.G!=0){if(m.o)if(I==1){v=m.m?m.m.length:0,m=Date.now()-m.F;var j=u.B;I=Gi(),vt(I,new js(I,v)),er(u)}else rs(u);else if(j=m.s,j==3||j==0&&0<m.X||!(I==1&&dh(u,m)||I==2&&Xs(u)))switch(v&&0<v.length&&(m=u.h,m.i=m.i.concat(v)),j){case 1:Sr(u,5);break;case 4:Sr(u,10);break;case 3:Sr(u,6);break;default:Sr(u,2)}}}function Hl(u,m){let v=u.Ta+Math.floor(Math.random()*u.cb);return u.isActive()||(v*=2),v*m}function Sr(u,m){if(u.j.info("Error code "+m),m==2){var v=S(u.fb,u),I=u.Xa;const j=!I;I=new Er(I||"//www.google.com/images/cleardot.gif"),f.location&&f.location.protocol=="http"||es(I,"https"),Yr(I),j?uh(I.toString(),v):zl(I.toString(),v)}else lt(2);u.G=0,u.l&&u.l.sa(m),Gl(u),Qs(u)}r.fb=function(u){u?(this.j.info("Successfully pinged google.com"),lt(2)):(this.j.info("Failed to ping google.com"),lt(1))};function Gl(u){if(u.G=0,u.ka=[],u.l){const m=Ml(u.h);(m.length!=0||u.i.length!=0)&&(F(u.ka,m),F(u.ka,u.i),u.h.i.length=0,z(u.i),u.i.length=0),u.l.ra()}}function Kl(u,m,v){var I=v instanceof Er?un(v):new Er(v);if(I.g!="")m&&(I.g=m+"."+I.g),Kr(I,I.s);else{var j=f.location;I=j.protocol,m=m?m+"."+j.hostname:j.hostname,j=+j.port;var W=new Er(null);I&&es(W,I),m&&(W.g=m),j&&Kr(W,j),v&&(W.l=v),I=W}return v=u.D,m=u.ya,v&&m&&We(I,v,m),We(I,"VER",u.la),Ir(u,I),I}function Ql(u,m,v){if(m&&!u.J)throw Error("Can't create secondary domain capable XhrIo object.");return m=u.Ca&&!u.pa?new Je(new wr({eb:v})):new Je(u.pa),m.Ha(u.J),m}r.isActive=function(){return!!this.l&&this.l.isActive(this)};function Ea(){}r=Ea.prototype,r.ua=function(){},r.ta=function(){},r.sa=function(){},r.ra=function(){},r.isActive=function(){return!0},r.Na=function(){};function eo(){}eo.prototype.g=function(u,m){return new Ht(u,m)};function Ht(u,m){yt.call(this),this.g=new va(m),this.l=u,this.h=m&&m.messageUrlParams||null,u=m&&m.messageHeaders||null,m&&m.clientProtocolHeaderRequired&&(u?u["X-Client-Protocol"]="webchannel":u={"X-Client-Protocol":"webchannel"}),this.g.o=u,u=m&&m.initMessageHeaders||null,m&&m.messageContentType&&(u?u["X-WebChannel-Content-Type"]=m.messageContentType:u={"X-WebChannel-Content-Type":m.messageContentType}),m&&m.va&&(u?u["X-WebChannel-Client-Profile"]=m.va:u={"X-WebChannel-Client-Profile":m.va}),this.g.S=u,(u=m&&m.Sb)&&!Y(u)&&(this.g.m=u),this.v=m&&m.supportsCrossDomainXhr||!1,this.u=m&&m.sendRawJson||!1,(m=m&&m.httpSessionIdParam)&&!Y(m)&&(this.g.D=m,u=this.h,u!==null&&m in u&&(u=this.h,m in u&&delete u[m])),this.j=new tr(this)}L(Ht,yt),Ht.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},Ht.prototype.close=function(){xt(this.g)},Ht.prototype.o=function(u){var m=this.g;if(typeof u=="string"){var v={};v.__data__=u,u=v}else this.u&&(v={},v.__data__=ra(u),u=v);m.i.push(new Vl(m.Ya++,u)),m.G==3&&er(m)},Ht.prototype.N=function(){this.g.l=null,delete this.j,xt(this.g),delete this.g,Ht.aa.N.call(this)};function Yl(u){Qn.call(this),u.__headers__&&(this.headers=u.__headers__,this.statusCode=u.__status__,delete u.__headers__,delete u.__status__);var m=u.__sm__;if(m){e:{for(const v in m){u=v;break e}u=void 0}(this.i=u)&&(u=this.i,m=m!==null&&u in m?m[u]:void 0),this.data=m}else this.data=u}L(Yl,Qn);function Xl(){Ms.call(this),this.status=1}L(Xl,Ms);function tr(u){this.g=u}L(tr,Ea),tr.prototype.ua=function(){vt(this.g,"a")},tr.prototype.ta=function(u){vt(this.g,new Yl(u))},tr.prototype.sa=function(u){vt(this.g,new Xl)},tr.prototype.ra=function(){vt(this.g,"b")},eo.prototype.createWebChannel=eo.prototype.g,Ht.prototype.send=Ht.prototype.o,Ht.prototype.open=Ht.prototype.m,Ht.prototype.close=Ht.prototype.close,z_=function(){return new eo},B_=function(){return Gi()},U_=Yn,hf={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},Us.NO_ERROR=0,Us.TIMEOUT=8,Us.HTTP_ERROR=6,rc=Us,Nl.COMPLETE="complete",F_=Nl,Ls.EventType=gn,gn.OPEN="a",gn.CLOSE="b",gn.ERROR="c",gn.MESSAGE="d",yt.prototype.listen=yt.prototype.K,Ga=Ls,Je.prototype.listenOnce=Je.prototype.L,Je.prototype.getLastError=Je.prototype.Ka,Je.prototype.getLastErrorCode=Je.prototype.Ba,Je.prototype.getStatus=Je.prototype.Z,Je.prototype.getResponseJson=Je.prototype.Oa,Je.prototype.getResponseText=Je.prototype.oa,Je.prototype.send=Je.prototype.ea,Je.prototype.setWithCredentials=Je.prototype.Ha,j_=Je}).apply(typeof Hu<"u"?Hu:typeof self<"u"?self:typeof window<"u"?window:{});const xy="@firebase/firestore",Dy="4.8.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zt{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}zt.UNAUTHENTICATED=new zt(null),zt.GOOGLE_CREDENTIALS=new zt("google-credentials-uid"),zt.FIRST_PARTY=new zt("first-party-uid"),zt.MOCK_USER=new zt("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Ho="11.10.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const As=new Of("@firebase/firestore");function Io(){return As.logLevel}function he(r,...e){if(As.logLevel<=be.DEBUG){const t=e.map(Gf);As.debug(`Firestore (${Ho}): ${r}`,...t)}}function Ur(r,...e){if(As.logLevel<=be.ERROR){const t=e.map(Gf);As.error(`Firestore (${Ho}): ${r}`,...t)}}function Ni(r,...e){if(As.logLevel<=be.WARN){const t=e.map(Gf);As.warn(`Firestore (${Ho}): ${r}`,...t)}}function Gf(r){if(typeof r=="string")return r;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return(function(t){return JSON.stringify(t)})(r)}catch{return r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ie(r,e,t){let i="Unexpected state";typeof e=="string"?i=e:t=e,$_(r,i,t)}function $_(r,e,t){let i=`FIRESTORE (${Ho}) INTERNAL ASSERTION FAILED: ${e} (ID: ${r.toString(16)})`;if(t!==void 0)try{i+=" CONTEXT: "+JSON.stringify(t)}catch{i+=" CONTEXT: "+t}throw Ur(i),new Error(i)}function Be(r,e,t,i){let o="Unexpected state";typeof t=="string"?o=t:i=t,r||$_(e,o,i)}function Pe(r,e){return r}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const G={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class ae extends Wr{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mr{constructor(){this.promise=new Promise(((e,t)=>{this.resolve=e,this.reject=t}))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class W_{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class LP{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable((()=>t(zt.UNAUTHENTICATED)))}shutdown(){}}class MP{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable((()=>t(this.token.user)))}shutdown(){this.changeListener=null}}class jP{constructor(e){this.t=e,this.currentUser=zt.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){Be(this.o===void 0,42304);let i=this.i;const o=p=>this.i!==i?(i=this.i,t(p)):Promise.resolve();let l=new Mr;this.o=()=>{this.i++,this.currentUser=this.u(),l.resolve(),l=new Mr,e.enqueueRetryable((()=>o(this.currentUser)))};const h=()=>{const p=l;e.enqueueRetryable((async()=>{await p.promise,await o(this.currentUser)}))},f=p=>{he("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=p,this.o&&(this.auth.addAuthTokenListener(this.o),h())};this.t.onInit((p=>f(p))),setTimeout((()=>{if(!this.auth){const p=this.t.getImmediate({optional:!0});p?f(p):(he("FirebaseAuthCredentialsProvider","Auth not yet detected"),l.resolve(),l=new Mr)}}),0),h()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then((i=>this.i!==e?(he("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):i?(Be(typeof i.accessToken=="string",31837,{l:i}),new W_(i.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return Be(e===null||typeof e=="string",2055,{h:e}),new zt(e)}}class FP{constructor(e,t,i){this.P=e,this.T=t,this.I=i,this.type="FirstParty",this.user=zt.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class UP{constructor(e,t,i){this.P=e,this.T=t,this.I=i}getToken(){return Promise.resolve(new FP(this.P,this.T,this.I))}start(e,t){e.enqueueRetryable((()=>t(zt.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class by{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class BP{constructor(e,t){this.V=t,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,Cn(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,t){Be(this.o===void 0,3512);const i=l=>{l.error!=null&&he("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${l.error.message}`);const h=l.token!==this.m;return this.m=l.token,he("FirebaseAppCheckTokenProvider",`Received ${h?"new":"existing"} token.`),h?t(l.token):Promise.resolve()};this.o=l=>{e.enqueueRetryable((()=>i(l)))};const o=l=>{he("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=l,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit((l=>o(l))),setTimeout((()=>{if(!this.appCheck){const l=this.V.getImmediate({optional:!0});l?o(l):he("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){if(this.p)return Promise.resolve(new by(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((t=>t?(Be(typeof t.token=="string",44558,{tokenResult:t}),this.m=t.token,new by(t.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zP(r){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(r);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let i=0;i<r;i++)t[i]=Math.floor(256*Math.random());return t}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function q_(){return new TextEncoder}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kf{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(4.129032258064516);let i="";for(;i.length<20;){const o=zP(40);for(let l=0;l<o.length;++l)i.length<20&&o[l]<t&&(i+=e.charAt(o[l]%62))}return i}}function Ne(r,e){return r<e?-1:r>e?1:0}function df(r,e){let t=0;for(;t<r.length&&t<e.length;){const i=r.codePointAt(t),o=e.codePointAt(t);if(i!==o){if(i<128&&o<128)return Ne(i,o);{const l=q_(),h=$P(l.encode(Vy(r,t)),l.encode(Vy(e,t)));return h!==0?h:Ne(i,o)}}t+=i>65535?2:1}return Ne(r.length,e.length)}function Vy(r,e){return r.codePointAt(e)>65535?r.substring(e,e+2):r.substring(e,e+1)}function $P(r,e){for(let t=0;t<r.length&&t<e.length;++t)if(r[t]!==e[t])return Ne(r[t],e[t]);return Ne(r.length,e.length)}function Vo(r,e,t){return r.length===e.length&&r.every(((i,o)=>t(i,e[o])))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Oy="__name__";class or{constructor(e,t,i){t===void 0?t=0:t>e.length&&Ie(637,{offset:t,range:e.length}),i===void 0?i=e.length-t:i>e.length-t&&Ie(1746,{length:i,range:e.length-t}),this.segments=e,this.offset=t,this.len=i}get length(){return this.len}isEqual(e){return or.comparator(this,e)===0}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof or?e.forEach((i=>{t.push(i)})):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,i=this.limit();t<i;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const i=Math.min(e.length,t.length);for(let o=0;o<i;o++){const l=or.compareSegments(e.get(o),t.get(o));if(l!==0)return l}return Ne(e.length,t.length)}static compareSegments(e,t){const i=or.isNumericId(e),o=or.isNumericId(t);return i&&!o?-1:!i&&o?1:i&&o?or.extractNumericId(e).compare(or.extractNumericId(t)):df(e,t)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return Ci.fromString(e.substring(4,e.length-2))}}class Qe extends or{construct(e,t,i){return new Qe(e,t,i)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const t=[];for(const i of e){if(i.indexOf("//")>=0)throw new ae(G.INVALID_ARGUMENT,`Invalid segment (${i}). Paths must not contain // in them.`);t.push(...i.split("/").filter((o=>o.length>0)))}return new Qe(t)}static emptyPath(){return new Qe([])}}const WP=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Ot extends or{construct(e,t,i){return new Ot(e,t,i)}static isValidIdentifier(e){return WP.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Ot.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===Oy}static keyField(){return new Ot([Oy])}static fromServerFormat(e){const t=[];let i="",o=0;const l=()=>{if(i.length===0)throw new ae(G.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(i),i=""};let h=!1;for(;o<e.length;){const f=e[o];if(f==="\\"){if(o+1===e.length)throw new ae(G.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const p=e[o+1];if(p!=="\\"&&p!=="."&&p!=="`")throw new ae(G.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);i+=p,o+=2}else f==="`"?(h=!h,o++):f!=="."||h?(i+=f,o++):(l(),o++)}if(l(),h)throw new ae(G.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Ot(t)}static emptyPath(){return new Ot([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _e{constructor(e){this.path=e}static fromPath(e){return new _e(Qe.fromString(e))}static fromName(e){return new _e(Qe.fromString(e).popFirst(5))}static empty(){return new _e(Qe.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Qe.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return Qe.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new _e(new Qe(e.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function H_(r,e,t){if(!t)throw new ae(G.INVALID_ARGUMENT,`Function ${r}() cannot be called with an empty ${e}.`)}function qP(r,e,t,i){if(e===!0&&i===!0)throw new ae(G.INVALID_ARGUMENT,`${r} and ${t} cannot be used together.`)}function Ly(r){if(!_e.isDocumentKey(r))throw new ae(G.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${r} has ${r.length}.`)}function My(r){if(_e.isDocumentKey(r))throw new ae(G.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${r} has ${r.length}.`)}function G_(r){return typeof r=="object"&&r!==null&&(Object.getPrototypeOf(r)===Object.prototype||Object.getPrototypeOf(r)===null)}function Fc(r){if(r===void 0)return"undefined";if(r===null)return"null";if(typeof r=="string")return r.length>20&&(r=`${r.substring(0,20)}...`),JSON.stringify(r);if(typeof r=="number"||typeof r=="boolean")return""+r;if(typeof r=="object"){if(r instanceof Array)return"an array";{const e=(function(i){return i.constructor?i.constructor.name:null})(r);return e?`a custom ${e} object`:"an object"}}return typeof r=="function"?"a function":Ie(12329,{type:typeof r})}function an(r,e){if("_delegate"in r&&(r=r._delegate),!(r instanceof e)){if(e.name===r.constructor.name)throw new ae(G.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=Fc(r);throw new ae(G.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return r}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gt(r,e){const t={typeString:r};return e&&(t.value=e),t}function Tl(r,e){if(!G_(r))throw new ae(G.INVALID_ARGUMENT,"JSON must be an object");let t;for(const i in e)if(e[i]){const o=e[i].typeString,l="value"in e[i]?{value:e[i].value}:void 0;if(!(i in r)){t=`JSON missing required field: '${i}'`;break}const h=r[i];if(o&&typeof h!==o){t=`JSON field '${i}' must be a ${o}.`;break}if(l!==void 0&&h!==l.value){t=`Expected '${i}' field to equal '${l.value}'`;break}}if(t)throw new ae(G.INVALID_ARGUMENT,t);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jy=-62135596800,Fy=1e6;class qe{static now(){return qe.fromMillis(Date.now())}static fromDate(e){return qe.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),i=Math.floor((e-1e3*t)*Fy);return new qe(t,i)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new ae(G.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new ae(G.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<jy)throw new ae(G.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new ae(G.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/Fy}_compareTo(e){return this.seconds===e.seconds?Ne(this.nanoseconds,e.nanoseconds):Ne(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:qe._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(Tl(e,qe._jsonSchema))return new qe(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-jy;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}qe._jsonSchemaVersion="firestore/timestamp/1.0",qe._jsonSchema={type:gt("string",qe._jsonSchemaVersion),seconds:gt("number"),nanoseconds:gt("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ae{static fromTimestamp(e){return new Ae(e)}static min(){return new Ae(new qe(0,0))}static max(){return new Ae(new qe(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ll=-1;function HP(r,e){const t=r.toTimestamp().seconds,i=r.toTimestamp().nanoseconds+1,o=Ae.fromTimestamp(i===1e9?new qe(t+1,0):new qe(t,i));return new xi(o,_e.empty(),e)}function GP(r){return new xi(r.readTime,r.key,ll)}class xi{constructor(e,t,i){this.readTime=e,this.documentKey=t,this.largestBatchId=i}static min(){return new xi(Ae.min(),_e.empty(),ll)}static max(){return new xi(Ae.max(),_e.empty(),ll)}}function KP(r,e){let t=r.readTime.compareTo(e.readTime);return t!==0?t:(t=_e.comparator(r.documentKey,e.documentKey),t!==0?t:Ne(r.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const QP="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class YP{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Go(r){if(r.code!==G.FAILED_PRECONDITION||r.message!==QP)throw r;he("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class K{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)}),(t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)}))}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&Ie(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new K(((i,o)=>{this.nextCallback=l=>{this.wrapSuccess(e,l).next(i,o)},this.catchCallback=l=>{this.wrapFailure(t,l).next(i,o)}}))}toPromise(){return new Promise(((e,t)=>{this.next(e,t)}))}wrapUserFunction(e){try{const t=e();return t instanceof K?t:K.resolve(t)}catch(t){return K.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction((()=>e(t))):K.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction((()=>e(t))):K.reject(t)}static resolve(e){return new K(((t,i)=>{t(e)}))}static reject(e){return new K(((t,i)=>{i(e)}))}static waitFor(e){return new K(((t,i)=>{let o=0,l=0,h=!1;e.forEach((f=>{++o,f.next((()=>{++l,h&&l===o&&t()}),(p=>i(p)))})),h=!0,l===o&&t()}))}static or(e){let t=K.resolve(!1);for(const i of e)t=t.next((o=>o?K.resolve(o):i()));return t}static forEach(e,t){const i=[];return e.forEach(((o,l)=>{i.push(t.call(this,o,l))})),this.waitFor(i)}static mapArray(e,t){return new K(((i,o)=>{const l=e.length,h=new Array(l);let f=0;for(let p=0;p<l;p++){const y=p;t(e[y]).next((E=>{h[y]=E,++f,f===l&&i(h)}),(E=>o(E)))}}))}static doWhile(e,t){return new K(((i,o)=>{const l=()=>{e()===!0?t().next((()=>{l()}),o):i()};l()}))}}function XP(r){const e=r.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}function Ko(r){return r.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Uc{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=i=>this._e(i),this.ae=i=>t.writeSequenceNumber(i))}_e(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ae&&this.ae(e),e}}Uc.ue=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qf=-1;function Bc(r){return r==null}function _c(r){return r===0&&1/r==-1/0}function JP(r){return typeof r=="number"&&Number.isInteger(r)&&!_c(r)&&r<=Number.MAX_SAFE_INTEGER&&r>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const K_="";function ZP(r){let e="";for(let t=0;t<r.length;t++)e.length>0&&(e=Uy(e)),e=e1(r.get(t),e);return Uy(e)}function e1(r,e){let t=e;const i=r.length;for(let o=0;o<i;o++){const l=r.charAt(o);switch(l){case"\0":t+="";break;case K_:t+="";break;default:t+=l}}return t}function Uy(r){return r+K_+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function By(r){let e=0;for(const t in r)Object.prototype.hasOwnProperty.call(r,t)&&e++;return e}function Ui(r,e){for(const t in r)Object.prototype.hasOwnProperty.call(r,t)&&e(t,r[t])}function Q_(r){for(const e in r)if(Object.prototype.hasOwnProperty.call(r,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nt{constructor(e,t){this.comparator=e,this.root=t||Vt.EMPTY}insert(e,t){return new nt(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,Vt.BLACK,null,null))}remove(e){return new nt(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Vt.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const i=this.comparator(e,t.key);if(i===0)return t.value;i<0?t=t.left:i>0&&(t=t.right)}return null}indexOf(e){let t=0,i=this.root;for(;!i.isEmpty();){const o=this.comparator(e,i.key);if(o===0)return t+i.left.size;o<0?i=i.left:(t+=i.left.size+1,i=i.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((t,i)=>(e(t,i),!1)))}toString(){const e=[];return this.inorderTraversal(((t,i)=>(e.push(`${t}:${i}`),!1))),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Gu(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Gu(this.root,e,this.comparator,!1)}getReverseIterator(){return new Gu(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Gu(this.root,e,this.comparator,!0)}}class Gu{constructor(e,t,i,o){this.isReverse=o,this.nodeStack=[];let l=1;for(;!e.isEmpty();)if(l=t?i(e.key,t):1,t&&o&&(l*=-1),l<0)e=this.isReverse?e.left:e.right;else{if(l===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Vt{constructor(e,t,i,o,l){this.key=e,this.value=t,this.color=i??Vt.RED,this.left=o??Vt.EMPTY,this.right=l??Vt.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,i,o,l){return new Vt(e??this.key,t??this.value,i??this.color,o??this.left,l??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,i){let o=this;const l=i(e,o.key);return o=l<0?o.copy(null,null,null,o.left.insert(e,t,i),null):l===0?o.copy(null,t,null,null,null):o.copy(null,null,null,null,o.right.insert(e,t,i)),o.fixUp()}removeMin(){if(this.left.isEmpty())return Vt.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let i,o=this;if(t(e,o.key)<0)o.left.isEmpty()||o.left.isRed()||o.left.left.isRed()||(o=o.moveRedLeft()),o=o.copy(null,null,null,o.left.remove(e,t),null);else{if(o.left.isRed()&&(o=o.rotateRight()),o.right.isEmpty()||o.right.isRed()||o.right.left.isRed()||(o=o.moveRedRight()),t(e,o.key)===0){if(o.right.isEmpty())return Vt.EMPTY;i=o.right.min(),o=o.copy(i.key,i.value,null,null,o.right.removeMin())}o=o.copy(null,null,null,null,o.right.remove(e,t))}return o.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Vt.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Vt.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw Ie(43730,{key:this.key,value:this.value});if(this.right.isRed())throw Ie(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw Ie(27949);return e+(this.isRed()?0:1)}}Vt.EMPTY=null,Vt.RED=!0,Vt.BLACK=!1;Vt.EMPTY=new class{constructor(){this.size=0}get key(){throw Ie(57766)}get value(){throw Ie(16141)}get color(){throw Ie(16727)}get left(){throw Ie(29726)}get right(){throw Ie(36894)}copy(e,t,i,o,l){return this}insert(e,t,i){return new Vt(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class It{constructor(e){this.comparator=e,this.data=new nt(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((t,i)=>(e(t),!1)))}forEachInRange(e,t){const i=this.data.getIteratorFrom(e[0]);for(;i.hasNext();){const o=i.getNext();if(this.comparator(o.key,e[1])>=0)return;t(o.key)}}forEachWhile(e,t){let i;for(i=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();i.hasNext();)if(!e(i.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new zy(this.data.getIterator())}getIteratorFrom(e){return new zy(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach((i=>{t=t.add(i)})),t}isEqual(e){if(!(e instanceof It)||this.size!==e.size)return!1;const t=this.data.getIterator(),i=e.data.getIterator();for(;t.hasNext();){const o=t.getNext().key,l=i.getNext().key;if(this.comparator(o,l)!==0)return!1}return!0}toArray(){const e=[];return this.forEach((t=>{e.push(t)})),e}toString(){const e=[];return this.forEach((t=>e.push(t))),"SortedSet("+e.toString()+")"}copy(e){const t=new It(this.comparator);return t.data=e,t}}class zy{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mn{constructor(e){this.fields=e,e.sort(Ot.comparator)}static empty(){return new mn([])}unionWith(e){let t=new It(Ot.comparator);for(const i of this.fields)t=t.add(i);for(const i of e)t=t.add(i);return new mn(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return Vo(this.fields,e.fields,((t,i)=>t.isEqual(i)))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Y_ extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lt{constructor(e){this.binaryString=e}static fromBase64String(e){const t=(function(o){try{return atob(o)}catch(l){throw typeof DOMException<"u"&&l instanceof DOMException?new Y_("Invalid base64 string: "+l):l}})(e);return new Lt(t)}static fromUint8Array(e){const t=(function(o){let l="";for(let h=0;h<o.length;++h)l+=String.fromCharCode(o[h]);return l})(e);return new Lt(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(t){return btoa(t)})(this.binaryString)}toUint8Array(){return(function(t){const i=new Uint8Array(t.length);for(let o=0;o<t.length;o++)i[o]=t.charCodeAt(o);return i})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Ne(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Lt.EMPTY_BYTE_STRING=new Lt("");const t1=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Di(r){if(Be(!!r,39018),typeof r=="string"){let e=0;const t=t1.exec(r);if(Be(!!t,46558,{timestamp:r}),t[1]){let o=t[1];o=(o+"000000000").substr(0,9),e=Number(o)}const i=new Date(r);return{seconds:Math.floor(i.getTime()/1e3),nanos:e}}return{seconds:ct(r.seconds),nanos:ct(r.nanos)}}function ct(r){return typeof r=="number"?r:typeof r=="string"?Number(r):0}function bi(r){return typeof r=="string"?Lt.fromBase64String(r):Lt.fromUint8Array(r)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const X_="server_timestamp",J_="__type__",Z_="__previous_value__",eE="__local_write_time__";function Yf(r){var e,t;return((t=(((e=r==null?void 0:r.mapValue)===null||e===void 0?void 0:e.fields)||{})[J_])===null||t===void 0?void 0:t.stringValue)===X_}function zc(r){const e=r.mapValue.fields[Z_];return Yf(e)?zc(e):e}function ul(r){const e=Di(r.mapValue.fields[eE].timestampValue);return new qe(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class n1{constructor(e,t,i,o,l,h,f,p,y,E){this.databaseId=e,this.appId=t,this.persistenceKey=i,this.host=o,this.ssl=l,this.forceLongPolling=h,this.autoDetectLongPolling=f,this.longPollingOptions=p,this.useFetchStreams=y,this.isUsingEmulator=E}}const Ec="(default)";class cl{constructor(e,t){this.projectId=e,this.database=t||Ec}static empty(){return new cl("","")}get isDefaultDatabase(){return this.database===Ec}isEqual(e){return e instanceof cl&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tE="__type__",r1="__max__",Ku={mapValue:{}},nE="__vector__",wc="value";function Vi(r){return"nullValue"in r?0:"booleanValue"in r?1:"integerValue"in r||"doubleValue"in r?2:"timestampValue"in r?3:"stringValue"in r?5:"bytesValue"in r?6:"referenceValue"in r?7:"geoPointValue"in r?8:"arrayValue"in r?9:"mapValue"in r?Yf(r)?4:s1(r)?9007199254740991:i1(r)?10:11:Ie(28295,{value:r})}function pr(r,e){if(r===e)return!0;const t=Vi(r);if(t!==Vi(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return r.booleanValue===e.booleanValue;case 4:return ul(r).isEqual(ul(e));case 3:return(function(o,l){if(typeof o.timestampValue=="string"&&typeof l.timestampValue=="string"&&o.timestampValue.length===l.timestampValue.length)return o.timestampValue===l.timestampValue;const h=Di(o.timestampValue),f=Di(l.timestampValue);return h.seconds===f.seconds&&h.nanos===f.nanos})(r,e);case 5:return r.stringValue===e.stringValue;case 6:return(function(o,l){return bi(o.bytesValue).isEqual(bi(l.bytesValue))})(r,e);case 7:return r.referenceValue===e.referenceValue;case 8:return(function(o,l){return ct(o.geoPointValue.latitude)===ct(l.geoPointValue.latitude)&&ct(o.geoPointValue.longitude)===ct(l.geoPointValue.longitude)})(r,e);case 2:return(function(o,l){if("integerValue"in o&&"integerValue"in l)return ct(o.integerValue)===ct(l.integerValue);if("doubleValue"in o&&"doubleValue"in l){const h=ct(o.doubleValue),f=ct(l.doubleValue);return h===f?_c(h)===_c(f):isNaN(h)&&isNaN(f)}return!1})(r,e);case 9:return Vo(r.arrayValue.values||[],e.arrayValue.values||[],pr);case 10:case 11:return(function(o,l){const h=o.mapValue.fields||{},f=l.mapValue.fields||{};if(By(h)!==By(f))return!1;for(const p in h)if(h.hasOwnProperty(p)&&(f[p]===void 0||!pr(h[p],f[p])))return!1;return!0})(r,e);default:return Ie(52216,{left:r})}}function hl(r,e){return(r.values||[]).find((t=>pr(t,e)))!==void 0}function Oo(r,e){if(r===e)return 0;const t=Vi(r),i=Vi(e);if(t!==i)return Ne(t,i);switch(t){case 0:case 9007199254740991:return 0;case 1:return Ne(r.booleanValue,e.booleanValue);case 2:return(function(l,h){const f=ct(l.integerValue||l.doubleValue),p=ct(h.integerValue||h.doubleValue);return f<p?-1:f>p?1:f===p?0:isNaN(f)?isNaN(p)?0:-1:1})(r,e);case 3:return $y(r.timestampValue,e.timestampValue);case 4:return $y(ul(r),ul(e));case 5:return df(r.stringValue,e.stringValue);case 6:return(function(l,h){const f=bi(l),p=bi(h);return f.compareTo(p)})(r.bytesValue,e.bytesValue);case 7:return(function(l,h){const f=l.split("/"),p=h.split("/");for(let y=0;y<f.length&&y<p.length;y++){const E=Ne(f[y],p[y]);if(E!==0)return E}return Ne(f.length,p.length)})(r.referenceValue,e.referenceValue);case 8:return(function(l,h){const f=Ne(ct(l.latitude),ct(h.latitude));return f!==0?f:Ne(ct(l.longitude),ct(h.longitude))})(r.geoPointValue,e.geoPointValue);case 9:return Wy(r.arrayValue,e.arrayValue);case 10:return(function(l,h){var f,p,y,E;const T=l.fields||{},S=h.fields||{},V=(f=T[wc])===null||f===void 0?void 0:f.arrayValue,L=(p=S[wc])===null||p===void 0?void 0:p.arrayValue,z=Ne(((y=V==null?void 0:V.values)===null||y===void 0?void 0:y.length)||0,((E=L==null?void 0:L.values)===null||E===void 0?void 0:E.length)||0);return z!==0?z:Wy(V,L)})(r.mapValue,e.mapValue);case 11:return(function(l,h){if(l===Ku.mapValue&&h===Ku.mapValue)return 0;if(l===Ku.mapValue)return 1;if(h===Ku.mapValue)return-1;const f=l.fields||{},p=Object.keys(f),y=h.fields||{},E=Object.keys(y);p.sort(),E.sort();for(let T=0;T<p.length&&T<E.length;++T){const S=df(p[T],E[T]);if(S!==0)return S;const V=Oo(f[p[T]],y[E[T]]);if(V!==0)return V}return Ne(p.length,E.length)})(r.mapValue,e.mapValue);default:throw Ie(23264,{le:t})}}function $y(r,e){if(typeof r=="string"&&typeof e=="string"&&r.length===e.length)return Ne(r,e);const t=Di(r),i=Di(e),o=Ne(t.seconds,i.seconds);return o!==0?o:Ne(t.nanos,i.nanos)}function Wy(r,e){const t=r.values||[],i=e.values||[];for(let o=0;o<t.length&&o<i.length;++o){const l=Oo(t[o],i[o]);if(l)return l}return Ne(t.length,i.length)}function Lo(r){return ff(r)}function ff(r){return"nullValue"in r?"null":"booleanValue"in r?""+r.booleanValue:"integerValue"in r?""+r.integerValue:"doubleValue"in r?""+r.doubleValue:"timestampValue"in r?(function(t){const i=Di(t);return`time(${i.seconds},${i.nanos})`})(r.timestampValue):"stringValue"in r?r.stringValue:"bytesValue"in r?(function(t){return bi(t).toBase64()})(r.bytesValue):"referenceValue"in r?(function(t){return _e.fromName(t).toString()})(r.referenceValue):"geoPointValue"in r?(function(t){return`geo(${t.latitude},${t.longitude})`})(r.geoPointValue):"arrayValue"in r?(function(t){let i="[",o=!0;for(const l of t.values||[])o?o=!1:i+=",",i+=ff(l);return i+"]"})(r.arrayValue):"mapValue"in r?(function(t){const i=Object.keys(t.fields||{}).sort();let o="{",l=!0;for(const h of i)l?l=!1:o+=",",o+=`${h}:${ff(t.fields[h])}`;return o+"}"})(r.mapValue):Ie(61005,{value:r})}function ic(r){switch(Vi(r)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=zc(r);return e?16+ic(e):16;case 5:return 2*r.stringValue.length;case 6:return bi(r.bytesValue).approximateByteSize();case 7:return r.referenceValue.length;case 9:return(function(i){return(i.values||[]).reduce(((o,l)=>o+ic(l)),0)})(r.arrayValue);case 10:case 11:return(function(i){let o=0;return Ui(i.fields,((l,h)=>{o+=l.length+ic(h)})),o})(r.mapValue);default:throw Ie(13486,{value:r})}}function qy(r,e){return{referenceValue:`projects/${r.projectId}/databases/${r.database}/documents/${e.path.canonicalString()}`}}function pf(r){return!!r&&"integerValue"in r}function Xf(r){return!!r&&"arrayValue"in r}function Hy(r){return!!r&&"nullValue"in r}function Gy(r){return!!r&&"doubleValue"in r&&isNaN(Number(r.doubleValue))}function sc(r){return!!r&&"mapValue"in r}function i1(r){var e,t;return((t=(((e=r==null?void 0:r.mapValue)===null||e===void 0?void 0:e.fields)||{})[tE])===null||t===void 0?void 0:t.stringValue)===nE}function Za(r){if(r.geoPointValue)return{geoPointValue:Object.assign({},r.geoPointValue)};if(r.timestampValue&&typeof r.timestampValue=="object")return{timestampValue:Object.assign({},r.timestampValue)};if(r.mapValue){const e={mapValue:{fields:{}}};return Ui(r.mapValue.fields,((t,i)=>e.mapValue.fields[t]=Za(i))),e}if(r.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(r.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=Za(r.arrayValue.values[t]);return e}return Object.assign({},r)}function s1(r){return(((r.mapValue||{}).fields||{}).__type__||{}).stringValue===r1}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class on{constructor(e){this.value=e}static empty(){return new on({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let i=0;i<e.length-1;++i)if(t=(t.mapValue.fields||{})[e.get(i)],!sc(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=Za(t)}setAll(e){let t=Ot.emptyPath(),i={},o=[];e.forEach(((h,f)=>{if(!t.isImmediateParentOf(f)){const p=this.getFieldsMap(t);this.applyChanges(p,i,o),i={},o=[],t=f.popLast()}h?i[f.lastSegment()]=Za(h):o.push(f.lastSegment())}));const l=this.getFieldsMap(t);this.applyChanges(l,i,o)}delete(e){const t=this.field(e.popLast());sc(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return pr(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let i=0;i<e.length;++i){let o=t.mapValue.fields[e.get(i)];sc(o)&&o.mapValue.fields||(o={mapValue:{fields:{}}},t.mapValue.fields[e.get(i)]=o),t=o}return t.mapValue.fields}applyChanges(e,t,i){Ui(t,((o,l)=>e[o]=l));for(const o of i)delete e[o]}clone(){return new on(Za(this.value))}}function rE(r){const e=[];return Ui(r.fields,((t,i)=>{const o=new Ot([t]);if(sc(i)){const l=rE(i.mapValue).fields;if(l.length===0)e.push(o);else for(const h of l)e.push(o.child(h))}else e.push(o)})),new mn(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $t{constructor(e,t,i,o,l,h,f){this.key=e,this.documentType=t,this.version=i,this.readTime=o,this.createTime=l,this.data=h,this.documentState=f}static newInvalidDocument(e){return new $t(e,0,Ae.min(),Ae.min(),Ae.min(),on.empty(),0)}static newFoundDocument(e,t,i,o){return new $t(e,1,t,Ae.min(),i,o,0)}static newNoDocument(e,t){return new $t(e,2,t,Ae.min(),Ae.min(),on.empty(),0)}static newUnknownDocument(e,t){return new $t(e,3,t,Ae.min(),Ae.min(),on.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(Ae.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=on.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=on.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Ae.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof $t&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new $t(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tc{constructor(e,t){this.position=e,this.inclusive=t}}function Ky(r,e,t){let i=0;for(let o=0;o<r.position.length;o++){const l=e[o],h=r.position[o];if(l.field.isKeyField()?i=_e.comparator(_e.fromName(h.referenceValue),t.key):i=Oo(h,t.data.field(l.field)),l.dir==="desc"&&(i*=-1),i!==0)break}return i}function Qy(r,e){if(r===null)return e===null;if(e===null||r.inclusive!==e.inclusive||r.position.length!==e.position.length)return!1;for(let t=0;t<r.position.length;t++)if(!pr(r.position[t],e.position[t]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ic{constructor(e,t="asc"){this.field=e,this.dir=t}}function o1(r,e){return r.dir===e.dir&&r.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iE{}class mt extends iE{constructor(e,t,i){super(),this.field=e,this.op=t,this.value=i}static create(e,t,i){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,i):new l1(e,t,i):t==="array-contains"?new h1(e,i):t==="in"?new d1(e,i):t==="not-in"?new f1(e,i):t==="array-contains-any"?new p1(e,i):new mt(e,t,i)}static createKeyFieldInFilter(e,t,i){return t==="in"?new u1(e,i):new c1(e,i)}matches(e){const t=e.data.field(this.field);return this.op==="!="?t!==null&&t.nullValue===void 0&&this.matchesComparison(Oo(t,this.value)):t!==null&&Vi(this.value)===Vi(t)&&this.matchesComparison(Oo(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Ie(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Gn extends iE{constructor(e,t){super(),this.filters=e,this.op=t,this.he=null}static create(e,t){return new Gn(e,t)}matches(e){return sE(this)?this.filters.find((t=>!t.matches(e)))===void 0:this.filters.find((t=>t.matches(e)))!==void 0}getFlattenedFilters(){return this.he!==null||(this.he=this.filters.reduce(((e,t)=>e.concat(t.getFlattenedFilters())),[])),this.he}getFilters(){return Object.assign([],this.filters)}}function sE(r){return r.op==="and"}function oE(r){return a1(r)&&sE(r)}function a1(r){for(const e of r.filters)if(e instanceof Gn)return!1;return!0}function mf(r){if(r instanceof mt)return r.field.canonicalString()+r.op.toString()+Lo(r.value);if(oE(r))return r.filters.map((e=>mf(e))).join(",");{const e=r.filters.map((t=>mf(t))).join(",");return`${r.op}(${e})`}}function aE(r,e){return r instanceof mt?(function(i,o){return o instanceof mt&&i.op===o.op&&i.field.isEqual(o.field)&&pr(i.value,o.value)})(r,e):r instanceof Gn?(function(i,o){return o instanceof Gn&&i.op===o.op&&i.filters.length===o.filters.length?i.filters.reduce(((l,h,f)=>l&&aE(h,o.filters[f])),!0):!1})(r,e):void Ie(19439)}function lE(r){return r instanceof mt?(function(t){return`${t.field.canonicalString()} ${t.op} ${Lo(t.value)}`})(r):r instanceof Gn?(function(t){return t.op.toString()+" {"+t.getFilters().map(lE).join(" ,")+"}"})(r):"Filter"}class l1 extends mt{constructor(e,t,i){super(e,t,i),this.key=_e.fromName(i.referenceValue)}matches(e){const t=_e.comparator(e.key,this.key);return this.matchesComparison(t)}}class u1 extends mt{constructor(e,t){super(e,"in",t),this.keys=uE("in",t)}matches(e){return this.keys.some((t=>t.isEqual(e.key)))}}class c1 extends mt{constructor(e,t){super(e,"not-in",t),this.keys=uE("not-in",t)}matches(e){return!this.keys.some((t=>t.isEqual(e.key)))}}function uE(r,e){var t;return(((t=e.arrayValue)===null||t===void 0?void 0:t.values)||[]).map((i=>_e.fromName(i.referenceValue)))}class h1 extends mt{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return Xf(t)&&hl(t.arrayValue,this.value)}}class d1 extends mt{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return t!==null&&hl(this.value.arrayValue,t)}}class f1 extends mt{constructor(e,t){super(e,"not-in",t)}matches(e){if(hl(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return t!==null&&t.nullValue===void 0&&!hl(this.value.arrayValue,t)}}class p1 extends mt{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!Xf(t)||!t.arrayValue.values)&&t.arrayValue.values.some((i=>hl(this.value.arrayValue,i)))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class m1{constructor(e,t=null,i=[],o=[],l=null,h=null,f=null){this.path=e,this.collectionGroup=t,this.orderBy=i,this.filters=o,this.limit=l,this.startAt=h,this.endAt=f,this.Pe=null}}function Yy(r,e=null,t=[],i=[],o=null,l=null,h=null){return new m1(r,e,t,i,o,l,h)}function Jf(r){const e=Pe(r);if(e.Pe===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map((i=>mf(i))).join(","),t+="|ob:",t+=e.orderBy.map((i=>(function(l){return l.field.canonicalString()+l.dir})(i))).join(","),Bc(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map((i=>Lo(i))).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map((i=>Lo(i))).join(",")),e.Pe=t}return e.Pe}function Zf(r,e){if(r.limit!==e.limit||r.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<r.orderBy.length;t++)if(!o1(r.orderBy[t],e.orderBy[t]))return!1;if(r.filters.length!==e.filters.length)return!1;for(let t=0;t<r.filters.length;t++)if(!aE(r.filters[t],e.filters[t]))return!1;return r.collectionGroup===e.collectionGroup&&!!r.path.isEqual(e.path)&&!!Qy(r.startAt,e.startAt)&&Qy(r.endAt,e.endAt)}function gf(r){return _e.isDocumentKey(r.path)&&r.collectionGroup===null&&r.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Il{constructor(e,t=null,i=[],o=[],l=null,h="F",f=null,p=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=i,this.filters=o,this.limit=l,this.limitType=h,this.startAt=f,this.endAt=p,this.Te=null,this.Ie=null,this.de=null,this.startAt,this.endAt}}function g1(r,e,t,i,o,l,h,f){return new Il(r,e,t,i,o,l,h,f)}function $c(r){return new Il(r)}function Xy(r){return r.filters.length===0&&r.limit===null&&r.startAt==null&&r.endAt==null&&(r.explicitOrderBy.length===0||r.explicitOrderBy.length===1&&r.explicitOrderBy[0].field.isKeyField())}function cE(r){return r.collectionGroup!==null}function el(r){const e=Pe(r);if(e.Te===null){e.Te=[];const t=new Set;for(const l of e.explicitOrderBy)e.Te.push(l),t.add(l.field.canonicalString());const i=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(h){let f=new It(Ot.comparator);return h.filters.forEach((p=>{p.getFlattenedFilters().forEach((y=>{y.isInequality()&&(f=f.add(y.field))}))})),f})(e).forEach((l=>{t.has(l.canonicalString())||l.isKeyField()||e.Te.push(new Ic(l,i))})),t.has(Ot.keyField().canonicalString())||e.Te.push(new Ic(Ot.keyField(),i))}return e.Te}function cr(r){const e=Pe(r);return e.Ie||(e.Ie=y1(e,el(r))),e.Ie}function y1(r,e){if(r.limitType==="F")return Yy(r.path,r.collectionGroup,e,r.filters,r.limit,r.startAt,r.endAt);{e=e.map((o=>{const l=o.dir==="desc"?"asc":"desc";return new Ic(o.field,l)}));const t=r.endAt?new Tc(r.endAt.position,r.endAt.inclusive):null,i=r.startAt?new Tc(r.startAt.position,r.startAt.inclusive):null;return Yy(r.path,r.collectionGroup,e,r.filters,r.limit,t,i)}}function yf(r,e){const t=r.filters.concat([e]);return new Il(r.path,r.collectionGroup,r.explicitOrderBy.slice(),t,r.limit,r.limitType,r.startAt,r.endAt)}function vf(r,e,t){return new Il(r.path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),e,t,r.startAt,r.endAt)}function Wc(r,e){return Zf(cr(r),cr(e))&&r.limitType===e.limitType}function hE(r){return`${Jf(cr(r))}|lt:${r.limitType}`}function So(r){return`Query(target=${(function(t){let i=t.path.canonicalString();return t.collectionGroup!==null&&(i+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(i+=`, filters: [${t.filters.map((o=>lE(o))).join(", ")}]`),Bc(t.limit)||(i+=", limit: "+t.limit),t.orderBy.length>0&&(i+=`, orderBy: [${t.orderBy.map((o=>(function(h){return`${h.field.canonicalString()} (${h.dir})`})(o))).join(", ")}]`),t.startAt&&(i+=", startAt: ",i+=t.startAt.inclusive?"b:":"a:",i+=t.startAt.position.map((o=>Lo(o))).join(",")),t.endAt&&(i+=", endAt: ",i+=t.endAt.inclusive?"a:":"b:",i+=t.endAt.position.map((o=>Lo(o))).join(",")),`Target(${i})`})(cr(r))}; limitType=${r.limitType})`}function qc(r,e){return e.isFoundDocument()&&(function(i,o){const l=o.key.path;return i.collectionGroup!==null?o.key.hasCollectionId(i.collectionGroup)&&i.path.isPrefixOf(l):_e.isDocumentKey(i.path)?i.path.isEqual(l):i.path.isImmediateParentOf(l)})(r,e)&&(function(i,o){for(const l of el(i))if(!l.field.isKeyField()&&o.data.field(l.field)===null)return!1;return!0})(r,e)&&(function(i,o){for(const l of i.filters)if(!l.matches(o))return!1;return!0})(r,e)&&(function(i,o){return!(i.startAt&&!(function(h,f,p){const y=Ky(h,f,p);return h.inclusive?y<=0:y<0})(i.startAt,el(i),o)||i.endAt&&!(function(h,f,p){const y=Ky(h,f,p);return h.inclusive?y>=0:y>0})(i.endAt,el(i),o))})(r,e)}function v1(r){return r.collectionGroup||(r.path.length%2==1?r.path.lastSegment():r.path.get(r.path.length-2))}function dE(r){return(e,t)=>{let i=!1;for(const o of el(r)){const l=_1(o,e,t);if(l!==0)return l;i=i||o.field.isKeyField()}return 0}}function _1(r,e,t){const i=r.field.isKeyField()?_e.comparator(e.key,t.key):(function(l,h,f){const p=h.data.field(l),y=f.data.field(l);return p!==null&&y!==null?Oo(p,y):Ie(42886)})(r.field,e,t);switch(r.dir){case"asc":return i;case"desc":return-1*i;default:return Ie(19790,{direction:r.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rs{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),i=this.inner[t];if(i!==void 0){for(const[o,l]of i)if(this.equalsFn(o,e))return l}}has(e){return this.get(e)!==void 0}set(e,t){const i=this.mapKeyFn(e),o=this.inner[i];if(o===void 0)return this.inner[i]=[[e,t]],void this.innerSize++;for(let l=0;l<o.length;l++)if(this.equalsFn(o[l][0],e))return void(o[l]=[e,t]);o.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),i=this.inner[t];if(i===void 0)return!1;for(let o=0;o<i.length;o++)if(this.equalsFn(i[o][0],e))return i.length===1?delete this.inner[t]:i.splice(o,1),this.innerSize--,!0;return!1}forEach(e){Ui(this.inner,((t,i)=>{for(const[o,l]of i)e(o,l)}))}isEmpty(){return Q_(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const E1=new nt(_e.comparator);function Br(){return E1}const fE=new nt(_e.comparator);function Ka(...r){let e=fE;for(const t of r)e=e.insert(t.key,t);return e}function pE(r){let e=fE;return r.forEach(((t,i)=>e=e.insert(t,i.overlayedDocument))),e}function vs(){return tl()}function mE(){return tl()}function tl(){return new Rs((r=>r.toString()),((r,e)=>r.isEqual(e)))}const w1=new nt(_e.comparator),T1=new It(_e.comparator);function Ve(...r){let e=T1;for(const t of r)e=e.add(t);return e}const I1=new It(Ne);function S1(){return I1}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ep(r,e){if(r.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:_c(e)?"-0":e}}function gE(r){return{integerValue:""+r}}function A1(r,e){return JP(e)?gE(e):ep(r,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hc{constructor(){this._=void 0}}function P1(r,e,t){return r instanceof Sc?(function(o,l){const h={fields:{[J_]:{stringValue:X_},[eE]:{timestampValue:{seconds:o.seconds,nanos:o.nanoseconds}}}};return l&&Yf(l)&&(l=zc(l)),l&&(h.fields[Z_]=l),{mapValue:h}})(t,e):r instanceof dl?vE(r,e):r instanceof fl?_E(r,e):(function(o,l){const h=yE(o,l),f=Jy(h)+Jy(o.Ee);return pf(h)&&pf(o.Ee)?gE(f):ep(o.serializer,f)})(r,e)}function C1(r,e,t){return r instanceof dl?vE(r,e):r instanceof fl?_E(r,e):t}function yE(r,e){return r instanceof Ac?(function(i){return pf(i)||(function(l){return!!l&&"doubleValue"in l})(i)})(e)?e:{integerValue:0}:null}class Sc extends Hc{}class dl extends Hc{constructor(e){super(),this.elements=e}}function vE(r,e){const t=EE(e);for(const i of r.elements)t.some((o=>pr(o,i)))||t.push(i);return{arrayValue:{values:t}}}class fl extends Hc{constructor(e){super(),this.elements=e}}function _E(r,e){let t=EE(e);for(const i of r.elements)t=t.filter((o=>!pr(o,i)));return{arrayValue:{values:t}}}class Ac extends Hc{constructor(e,t){super(),this.serializer=e,this.Ee=t}}function Jy(r){return ct(r.integerValue||r.doubleValue)}function EE(r){return Xf(r)&&r.arrayValue.values?r.arrayValue.values.slice():[]}function R1(r,e){return r.field.isEqual(e.field)&&(function(i,o){return i instanceof dl&&o instanceof dl||i instanceof fl&&o instanceof fl?Vo(i.elements,o.elements,pr):i instanceof Ac&&o instanceof Ac?pr(i.Ee,o.Ee):i instanceof Sc&&o instanceof Sc})(r.transform,e.transform)}class k1{constructor(e,t){this.version=e,this.transformResults=t}}class kn{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new kn}static exists(e){return new kn(void 0,e)}static updateTime(e){return new kn(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function oc(r,e){return r.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(r.updateTime):r.exists===void 0||r.exists===e.isFoundDocument()}class Gc{}function wE(r,e){if(!r.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return r.isNoDocument()?new tp(r.key,kn.none()):new Sl(r.key,r.data,kn.none());{const t=r.data,i=on.empty();let o=new It(Ot.comparator);for(let l of e.fields)if(!o.has(l)){let h=t.field(l);h===null&&l.length>1&&(l=l.popLast(),h=t.field(l)),h===null?i.delete(l):i.set(l,h),o=o.add(l)}return new Bi(r.key,i,new mn(o.toArray()),kn.none())}}function N1(r,e,t){r instanceof Sl?(function(o,l,h){const f=o.value.clone(),p=ev(o.fieldTransforms,l,h.transformResults);f.setAll(p),l.convertToFoundDocument(h.version,f).setHasCommittedMutations()})(r,e,t):r instanceof Bi?(function(o,l,h){if(!oc(o.precondition,l))return void l.convertToUnknownDocument(h.version);const f=ev(o.fieldTransforms,l,h.transformResults),p=l.data;p.setAll(TE(o)),p.setAll(f),l.convertToFoundDocument(h.version,p).setHasCommittedMutations()})(r,e,t):(function(o,l,h){l.convertToNoDocument(h.version).setHasCommittedMutations()})(0,e,t)}function nl(r,e,t,i){return r instanceof Sl?(function(l,h,f,p){if(!oc(l.precondition,h))return f;const y=l.value.clone(),E=tv(l.fieldTransforms,p,h);return y.setAll(E),h.convertToFoundDocument(h.version,y).setHasLocalMutations(),null})(r,e,t,i):r instanceof Bi?(function(l,h,f,p){if(!oc(l.precondition,h))return f;const y=tv(l.fieldTransforms,p,h),E=h.data;return E.setAll(TE(l)),E.setAll(y),h.convertToFoundDocument(h.version,E).setHasLocalMutations(),f===null?null:f.unionWith(l.fieldMask.fields).unionWith(l.fieldTransforms.map((T=>T.field)))})(r,e,t,i):(function(l,h,f){return oc(l.precondition,h)?(h.convertToNoDocument(h.version).setHasLocalMutations(),null):f})(r,e,t)}function x1(r,e){let t=null;for(const i of r.fieldTransforms){const o=e.data.field(i.field),l=yE(i.transform,o||null);l!=null&&(t===null&&(t=on.empty()),t.set(i.field,l))}return t||null}function Zy(r,e){return r.type===e.type&&!!r.key.isEqual(e.key)&&!!r.precondition.isEqual(e.precondition)&&!!(function(i,o){return i===void 0&&o===void 0||!(!i||!o)&&Vo(i,o,((l,h)=>R1(l,h)))})(r.fieldTransforms,e.fieldTransforms)&&(r.type===0?r.value.isEqual(e.value):r.type!==1||r.data.isEqual(e.data)&&r.fieldMask.isEqual(e.fieldMask))}class Sl extends Gc{constructor(e,t,i,o=[]){super(),this.key=e,this.value=t,this.precondition=i,this.fieldTransforms=o,this.type=0}getFieldMask(){return null}}class Bi extends Gc{constructor(e,t,i,o,l=[]){super(),this.key=e,this.data=t,this.fieldMask=i,this.precondition=o,this.fieldTransforms=l,this.type=1}getFieldMask(){return this.fieldMask}}function TE(r){const e=new Map;return r.fieldMask.fields.forEach((t=>{if(!t.isEmpty()){const i=r.data.field(t);e.set(t,i)}})),e}function ev(r,e,t){const i=new Map;Be(r.length===t.length,32656,{Ae:t.length,Re:r.length});for(let o=0;o<t.length;o++){const l=r[o],h=l.transform,f=e.data.field(l.field);i.set(l.field,C1(h,f,t[o]))}return i}function tv(r,e,t){const i=new Map;for(const o of r){const l=o.transform,h=t.data.field(o.field);i.set(o.field,P1(l,h,e))}return i}class tp extends Gc{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class D1 extends Gc{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class b1{constructor(e,t,i,o){this.batchId=e,this.localWriteTime=t,this.baseMutations=i,this.mutations=o}applyToRemoteDocument(e,t){const i=t.mutationResults;for(let o=0;o<this.mutations.length;o++){const l=this.mutations[o];l.key.isEqual(e.key)&&N1(l,e,i[o])}}applyToLocalView(e,t){for(const i of this.baseMutations)i.key.isEqual(e.key)&&(t=nl(i,e,t,this.localWriteTime));for(const i of this.mutations)i.key.isEqual(e.key)&&(t=nl(i,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const i=mE();return this.mutations.forEach((o=>{const l=e.get(o.key),h=l.overlayedDocument;let f=this.applyToLocalView(h,l.mutatedFields);f=t.has(o.key)?null:f;const p=wE(h,f);p!==null&&i.set(o.key,p),h.isValidDocument()||h.convertToNoDocument(Ae.min())})),i}keys(){return this.mutations.reduce(((e,t)=>e.add(t.key)),Ve())}isEqual(e){return this.batchId===e.batchId&&Vo(this.mutations,e.mutations,((t,i)=>Zy(t,i)))&&Vo(this.baseMutations,e.baseMutations,((t,i)=>Zy(t,i)))}}class np{constructor(e,t,i,o){this.batch=e,this.commitVersion=t,this.mutationResults=i,this.docVersions=o}static from(e,t,i){Be(e.mutations.length===i.length,58842,{Ve:e.mutations.length,me:i.length});let o=(function(){return w1})();const l=e.mutations;for(let h=0;h<l.length;h++)o=o.insert(l[h].key,i[h].version);return new np(e,t,i,o)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class V1{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class O1{constructor(e,t){this.count=e,this.unchangedNames=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var pt,Me;function L1(r){switch(r){case G.OK:return Ie(64938);case G.CANCELLED:case G.UNKNOWN:case G.DEADLINE_EXCEEDED:case G.RESOURCE_EXHAUSTED:case G.INTERNAL:case G.UNAVAILABLE:case G.UNAUTHENTICATED:return!1;case G.INVALID_ARGUMENT:case G.NOT_FOUND:case G.ALREADY_EXISTS:case G.PERMISSION_DENIED:case G.FAILED_PRECONDITION:case G.ABORTED:case G.OUT_OF_RANGE:case G.UNIMPLEMENTED:case G.DATA_LOSS:return!0;default:return Ie(15467,{code:r})}}function IE(r){if(r===void 0)return Ur("GRPC error has no .code"),G.UNKNOWN;switch(r){case pt.OK:return G.OK;case pt.CANCELLED:return G.CANCELLED;case pt.UNKNOWN:return G.UNKNOWN;case pt.DEADLINE_EXCEEDED:return G.DEADLINE_EXCEEDED;case pt.RESOURCE_EXHAUSTED:return G.RESOURCE_EXHAUSTED;case pt.INTERNAL:return G.INTERNAL;case pt.UNAVAILABLE:return G.UNAVAILABLE;case pt.UNAUTHENTICATED:return G.UNAUTHENTICATED;case pt.INVALID_ARGUMENT:return G.INVALID_ARGUMENT;case pt.NOT_FOUND:return G.NOT_FOUND;case pt.ALREADY_EXISTS:return G.ALREADY_EXISTS;case pt.PERMISSION_DENIED:return G.PERMISSION_DENIED;case pt.FAILED_PRECONDITION:return G.FAILED_PRECONDITION;case pt.ABORTED:return G.ABORTED;case pt.OUT_OF_RANGE:return G.OUT_OF_RANGE;case pt.UNIMPLEMENTED:return G.UNIMPLEMENTED;case pt.DATA_LOSS:return G.DATA_LOSS;default:return Ie(39323,{code:r})}}(Me=pt||(pt={}))[Me.OK=0]="OK",Me[Me.CANCELLED=1]="CANCELLED",Me[Me.UNKNOWN=2]="UNKNOWN",Me[Me.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Me[Me.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Me[Me.NOT_FOUND=5]="NOT_FOUND",Me[Me.ALREADY_EXISTS=6]="ALREADY_EXISTS",Me[Me.PERMISSION_DENIED=7]="PERMISSION_DENIED",Me[Me.UNAUTHENTICATED=16]="UNAUTHENTICATED",Me[Me.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Me[Me.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Me[Me.ABORTED=10]="ABORTED",Me[Me.OUT_OF_RANGE=11]="OUT_OF_RANGE",Me[Me.UNIMPLEMENTED=12]="UNIMPLEMENTED",Me[Me.INTERNAL=13]="INTERNAL",Me[Me.UNAVAILABLE=14]="UNAVAILABLE",Me[Me.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const M1=new Ci([4294967295,4294967295],0);function nv(r){const e=q_().encode(r),t=new M_;return t.update(e),new Uint8Array(t.digest())}function rv(r){const e=new DataView(r.buffer),t=e.getUint32(0,!0),i=e.getUint32(4,!0),o=e.getUint32(8,!0),l=e.getUint32(12,!0);return[new Ci([t,i],0),new Ci([o,l],0)]}class rp{constructor(e,t,i){if(this.bitmap=e,this.padding=t,this.hashCount=i,t<0||t>=8)throw new Qa(`Invalid padding: ${t}`);if(i<0)throw new Qa(`Invalid hash count: ${i}`);if(e.length>0&&this.hashCount===0)throw new Qa(`Invalid hash count: ${i}`);if(e.length===0&&t!==0)throw new Qa(`Invalid padding when bitmap length is 0: ${t}`);this.fe=8*e.length-t,this.ge=Ci.fromNumber(this.fe)}pe(e,t,i){let o=e.add(t.multiply(Ci.fromNumber(i)));return o.compare(M1)===1&&(o=new Ci([o.getBits(0),o.getBits(1)],0)),o.modulo(this.ge).toNumber()}ye(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.fe===0)return!1;const t=nv(e),[i,o]=rv(t);for(let l=0;l<this.hashCount;l++){const h=this.pe(i,o,l);if(!this.ye(h))return!1}return!0}static create(e,t,i){const o=e%8==0?0:8-e%8,l=new Uint8Array(Math.ceil(e/8)),h=new rp(l,o,t);return i.forEach((f=>h.insert(f))),h}insert(e){if(this.fe===0)return;const t=nv(e),[i,o]=rv(t);for(let l=0;l<this.hashCount;l++){const h=this.pe(i,o,l);this.we(h)}}we(e){const t=Math.floor(e/8),i=e%8;this.bitmap[t]|=1<<i}}class Qa extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kc{constructor(e,t,i,o,l){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=i,this.documentUpdates=o,this.resolvedLimboDocuments=l}static createSynthesizedRemoteEventForCurrentChange(e,t,i){const o=new Map;return o.set(e,Al.createSynthesizedTargetChangeForCurrentChange(e,t,i)),new Kc(Ae.min(),o,new nt(Ne),Br(),Ve())}}class Al{constructor(e,t,i,o,l){this.resumeToken=e,this.current=t,this.addedDocuments=i,this.modifiedDocuments=o,this.removedDocuments=l}static createSynthesizedTargetChangeForCurrentChange(e,t,i){return new Al(i,t,Ve(),Ve(),Ve())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ac{constructor(e,t,i,o){this.Se=e,this.removedTargetIds=t,this.key=i,this.be=o}}class SE{constructor(e,t){this.targetId=e,this.De=t}}class AE{constructor(e,t,i=Lt.EMPTY_BYTE_STRING,o=null){this.state=e,this.targetIds=t,this.resumeToken=i,this.cause=o}}class iv{constructor(){this.ve=0,this.Ce=sv(),this.Fe=Lt.EMPTY_BYTE_STRING,this.Me=!1,this.xe=!0}get current(){return this.Me}get resumeToken(){return this.Fe}get Oe(){return this.ve!==0}get Ne(){return this.xe}Be(e){e.approximateByteSize()>0&&(this.xe=!0,this.Fe=e)}Le(){let e=Ve(),t=Ve(),i=Ve();return this.Ce.forEach(((o,l)=>{switch(l){case 0:e=e.add(o);break;case 2:t=t.add(o);break;case 1:i=i.add(o);break;default:Ie(38017,{changeType:l})}})),new Al(this.Fe,this.Me,e,t,i)}ke(){this.xe=!1,this.Ce=sv()}qe(e,t){this.xe=!0,this.Ce=this.Ce.insert(e,t)}Qe(e){this.xe=!0,this.Ce=this.Ce.remove(e)}$e(){this.ve+=1}Ue(){this.ve-=1,Be(this.ve>=0,3241,{ve:this.ve})}Ke(){this.xe=!0,this.Me=!0}}class j1{constructor(e){this.We=e,this.Ge=new Map,this.ze=Br(),this.je=Qu(),this.Je=Qu(),this.He=new nt(Ne)}Ye(e){for(const t of e.Se)e.be&&e.be.isFoundDocument()?this.Ze(t,e.be):this.Xe(t,e.key,e.be);for(const t of e.removedTargetIds)this.Xe(t,e.key,e.be)}et(e){this.forEachTarget(e,(t=>{const i=this.tt(t);switch(e.state){case 0:this.nt(t)&&i.Be(e.resumeToken);break;case 1:i.Ue(),i.Oe||i.ke(),i.Be(e.resumeToken);break;case 2:i.Ue(),i.Oe||this.removeTarget(t);break;case 3:this.nt(t)&&(i.Ke(),i.Be(e.resumeToken));break;case 4:this.nt(t)&&(this.rt(t),i.Be(e.resumeToken));break;default:Ie(56790,{state:e.state})}}))}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.Ge.forEach(((i,o)=>{this.nt(o)&&t(o)}))}it(e){const t=e.targetId,i=e.De.count,o=this.st(t);if(o){const l=o.target;if(gf(l))if(i===0){const h=new _e(l.path);this.Xe(t,h,$t.newNoDocument(h,Ae.min()))}else Be(i===1,20013,{expectedCount:i});else{const h=this.ot(t);if(h!==i){const f=this._t(e),p=f?this.ut(f,e,h):1;if(p!==0){this.rt(t);const y=p===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.He=this.He.insert(t,y)}}}}}_t(e){const t=e.De.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:i="",padding:o=0},hashCount:l=0}=t;let h,f;try{h=bi(i).toUint8Array()}catch(p){if(p instanceof Y_)return Ni("Decoding the base64 bloom filter in existence filter failed ("+p.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw p}try{f=new rp(h,o,l)}catch(p){return Ni(p instanceof Qa?"BloomFilter error: ":"Applying bloom filter failed: ",p),null}return f.fe===0?null:f}ut(e,t,i){return t.De.count===i-this.ht(e,t.targetId)?0:2}ht(e,t){const i=this.We.getRemoteKeysForTarget(t);let o=0;return i.forEach((l=>{const h=this.We.lt(),f=`projects/${h.projectId}/databases/${h.database}/documents/${l.path.canonicalString()}`;e.mightContain(f)||(this.Xe(t,l,null),o++)})),o}Pt(e){const t=new Map;this.Ge.forEach(((l,h)=>{const f=this.st(h);if(f){if(l.current&&gf(f.target)){const p=new _e(f.target.path);this.Tt(p).has(h)||this.It(h,p)||this.Xe(h,p,$t.newNoDocument(p,e))}l.Ne&&(t.set(h,l.Le()),l.ke())}}));let i=Ve();this.Je.forEach(((l,h)=>{let f=!0;h.forEachWhile((p=>{const y=this.st(p);return!y||y.purpose==="TargetPurposeLimboResolution"||(f=!1,!1)})),f&&(i=i.add(l))})),this.ze.forEach(((l,h)=>h.setReadTime(e)));const o=new Kc(e,t,this.He,this.ze,i);return this.ze=Br(),this.je=Qu(),this.Je=Qu(),this.He=new nt(Ne),o}Ze(e,t){if(!this.nt(e))return;const i=this.It(e,t.key)?2:0;this.tt(e).qe(t.key,i),this.ze=this.ze.insert(t.key,t),this.je=this.je.insert(t.key,this.Tt(t.key).add(e)),this.Je=this.Je.insert(t.key,this.dt(t.key).add(e))}Xe(e,t,i){if(!this.nt(e))return;const o=this.tt(e);this.It(e,t)?o.qe(t,1):o.Qe(t),this.Je=this.Je.insert(t,this.dt(t).delete(e)),this.Je=this.Je.insert(t,this.dt(t).add(e)),i&&(this.ze=this.ze.insert(t,i))}removeTarget(e){this.Ge.delete(e)}ot(e){const t=this.tt(e).Le();return this.We.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}$e(e){this.tt(e).$e()}tt(e){let t=this.Ge.get(e);return t||(t=new iv,this.Ge.set(e,t)),t}dt(e){let t=this.Je.get(e);return t||(t=new It(Ne),this.Je=this.Je.insert(e,t)),t}Tt(e){let t=this.je.get(e);return t||(t=new It(Ne),this.je=this.je.insert(e,t)),t}nt(e){const t=this.st(e)!==null;return t||he("WatchChangeAggregator","Detected inactive target",e),t}st(e){const t=this.Ge.get(e);return t&&t.Oe?null:this.We.Et(e)}rt(e){this.Ge.set(e,new iv),this.We.getRemoteKeysForTarget(e).forEach((t=>{this.Xe(e,t,null)}))}It(e,t){return this.We.getRemoteKeysForTarget(e).has(t)}}function Qu(){return new nt(_e.comparator)}function sv(){return new nt(_e.comparator)}const F1={asc:"ASCENDING",desc:"DESCENDING"},U1={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},B1={and:"AND",or:"OR"};class z1{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function _f(r,e){return r.useProto3Json||Bc(e)?e:{value:e}}function Pc(r,e){return r.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function PE(r,e){return r.useProto3Json?e.toBase64():e.toUint8Array()}function $1(r,e){return Pc(r,e.toTimestamp())}function hr(r){return Be(!!r,49232),Ae.fromTimestamp((function(t){const i=Di(t);return new qe(i.seconds,i.nanos)})(r))}function ip(r,e){return Ef(r,e).canonicalString()}function Ef(r,e){const t=(function(o){return new Qe(["projects",o.projectId,"databases",o.database])})(r).child("documents");return e===void 0?t:t.child(e)}function CE(r){const e=Qe.fromString(r);return Be(DE(e),10190,{key:e.toString()}),e}function wf(r,e){return ip(r.databaseId,e.path)}function qd(r,e){const t=CE(e);if(t.get(1)!==r.databaseId.projectId)throw new ae(G.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+r.databaseId.projectId);if(t.get(3)!==r.databaseId.database)throw new ae(G.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+r.databaseId.database);return new _e(kE(t))}function RE(r,e){return ip(r.databaseId,e)}function W1(r){const e=CE(r);return e.length===4?Qe.emptyPath():kE(e)}function Tf(r){return new Qe(["projects",r.databaseId.projectId,"databases",r.databaseId.database]).canonicalString()}function kE(r){return Be(r.length>4&&r.get(4)==="documents",29091,{key:r.toString()}),r.popFirst(5)}function ov(r,e,t){return{name:wf(r,e),fields:t.value.mapValue.fields}}function q1(r,e){let t;if("targetChange"in e){e.targetChange;const i=(function(y){return y==="NO_CHANGE"?0:y==="ADD"?1:y==="REMOVE"?2:y==="CURRENT"?3:y==="RESET"?4:Ie(39313,{state:y})})(e.targetChange.targetChangeType||"NO_CHANGE"),o=e.targetChange.targetIds||[],l=(function(y,E){return y.useProto3Json?(Be(E===void 0||typeof E=="string",58123),Lt.fromBase64String(E||"")):(Be(E===void 0||E instanceof Buffer||E instanceof Uint8Array,16193),Lt.fromUint8Array(E||new Uint8Array))})(r,e.targetChange.resumeToken),h=e.targetChange.cause,f=h&&(function(y){const E=y.code===void 0?G.UNKNOWN:IE(y.code);return new ae(E,y.message||"")})(h);t=new AE(i,o,l,f||null)}else if("documentChange"in e){e.documentChange;const i=e.documentChange;i.document,i.document.name,i.document.updateTime;const o=qd(r,i.document.name),l=hr(i.document.updateTime),h=i.document.createTime?hr(i.document.createTime):Ae.min(),f=new on({mapValue:{fields:i.document.fields}}),p=$t.newFoundDocument(o,l,h,f),y=i.targetIds||[],E=i.removedTargetIds||[];t=new ac(y,E,p.key,p)}else if("documentDelete"in e){e.documentDelete;const i=e.documentDelete;i.document;const o=qd(r,i.document),l=i.readTime?hr(i.readTime):Ae.min(),h=$t.newNoDocument(o,l),f=i.removedTargetIds||[];t=new ac([],f,h.key,h)}else if("documentRemove"in e){e.documentRemove;const i=e.documentRemove;i.document;const o=qd(r,i.document),l=i.removedTargetIds||[];t=new ac([],l,o,null)}else{if(!("filter"in e))return Ie(11601,{At:e});{e.filter;const i=e.filter;i.targetId;const{count:o=0,unchangedNames:l}=i,h=new O1(o,l),f=i.targetId;t=new SE(f,h)}}return t}function H1(r,e){let t;if(e instanceof Sl)t={update:ov(r,e.key,e.value)};else if(e instanceof tp)t={delete:wf(r,e.key)};else if(e instanceof Bi)t={update:ov(r,e.key,e.data),updateMask:tC(e.fieldMask)};else{if(!(e instanceof D1))return Ie(16599,{Rt:e.type});t={verify:wf(r,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map((i=>(function(l,h){const f=h.transform;if(f instanceof Sc)return{fieldPath:h.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(f instanceof dl)return{fieldPath:h.field.canonicalString(),appendMissingElements:{values:f.elements}};if(f instanceof fl)return{fieldPath:h.field.canonicalString(),removeAllFromArray:{values:f.elements}};if(f instanceof Ac)return{fieldPath:h.field.canonicalString(),increment:f.Ee};throw Ie(20930,{transform:h.transform})})(0,i)))),e.precondition.isNone||(t.currentDocument=(function(o,l){return l.updateTime!==void 0?{updateTime:$1(o,l.updateTime)}:l.exists!==void 0?{exists:l.exists}:Ie(27497)})(r,e.precondition)),t}function G1(r,e){return r&&r.length>0?(Be(e!==void 0,14353),r.map((t=>(function(o,l){let h=o.updateTime?hr(o.updateTime):hr(l);return h.isEqual(Ae.min())&&(h=hr(l)),new k1(h,o.transformResults||[])})(t,e)))):[]}function K1(r,e){return{documents:[RE(r,e.path)]}}function Q1(r,e){const t={structuredQuery:{}},i=e.path;let o;e.collectionGroup!==null?(o=i,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(o=i.popLast(),t.structuredQuery.from=[{collectionId:i.lastSegment()}]),t.parent=RE(r,o);const l=(function(y){if(y.length!==0)return xE(Gn.create(y,"and"))})(e.filters);l&&(t.structuredQuery.where=l);const h=(function(y){if(y.length!==0)return y.map((E=>(function(S){return{field:Ao(S.field),direction:J1(S.dir)}})(E)))})(e.orderBy);h&&(t.structuredQuery.orderBy=h);const f=_f(r,e.limit);return f!==null&&(t.structuredQuery.limit=f),e.startAt&&(t.structuredQuery.startAt=(function(y){return{before:y.inclusive,values:y.position}})(e.startAt)),e.endAt&&(t.structuredQuery.endAt=(function(y){return{before:!y.inclusive,values:y.position}})(e.endAt)),{Vt:t,parent:o}}function Y1(r){let e=W1(r.parent);const t=r.structuredQuery,i=t.from?t.from.length:0;let o=null;if(i>0){Be(i===1,65062);const E=t.from[0];E.allDescendants?o=E.collectionId:e=e.child(E.collectionId)}let l=[];t.where&&(l=(function(T){const S=NE(T);return S instanceof Gn&&oE(S)?S.getFilters():[S]})(t.where));let h=[];t.orderBy&&(h=(function(T){return T.map((S=>(function(L){return new Ic(Po(L.field),(function(F){switch(F){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(L.direction))})(S)))})(t.orderBy));let f=null;t.limit&&(f=(function(T){let S;return S=typeof T=="object"?T.value:T,Bc(S)?null:S})(t.limit));let p=null;t.startAt&&(p=(function(T){const S=!!T.before,V=T.values||[];return new Tc(V,S)})(t.startAt));let y=null;return t.endAt&&(y=(function(T){const S=!T.before,V=T.values||[];return new Tc(V,S)})(t.endAt)),g1(e,o,h,l,f,"F",p,y)}function X1(r,e){const t=(function(o){switch(o){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Ie(28987,{purpose:o})}})(e.purpose);return t==null?null:{"goog-listen-tags":t}}function NE(r){return r.unaryFilter!==void 0?(function(t){switch(t.unaryFilter.op){case"IS_NAN":const i=Po(t.unaryFilter.field);return mt.create(i,"==",{doubleValue:NaN});case"IS_NULL":const o=Po(t.unaryFilter.field);return mt.create(o,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const l=Po(t.unaryFilter.field);return mt.create(l,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const h=Po(t.unaryFilter.field);return mt.create(h,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return Ie(61313);default:return Ie(60726)}})(r):r.fieldFilter!==void 0?(function(t){return mt.create(Po(t.fieldFilter.field),(function(o){switch(o){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return Ie(58110);default:return Ie(50506)}})(t.fieldFilter.op),t.fieldFilter.value)})(r):r.compositeFilter!==void 0?(function(t){return Gn.create(t.compositeFilter.filters.map((i=>NE(i))),(function(o){switch(o){case"AND":return"and";case"OR":return"or";default:return Ie(1026)}})(t.compositeFilter.op))})(r):Ie(30097,{filter:r})}function J1(r){return F1[r]}function Z1(r){return U1[r]}function eC(r){return B1[r]}function Ao(r){return{fieldPath:r.canonicalString()}}function Po(r){return Ot.fromServerFormat(r.fieldPath)}function xE(r){return r instanceof mt?(function(t){if(t.op==="=="){if(Gy(t.value))return{unaryFilter:{field:Ao(t.field),op:"IS_NAN"}};if(Hy(t.value))return{unaryFilter:{field:Ao(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(Gy(t.value))return{unaryFilter:{field:Ao(t.field),op:"IS_NOT_NAN"}};if(Hy(t.value))return{unaryFilter:{field:Ao(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Ao(t.field),op:Z1(t.op),value:t.value}}})(r):r instanceof Gn?(function(t){const i=t.getFilters().map((o=>xE(o)));return i.length===1?i[0]:{compositeFilter:{op:eC(t.op),filters:i}}})(r):Ie(54877,{filter:r})}function tC(r){const e=[];return r.fields.forEach((t=>e.push(t.canonicalString()))),{fieldPaths:e}}function DE(r){return r.length>=4&&r.get(0)==="projects"&&r.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ti{constructor(e,t,i,o,l=Ae.min(),h=Ae.min(),f=Lt.EMPTY_BYTE_STRING,p=null){this.target=e,this.targetId=t,this.purpose=i,this.sequenceNumber=o,this.snapshotVersion=l,this.lastLimboFreeSnapshotVersion=h,this.resumeToken=f,this.expectedCount=p}withSequenceNumber(e){return new Ti(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new Ti(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Ti(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Ti(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nC{constructor(e){this.gt=e}}function rC(r){const e=Y1({parent:r.parent,structuredQuery:r.structuredQuery});return r.limitType==="LAST"?vf(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iC{constructor(){this.Dn=new sC}addToCollectionParentIndex(e,t){return this.Dn.add(t),K.resolve()}getCollectionParents(e,t){return K.resolve(this.Dn.getEntries(t))}addFieldIndex(e,t){return K.resolve()}deleteFieldIndex(e,t){return K.resolve()}deleteAllFieldIndexes(e){return K.resolve()}createTargetIndexes(e,t){return K.resolve()}getDocumentsMatchingTarget(e,t){return K.resolve(null)}getIndexType(e,t){return K.resolve(0)}getFieldIndexes(e,t){return K.resolve([])}getNextCollectionGroupToUpdate(e){return K.resolve(null)}getMinOffset(e,t){return K.resolve(xi.min())}getMinOffsetFromCollectionGroup(e,t){return K.resolve(xi.min())}updateCollectionGroup(e,t,i){return K.resolve()}updateIndexEntries(e,t){return K.resolve()}}class sC{constructor(){this.index={}}add(e){const t=e.lastSegment(),i=e.popLast(),o=this.index[t]||new It(Qe.comparator),l=!o.has(i);return this.index[t]=o.add(i),l}has(e){const t=e.lastSegment(),i=e.popLast(),o=this.index[t];return o&&o.has(i)}getEntries(e){return(this.index[e]||new It(Qe.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const av={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},bE=41943040;class sn{static withCacheSize(e){return new sn(e,sn.DEFAULT_COLLECTION_PERCENTILE,sn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,i){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */sn.DEFAULT_COLLECTION_PERCENTILE=10,sn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,sn.DEFAULT=new sn(bE,sn.DEFAULT_COLLECTION_PERCENTILE,sn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),sn.DISABLED=new sn(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mo{constructor(e){this._r=e}next(){return this._r+=2,this._r}static ar(){return new Mo(0)}static ur(){return new Mo(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lv="LruGarbageCollector",oC=1048576;function uv([r,e],[t,i]){const o=Ne(r,t);return o===0?Ne(e,i):o}class aC{constructor(e){this.Tr=e,this.buffer=new It(uv),this.Ir=0}dr(){return++this.Ir}Er(e){const t=[e,this.dr()];if(this.buffer.size<this.Tr)this.buffer=this.buffer.add(t);else{const i=this.buffer.last();uv(t,i)<0&&(this.buffer=this.buffer.delete(i).add(t))}}get maxValue(){return this.buffer.last()[0]}}class lC{constructor(e,t,i){this.garbageCollector=e,this.asyncQueue=t,this.localStore=i,this.Ar=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Rr(6e4)}stop(){this.Ar&&(this.Ar.cancel(),this.Ar=null)}get started(){return this.Ar!==null}Rr(e){he(lv,`Garbage collection scheduled in ${e}ms`),this.Ar=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(async()=>{this.Ar=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(t){Ko(t)?he(lv,"Ignoring IndexedDB error during garbage collection: ",t):await Go(t)}await this.Rr(3e5)}))}}class uC{constructor(e,t){this.Vr=e,this.params=t}calculateTargetCount(e,t){return this.Vr.mr(e).next((i=>Math.floor(t/100*i)))}nthSequenceNumber(e,t){if(t===0)return K.resolve(Uc.ue);const i=new aC(t);return this.Vr.forEachTarget(e,(o=>i.Er(o.sequenceNumber))).next((()=>this.Vr.gr(e,(o=>i.Er(o))))).next((()=>i.maxValue))}removeTargets(e,t,i){return this.Vr.removeTargets(e,t,i)}removeOrphanedDocuments(e,t){return this.Vr.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?(he("LruGarbageCollector","Garbage collection skipped; disabled"),K.resolve(av)):this.getCacheSize(e).next((i=>i<this.params.cacheSizeCollectionThreshold?(he("LruGarbageCollector",`Garbage collection skipped; Cache size ${i} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),av):this.pr(e,t)))}getCacheSize(e){return this.Vr.getCacheSize(e)}pr(e,t){let i,o,l,h,f,p,y;const E=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((T=>(T>this.params.maximumSequenceNumbersToCollect?(he("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${T}`),o=this.params.maximumSequenceNumbersToCollect):o=T,h=Date.now(),this.nthSequenceNumber(e,o)))).next((T=>(i=T,f=Date.now(),this.removeTargets(e,i,t)))).next((T=>(l=T,p=Date.now(),this.removeOrphanedDocuments(e,i)))).next((T=>(y=Date.now(),Io()<=be.DEBUG&&he("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${h-E}ms
	Determined least recently used ${o} in `+(f-h)+`ms
	Removed ${l} targets in `+(p-f)+`ms
	Removed ${T} documents in `+(y-p)+`ms
Total Duration: ${y-E}ms`),K.resolve({didRun:!0,sequenceNumbersCollected:o,targetsRemoved:l,documentsRemoved:T}))))}}function cC(r,e){return new uC(r,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hC{constructor(){this.changes=new Rs((e=>e.toString()),((e,t)=>e.isEqual(t))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,$t.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const i=this.changes.get(t);return i!==void 0?K.resolve(i):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dC{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fC{constructor(e,t,i,o){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=i,this.indexManager=o}getDocument(e,t){let i=null;return this.documentOverlayCache.getOverlay(e,t).next((o=>(i=o,this.remoteDocumentCache.getEntry(e,t)))).next((o=>(i!==null&&nl(i.mutation,o,mn.empty(),qe.now()),o)))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next((i=>this.getLocalViewOfDocuments(e,i,Ve()).next((()=>i))))}getLocalViewOfDocuments(e,t,i=Ve()){const o=vs();return this.populateOverlays(e,o,t).next((()=>this.computeViews(e,t,o,i).next((l=>{let h=Ka();return l.forEach(((f,p)=>{h=h.insert(f,p.overlayedDocument)})),h}))))}getOverlayedDocuments(e,t){const i=vs();return this.populateOverlays(e,i,t).next((()=>this.computeViews(e,t,i,Ve())))}populateOverlays(e,t,i){const o=[];return i.forEach((l=>{t.has(l)||o.push(l)})),this.documentOverlayCache.getOverlays(e,o).next((l=>{l.forEach(((h,f)=>{t.set(h,f)}))}))}computeViews(e,t,i,o){let l=Br();const h=tl(),f=(function(){return tl()})();return t.forEach(((p,y)=>{const E=i.get(y.key);o.has(y.key)&&(E===void 0||E.mutation instanceof Bi)?l=l.insert(y.key,y):E!==void 0?(h.set(y.key,E.mutation.getFieldMask()),nl(E.mutation,y,E.mutation.getFieldMask(),qe.now())):h.set(y.key,mn.empty())})),this.recalculateAndSaveOverlays(e,l).next((p=>(p.forEach(((y,E)=>h.set(y,E))),t.forEach(((y,E)=>{var T;return f.set(y,new dC(E,(T=h.get(y))!==null&&T!==void 0?T:null))})),f)))}recalculateAndSaveOverlays(e,t){const i=tl();let o=new nt(((h,f)=>h-f)),l=Ve();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next((h=>{for(const f of h)f.keys().forEach((p=>{const y=t.get(p);if(y===null)return;let E=i.get(p)||mn.empty();E=f.applyToLocalView(y,E),i.set(p,E);const T=(o.get(f.batchId)||Ve()).add(p);o=o.insert(f.batchId,T)}))})).next((()=>{const h=[],f=o.getReverseIterator();for(;f.hasNext();){const p=f.getNext(),y=p.key,E=p.value,T=mE();E.forEach((S=>{if(!l.has(S)){const V=wE(t.get(S),i.get(S));V!==null&&T.set(S,V),l=l.add(S)}})),h.push(this.documentOverlayCache.saveOverlays(e,y,T))}return K.waitFor(h)})).next((()=>i))}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next((i=>this.recalculateAndSaveOverlays(e,i)))}getDocumentsMatchingQuery(e,t,i,o){return(function(h){return _e.isDocumentKey(h.path)&&h.collectionGroup===null&&h.filters.length===0})(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):cE(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,i,o):this.getDocumentsMatchingCollectionQuery(e,t,i,o)}getNextDocuments(e,t,i,o){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,i,o).next((l=>{const h=o-l.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,i.largestBatchId,o-l.size):K.resolve(vs());let f=ll,p=l;return h.next((y=>K.forEach(y,((E,T)=>(f<T.largestBatchId&&(f=T.largestBatchId),l.get(E)?K.resolve():this.remoteDocumentCache.getEntry(e,E).next((S=>{p=p.insert(E,S)}))))).next((()=>this.populateOverlays(e,y,l))).next((()=>this.computeViews(e,p,y,Ve()))).next((E=>({batchId:f,changes:pE(E)})))))}))}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new _e(t)).next((i=>{let o=Ka();return i.isFoundDocument()&&(o=o.insert(i.key,i)),o}))}getDocumentsMatchingCollectionGroupQuery(e,t,i,o){const l=t.collectionGroup;let h=Ka();return this.indexManager.getCollectionParents(e,l).next((f=>K.forEach(f,(p=>{const y=(function(T,S){return new Il(S,null,T.explicitOrderBy.slice(),T.filters.slice(),T.limit,T.limitType,T.startAt,T.endAt)})(t,p.child(l));return this.getDocumentsMatchingCollectionQuery(e,y,i,o).next((E=>{E.forEach(((T,S)=>{h=h.insert(T,S)}))}))})).next((()=>h))))}getDocumentsMatchingCollectionQuery(e,t,i,o){let l;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,i.largestBatchId).next((h=>(l=h,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,i,l,o)))).next((h=>{l.forEach(((p,y)=>{const E=y.getKey();h.get(E)===null&&(h=h.insert(E,$t.newInvalidDocument(E)))}));let f=Ka();return h.forEach(((p,y)=>{const E=l.get(p);E!==void 0&&nl(E.mutation,y,mn.empty(),qe.now()),qc(t,y)&&(f=f.insert(p,y))})),f}))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pC{constructor(e){this.serializer=e,this.Br=new Map,this.Lr=new Map}getBundleMetadata(e,t){return K.resolve(this.Br.get(t))}saveBundleMetadata(e,t){return this.Br.set(t.id,(function(o){return{id:o.id,version:o.version,createTime:hr(o.createTime)}})(t)),K.resolve()}getNamedQuery(e,t){return K.resolve(this.Lr.get(t))}saveNamedQuery(e,t){return this.Lr.set(t.name,(function(o){return{name:o.name,query:rC(o.bundledQuery),readTime:hr(o.readTime)}})(t)),K.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mC{constructor(){this.overlays=new nt(_e.comparator),this.kr=new Map}getOverlay(e,t){return K.resolve(this.overlays.get(t))}getOverlays(e,t){const i=vs();return K.forEach(t,(o=>this.getOverlay(e,o).next((l=>{l!==null&&i.set(o,l)})))).next((()=>i))}saveOverlays(e,t,i){return i.forEach(((o,l)=>{this.wt(e,t,l)})),K.resolve()}removeOverlaysForBatchId(e,t,i){const o=this.kr.get(i);return o!==void 0&&(o.forEach((l=>this.overlays=this.overlays.remove(l))),this.kr.delete(i)),K.resolve()}getOverlaysForCollection(e,t,i){const o=vs(),l=t.length+1,h=new _e(t.child("")),f=this.overlays.getIteratorFrom(h);for(;f.hasNext();){const p=f.getNext().value,y=p.getKey();if(!t.isPrefixOf(y.path))break;y.path.length===l&&p.largestBatchId>i&&o.set(p.getKey(),p)}return K.resolve(o)}getOverlaysForCollectionGroup(e,t,i,o){let l=new nt(((y,E)=>y-E));const h=this.overlays.getIterator();for(;h.hasNext();){const y=h.getNext().value;if(y.getKey().getCollectionGroup()===t&&y.largestBatchId>i){let E=l.get(y.largestBatchId);E===null&&(E=vs(),l=l.insert(y.largestBatchId,E)),E.set(y.getKey(),y)}}const f=vs(),p=l.getIterator();for(;p.hasNext()&&(p.getNext().value.forEach(((y,E)=>f.set(y,E))),!(f.size()>=o)););return K.resolve(f)}wt(e,t,i){const o=this.overlays.get(i.key);if(o!==null){const h=this.kr.get(o.largestBatchId).delete(i.key);this.kr.set(o.largestBatchId,h)}this.overlays=this.overlays.insert(i.key,new V1(t,i));let l=this.kr.get(t);l===void 0&&(l=Ve(),this.kr.set(t,l)),this.kr.set(t,l.add(i.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gC{constructor(){this.sessionToken=Lt.EMPTY_BYTE_STRING}getSessionToken(e){return K.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,K.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sp{constructor(){this.qr=new It(kt.Qr),this.$r=new It(kt.Ur)}isEmpty(){return this.qr.isEmpty()}addReference(e,t){const i=new kt(e,t);this.qr=this.qr.add(i),this.$r=this.$r.add(i)}Kr(e,t){e.forEach((i=>this.addReference(i,t)))}removeReference(e,t){this.Wr(new kt(e,t))}Gr(e,t){e.forEach((i=>this.removeReference(i,t)))}zr(e){const t=new _e(new Qe([])),i=new kt(t,e),o=new kt(t,e+1),l=[];return this.$r.forEachInRange([i,o],(h=>{this.Wr(h),l.push(h.key)})),l}jr(){this.qr.forEach((e=>this.Wr(e)))}Wr(e){this.qr=this.qr.delete(e),this.$r=this.$r.delete(e)}Jr(e){const t=new _e(new Qe([])),i=new kt(t,e),o=new kt(t,e+1);let l=Ve();return this.$r.forEachInRange([i,o],(h=>{l=l.add(h.key)})),l}containsKey(e){const t=new kt(e,0),i=this.qr.firstAfterOrEqual(t);return i!==null&&e.isEqual(i.key)}}class kt{constructor(e,t){this.key=e,this.Hr=t}static Qr(e,t){return _e.comparator(e.key,t.key)||Ne(e.Hr,t.Hr)}static Ur(e,t){return Ne(e.Hr,t.Hr)||_e.comparator(e.key,t.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yC{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.er=1,this.Yr=new It(kt.Qr)}checkEmpty(e){return K.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,i,o){const l=this.er;this.er++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const h=new b1(l,t,i,o);this.mutationQueue.push(h);for(const f of o)this.Yr=this.Yr.add(new kt(f.key,l)),this.indexManager.addToCollectionParentIndex(e,f.key.path.popLast());return K.resolve(h)}lookupMutationBatch(e,t){return K.resolve(this.Zr(t))}getNextMutationBatchAfterBatchId(e,t){const i=t+1,o=this.Xr(i),l=o<0?0:o;return K.resolve(this.mutationQueue.length>l?this.mutationQueue[l]:null)}getHighestUnacknowledgedBatchId(){return K.resolve(this.mutationQueue.length===0?Qf:this.er-1)}getAllMutationBatches(e){return K.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const i=new kt(t,0),o=new kt(t,Number.POSITIVE_INFINITY),l=[];return this.Yr.forEachInRange([i,o],(h=>{const f=this.Zr(h.Hr);l.push(f)})),K.resolve(l)}getAllMutationBatchesAffectingDocumentKeys(e,t){let i=new It(Ne);return t.forEach((o=>{const l=new kt(o,0),h=new kt(o,Number.POSITIVE_INFINITY);this.Yr.forEachInRange([l,h],(f=>{i=i.add(f.Hr)}))})),K.resolve(this.ei(i))}getAllMutationBatchesAffectingQuery(e,t){const i=t.path,o=i.length+1;let l=i;_e.isDocumentKey(l)||(l=l.child(""));const h=new kt(new _e(l),0);let f=new It(Ne);return this.Yr.forEachWhile((p=>{const y=p.key.path;return!!i.isPrefixOf(y)&&(y.length===o&&(f=f.add(p.Hr)),!0)}),h),K.resolve(this.ei(f))}ei(e){const t=[];return e.forEach((i=>{const o=this.Zr(i);o!==null&&t.push(o)})),t}removeMutationBatch(e,t){Be(this.ti(t.batchId,"removed")===0,55003),this.mutationQueue.shift();let i=this.Yr;return K.forEach(t.mutations,(o=>{const l=new kt(o.key,t.batchId);return i=i.delete(l),this.referenceDelegate.markPotentiallyOrphaned(e,o.key)})).next((()=>{this.Yr=i}))}rr(e){}containsKey(e,t){const i=new kt(t,0),o=this.Yr.firstAfterOrEqual(i);return K.resolve(t.isEqual(o&&o.key))}performConsistencyCheck(e){return this.mutationQueue.length,K.resolve()}ti(e,t){return this.Xr(e)}Xr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Zr(e){const t=this.Xr(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vC{constructor(e){this.ni=e,this.docs=(function(){return new nt(_e.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const i=t.key,o=this.docs.get(i),l=o?o.size:0,h=this.ni(t);return this.docs=this.docs.insert(i,{document:t.mutableCopy(),size:h}),this.size+=h-l,this.indexManager.addToCollectionParentIndex(e,i.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const i=this.docs.get(t);return K.resolve(i?i.document.mutableCopy():$t.newInvalidDocument(t))}getEntries(e,t){let i=Br();return t.forEach((o=>{const l=this.docs.get(o);i=i.insert(o,l?l.document.mutableCopy():$t.newInvalidDocument(o))})),K.resolve(i)}getDocumentsMatchingQuery(e,t,i,o){let l=Br();const h=t.path,f=new _e(h.child("__id-9223372036854775808__")),p=this.docs.getIteratorFrom(f);for(;p.hasNext();){const{key:y,value:{document:E}}=p.getNext();if(!h.isPrefixOf(y.path))break;y.path.length>h.length+1||KP(GP(E),i)<=0||(o.has(E.key)||qc(t,E))&&(l=l.insert(E.key,E.mutableCopy()))}return K.resolve(l)}getAllFromCollectionGroup(e,t,i,o){Ie(9500)}ri(e,t){return K.forEach(this.docs,(i=>t(i)))}newChangeBuffer(e){return new _C(this)}getSize(e){return K.resolve(this.size)}}class _C extends hC{constructor(e){super(),this.Or=e}applyChanges(e){const t=[];return this.changes.forEach(((i,o)=>{o.isValidDocument()?t.push(this.Or.addEntry(e,o)):this.Or.removeEntry(i)})),K.waitFor(t)}getFromCache(e,t){return this.Or.getEntry(e,t)}getAllFromCache(e,t){return this.Or.getEntries(e,t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class EC{constructor(e){this.persistence=e,this.ii=new Rs((t=>Jf(t)),Zf),this.lastRemoteSnapshotVersion=Ae.min(),this.highestTargetId=0,this.si=0,this.oi=new sp,this.targetCount=0,this._i=Mo.ar()}forEachTarget(e,t){return this.ii.forEach(((i,o)=>t(o))),K.resolve()}getLastRemoteSnapshotVersion(e){return K.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return K.resolve(this.si)}allocateTargetId(e){return this.highestTargetId=this._i.next(),K.resolve(this.highestTargetId)}setTargetsMetadata(e,t,i){return i&&(this.lastRemoteSnapshotVersion=i),t>this.si&&(this.si=t),K.resolve()}hr(e){this.ii.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this._i=new Mo(t),this.highestTargetId=t),e.sequenceNumber>this.si&&(this.si=e.sequenceNumber)}addTargetData(e,t){return this.hr(t),this.targetCount+=1,K.resolve()}updateTargetData(e,t){return this.hr(t),K.resolve()}removeTargetData(e,t){return this.ii.delete(t.target),this.oi.zr(t.targetId),this.targetCount-=1,K.resolve()}removeTargets(e,t,i){let o=0;const l=[];return this.ii.forEach(((h,f)=>{f.sequenceNumber<=t&&i.get(f.targetId)===null&&(this.ii.delete(h),l.push(this.removeMatchingKeysForTargetId(e,f.targetId)),o++)})),K.waitFor(l).next((()=>o))}getTargetCount(e){return K.resolve(this.targetCount)}getTargetData(e,t){const i=this.ii.get(t)||null;return K.resolve(i)}addMatchingKeys(e,t,i){return this.oi.Kr(t,i),K.resolve()}removeMatchingKeys(e,t,i){this.oi.Gr(t,i);const o=this.persistence.referenceDelegate,l=[];return o&&t.forEach((h=>{l.push(o.markPotentiallyOrphaned(e,h))})),K.waitFor(l)}removeMatchingKeysForTargetId(e,t){return this.oi.zr(t),K.resolve()}getMatchingKeysForTargetId(e,t){const i=this.oi.Jr(t);return K.resolve(i)}containsKey(e,t){return K.resolve(this.oi.containsKey(t))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VE{constructor(e,t){this.ai={},this.overlays={},this.ui=new Uc(0),this.ci=!1,this.ci=!0,this.li=new gC,this.referenceDelegate=e(this),this.hi=new EC(this),this.indexManager=new iC,this.remoteDocumentCache=(function(o){return new vC(o)})((i=>this.referenceDelegate.Pi(i))),this.serializer=new nC(t),this.Ti=new pC(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.ci=!1,Promise.resolve()}get started(){return this.ci}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new mC,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let i=this.ai[e.toKey()];return i||(i=new yC(t,this.referenceDelegate),this.ai[e.toKey()]=i),i}getGlobalsCache(){return this.li}getTargetCache(){return this.hi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ti}runTransaction(e,t,i){he("MemoryPersistence","Starting transaction:",e);const o=new wC(this.ui.next());return this.referenceDelegate.Ii(),i(o).next((l=>this.referenceDelegate.di(o).next((()=>l)))).toPromise().then((l=>(o.raiseOnCommittedEvent(),l)))}Ei(e,t){return K.or(Object.values(this.ai).map((i=>()=>i.containsKey(e,t))))}}class wC extends YP{constructor(e){super(),this.currentSequenceNumber=e}}class op{constructor(e){this.persistence=e,this.Ai=new sp,this.Ri=null}static Vi(e){return new op(e)}get mi(){if(this.Ri)return this.Ri;throw Ie(60996)}addReference(e,t,i){return this.Ai.addReference(i,t),this.mi.delete(i.toString()),K.resolve()}removeReference(e,t,i){return this.Ai.removeReference(i,t),this.mi.add(i.toString()),K.resolve()}markPotentiallyOrphaned(e,t){return this.mi.add(t.toString()),K.resolve()}removeTarget(e,t){this.Ai.zr(t.targetId).forEach((o=>this.mi.add(o.toString())));const i=this.persistence.getTargetCache();return i.getMatchingKeysForTargetId(e,t.targetId).next((o=>{o.forEach((l=>this.mi.add(l.toString())))})).next((()=>i.removeTargetData(e,t)))}Ii(){this.Ri=new Set}di(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return K.forEach(this.mi,(i=>{const o=_e.fromPath(i);return this.fi(e,o).next((l=>{l||t.removeEntry(o,Ae.min())}))})).next((()=>(this.Ri=null,t.apply(e))))}updateLimboDocument(e,t){return this.fi(e,t).next((i=>{i?this.mi.delete(t.toString()):this.mi.add(t.toString())}))}Pi(e){return 0}fi(e,t){return K.or([()=>K.resolve(this.Ai.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ei(e,t)])}}class Cc{constructor(e,t){this.persistence=e,this.gi=new Rs((i=>ZP(i.path)),((i,o)=>i.isEqual(o))),this.garbageCollector=cC(this,t)}static Vi(e,t){return new Cc(e,t)}Ii(){}di(e){return K.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}mr(e){const t=this.yr(e);return this.persistence.getTargetCache().getTargetCount(e).next((i=>t.next((o=>i+o))))}yr(e){let t=0;return this.gr(e,(i=>{t++})).next((()=>t))}gr(e,t){return K.forEach(this.gi,((i,o)=>this.Sr(e,i,o).next((l=>l?K.resolve():t(o)))))}removeTargets(e,t,i){return this.persistence.getTargetCache().removeTargets(e,t,i)}removeOrphanedDocuments(e,t){let i=0;const o=this.persistence.getRemoteDocumentCache(),l=o.newChangeBuffer();return o.ri(e,(h=>this.Sr(e,h,t).next((f=>{f||(i++,l.removeEntry(h,Ae.min()))})))).next((()=>l.apply(e))).next((()=>i))}markPotentiallyOrphaned(e,t){return this.gi.set(t,e.currentSequenceNumber),K.resolve()}removeTarget(e,t){const i=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,i)}addReference(e,t,i){return this.gi.set(i,e.currentSequenceNumber),K.resolve()}removeReference(e,t,i){return this.gi.set(i,e.currentSequenceNumber),K.resolve()}updateLimboDocument(e,t){return this.gi.set(t,e.currentSequenceNumber),K.resolve()}Pi(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=ic(e.data.value)),t}Sr(e,t,i){return K.or([()=>this.persistence.Ei(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{const o=this.gi.get(t);return K.resolve(o!==void 0&&o>i)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ap{constructor(e,t,i,o){this.targetId=e,this.fromCache=t,this.Is=i,this.ds=o}static Es(e,t){let i=Ve(),o=Ve();for(const l of t.docChanges)switch(l.type){case 0:i=i.add(l.doc.key);break;case 1:o=o.add(l.doc.key)}return new ap(e,t.fromCache,i,o)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TC{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IC{constructor(){this.As=!1,this.Rs=!1,this.Vs=100,this.fs=(function(){return tI()?8:XP(Wt())>0?6:4})()}initialize(e,t){this.gs=e,this.indexManager=t,this.As=!0}getDocumentsMatchingQuery(e,t,i,o){const l={result:null};return this.ps(e,t).next((h=>{l.result=h})).next((()=>{if(!l.result)return this.ys(e,t,o,i).next((h=>{l.result=h}))})).next((()=>{if(l.result)return;const h=new TC;return this.ws(e,t,h).next((f=>{if(l.result=f,this.Rs)return this.Ss(e,t,h,f.size)}))})).next((()=>l.result))}Ss(e,t,i,o){return i.documentReadCount<this.Vs?(Io()<=be.DEBUG&&he("QueryEngine","SDK will not create cache indexes for query:",So(t),"since it only creates cache indexes for collection contains","more than or equal to",this.Vs,"documents"),K.resolve()):(Io()<=be.DEBUG&&he("QueryEngine","Query:",So(t),"scans",i.documentReadCount,"local documents and returns",o,"documents as results."),i.documentReadCount>this.fs*o?(Io()<=be.DEBUG&&he("QueryEngine","The SDK decides to create cache indexes for query:",So(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,cr(t))):K.resolve())}ps(e,t){if(Xy(t))return K.resolve(null);let i=cr(t);return this.indexManager.getIndexType(e,i).next((o=>o===0?null:(t.limit!==null&&o===1&&(t=vf(t,null,"F"),i=cr(t)),this.indexManager.getDocumentsMatchingTarget(e,i).next((l=>{const h=Ve(...l);return this.gs.getDocuments(e,h).next((f=>this.indexManager.getMinOffset(e,i).next((p=>{const y=this.bs(t,f);return this.Ds(t,y,h,p.readTime)?this.ps(e,vf(t,null,"F")):this.vs(e,y,t,p)}))))})))))}ys(e,t,i,o){return Xy(t)||o.isEqual(Ae.min())?K.resolve(null):this.gs.getDocuments(e,i).next((l=>{const h=this.bs(t,l);return this.Ds(t,h,i,o)?K.resolve(null):(Io()<=be.DEBUG&&he("QueryEngine","Re-using previous result from %s to execute query: %s",o.toString(),So(t)),this.vs(e,h,t,HP(o,ll)).next((f=>f)))}))}bs(e,t){let i=new It(dE(e));return t.forEach(((o,l)=>{qc(e,l)&&(i=i.add(l))})),i}Ds(e,t,i,o){if(e.limit===null)return!1;if(i.size!==t.size)return!0;const l=e.limitType==="F"?t.last():t.first();return!!l&&(l.hasPendingWrites||l.version.compareTo(o)>0)}ws(e,t,i){return Io()<=be.DEBUG&&he("QueryEngine","Using full collection scan to execute query:",So(t)),this.gs.getDocumentsMatchingQuery(e,t,xi.min(),i)}vs(e,t,i,o){return this.gs.getDocumentsMatchingQuery(e,i,o).next((l=>(t.forEach((h=>{l=l.insert(h.key,h)})),l)))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lp="LocalStore",SC=3e8;class AC{constructor(e,t,i,o){this.persistence=e,this.Cs=t,this.serializer=o,this.Fs=new nt(Ne),this.Ms=new Rs((l=>Jf(l)),Zf),this.xs=new Map,this.Os=e.getRemoteDocumentCache(),this.hi=e.getTargetCache(),this.Ti=e.getBundleCache(),this.Ns(i)}Ns(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new fC(this.Os,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Os.setIndexManager(this.indexManager),this.Cs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(t=>e.collect(t,this.Fs)))}}function PC(r,e,t,i){return new AC(r,e,t,i)}async function OE(r,e){const t=Pe(r);return await t.persistence.runTransaction("Handle user change","readonly",(i=>{let o;return t.mutationQueue.getAllMutationBatches(i).next((l=>(o=l,t.Ns(e),t.mutationQueue.getAllMutationBatches(i)))).next((l=>{const h=[],f=[];let p=Ve();for(const y of o){h.push(y.batchId);for(const E of y.mutations)p=p.add(E.key)}for(const y of l){f.push(y.batchId);for(const E of y.mutations)p=p.add(E.key)}return t.localDocuments.getDocuments(i,p).next((y=>({Bs:y,removedBatchIds:h,addedBatchIds:f})))}))}))}function CC(r,e){const t=Pe(r);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",(i=>{const o=e.batch.keys(),l=t.Os.newChangeBuffer({trackRemovals:!0});return(function(f,p,y,E){const T=y.batch,S=T.keys();let V=K.resolve();return S.forEach((L=>{V=V.next((()=>E.getEntry(p,L))).next((z=>{const F=y.docVersions.get(L);Be(F!==null,48541),z.version.compareTo(F)<0&&(T.applyToRemoteDocument(z,y),z.isValidDocument()&&(z.setReadTime(y.commitVersion),E.addEntry(z)))}))})),V.next((()=>f.mutationQueue.removeMutationBatch(p,T)))})(t,i,e,l).next((()=>l.apply(i))).next((()=>t.mutationQueue.performConsistencyCheck(i))).next((()=>t.documentOverlayCache.removeOverlaysForBatchId(i,o,e.batch.batchId))).next((()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(i,(function(f){let p=Ve();for(let y=0;y<f.mutationResults.length;++y)f.mutationResults[y].transformResults.length>0&&(p=p.add(f.batch.mutations[y].key));return p})(e)))).next((()=>t.localDocuments.getDocuments(i,o)))}))}function LE(r){const e=Pe(r);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(t=>e.hi.getLastRemoteSnapshotVersion(t)))}function RC(r,e){const t=Pe(r),i=e.snapshotVersion;let o=t.Fs;return t.persistence.runTransaction("Apply remote event","readwrite-primary",(l=>{const h=t.Os.newChangeBuffer({trackRemovals:!0});o=t.Fs;const f=[];e.targetChanges.forEach(((E,T)=>{const S=o.get(T);if(!S)return;f.push(t.hi.removeMatchingKeys(l,E.removedDocuments,T).next((()=>t.hi.addMatchingKeys(l,E.addedDocuments,T))));let V=S.withSequenceNumber(l.currentSequenceNumber);e.targetMismatches.get(T)!==null?V=V.withResumeToken(Lt.EMPTY_BYTE_STRING,Ae.min()).withLastLimboFreeSnapshotVersion(Ae.min()):E.resumeToken.approximateByteSize()>0&&(V=V.withResumeToken(E.resumeToken,i)),o=o.insert(T,V),(function(z,F,oe){return z.resumeToken.approximateByteSize()===0||F.snapshotVersion.toMicroseconds()-z.snapshotVersion.toMicroseconds()>=SC?!0:oe.addedDocuments.size+oe.modifiedDocuments.size+oe.removedDocuments.size>0})(S,V,E)&&f.push(t.hi.updateTargetData(l,V))}));let p=Br(),y=Ve();if(e.documentUpdates.forEach((E=>{e.resolvedLimboDocuments.has(E)&&f.push(t.persistence.referenceDelegate.updateLimboDocument(l,E))})),f.push(kC(l,h,e.documentUpdates).next((E=>{p=E.Ls,y=E.ks}))),!i.isEqual(Ae.min())){const E=t.hi.getLastRemoteSnapshotVersion(l).next((T=>t.hi.setTargetsMetadata(l,l.currentSequenceNumber,i)));f.push(E)}return K.waitFor(f).next((()=>h.apply(l))).next((()=>t.localDocuments.getLocalViewOfDocuments(l,p,y))).next((()=>p))})).then((l=>(t.Fs=o,l)))}function kC(r,e,t){let i=Ve(),o=Ve();return t.forEach((l=>i=i.add(l))),e.getEntries(r,i).next((l=>{let h=Br();return t.forEach(((f,p)=>{const y=l.get(f);p.isFoundDocument()!==y.isFoundDocument()&&(o=o.add(f)),p.isNoDocument()&&p.version.isEqual(Ae.min())?(e.removeEntry(f,p.readTime),h=h.insert(f,p)):!y.isValidDocument()||p.version.compareTo(y.version)>0||p.version.compareTo(y.version)===0&&y.hasPendingWrites?(e.addEntry(p),h=h.insert(f,p)):he(lp,"Ignoring outdated watch update for ",f,". Current version:",y.version," Watch version:",p.version)})),{Ls:h,ks:o}}))}function NC(r,e){const t=Pe(r);return t.persistence.runTransaction("Get next mutation batch","readonly",(i=>(e===void 0&&(e=Qf),t.mutationQueue.getNextMutationBatchAfterBatchId(i,e))))}function xC(r,e){const t=Pe(r);return t.persistence.runTransaction("Allocate target","readwrite",(i=>{let o;return t.hi.getTargetData(i,e).next((l=>l?(o=l,K.resolve(o)):t.hi.allocateTargetId(i).next((h=>(o=new Ti(e,h,"TargetPurposeListen",i.currentSequenceNumber),t.hi.addTargetData(i,o).next((()=>o)))))))})).then((i=>{const o=t.Fs.get(i.targetId);return(o===null||i.snapshotVersion.compareTo(o.snapshotVersion)>0)&&(t.Fs=t.Fs.insert(i.targetId,i),t.Ms.set(e,i.targetId)),i}))}async function If(r,e,t){const i=Pe(r),o=i.Fs.get(e),l=t?"readwrite":"readwrite-primary";try{t||await i.persistence.runTransaction("Release target",l,(h=>i.persistence.referenceDelegate.removeTarget(h,o)))}catch(h){if(!Ko(h))throw h;he(lp,`Failed to update sequence numbers for target ${e}: ${h}`)}i.Fs=i.Fs.remove(e),i.Ms.delete(o.target)}function cv(r,e,t){const i=Pe(r);let o=Ae.min(),l=Ve();return i.persistence.runTransaction("Execute query","readwrite",(h=>(function(p,y,E){const T=Pe(p),S=T.Ms.get(E);return S!==void 0?K.resolve(T.Fs.get(S)):T.hi.getTargetData(y,E)})(i,h,cr(e)).next((f=>{if(f)return o=f.lastLimboFreeSnapshotVersion,i.hi.getMatchingKeysForTargetId(h,f.targetId).next((p=>{l=p}))})).next((()=>i.Cs.getDocumentsMatchingQuery(h,e,t?o:Ae.min(),t?l:Ve()))).next((f=>(DC(i,v1(e),f),{documents:f,qs:l})))))}function DC(r,e,t){let i=r.xs.get(e)||Ae.min();t.forEach(((o,l)=>{l.readTime.compareTo(i)>0&&(i=l.readTime)})),r.xs.set(e,i)}class hv{constructor(){this.activeTargetIds=S1()}Gs(e){this.activeTargetIds=this.activeTargetIds.add(e)}zs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Ws(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class bC{constructor(){this.Fo=new hv,this.Mo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,i){}addLocalQueryTarget(e,t=!0){return t&&this.Fo.Gs(e),this.Mo[e]||"not-current"}updateQueryState(e,t,i){this.Mo[e]=t}removeLocalQueryTarget(e){this.Fo.zs(e)}isLocalQueryTarget(e){return this.Fo.activeTargetIds.has(e)}clearQueryState(e){delete this.Mo[e]}getAllActiveQueryTargets(){return this.Fo.activeTargetIds}isActiveQueryTarget(e){return this.Fo.activeTargetIds.has(e)}start(){return this.Fo=new hv,Promise.resolve()}handleUserChange(e,t,i){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VC{xo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dv="ConnectivityMonitor";class fv{constructor(){this.Oo=()=>this.No(),this.Bo=()=>this.Lo(),this.ko=[],this.qo()}xo(e){this.ko.push(e)}shutdown(){window.removeEventListener("online",this.Oo),window.removeEventListener("offline",this.Bo)}qo(){window.addEventListener("online",this.Oo),window.addEventListener("offline",this.Bo)}No(){he(dv,"Network connectivity changed: AVAILABLE");for(const e of this.ko)e(0)}Lo(){he(dv,"Network connectivity changed: UNAVAILABLE");for(const e of this.ko)e(1)}static C(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Yu=null;function Sf(){return Yu===null?Yu=(function(){return 268435456+Math.round(2147483648*Math.random())})():Yu++,"0x"+Yu.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Hd="RestConnection",OC={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class LC{get Qo(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const t=e.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),o=encodeURIComponent(this.databaseId.database);this.$o=t+"://"+e.host,this.Uo=`projects/${i}/databases/${o}`,this.Ko=this.databaseId.database===Ec?`project_id=${i}`:`project_id=${i}&database_id=${o}`}Wo(e,t,i,o,l){const h=Sf(),f=this.Go(e,t.toUriEncodedString());he(Hd,`Sending RPC '${e}' ${h}:`,f,i);const p={"google-cloud-resource-prefix":this.Uo,"x-goog-request-params":this.Ko};this.zo(p,o,l);const{host:y}=new URL(f),E=$o(y);return this.jo(e,f,p,i,E).then((T=>(he(Hd,`Received RPC '${e}' ${h}: `,T),T)),(T=>{throw Ni(Hd,`RPC '${e}' ${h} failed with error: `,T,"url: ",f,"request:",i),T}))}Jo(e,t,i,o,l,h){return this.Wo(e,t,i,o,l)}zo(e,t,i){e["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+Ho})(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach(((o,l)=>e[l]=o)),i&&i.headers.forEach(((o,l)=>e[l]=o))}Go(e,t){const i=OC[e];return`${this.$o}/v1/${t}:${i}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MC{constructor(e){this.Ho=e.Ho,this.Yo=e.Yo}Zo(e){this.Xo=e}e_(e){this.t_=e}n_(e){this.r_=e}onMessage(e){this.i_=e}close(){this.Yo()}send(e){this.Ho(e)}s_(){this.Xo()}o_(){this.t_()}__(e){this.r_(e)}a_(e){this.i_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Bt="WebChannelConnection";class jC extends LC{constructor(e){super(e),this.u_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}jo(e,t,i,o,l){const h=Sf();return new Promise(((f,p)=>{const y=new j_;y.setWithCredentials(!0),y.listenOnce(F_.COMPLETE,(()=>{try{switch(y.getLastErrorCode()){case rc.NO_ERROR:const T=y.getResponseJson();he(Bt,`XHR for RPC '${e}' ${h} received:`,JSON.stringify(T)),f(T);break;case rc.TIMEOUT:he(Bt,`RPC '${e}' ${h} timed out`),p(new ae(G.DEADLINE_EXCEEDED,"Request time out"));break;case rc.HTTP_ERROR:const S=y.getStatus();if(he(Bt,`RPC '${e}' ${h} failed with status:`,S,"response text:",y.getResponseText()),S>0){let V=y.getResponseJson();Array.isArray(V)&&(V=V[0]);const L=V==null?void 0:V.error;if(L&&L.status&&L.message){const z=(function(oe){const Y=oe.toLowerCase().replace(/_/g,"-");return Object.values(G).indexOf(Y)>=0?Y:G.UNKNOWN})(L.status);p(new ae(z,L.message))}else p(new ae(G.UNKNOWN,"Server responded with status "+y.getStatus()))}else p(new ae(G.UNAVAILABLE,"Connection failed."));break;default:Ie(9055,{c_:e,streamId:h,l_:y.getLastErrorCode(),h_:y.getLastError()})}}finally{he(Bt,`RPC '${e}' ${h} completed.`)}}));const E=JSON.stringify(o);he(Bt,`RPC '${e}' ${h} sending request:`,o),y.send(t,"POST",E,i,15)}))}P_(e,t,i){const o=Sf(),l=[this.$o,"/","google.firestore.v1.Firestore","/",e,"/channel"],h=z_(),f=B_(),p={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},y=this.longPollingOptions.timeoutSeconds;y!==void 0&&(p.longPollingTimeout=Math.round(1e3*y)),this.useFetchStreams&&(p.useFetchStreams=!0),this.zo(p.initMessageHeaders,t,i),p.encodeInitMessageHeaders=!0;const E=l.join("");he(Bt,`Creating RPC '${e}' stream ${o}: ${E}`,p);const T=h.createWebChannel(E,p);this.T_(T);let S=!1,V=!1;const L=new MC({Ho:F=>{V?he(Bt,`Not sending because RPC '${e}' stream ${o} is closed:`,F):(S||(he(Bt,`Opening RPC '${e}' stream ${o} transport.`),T.open(),S=!0),he(Bt,`RPC '${e}' stream ${o} sending:`,F),T.send(F))},Yo:()=>T.close()}),z=(F,oe,Y)=>{F.listen(oe,(re=>{try{Y(re)}catch(ye){setTimeout((()=>{throw ye}),0)}}))};return z(T,Ga.EventType.OPEN,(()=>{V||(he(Bt,`RPC '${e}' stream ${o} transport opened.`),L.s_())})),z(T,Ga.EventType.CLOSE,(()=>{V||(V=!0,he(Bt,`RPC '${e}' stream ${o} transport closed`),L.__(),this.I_(T))})),z(T,Ga.EventType.ERROR,(F=>{V||(V=!0,Ni(Bt,`RPC '${e}' stream ${o} transport errored. Name:`,F.name,"Message:",F.message),L.__(new ae(G.UNAVAILABLE,"The operation could not be completed")))})),z(T,Ga.EventType.MESSAGE,(F=>{var oe;if(!V){const Y=F.data[0];Be(!!Y,16349);const re=Y,ye=(re==null?void 0:re.error)||((oe=re[0])===null||oe===void 0?void 0:oe.error);if(ye){he(Bt,`RPC '${e}' stream ${o} received error:`,ye);const Re=ye.status;let ie=(function(C){const x=pt[C];if(x!==void 0)return IE(x)})(Re),k=ye.message;ie===void 0&&(ie=G.INTERNAL,k="Unknown error status: "+Re+" with message "+ye.message),V=!0,L.__(new ae(ie,k)),T.close()}else he(Bt,`RPC '${e}' stream ${o} received:`,Y),L.a_(Y)}})),z(f,U_.STAT_EVENT,(F=>{F.stat===hf.PROXY?he(Bt,`RPC '${e}' stream ${o} detected buffering proxy`):F.stat===hf.NOPROXY&&he(Bt,`RPC '${e}' stream ${o} detected no buffering proxy`)})),setTimeout((()=>{L.o_()}),0),L}terminate(){this.u_.forEach((e=>e.close())),this.u_=[]}T_(e){this.u_.push(e)}I_(e){this.u_=this.u_.filter((t=>t===e))}}function Gd(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Qc(r){return new z1(r,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ME{constructor(e,t,i=1e3,o=1.5,l=6e4){this.Fi=e,this.timerId=t,this.d_=i,this.E_=o,this.A_=l,this.R_=0,this.V_=null,this.m_=Date.now(),this.reset()}reset(){this.R_=0}f_(){this.R_=this.A_}g_(e){this.cancel();const t=Math.floor(this.R_+this.p_()),i=Math.max(0,Date.now()-this.m_),o=Math.max(0,t-i);o>0&&he("ExponentialBackoff",`Backing off for ${o} ms (base delay: ${this.R_} ms, delay with jitter: ${t} ms, last attempt: ${i} ms ago)`),this.V_=this.Fi.enqueueAfterDelay(this.timerId,o,(()=>(this.m_=Date.now(),e()))),this.R_*=this.E_,this.R_<this.d_&&(this.R_=this.d_),this.R_>this.A_&&(this.R_=this.A_)}y_(){this.V_!==null&&(this.V_.skipDelay(),this.V_=null)}cancel(){this.V_!==null&&(this.V_.cancel(),this.V_=null)}p_(){return(Math.random()-.5)*this.R_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pv="PersistentStream";class jE{constructor(e,t,i,o,l,h,f,p){this.Fi=e,this.w_=i,this.S_=o,this.connection=l,this.authCredentialsProvider=h,this.appCheckCredentialsProvider=f,this.listener=p,this.state=0,this.b_=0,this.D_=null,this.v_=null,this.stream=null,this.C_=0,this.F_=new ME(e,t)}M_(){return this.state===1||this.state===5||this.x_()}x_(){return this.state===2||this.state===3}start(){this.C_=0,this.state!==4?this.auth():this.O_()}async stop(){this.M_()&&await this.close(0)}N_(){this.state=0,this.F_.reset()}B_(){this.x_()&&this.D_===null&&(this.D_=this.Fi.enqueueAfterDelay(this.w_,6e4,(()=>this.L_())))}k_(e){this.q_(),this.stream.send(e)}async L_(){if(this.x_())return this.close(0)}q_(){this.D_&&(this.D_.cancel(),this.D_=null)}Q_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,t){this.q_(),this.Q_(),this.F_.cancel(),this.b_++,e!==4?this.F_.reset():t&&t.code===G.RESOURCE_EXHAUSTED?(Ur(t.toString()),Ur("Using maximum backoff delay to prevent overloading the backend."),this.F_.f_()):t&&t.code===G.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.U_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.n_(t)}U_(){}auth(){this.state=1;const e=this.K_(this.b_),t=this.b_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([i,o])=>{this.b_===t&&this.W_(i,o)}),(i=>{e((()=>{const o=new ae(G.UNKNOWN,"Fetching auth token failed: "+i.message);return this.G_(o)}))}))}W_(e,t){const i=this.K_(this.b_);this.stream=this.z_(e,t),this.stream.Zo((()=>{i((()=>this.listener.Zo()))})),this.stream.e_((()=>{i((()=>(this.state=2,this.v_=this.Fi.enqueueAfterDelay(this.S_,1e4,(()=>(this.x_()&&(this.state=3),Promise.resolve()))),this.listener.e_())))})),this.stream.n_((o=>{i((()=>this.G_(o)))})),this.stream.onMessage((o=>{i((()=>++this.C_==1?this.j_(o):this.onNext(o)))}))}O_(){this.state=5,this.F_.g_((async()=>{this.state=0,this.start()}))}G_(e){return he(pv,`close with error: ${e}`),this.stream=null,this.close(4,e)}K_(e){return t=>{this.Fi.enqueueAndForget((()=>this.b_===e?t():(he(pv,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class FC extends jE{constructor(e,t,i,o,l,h){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,i,o,h),this.serializer=l}z_(e,t){return this.connection.P_("Listen",e,t)}j_(e){return this.onNext(e)}onNext(e){this.F_.reset();const t=q1(this.serializer,e),i=(function(l){if(!("targetChange"in l))return Ae.min();const h=l.targetChange;return h.targetIds&&h.targetIds.length?Ae.min():h.readTime?hr(h.readTime):Ae.min()})(e);return this.listener.J_(t,i)}H_(e){const t={};t.database=Tf(this.serializer),t.addTarget=(function(l,h){let f;const p=h.target;if(f=gf(p)?{documents:K1(l,p)}:{query:Q1(l,p).Vt},f.targetId=h.targetId,h.resumeToken.approximateByteSize()>0){f.resumeToken=PE(l,h.resumeToken);const y=_f(l,h.expectedCount);y!==null&&(f.expectedCount=y)}else if(h.snapshotVersion.compareTo(Ae.min())>0){f.readTime=Pc(l,h.snapshotVersion.toTimestamp());const y=_f(l,h.expectedCount);y!==null&&(f.expectedCount=y)}return f})(this.serializer,e);const i=X1(this.serializer,e);i&&(t.labels=i),this.k_(t)}Y_(e){const t={};t.database=Tf(this.serializer),t.removeTarget=e,this.k_(t)}}class UC extends jE{constructor(e,t,i,o,l,h){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,i,o,h),this.serializer=l}get Z_(){return this.C_>0}start(){this.lastStreamToken=void 0,super.start()}U_(){this.Z_&&this.X_([])}z_(e,t){return this.connection.P_("Write",e,t)}j_(e){return Be(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,Be(!e.writeResults||e.writeResults.length===0,55816),this.listener.ea()}onNext(e){Be(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.F_.reset();const t=G1(e.writeResults,e.commitTime),i=hr(e.commitTime);return this.listener.ta(i,t)}na(){const e={};e.database=Tf(this.serializer),this.k_(e)}X_(e){const t={streamToken:this.lastStreamToken,writes:e.map((i=>H1(this.serializer,i)))};this.k_(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BC{}class zC extends BC{constructor(e,t,i,o){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=i,this.serializer=o,this.ra=!1}ia(){if(this.ra)throw new ae(G.FAILED_PRECONDITION,"The client has already been terminated.")}Wo(e,t,i,o){return this.ia(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([l,h])=>this.connection.Wo(e,Ef(t,i),o,l,h))).catch((l=>{throw l.name==="FirebaseError"?(l.code===G.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),l):new ae(G.UNKNOWN,l.toString())}))}Jo(e,t,i,o,l){return this.ia(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([h,f])=>this.connection.Jo(e,Ef(t,i),o,h,f,l))).catch((h=>{throw h.name==="FirebaseError"?(h.code===G.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),h):new ae(G.UNKNOWN,h.toString())}))}terminate(){this.ra=!0,this.connection.terminate()}}class $C{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.sa=0,this.oa=null,this._a=!0}aa(){this.sa===0&&(this.ua("Unknown"),this.oa=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this.oa=null,this.ca("Backend didn't respond within 10 seconds."),this.ua("Offline"),Promise.resolve()))))}la(e){this.state==="Online"?this.ua("Unknown"):(this.sa++,this.sa>=1&&(this.ha(),this.ca(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ua("Offline")))}set(e){this.ha(),this.sa=0,e==="Online"&&(this._a=!1),this.ua(e)}ua(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}ca(e){const t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this._a?(Ur(t),this._a=!1):he("OnlineStateTracker",t)}ha(){this.oa!==null&&(this.oa.cancel(),this.oa=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ps="RemoteStore";class WC{constructor(e,t,i,o,l){this.localStore=e,this.datastore=t,this.asyncQueue=i,this.remoteSyncer={},this.Pa=[],this.Ta=new Map,this.Ia=new Set,this.da=[],this.Ea=l,this.Ea.xo((h=>{i.enqueueAndForget((async()=>{ks(this)&&(he(Ps,"Restarting streams for network reachability change."),await(async function(p){const y=Pe(p);y.Ia.add(4),await Pl(y),y.Aa.set("Unknown"),y.Ia.delete(4),await Yc(y)})(this))}))})),this.Aa=new $C(i,o)}}async function Yc(r){if(ks(r))for(const e of r.da)await e(!0)}async function Pl(r){for(const e of r.da)await e(!1)}function FE(r,e){const t=Pe(r);t.Ta.has(e.targetId)||(t.Ta.set(e.targetId,e),dp(t)?hp(t):Qo(t).x_()&&cp(t,e))}function up(r,e){const t=Pe(r),i=Qo(t);t.Ta.delete(e),i.x_()&&UE(t,e),t.Ta.size===0&&(i.x_()?i.B_():ks(t)&&t.Aa.set("Unknown"))}function cp(r,e){if(r.Ra.$e(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Ae.min())>0){const t=r.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}Qo(r).H_(e)}function UE(r,e){r.Ra.$e(e),Qo(r).Y_(e)}function hp(r){r.Ra=new j1({getRemoteKeysForTarget:e=>r.remoteSyncer.getRemoteKeysForTarget(e),Et:e=>r.Ta.get(e)||null,lt:()=>r.datastore.serializer.databaseId}),Qo(r).start(),r.Aa.aa()}function dp(r){return ks(r)&&!Qo(r).M_()&&r.Ta.size>0}function ks(r){return Pe(r).Ia.size===0}function BE(r){r.Ra=void 0}async function qC(r){r.Aa.set("Online")}async function HC(r){r.Ta.forEach(((e,t)=>{cp(r,e)}))}async function GC(r,e){BE(r),dp(r)?(r.Aa.la(e),hp(r)):r.Aa.set("Unknown")}async function KC(r,e,t){if(r.Aa.set("Online"),e instanceof AE&&e.state===2&&e.cause)try{await(async function(o,l){const h=l.cause;for(const f of l.targetIds)o.Ta.has(f)&&(await o.remoteSyncer.rejectListen(f,h),o.Ta.delete(f),o.Ra.removeTarget(f))})(r,e)}catch(i){he(Ps,"Failed to remove targets %s: %s ",e.targetIds.join(","),i),await Rc(r,i)}else if(e instanceof ac?r.Ra.Ye(e):e instanceof SE?r.Ra.it(e):r.Ra.et(e),!t.isEqual(Ae.min()))try{const i=await LE(r.localStore);t.compareTo(i)>=0&&await(function(l,h){const f=l.Ra.Pt(h);return f.targetChanges.forEach(((p,y)=>{if(p.resumeToken.approximateByteSize()>0){const E=l.Ta.get(y);E&&l.Ta.set(y,E.withResumeToken(p.resumeToken,h))}})),f.targetMismatches.forEach(((p,y)=>{const E=l.Ta.get(p);if(!E)return;l.Ta.set(p,E.withResumeToken(Lt.EMPTY_BYTE_STRING,E.snapshotVersion)),UE(l,p);const T=new Ti(E.target,p,y,E.sequenceNumber);cp(l,T)})),l.remoteSyncer.applyRemoteEvent(f)})(r,t)}catch(i){he(Ps,"Failed to raise snapshot:",i),await Rc(r,i)}}async function Rc(r,e,t){if(!Ko(e))throw e;r.Ia.add(1),await Pl(r),r.Aa.set("Offline"),t||(t=()=>LE(r.localStore)),r.asyncQueue.enqueueRetryable((async()=>{he(Ps,"Retrying IndexedDB access"),await t(),r.Ia.delete(1),await Yc(r)}))}function zE(r,e){return e().catch((t=>Rc(r,t,e)))}async function Xc(r){const e=Pe(r),t=Oi(e);let i=e.Pa.length>0?e.Pa[e.Pa.length-1].batchId:Qf;for(;QC(e);)try{const o=await NC(e.localStore,i);if(o===null){e.Pa.length===0&&t.B_();break}i=o.batchId,YC(e,o)}catch(o){await Rc(e,o)}$E(e)&&WE(e)}function QC(r){return ks(r)&&r.Pa.length<10}function YC(r,e){r.Pa.push(e);const t=Oi(r);t.x_()&&t.Z_&&t.X_(e.mutations)}function $E(r){return ks(r)&&!Oi(r).M_()&&r.Pa.length>0}function WE(r){Oi(r).start()}async function XC(r){Oi(r).na()}async function JC(r){const e=Oi(r);for(const t of r.Pa)e.X_(t.mutations)}async function ZC(r,e,t){const i=r.Pa.shift(),o=np.from(i,e,t);await zE(r,(()=>r.remoteSyncer.applySuccessfulWrite(o))),await Xc(r)}async function eR(r,e){e&&Oi(r).Z_&&await(async function(i,o){if((function(h){return L1(h)&&h!==G.ABORTED})(o.code)){const l=i.Pa.shift();Oi(i).N_(),await zE(i,(()=>i.remoteSyncer.rejectFailedWrite(l.batchId,o))),await Xc(i)}})(r,e),$E(r)&&WE(r)}async function mv(r,e){const t=Pe(r);t.asyncQueue.verifyOperationInProgress(),he(Ps,"RemoteStore received new credentials");const i=ks(t);t.Ia.add(3),await Pl(t),i&&t.Aa.set("Unknown"),await t.remoteSyncer.handleCredentialChange(e),t.Ia.delete(3),await Yc(t)}async function tR(r,e){const t=Pe(r);e?(t.Ia.delete(2),await Yc(t)):e||(t.Ia.add(2),await Pl(t),t.Aa.set("Unknown"))}function Qo(r){return r.Va||(r.Va=(function(t,i,o){const l=Pe(t);return l.ia(),new FC(i,l.connection,l.authCredentials,l.appCheckCredentials,l.serializer,o)})(r.datastore,r.asyncQueue,{Zo:qC.bind(null,r),e_:HC.bind(null,r),n_:GC.bind(null,r),J_:KC.bind(null,r)}),r.da.push((async e=>{e?(r.Va.N_(),dp(r)?hp(r):r.Aa.set("Unknown")):(await r.Va.stop(),BE(r))}))),r.Va}function Oi(r){return r.ma||(r.ma=(function(t,i,o){const l=Pe(t);return l.ia(),new UC(i,l.connection,l.authCredentials,l.appCheckCredentials,l.serializer,o)})(r.datastore,r.asyncQueue,{Zo:()=>Promise.resolve(),e_:XC.bind(null,r),n_:eR.bind(null,r),ea:JC.bind(null,r),ta:ZC.bind(null,r)}),r.da.push((async e=>{e?(r.ma.N_(),await Xc(r)):(await r.ma.stop(),r.Pa.length>0&&(he(Ps,`Stopping write stream with ${r.Pa.length} pending writes`),r.Pa=[]))}))),r.ma}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fp{constructor(e,t,i,o,l){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=i,this.op=o,this.removalCallback=l,this.deferred=new Mr,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((h=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,t,i,o,l){const h=Date.now()+i,f=new fp(e,t,h,o,l);return f.start(i),f}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new ae(G.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function pp(r,e){if(Ur("AsyncQueue",`${e}: ${r}`),Ko(r))return new ae(G.UNAVAILABLE,`${e}: ${r}`);throw r}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Do{static emptySet(e){return new Do(e.comparator)}constructor(e){this.comparator=e?(t,i)=>e(t,i)||_e.comparator(t.key,i.key):(t,i)=>_e.comparator(t.key,i.key),this.keyedMap=Ka(),this.sortedSet=new nt(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((t,i)=>(e(t),!1)))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof Do)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),i=e.sortedSet.getIterator();for(;t.hasNext();){const o=t.getNext().key,l=i.getNext().key;if(!o.isEqual(l))return!1}return!0}toString(){const e=[];return this.forEach((t=>{e.push(t.toString())})),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){const i=new Do;return i.comparator=this.comparator,i.keyedMap=e,i.sortedSet=t,i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gv{constructor(){this.fa=new nt(_e.comparator)}track(e){const t=e.doc.key,i=this.fa.get(t);i?e.type!==0&&i.type===3?this.fa=this.fa.insert(t,e):e.type===3&&i.type!==1?this.fa=this.fa.insert(t,{type:i.type,doc:e.doc}):e.type===2&&i.type===2?this.fa=this.fa.insert(t,{type:2,doc:e.doc}):e.type===2&&i.type===0?this.fa=this.fa.insert(t,{type:0,doc:e.doc}):e.type===1&&i.type===0?this.fa=this.fa.remove(t):e.type===1&&i.type===2?this.fa=this.fa.insert(t,{type:1,doc:i.doc}):e.type===0&&i.type===1?this.fa=this.fa.insert(t,{type:2,doc:e.doc}):Ie(63341,{At:e,ga:i}):this.fa=this.fa.insert(t,e)}pa(){const e=[];return this.fa.inorderTraversal(((t,i)=>{e.push(i)})),e}}class jo{constructor(e,t,i,o,l,h,f,p,y){this.query=e,this.docs=t,this.oldDocs=i,this.docChanges=o,this.mutatedKeys=l,this.fromCache=h,this.syncStateChanged=f,this.excludesMetadataChanges=p,this.hasCachedResults=y}static fromInitialDocuments(e,t,i,o,l){const h=[];return t.forEach((f=>{h.push({type:0,doc:f})})),new jo(e,t,Do.emptySet(t),h,i,o,!0,!1,l)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Wc(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,i=e.docChanges;if(t.length!==i.length)return!1;for(let o=0;o<t.length;o++)if(t[o].type!==i[o].type||!t[o].doc.isEqual(i[o].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nR{constructor(){this.ya=void 0,this.wa=[]}Sa(){return this.wa.some((e=>e.ba()))}}class rR{constructor(){this.queries=yv(),this.onlineState="Unknown",this.Da=new Set}terminate(){(function(t,i){const o=Pe(t),l=o.queries;o.queries=yv(),l.forEach(((h,f)=>{for(const p of f.wa)p.onError(i)}))})(this,new ae(G.ABORTED,"Firestore shutting down"))}}function yv(){return new Rs((r=>hE(r)),Wc)}async function mp(r,e){const t=Pe(r);let i=3;const o=e.query;let l=t.queries.get(o);l?!l.Sa()&&e.ba()&&(i=2):(l=new nR,i=e.ba()?0:1);try{switch(i){case 0:l.ya=await t.onListen(o,!0);break;case 1:l.ya=await t.onListen(o,!1);break;case 2:await t.onFirstRemoteStoreListen(o)}}catch(h){const f=pp(h,`Initialization of query '${So(e.query)}' failed`);return void e.onError(f)}t.queries.set(o,l),l.wa.push(e),e.va(t.onlineState),l.ya&&e.Ca(l.ya)&&yp(t)}async function gp(r,e){const t=Pe(r),i=e.query;let o=3;const l=t.queries.get(i);if(l){const h=l.wa.indexOf(e);h>=0&&(l.wa.splice(h,1),l.wa.length===0?o=e.ba()?0:1:!l.Sa()&&e.ba()&&(o=2))}switch(o){case 0:return t.queries.delete(i),t.onUnlisten(i,!0);case 1:return t.queries.delete(i),t.onUnlisten(i,!1);case 2:return t.onLastRemoteStoreUnlisten(i);default:return}}function iR(r,e){const t=Pe(r);let i=!1;for(const o of e){const l=o.query,h=t.queries.get(l);if(h){for(const f of h.wa)f.Ca(o)&&(i=!0);h.ya=o}}i&&yp(t)}function sR(r,e,t){const i=Pe(r),o=i.queries.get(e);if(o)for(const l of o.wa)l.onError(t);i.queries.delete(e)}function yp(r){r.Da.forEach((e=>{e.next()}))}var Af,vv;(vv=Af||(Af={})).Fa="default",vv.Cache="cache";class vp{constructor(e,t,i){this.query=e,this.Ma=t,this.xa=!1,this.Oa=null,this.onlineState="Unknown",this.options=i||{}}Ca(e){if(!this.options.includeMetadataChanges){const i=[];for(const o of e.docChanges)o.type!==3&&i.push(o);e=new jo(e.query,e.docs,e.oldDocs,i,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.xa?this.Na(e)&&(this.Ma.next(e),t=!0):this.Ba(e,this.onlineState)&&(this.La(e),t=!0),this.Oa=e,t}onError(e){this.Ma.error(e)}va(e){this.onlineState=e;let t=!1;return this.Oa&&!this.xa&&this.Ba(this.Oa,e)&&(this.La(this.Oa),t=!0),t}Ba(e,t){if(!e.fromCache||!this.ba())return!0;const i=t!=="Offline";return(!this.options.ka||!i)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}Na(e){if(e.docChanges.length>0)return!0;const t=this.Oa&&this.Oa.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}La(e){e=jo.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.xa=!0,this.Ma.next(e)}ba(){return this.options.source!==Af.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qE{constructor(e){this.key=e}}class HE{constructor(e){this.key=e}}class oR{constructor(e,t){this.query=e,this.Ha=t,this.Ya=null,this.hasCachedResults=!1,this.current=!1,this.Za=Ve(),this.mutatedKeys=Ve(),this.Xa=dE(e),this.eu=new Do(this.Xa)}get tu(){return this.Ha}nu(e,t){const i=t?t.ru:new gv,o=t?t.eu:this.eu;let l=t?t.mutatedKeys:this.mutatedKeys,h=o,f=!1;const p=this.query.limitType==="F"&&o.size===this.query.limit?o.last():null,y=this.query.limitType==="L"&&o.size===this.query.limit?o.first():null;if(e.inorderTraversal(((E,T)=>{const S=o.get(E),V=qc(this.query,T)?T:null,L=!!S&&this.mutatedKeys.has(S.key),z=!!V&&(V.hasLocalMutations||this.mutatedKeys.has(V.key)&&V.hasCommittedMutations);let F=!1;S&&V?S.data.isEqual(V.data)?L!==z&&(i.track({type:3,doc:V}),F=!0):this.iu(S,V)||(i.track({type:2,doc:V}),F=!0,(p&&this.Xa(V,p)>0||y&&this.Xa(V,y)<0)&&(f=!0)):!S&&V?(i.track({type:0,doc:V}),F=!0):S&&!V&&(i.track({type:1,doc:S}),F=!0,(p||y)&&(f=!0)),F&&(V?(h=h.add(V),l=z?l.add(E):l.delete(E)):(h=h.delete(E),l=l.delete(E)))})),this.query.limit!==null)for(;h.size>this.query.limit;){const E=this.query.limitType==="F"?h.last():h.first();h=h.delete(E.key),l=l.delete(E.key),i.track({type:1,doc:E})}return{eu:h,ru:i,Ds:f,mutatedKeys:l}}iu(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,i,o){const l=this.eu;this.eu=e.eu,this.mutatedKeys=e.mutatedKeys;const h=e.ru.pa();h.sort(((E,T)=>(function(V,L){const z=F=>{switch(F){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Ie(20277,{At:F})}};return z(V)-z(L)})(E.type,T.type)||this.Xa(E.doc,T.doc))),this.su(i),o=o!=null&&o;const f=t&&!o?this.ou():[],p=this.Za.size===0&&this.current&&!o?1:0,y=p!==this.Ya;return this.Ya=p,h.length!==0||y?{snapshot:new jo(this.query,e.eu,l,h,e.mutatedKeys,p===0,y,!1,!!i&&i.resumeToken.approximateByteSize()>0),_u:f}:{_u:f}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({eu:this.eu,ru:new gv,mutatedKeys:this.mutatedKeys,Ds:!1},!1)):{_u:[]}}au(e){return!this.Ha.has(e)&&!!this.eu.has(e)&&!this.eu.get(e).hasLocalMutations}su(e){e&&(e.addedDocuments.forEach((t=>this.Ha=this.Ha.add(t))),e.modifiedDocuments.forEach((t=>{})),e.removedDocuments.forEach((t=>this.Ha=this.Ha.delete(t))),this.current=e.current)}ou(){if(!this.current)return[];const e=this.Za;this.Za=Ve(),this.eu.forEach((i=>{this.au(i.key)&&(this.Za=this.Za.add(i.key))}));const t=[];return e.forEach((i=>{this.Za.has(i)||t.push(new HE(i))})),this.Za.forEach((i=>{e.has(i)||t.push(new qE(i))})),t}uu(e){this.Ha=e.qs,this.Za=Ve();const t=this.nu(e.documents);return this.applyChanges(t,!0)}cu(){return jo.fromInitialDocuments(this.query,this.eu,this.mutatedKeys,this.Ya===0,this.hasCachedResults)}}const _p="SyncEngine";class aR{constructor(e,t,i){this.query=e,this.targetId=t,this.view=i}}class lR{constructor(e){this.key=e,this.lu=!1}}class uR{constructor(e,t,i,o,l,h){this.localStore=e,this.remoteStore=t,this.eventManager=i,this.sharedClientState=o,this.currentUser=l,this.maxConcurrentLimboResolutions=h,this.hu={},this.Pu=new Rs((f=>hE(f)),Wc),this.Tu=new Map,this.Iu=new Set,this.du=new nt(_e.comparator),this.Eu=new Map,this.Au=new sp,this.Ru={},this.Vu=new Map,this.mu=Mo.ur(),this.onlineState="Unknown",this.fu=void 0}get isPrimaryClient(){return this.fu===!0}}async function cR(r,e,t=!0){const i=JE(r);let o;const l=i.Pu.get(e);return l?(i.sharedClientState.addLocalQueryTarget(l.targetId),o=l.view.cu()):o=await GE(i,e,t,!0),o}async function hR(r,e){const t=JE(r);await GE(t,e,!0,!1)}async function GE(r,e,t,i){const o=await xC(r.localStore,cr(e)),l=o.targetId,h=r.sharedClientState.addLocalQueryTarget(l,t);let f;return i&&(f=await dR(r,e,l,h==="current",o.resumeToken)),r.isPrimaryClient&&t&&FE(r.remoteStore,o),f}async function dR(r,e,t,i,o){r.gu=(T,S,V)=>(async function(z,F,oe,Y){let re=F.view.nu(oe);re.Ds&&(re=await cv(z.localStore,F.query,!1).then((({documents:k})=>F.view.nu(k,re))));const ye=Y&&Y.targetChanges.get(F.targetId),Re=Y&&Y.targetMismatches.get(F.targetId)!=null,ie=F.view.applyChanges(re,z.isPrimaryClient,ye,Re);return Ev(z,F.targetId,ie._u),ie.snapshot})(r,T,S,V);const l=await cv(r.localStore,e,!0),h=new oR(e,l.qs),f=h.nu(l.documents),p=Al.createSynthesizedTargetChangeForCurrentChange(t,i&&r.onlineState!=="Offline",o),y=h.applyChanges(f,r.isPrimaryClient,p);Ev(r,t,y._u);const E=new aR(e,t,h);return r.Pu.set(e,E),r.Tu.has(t)?r.Tu.get(t).push(e):r.Tu.set(t,[e]),y.snapshot}async function fR(r,e,t){const i=Pe(r),o=i.Pu.get(e),l=i.Tu.get(o.targetId);if(l.length>1)return i.Tu.set(o.targetId,l.filter((h=>!Wc(h,e)))),void i.Pu.delete(e);i.isPrimaryClient?(i.sharedClientState.removeLocalQueryTarget(o.targetId),i.sharedClientState.isActiveQueryTarget(o.targetId)||await If(i.localStore,o.targetId,!1).then((()=>{i.sharedClientState.clearQueryState(o.targetId),t&&up(i.remoteStore,o.targetId),Pf(i,o.targetId)})).catch(Go)):(Pf(i,o.targetId),await If(i.localStore,o.targetId,!0))}async function pR(r,e){const t=Pe(r),i=t.Pu.get(e),o=t.Tu.get(i.targetId);t.isPrimaryClient&&o.length===1&&(t.sharedClientState.removeLocalQueryTarget(i.targetId),up(t.remoteStore,i.targetId))}async function mR(r,e,t){const i=TR(r);try{const o=await(function(h,f){const p=Pe(h),y=qe.now(),E=f.reduce(((V,L)=>V.add(L.key)),Ve());let T,S;return p.persistence.runTransaction("Locally write mutations","readwrite",(V=>{let L=Br(),z=Ve();return p.Os.getEntries(V,E).next((F=>{L=F,L.forEach(((oe,Y)=>{Y.isValidDocument()||(z=z.add(oe))}))})).next((()=>p.localDocuments.getOverlayedDocuments(V,L))).next((F=>{T=F;const oe=[];for(const Y of f){const re=x1(Y,T.get(Y.key).overlayedDocument);re!=null&&oe.push(new Bi(Y.key,re,rE(re.value.mapValue),kn.exists(!0)))}return p.mutationQueue.addMutationBatch(V,y,oe,f)})).next((F=>{S=F;const oe=F.applyToLocalDocumentSet(T,z);return p.documentOverlayCache.saveOverlays(V,F.batchId,oe)}))})).then((()=>({batchId:S.batchId,changes:pE(T)})))})(i.localStore,e);i.sharedClientState.addPendingMutation(o.batchId),(function(h,f,p){let y=h.Ru[h.currentUser.toKey()];y||(y=new nt(Ne)),y=y.insert(f,p),h.Ru[h.currentUser.toKey()]=y})(i,o.batchId,t),await Cl(i,o.changes),await Xc(i.remoteStore)}catch(o){const l=pp(o,"Failed to persist write");t.reject(l)}}async function KE(r,e){const t=Pe(r);try{const i=await RC(t.localStore,e);e.targetChanges.forEach(((o,l)=>{const h=t.Eu.get(l);h&&(Be(o.addedDocuments.size+o.modifiedDocuments.size+o.removedDocuments.size<=1,22616),o.addedDocuments.size>0?h.lu=!0:o.modifiedDocuments.size>0?Be(h.lu,14607):o.removedDocuments.size>0&&(Be(h.lu,42227),h.lu=!1))})),await Cl(t,i,e)}catch(i){await Go(i)}}function _v(r,e,t){const i=Pe(r);if(i.isPrimaryClient&&t===0||!i.isPrimaryClient&&t===1){const o=[];i.Pu.forEach(((l,h)=>{const f=h.view.va(e);f.snapshot&&o.push(f.snapshot)})),(function(h,f){const p=Pe(h);p.onlineState=f;let y=!1;p.queries.forEach(((E,T)=>{for(const S of T.wa)S.va(f)&&(y=!0)})),y&&yp(p)})(i.eventManager,e),o.length&&i.hu.J_(o),i.onlineState=e,i.isPrimaryClient&&i.sharedClientState.setOnlineState(e)}}async function gR(r,e,t){const i=Pe(r);i.sharedClientState.updateQueryState(e,"rejected",t);const o=i.Eu.get(e),l=o&&o.key;if(l){let h=new nt(_e.comparator);h=h.insert(l,$t.newNoDocument(l,Ae.min()));const f=Ve().add(l),p=new Kc(Ae.min(),new Map,new nt(Ne),h,f);await KE(i,p),i.du=i.du.remove(l),i.Eu.delete(e),Ep(i)}else await If(i.localStore,e,!1).then((()=>Pf(i,e,t))).catch(Go)}async function yR(r,e){const t=Pe(r),i=e.batch.batchId;try{const o=await CC(t.localStore,e);YE(t,i,null),QE(t,i),t.sharedClientState.updateMutationState(i,"acknowledged"),await Cl(t,o)}catch(o){await Go(o)}}async function vR(r,e,t){const i=Pe(r);try{const o=await(function(h,f){const p=Pe(h);return p.persistence.runTransaction("Reject batch","readwrite-primary",(y=>{let E;return p.mutationQueue.lookupMutationBatch(y,f).next((T=>(Be(T!==null,37113),E=T.keys(),p.mutationQueue.removeMutationBatch(y,T)))).next((()=>p.mutationQueue.performConsistencyCheck(y))).next((()=>p.documentOverlayCache.removeOverlaysForBatchId(y,E,f))).next((()=>p.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(y,E))).next((()=>p.localDocuments.getDocuments(y,E)))}))})(i.localStore,e);YE(i,e,t),QE(i,e),i.sharedClientState.updateMutationState(e,"rejected",t),await Cl(i,o)}catch(o){await Go(o)}}function QE(r,e){(r.Vu.get(e)||[]).forEach((t=>{t.resolve()})),r.Vu.delete(e)}function YE(r,e,t){const i=Pe(r);let o=i.Ru[i.currentUser.toKey()];if(o){const l=o.get(e);l&&(t?l.reject(t):l.resolve(),o=o.remove(e)),i.Ru[i.currentUser.toKey()]=o}}function Pf(r,e,t=null){r.sharedClientState.removeLocalQueryTarget(e);for(const i of r.Tu.get(e))r.Pu.delete(i),t&&r.hu.pu(i,t);r.Tu.delete(e),r.isPrimaryClient&&r.Au.zr(e).forEach((i=>{r.Au.containsKey(i)||XE(r,i)}))}function XE(r,e){r.Iu.delete(e.path.canonicalString());const t=r.du.get(e);t!==null&&(up(r.remoteStore,t),r.du=r.du.remove(e),r.Eu.delete(t),Ep(r))}function Ev(r,e,t){for(const i of t)i instanceof qE?(r.Au.addReference(i.key,e),_R(r,i)):i instanceof HE?(he(_p,"Document no longer in limbo: "+i.key),r.Au.removeReference(i.key,e),r.Au.containsKey(i.key)||XE(r,i.key)):Ie(19791,{yu:i})}function _R(r,e){const t=e.key,i=t.path.canonicalString();r.du.get(t)||r.Iu.has(i)||(he(_p,"New document in limbo: "+t),r.Iu.add(i),Ep(r))}function Ep(r){for(;r.Iu.size>0&&r.du.size<r.maxConcurrentLimboResolutions;){const e=r.Iu.values().next().value;r.Iu.delete(e);const t=new _e(Qe.fromString(e)),i=r.mu.next();r.Eu.set(i,new lR(t)),r.du=r.du.insert(t,i),FE(r.remoteStore,new Ti(cr($c(t.path)),i,"TargetPurposeLimboResolution",Uc.ue))}}async function Cl(r,e,t){const i=Pe(r),o=[],l=[],h=[];i.Pu.isEmpty()||(i.Pu.forEach(((f,p)=>{h.push(i.gu(p,e,t).then((y=>{var E;if((y||t)&&i.isPrimaryClient){const T=y?!y.fromCache:(E=t==null?void 0:t.targetChanges.get(p.targetId))===null||E===void 0?void 0:E.current;i.sharedClientState.updateQueryState(p.targetId,T?"current":"not-current")}if(y){o.push(y);const T=ap.Es(p.targetId,y);l.push(T)}})))})),await Promise.all(h),i.hu.J_(o),await(async function(p,y){const E=Pe(p);try{await E.persistence.runTransaction("notifyLocalViewChanges","readwrite",(T=>K.forEach(y,(S=>K.forEach(S.Is,(V=>E.persistence.referenceDelegate.addReference(T,S.targetId,V))).next((()=>K.forEach(S.ds,(V=>E.persistence.referenceDelegate.removeReference(T,S.targetId,V)))))))))}catch(T){if(!Ko(T))throw T;he(lp,"Failed to update sequence numbers: "+T)}for(const T of y){const S=T.targetId;if(!T.fromCache){const V=E.Fs.get(S),L=V.snapshotVersion,z=V.withLastLimboFreeSnapshotVersion(L);E.Fs=E.Fs.insert(S,z)}}})(i.localStore,l))}async function ER(r,e){const t=Pe(r);if(!t.currentUser.isEqual(e)){he(_p,"User change. New user:",e.toKey());const i=await OE(t.localStore,e);t.currentUser=e,(function(l,h){l.Vu.forEach((f=>{f.forEach((p=>{p.reject(new ae(G.CANCELLED,h))}))})),l.Vu.clear()})(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,i.removedBatchIds,i.addedBatchIds),await Cl(t,i.Bs)}}function wR(r,e){const t=Pe(r),i=t.Eu.get(e);if(i&&i.lu)return Ve().add(i.key);{let o=Ve();const l=t.Tu.get(e);if(!l)return o;for(const h of l){const f=t.Pu.get(h);o=o.unionWith(f.view.tu)}return o}}function JE(r){const e=Pe(r);return e.remoteStore.remoteSyncer.applyRemoteEvent=KE.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=wR.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=gR.bind(null,e),e.hu.J_=iR.bind(null,e.eventManager),e.hu.pu=sR.bind(null,e.eventManager),e}function TR(r){const e=Pe(r);return e.remoteStore.remoteSyncer.applySuccessfulWrite=yR.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=vR.bind(null,e),e}class kc{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Qc(e.databaseInfo.databaseId),this.sharedClientState=this.bu(e),this.persistence=this.Du(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Cu(e,this.localStore),this.indexBackfillerScheduler=this.Fu(e,this.localStore)}Cu(e,t){return null}Fu(e,t){return null}vu(e){return PC(this.persistence,new IC,e.initialUser,this.serializer)}Du(e){return new VE(op.Vi,this.serializer)}bu(e){return new bC}async terminate(){var e,t;(e=this.gcScheduler)===null||e===void 0||e.stop(),(t=this.indexBackfillerScheduler)===null||t===void 0||t.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}kc.provider={build:()=>new kc};class IR extends kc{constructor(e){super(),this.cacheSizeBytes=e}Cu(e,t){Be(this.persistence.referenceDelegate instanceof Cc,46915);const i=this.persistence.referenceDelegate.garbageCollector;return new lC(i,e.asyncQueue,t)}Du(e){const t=this.cacheSizeBytes!==void 0?sn.withCacheSize(this.cacheSizeBytes):sn.DEFAULT;return new VE((i=>Cc.Vi(i,t)),this.serializer)}}class Cf{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=i=>_v(this.syncEngine,i,1),this.remoteStore.remoteSyncer.handleCredentialChange=ER.bind(null,this.syncEngine),await tR(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return(function(){return new rR})()}createDatastore(e){const t=Qc(e.databaseInfo.databaseId),i=(function(l){return new jC(l)})(e.databaseInfo);return(function(l,h,f,p){return new zC(l,h,f,p)})(e.authCredentials,e.appCheckCredentials,i,t)}createRemoteStore(e){return(function(i,o,l,h,f){return new WC(i,o,l,h,f)})(this.localStore,this.datastore,e.asyncQueue,(t=>_v(this.syncEngine,t,0)),(function(){return fv.C()?new fv:new VC})())}createSyncEngine(e,t){return(function(o,l,h,f,p,y,E){const T=new uR(o,l,h,f,p,y);return E&&(T.fu=!0),T})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){var e,t;await(async function(o){const l=Pe(o);he(Ps,"RemoteStore shutting down."),l.Ia.add(5),await Pl(l),l.Ea.shutdown(),l.Aa.set("Unknown")})(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(t=this.eventManager)===null||t===void 0||t.terminate()}}Cf.provider={build:()=>new Cf};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wp{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.xu(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.xu(this.observer.error,e):Ur("Uncaught Error in snapshot listener:",e.toString()))}Ou(){this.muted=!0}xu(e,t){setTimeout((()=>{this.muted||e(t)}),0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Li="FirestoreClient";class SR{constructor(e,t,i,o,l){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=i,this.databaseInfo=o,this.user=zt.UNAUTHENTICATED,this.clientId=Kf.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=l,this.authCredentials.start(i,(async h=>{he(Li,"Received user=",h.uid),await this.authCredentialListener(h),this.user=h})),this.appCheckCredentials.start(i,(h=>(he(Li,"Received new app check token=",h),this.appCheckCredentialListener(h,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Mr;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const i=pp(t,"Failed to shutdown persistence");e.reject(i)}})),e.promise}}async function Kd(r,e){r.asyncQueue.verifyOperationInProgress(),he(Li,"Initializing OfflineComponentProvider");const t=r.configuration;await e.initialize(t);let i=t.initialUser;r.setCredentialChangeListener((async o=>{i.isEqual(o)||(await OE(e.localStore,o),i=o)})),e.persistence.setDatabaseDeletedListener((()=>{Ni("Terminating Firestore due to IndexedDb database deletion"),r.terminate().then((()=>{he("Terminating Firestore due to IndexedDb database deletion completed successfully")})).catch((o=>{Ni("Terminating Firestore due to IndexedDb database deletion failed",o)}))})),r._offlineComponents=e}async function wv(r,e){r.asyncQueue.verifyOperationInProgress();const t=await AR(r);he(Li,"Initializing OnlineComponentProvider"),await e.initialize(t,r.configuration),r.setCredentialChangeListener((i=>mv(e.remoteStore,i))),r.setAppCheckTokenChangeListener(((i,o)=>mv(e.remoteStore,o))),r._onlineComponents=e}async function AR(r){if(!r._offlineComponents)if(r._uninitializedComponentsProvider){he(Li,"Using user provided OfflineComponentProvider");try{await Kd(r,r._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!(function(o){return o.name==="FirebaseError"?o.code===G.FAILED_PRECONDITION||o.code===G.UNIMPLEMENTED:!(typeof DOMException<"u"&&o instanceof DOMException)||o.code===22||o.code===20||o.code===11})(t))throw t;Ni("Error using user provided cache. Falling back to memory cache: "+t),await Kd(r,new kc)}}else he(Li,"Using default OfflineComponentProvider"),await Kd(r,new IR(void 0));return r._offlineComponents}async function ZE(r){return r._onlineComponents||(r._uninitializedComponentsProvider?(he(Li,"Using user provided OnlineComponentProvider"),await wv(r,r._uninitializedComponentsProvider._online)):(he(Li,"Using default OnlineComponentProvider"),await wv(r,new Cf))),r._onlineComponents}function PR(r){return ZE(r).then((e=>e.syncEngine))}async function Nc(r){const e=await ZE(r),t=e.eventManager;return t.onListen=cR.bind(null,e.syncEngine),t.onUnlisten=fR.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=hR.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=pR.bind(null,e.syncEngine),t}function CR(r,e,t={}){const i=new Mr;return r.asyncQueue.enqueueAndForget((async()=>(function(l,h,f,p,y){const E=new wp({next:S=>{E.Ou(),h.enqueueAndForget((()=>gp(l,T)));const V=S.docs.has(f);!V&&S.fromCache?y.reject(new ae(G.UNAVAILABLE,"Failed to get document because the client is offline.")):V&&S.fromCache&&p&&p.source==="server"?y.reject(new ae(G.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):y.resolve(S)},error:S=>y.reject(S)}),T=new vp($c(f.path),E,{includeMetadataChanges:!0,ka:!0});return mp(l,T)})(await Nc(r),r.asyncQueue,e,t,i))),i.promise}function RR(r,e,t={}){const i=new Mr;return r.asyncQueue.enqueueAndForget((async()=>(function(l,h,f,p,y){const E=new wp({next:S=>{E.Ou(),h.enqueueAndForget((()=>gp(l,T))),S.fromCache&&p.source==="server"?y.reject(new ae(G.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):y.resolve(S)},error:S=>y.reject(S)}),T=new vp(f,E,{includeMetadataChanges:!0,ka:!0});return mp(l,T)})(await Nc(r),r.asyncQueue,e,t,i))),i.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ew(r){const e={};return r.timeoutSeconds!==void 0&&(e.timeoutSeconds=r.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Tv=new Map;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tw="firestore.googleapis.com",Iv=!0;class Sv{constructor(e){var t,i;if(e.host===void 0){if(e.ssl!==void 0)throw new ae(G.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=tw,this.ssl=Iv}else this.host=e.host,this.ssl=(t=e.ssl)!==null&&t!==void 0?t:Iv;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=bE;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<oC)throw new ae(G.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}qP("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=ew((i=e.experimentalLongPollingOptions)!==null&&i!==void 0?i:{}),(function(l){if(l.timeoutSeconds!==void 0){if(isNaN(l.timeoutSeconds))throw new ae(G.INVALID_ARGUMENT,`invalid long polling timeout: ${l.timeoutSeconds} (must not be NaN)`);if(l.timeoutSeconds<5)throw new ae(G.INVALID_ARGUMENT,`invalid long polling timeout: ${l.timeoutSeconds} (minimum allowed value is 5)`);if(l.timeoutSeconds>30)throw new ae(G.INVALID_ARGUMENT,`invalid long polling timeout: ${l.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(i,o){return i.timeoutSeconds===o.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Jc{constructor(e,t,i,o){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=i,this._app=o,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Sv({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new ae(G.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new ae(G.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Sv(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=(function(i){if(!i)return new LP;switch(i.type){case"firstParty":return new UP(i.sessionIndex||"0",i.iamToken||null,i.authTokenFactory||null);case"provider":return i.client;default:throw new ae(G.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(t){const i=Tv.get(t);i&&(he("ComponentProvider","Removing Datastore"),Tv.delete(t),i.terminate())})(this),Promise.resolve()}}function kR(r,e,t,i={}){var o;r=an(r,Jc);const l=$o(e),h=r._getSettings(),f=Object.assign(Object.assign({},h),{emulatorOptions:r._getEmulatorOptions()}),p=`${e}:${t}`;l&&(Qv(`https://${p}`),Yv("Firestore",!0)),h.host!==tw&&h.host!==p&&Ni("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const y=Object.assign(Object.assign({},h),{host:p,ssl:l,emulatorOptions:i});if(!ws(y,f)&&(r._setSettings(y),i.mockUserToken)){let E,T;if(typeof i.mockUserToken=="string")E=i.mockUserToken,T=zt.MOCK_USER;else{E=HT(i.mockUserToken,(o=r._app)===null||o===void 0?void 0:o.options.projectId);const S=i.mockUserToken.sub||i.mockUserToken.user_id;if(!S)throw new ae(G.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");T=new zt(S)}r._authCredentials=new MP(new W_(E,T))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ns{constructor(e,t,i){this.converter=t,this._query=i,this.type="query",this.firestore=e}withConverter(e){return new Ns(this.firestore,e,this._query)}}class ot{constructor(e,t,i){this.converter=t,this._key=i,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Ri(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new ot(this.firestore,e,this._key)}toJSON(){return{type:ot._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,t,i){if(Tl(t,ot._jsonSchema))return new ot(e,i||null,new _e(Qe.fromString(t.referencePath)))}}ot._jsonSchemaVersion="firestore/documentReference/1.0",ot._jsonSchema={type:gt("string",ot._jsonSchemaVersion),referencePath:gt("string")};class Ri extends Ns{constructor(e,t,i){super(e,t,$c(i)),this._path=i,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new ot(this.firestore,null,new _e(e))}withConverter(e){return new Ri(this.firestore,e,this._path)}}function ki(r,e,...t){if(r=St(r),H_("collection","path",e),r instanceof Jc){const i=Qe.fromString(e,...t);return My(i),new Ri(r,null,i)}{if(!(r instanceof ot||r instanceof Ri))throw new ae(G.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=r._path.child(Qe.fromString(e,...t));return My(i),new Ri(r.firestore,null,i)}}function Pn(r,e,...t){if(r=St(r),arguments.length===1&&(e=Kf.newId()),H_("doc","path",e),r instanceof Jc){const i=Qe.fromString(e,...t);return Ly(i),new ot(r,null,new _e(i))}{if(!(r instanceof ot||r instanceof Ri))throw new ae(G.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=r._path.child(Qe.fromString(e,...t));return Ly(i),new ot(r.firestore,r instanceof Ri?r.converter:null,new _e(i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Av="AsyncQueue";class Pv{constructor(e=Promise.resolve()){this.Zu=[],this.Xu=!1,this.ec=[],this.tc=null,this.nc=!1,this.rc=!1,this.sc=[],this.F_=new ME(this,"async_queue_retry"),this.oc=()=>{const i=Gd();i&&he(Av,"Visibility state changed to "+i.visibilityState),this.F_.y_()},this._c=e;const t=Gd();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this.oc)}get isShuttingDown(){return this.Xu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.ac(),this.uc(e)}enterRestrictedMode(e){if(!this.Xu){this.Xu=!0,this.rc=e||!1;const t=Gd();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this.oc)}}enqueue(e){if(this.ac(),this.Xu)return new Promise((()=>{}));const t=new Mr;return this.uc((()=>this.Xu&&this.rc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise))).then((()=>t.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Zu.push(e),this.cc())))}async cc(){if(this.Zu.length!==0){try{await this.Zu[0](),this.Zu.shift(),this.F_.reset()}catch(e){if(!Ko(e))throw e;he(Av,"Operation failed with retryable error: "+e)}this.Zu.length>0&&this.F_.g_((()=>this.cc()))}}uc(e){const t=this._c.then((()=>(this.nc=!0,e().catch((i=>{throw this.tc=i,this.nc=!1,Ur("INTERNAL UNHANDLED ERROR: ",Cv(i)),i})).then((i=>(this.nc=!1,i))))));return this._c=t,t}enqueueAfterDelay(e,t,i){this.ac(),this.sc.indexOf(e)>-1&&(t=0);const o=fp.createAndSchedule(this,e,t,i,(l=>this.lc(l)));return this.ec.push(o),o}ac(){this.tc&&Ie(47125,{hc:Cv(this.tc)})}verifyOperationInProgress(){}async Pc(){let e;do e=this._c,await e;while(e!==this._c)}Tc(e){for(const t of this.ec)if(t.timerId===e)return!0;return!1}Ic(e){return this.Pc().then((()=>{this.ec.sort(((t,i)=>t.targetTimeMs-i.targetTimeMs));for(const t of this.ec)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.Pc()}))}dc(e){this.sc.push(e)}lc(e){const t=this.ec.indexOf(e);this.ec.splice(t,1)}}function Cv(r){let e=r.message||"";return r.stack&&(e=r.stack.includes(r.message)?r.stack:r.message+`
`+r.stack),e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Rv(r){return(function(t,i){if(typeof t!="object"||t===null)return!1;const o=t;for(const l of i)if(l in o&&typeof o[l]=="function")return!0;return!1})(r,["next","error","complete"])}class zr extends Jc{constructor(e,t,i,o){super(e,t,i,o),this.type="firestore",this._queue=new Pv,this._persistenceKey=(o==null?void 0:o.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new Pv(e),this._firestoreClient=void 0,await e}}}function NR(r,e){const t=typeof r=="object"?r:e_(),i=typeof r=="string"?r:Ec,o=Mf(t,"firestore").getImmediate({identifier:i});if(!o._initialized){const l=WT("firestore");l&&kR(o,...l)}return o}function Zc(r){if(r._terminated)throw new ae(G.FAILED_PRECONDITION,"The client has already been terminated.");return r._firestoreClient||xR(r),r._firestoreClient}function xR(r){var e,t,i;const o=r._freezeSettings(),l=(function(f,p,y,E){return new n1(f,p,y,E.host,E.ssl,E.experimentalForceLongPolling,E.experimentalAutoDetectLongPolling,ew(E.experimentalLongPollingOptions),E.useFetchStreams,E.isUsingEmulator)})(r._databaseId,((e=r._app)===null||e===void 0?void 0:e.options.appId)||"",r._persistenceKey,o);r._componentsProvider||!((t=o.localCache)===null||t===void 0)&&t._offlineComponentProvider&&(!((i=o.localCache)===null||i===void 0)&&i._onlineComponentProvider)&&(r._componentsProvider={_offline:o.localCache._offlineComponentProvider,_online:o.localCache._onlineComponentProvider}),r._firestoreClient=new SR(r._authCredentials,r._appCheckCredentials,r._queue,l,r._componentsProvider&&(function(f){const p=f==null?void 0:f._online.build();return{_offline:f==null?void 0:f._offline.build(p),_online:p}})(r._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rn{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Rn(Lt.fromBase64String(e))}catch(t){throw new ae(G.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new Rn(Lt.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:Rn._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(Tl(e,Rn._jsonSchema))return Rn.fromBase64String(e.bytes)}}Rn._jsonSchemaVersion="firestore/bytes/1.0",Rn._jsonSchema={type:gt("string",Rn._jsonSchemaVersion),bytes:gt("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eh{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new ae(G.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Ot(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tp{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dr{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new ae(G.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new ae(G.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return Ne(this._lat,e._lat)||Ne(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:dr._jsonSchemaVersion}}static fromJSON(e){if(Tl(e,dr._jsonSchema))return new dr(e.latitude,e.longitude)}}dr._jsonSchemaVersion="firestore/geoPoint/1.0",dr._jsonSchema={type:gt("string",dr._jsonSchemaVersion),latitude:gt("number"),longitude:gt("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fr{constructor(e){this._values=(e||[]).map((t=>t))}toArray(){return this._values.map((e=>e))}isEqual(e){return(function(i,o){if(i.length!==o.length)return!1;for(let l=0;l<i.length;++l)if(i[l]!==o[l])return!1;return!0})(this._values,e._values)}toJSON(){return{type:fr._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(Tl(e,fr._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every((t=>typeof t=="number")))return new fr(e.vectorValues);throw new ae(G.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}fr._jsonSchemaVersion="firestore/vectorValue/1.0",fr._jsonSchema={type:gt("string",fr._jsonSchemaVersion),vectorValues:gt("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DR=/^__.*__$/;class bR{constructor(e,t,i){this.data=e,this.fieldMask=t,this.fieldTransforms=i}toMutation(e,t){return this.fieldMask!==null?new Bi(e,this.data,this.fieldMask,t,this.fieldTransforms):new Sl(e,this.data,t,this.fieldTransforms)}}class nw{constructor(e,t,i){this.data=e,this.fieldMask=t,this.fieldTransforms=i}toMutation(e,t){return new Bi(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function rw(r){switch(r){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Ie(40011,{Ec:r})}}class Ip{constructor(e,t,i,o,l,h){this.settings=e,this.databaseId=t,this.serializer=i,this.ignoreUndefinedProperties=o,l===void 0&&this.Ac(),this.fieldTransforms=l||[],this.fieldMask=h||[]}get path(){return this.settings.path}get Ec(){return this.settings.Ec}Rc(e){return new Ip(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Vc(e){var t;const i=(t=this.path)===null||t===void 0?void 0:t.child(e),o=this.Rc({path:i,mc:!1});return o.fc(e),o}gc(e){var t;const i=(t=this.path)===null||t===void 0?void 0:t.child(e),o=this.Rc({path:i,mc:!1});return o.Ac(),o}yc(e){return this.Rc({path:void 0,mc:!0})}wc(e){return xc(e,this.settings.methodName,this.settings.Sc||!1,this.path,this.settings.bc)}contains(e){return this.fieldMask.find((t=>e.isPrefixOf(t)))!==void 0||this.fieldTransforms.find((t=>e.isPrefixOf(t.field)))!==void 0}Ac(){if(this.path)for(let e=0;e<this.path.length;e++)this.fc(this.path.get(e))}fc(e){if(e.length===0)throw this.wc("Document fields must not be empty");if(rw(this.Ec)&&DR.test(e))throw this.wc('Document fields cannot begin and end with "__"')}}class VR{constructor(e,t,i){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=i||Qc(e)}Dc(e,t,i,o=!1){return new Ip({Ec:e,methodName:t,bc:i,path:Ot.emptyPath(),mc:!1,Sc:o},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function th(r){const e=r._freezeSettings(),t=Qc(r._databaseId);return new VR(r._databaseId,!!e.ignoreUndefinedProperties,t)}function iw(r,e,t,i,o,l={}){const h=r.Dc(l.merge||l.mergeFields?2:0,e,t,o);Sp("Data must be an object, but it was:",h,i);const f=sw(i,h);let p,y;if(l.merge)p=new mn(h.fieldMask),y=h.fieldTransforms;else if(l.mergeFields){const E=[];for(const T of l.mergeFields){const S=Rf(e,T,t);if(!h.contains(S))throw new ae(G.INVALID_ARGUMENT,`Field '${S}' is specified in your field mask but missing from your input data.`);aw(E,S)||E.push(S)}p=new mn(E),y=h.fieldTransforms.filter((T=>p.covers(T.field)))}else p=null,y=h.fieldTransforms;return new bR(new on(f),p,y)}class nh extends Tp{_toFieldTransform(e){if(e.Ec!==2)throw e.Ec===1?e.wc(`${this._methodName}() can only appear at the top level of your update data`):e.wc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof nh}}function OR(r,e,t,i){const o=r.Dc(1,e,t);Sp("Data must be an object, but it was:",o,i);const l=[],h=on.empty();Ui(i,((p,y)=>{const E=Ap(e,p,t);y=St(y);const T=o.gc(E);if(y instanceof nh)l.push(E);else{const S=Rl(y,T);S!=null&&(l.push(E),h.set(E,S))}}));const f=new mn(l);return new nw(h,f,o.fieldTransforms)}function LR(r,e,t,i,o,l){const h=r.Dc(1,e,t),f=[Rf(e,i,t)],p=[o];if(l.length%2!=0)throw new ae(G.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let S=0;S<l.length;S+=2)f.push(Rf(e,l[S])),p.push(l[S+1]);const y=[],E=on.empty();for(let S=f.length-1;S>=0;--S)if(!aw(y,f[S])){const V=f[S];let L=p[S];L=St(L);const z=h.gc(V);if(L instanceof nh)y.push(V);else{const F=Rl(L,z);F!=null&&(y.push(V),E.set(V,F))}}const T=new mn(y);return new nw(E,T,h.fieldTransforms)}function MR(r,e,t,i=!1){return Rl(t,r.Dc(i?4:3,e))}function Rl(r,e){if(ow(r=St(r)))return Sp("Unsupported field value:",e,r),sw(r,e);if(r instanceof Tp)return(function(i,o){if(!rw(o.Ec))throw o.wc(`${i._methodName}() can only be used with update() and set()`);if(!o.path)throw o.wc(`${i._methodName}() is not currently supported inside arrays`);const l=i._toFieldTransform(o);l&&o.fieldTransforms.push(l)})(r,e),null;if(r===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),r instanceof Array){if(e.settings.mc&&e.Ec!==4)throw e.wc("Nested arrays are not supported");return(function(i,o){const l=[];let h=0;for(const f of i){let p=Rl(f,o.yc(h));p==null&&(p={nullValue:"NULL_VALUE"}),l.push(p),h++}return{arrayValue:{values:l}}})(r,e)}return(function(i,o){if((i=St(i))===null)return{nullValue:"NULL_VALUE"};if(typeof i=="number")return A1(o.serializer,i);if(typeof i=="boolean")return{booleanValue:i};if(typeof i=="string")return{stringValue:i};if(i instanceof Date){const l=qe.fromDate(i);return{timestampValue:Pc(o.serializer,l)}}if(i instanceof qe){const l=new qe(i.seconds,1e3*Math.floor(i.nanoseconds/1e3));return{timestampValue:Pc(o.serializer,l)}}if(i instanceof dr)return{geoPointValue:{latitude:i.latitude,longitude:i.longitude}};if(i instanceof Rn)return{bytesValue:PE(o.serializer,i._byteString)};if(i instanceof ot){const l=o.databaseId,h=i.firestore._databaseId;if(!h.isEqual(l))throw o.wc(`Document reference is for database ${h.projectId}/${h.database} but should be for database ${l.projectId}/${l.database}`);return{referenceValue:ip(i.firestore._databaseId||o.databaseId,i._key.path)}}if(i instanceof fr)return(function(h,f){return{mapValue:{fields:{[tE]:{stringValue:nE},[wc]:{arrayValue:{values:h.toArray().map((y=>{if(typeof y!="number")throw f.wc("VectorValues must only contain numeric values.");return ep(f.serializer,y)}))}}}}}})(i,o);throw o.wc(`Unsupported field value: ${Fc(i)}`)})(r,e)}function sw(r,e){const t={};return Q_(r)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Ui(r,((i,o)=>{const l=Rl(o,e.Vc(i));l!=null&&(t[i]=l)})),{mapValue:{fields:t}}}function ow(r){return!(typeof r!="object"||r===null||r instanceof Array||r instanceof Date||r instanceof qe||r instanceof dr||r instanceof Rn||r instanceof ot||r instanceof Tp||r instanceof fr)}function Sp(r,e,t){if(!ow(t)||!G_(t)){const i=Fc(t);throw i==="an object"?e.wc(r+" a custom object"):e.wc(r+" "+i)}}function Rf(r,e,t){if((e=St(e))instanceof eh)return e._internalPath;if(typeof e=="string")return Ap(r,e);throw xc("Field path arguments must be of type string or ",r,!1,void 0,t)}const jR=new RegExp("[~\\*/\\[\\]]");function Ap(r,e,t){if(e.search(jR)>=0)throw xc(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,r,!1,void 0,t);try{return new eh(...e.split("."))._internalPath}catch{throw xc(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,r,!1,void 0,t)}}function xc(r,e,t,i,o){const l=i&&!i.isEmpty(),h=o!==void 0;let f=`Function ${e}() called with invalid data`;t&&(f+=" (via `toFirestore()`)"),f+=". ";let p="";return(l||h)&&(p+=" (found",l&&(p+=` in field ${i}`),h&&(p+=` in document ${o}`),p+=")"),new ae(G.INVALID_ARGUMENT,f+r+p)}function aw(r,e){return r.some((t=>t.isEqual(e)))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lw{constructor(e,t,i,o,l){this._firestore=e,this._userDataWriter=t,this._key=i,this._document=o,this._converter=l}get id(){return this._key.path.lastSegment()}get ref(){return new ot(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new FR(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(Pp("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}}class FR extends lw{data(){return super.data()}}function Pp(r,e){return typeof e=="string"?Ap(r,e):e instanceof eh?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uw(r){if(r.limitType==="L"&&r.explicitOrderBy.length===0)throw new ae(G.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Cp{}class UR extends Cp{}function cw(r,e,...t){let i=[];e instanceof Cp&&i.push(e),i=i.concat(t),(function(l){const h=l.filter((p=>p instanceof Rp)).length,f=l.filter((p=>p instanceof rh)).length;if(h>1||h>0&&f>0)throw new ae(G.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")})(i);for(const o of i)r=o._apply(r);return r}class rh extends UR{constructor(e,t,i){super(),this._field=e,this._op=t,this._value=i,this.type="where"}static _create(e,t,i){return new rh(e,t,i)}_apply(e){const t=this._parse(e);return dw(e._query,t),new Ns(e.firestore,e.converter,yf(e._query,t))}_parse(e){const t=th(e.firestore);return(function(l,h,f,p,y,E,T){let S;if(y.isKeyField()){if(E==="array-contains"||E==="array-contains-any")throw new ae(G.INVALID_ARGUMENT,`Invalid Query. You can't perform '${E}' queries on documentId().`);if(E==="in"||E==="not-in"){Nv(T,E);const L=[];for(const z of T)L.push(kv(p,l,z));S={arrayValue:{values:L}}}else S=kv(p,l,T)}else E!=="in"&&E!=="not-in"&&E!=="array-contains-any"||Nv(T,E),S=MR(f,h,T,E==="in"||E==="not-in");return mt.create(y,E,S)})(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value)}}function hw(r,e,t){const i=e,o=Pp("where",r);return rh._create(o,i,t)}class Rp extends Cp{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new Rp(e,t)}_parse(e){const t=this._queryConstraints.map((i=>i._parse(e))).filter((i=>i.getFilters().length>0));return t.length===1?t[0]:Gn.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return t.getFilters().length===0?e:((function(o,l){let h=o;const f=l.getFlattenedFilters();for(const p of f)dw(h,p),h=yf(h,p)})(e._query,t),new Ns(e.firestore,e.converter,yf(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}function kv(r,e,t){if(typeof(t=St(t))=="string"){if(t==="")throw new ae(G.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!cE(e)&&t.indexOf("/")!==-1)throw new ae(G.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const i=e.path.child(Qe.fromString(t));if(!_e.isDocumentKey(i))throw new ae(G.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${i}' is not because it has an odd number of segments (${i.length}).`);return qy(r,new _e(i))}if(t instanceof ot)return qy(r,t._key);throw new ae(G.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Fc(t)}.`)}function Nv(r,e){if(!Array.isArray(r)||r.length===0)throw new ae(G.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function dw(r,e){const t=(function(o,l){for(const h of o)for(const f of h.getFlattenedFilters())if(l.indexOf(f.op)>=0)return f.op;return null})(r.filters,(function(o){switch(o){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}})(e.op));if(t!==null)throw t===e.op?new ae(G.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new ae(G.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}class BR{convertValue(e,t="none"){switch(Vi(e)){case 0:return null;case 1:return e.booleanValue;case 2:return ct(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(bi(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw Ie(62114,{value:e})}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const i={};return Ui(e,((o,l)=>{i[o]=this.convertValue(l,t)})),i}convertVectorValue(e){var t,i,o;const l=(o=(i=(t=e.fields)===null||t===void 0?void 0:t[wc].arrayValue)===null||i===void 0?void 0:i.values)===null||o===void 0?void 0:o.map((h=>ct(h.doubleValue)));return new fr(l)}convertGeoPoint(e){return new dr(ct(e.latitude),ct(e.longitude))}convertArray(e,t){return(e.values||[]).map((i=>this.convertValue(i,t)))}convertServerTimestamp(e,t){switch(t){case"previous":const i=zc(e);return i==null?null:this.convertValue(i,t);case"estimate":return this.convertTimestamp(ul(e));default:return null}}convertTimestamp(e){const t=Di(e);return new qe(t.seconds,t.nanos)}convertDocumentKey(e,t){const i=Qe.fromString(e);Be(DE(i),9688,{name:e});const o=new cl(i.get(1),i.get(3)),l=new _e(i.popFirst(5));return o.isEqual(t)||Ur(`Document ${l} contains a document reference within a different database (${o.projectId}/${o.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),l}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fw(r,e,t){let i;return i=r?r.toFirestore(e):e,i}class Ya{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class _s extends lw{constructor(e,t,i,o,l,h){super(e,t,i,o,h),this._firestore=e,this._firestoreImpl=e,this.metadata=l}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new lc(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const i=this._document.data.field(Pp("DocumentSnapshot.get",e));if(i!==null)return this._userDataWriter.convertValue(i,t.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new ae(G.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,t={};return t.type=_s._jsonSchemaVersion,t.bundle="",t.bundleSource="DocumentSnapshot",t.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?t:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),t.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),t)}}_s._jsonSchemaVersion="firestore/documentSnapshot/1.0",_s._jsonSchema={type:gt("string",_s._jsonSchemaVersion),bundleSource:gt("string","DocumentSnapshot"),bundleName:gt("string"),bundle:gt("string")};class lc extends _s{data(e={}){return super.data(e)}}class Es{constructor(e,t,i,o){this._firestore=e,this._userDataWriter=t,this._snapshot=o,this.metadata=new Ya(o.hasPendingWrites,o.fromCache),this.query=i}get docs(){const e=[];return this.forEach((t=>e.push(t))),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach((i=>{e.call(t,new lc(this._firestore,this._userDataWriter,i.key,i,new Ya(this._snapshot.mutatedKeys.has(i.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new ae(G.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=(function(o,l){if(o._snapshot.oldDocs.isEmpty()){let h=0;return o._snapshot.docChanges.map((f=>{const p=new lc(o._firestore,o._userDataWriter,f.doc.key,f.doc,new Ya(o._snapshot.mutatedKeys.has(f.doc.key),o._snapshot.fromCache),o.query.converter);return f.doc,{type:"added",doc:p,oldIndex:-1,newIndex:h++}}))}{let h=o._snapshot.oldDocs;return o._snapshot.docChanges.filter((f=>l||f.type!==3)).map((f=>{const p=new lc(o._firestore,o._userDataWriter,f.doc.key,f.doc,new Ya(o._snapshot.mutatedKeys.has(f.doc.key),o._snapshot.fromCache),o.query.converter);let y=-1,E=-1;return f.type!==0&&(y=h.indexOf(f.doc.key),h=h.delete(f.doc.key)),f.type!==1&&(h=h.add(f.doc),E=h.indexOf(f.doc.key)),{type:zR(f.type),doc:p,oldIndex:y,newIndex:E}}))}})(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new ae(G.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=Es._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=Kf.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const t=[],i=[],o=[];return this.docs.forEach((l=>{l._document!==null&&(t.push(l._document),i.push(this._userDataWriter.convertObjectMap(l._document.data.value.mapValue.fields,"previous")),o.push(l.ref.path))})),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function zR(r){switch(r){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Ie(61501,{type:r})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $R(r){r=an(r,ot);const e=an(r.firestore,zr);return CR(Zc(e),r._key).then((t=>mw(e,r,t)))}Es._jsonSchemaVersion="firestore/querySnapshot/1.0",Es._jsonSchema={type:gt("string",Es._jsonSchemaVersion),bundleSource:gt("string","QuerySnapshot"),bundleName:gt("string"),bundle:gt("string")};class kp extends BR{constructor(e){super(),this.firestore=e}convertBytes(e){return new Rn(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new ot(this.firestore,null,t)}}function ih(r){r=an(r,Ns);const e=an(r.firestore,zr),t=Zc(e),i=new kp(e);return uw(r._query),RR(t,r._query).then((o=>new Es(e,i,r,o)))}function WR(r,e,t){r=an(r,ot);const i=an(r.firestore,zr),o=fw(r.converter,e);return sh(i,[iw(th(i),"setDoc",r._key,o,r.converter!==null,t).toMutation(r._key,kn.none())])}function Co(r,e,t,...i){r=an(r,ot);const o=an(r.firestore,zr),l=th(o);let h;return h=typeof(e=St(e))=="string"||e instanceof eh?LR(l,"updateDoc",r._key,e,t,i):OR(l,"updateDoc",r._key,e),sh(o,[h.toMutation(r._key,kn.exists(!0))])}function pw(r){return sh(an(r.firestore,zr),[new tp(r._key,kn.none())])}function qR(r,e){const t=an(r.firestore,zr),i=Pn(r),o=fw(r.converter,e);return sh(t,[iw(th(r.firestore),"addDoc",i._key,o,r.converter!==null,{}).toMutation(i._key,kn.exists(!1))]).then((()=>i))}function Dc(r,...e){var t,i,o;r=St(r);let l={includeMetadataChanges:!1,source:"default"},h=0;typeof e[h]!="object"||Rv(e[h])||(l=e[h++]);const f={includeMetadataChanges:l.includeMetadataChanges,source:l.source};if(Rv(e[h])){const T=e[h];e[h]=(t=T.next)===null||t===void 0?void 0:t.bind(T),e[h+1]=(i=T.error)===null||i===void 0?void 0:i.bind(T),e[h+2]=(o=T.complete)===null||o===void 0?void 0:o.bind(T)}let p,y,E;if(r instanceof ot)y=an(r.firestore,zr),E=$c(r._key.path),p={next:T=>{e[h]&&e[h](mw(y,r,T))},error:e[h+1],complete:e[h+2]};else{const T=an(r,Ns);y=an(T.firestore,zr),E=T._query;const S=new kp(y);p={next:V=>{e[h]&&e[h](new Es(y,S,T,V))},error:e[h+1],complete:e[h+2]},uw(r._query)}return(function(S,V,L,z){const F=new wp(z),oe=new vp(V,F,L);return S.asyncQueue.enqueueAndForget((async()=>mp(await Nc(S),oe))),()=>{F.Ou(),S.asyncQueue.enqueueAndForget((async()=>gp(await Nc(S),oe)))}})(Zc(y),E,f,p)}function sh(r,e){return(function(i,o){const l=new Mr;return i.asyncQueue.enqueueAndForget((async()=>mR(await PR(i),o,l))),l.promise})(Zc(r),e)}function mw(r,e,t){const i=t.docs.get(e._key),o=new kp(r);return new _s(r,o,e._key,i,new Ya(t.hasPendingWrites,t.fromCache),e.converter)}(function(e,t=!0){(function(o){Ho=o})(Wo),bo(new Ts("firestore",((i,{instanceIdentifier:o,options:l})=>{const h=i.getProvider("app").getImmediate(),f=new zr(new jP(i.getProvider("auth-internal")),new BP(h,i.getProvider("app-check-internal")),(function(y,E){if(!Object.prototype.hasOwnProperty.apply(y.options,["projectId"]))throw new ae(G.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new cl(y.options.projectId,E)})(h,o),h);return l=Object.assign({useFetchStreams:t},l),f._setSettings(l),f}),"PUBLIC").setMultipleInstances(!0)),Pi(xy,Dy,e),Pi(xy,Dy,"esm2017")})();const HR={apiKey:"AIzaSyCTDtoGl-VnlE33xKZsRocfstdnCSZMyek",authDomain:"golfgang-f00e3.firebaseapp.com",projectId:"golfgang-f00e3",storageBucket:"golfgang-f00e3.firebasestorage.app",messagingSenderId:"787603935494",appId:"1:787603935494:web:82f634dc12cdd3b42cce87"},gw=Zv(HR),bc=DP(gw),Tt=NR(gw),yw=Q.createContext(null);function GR({children:r}){const[e,t]=Q.useState(null),[i,o]=Q.useState(null),[l,h]=Q.useState(!1),[f,p]=Q.useState(!0);Q.useEffect(()=>{const T=EA(bc,async S=>{if(!S){t(null),o(null),h(!1),p(!1);return}t(S);try{const V=Pn(Tt,"users",S.uid),L=await $R(V);if(L.exists()){const z=L.data();o(z),h((z==null?void 0:z.isAdmin)===!0)}else o({}),h(!1)}catch(V){console.error("Error loading user profile:",V),o({})}p(!1)});return()=>T()},[]);const E={user:e,profile:i,isAdmin:l,loading:f,logout:async()=>{try{await wA(bc)}catch(T){console.error("Error signing out:",T)}}};return w.jsx(yw.Provider,{value:E,children:r})}function zi(){return Q.useContext(yw)}function KR(){const{user:r,isAdmin:e}=zi();return w.jsx("nav",{className:"navbar",children:w.jsxs("div",{className:"navbar-content",children:[w.jsxs(ar,{to:"/",className:"navbar-brand",children:[w.jsx("span",{className:"navbar-logo",children:""}),w.jsx("span",{className:"navbar-title",children:"GolfGang"})]}),w.jsx("div",{className:"navbar-actions",children:r?w.jsxs(w.Fragment,{children:[e&&w.jsx(ar,{to:"/admin",className:"btn btn-ghost btn-sm",children:"Admin"}),w.jsx(ar,{to:"/profile",className:"btn btn-ghost btn-sm",children:"Profile"})]}):w.jsx(ar,{to:"/login",className:"btn btn-primary btn-sm",children:"Login"})})]})})}function QR(){const r=Bo(),e=zo(),{user:t}=zi();if(!t||["/login","/signup"].includes(r.pathname))return null;const o=[{path:"/",icon:"",label:"Home"},{path:"/profile",icon:"",label:"Profile"}],l=h=>h==="/"?r.pathname==="/":r.pathname.startsWith(h);return w.jsx("nav",{className:"bottom-nav",children:w.jsx("div",{className:"bottom-nav-content",children:o.map(h=>w.jsxs("button",{className:`nav-item ${l(h.path)?"active":""}`,onClick:()=>e(h.path),children:[w.jsx("span",{className:"nav-item-icon",children:h.icon}),w.jsx("span",{className:"nav-item-label",children:h.label})]},h.path))})})}function st(r,e="default"){const t=document.querySelector(".toast-notification");t&&t.remove();const i=document.createElement("div");i.className=`toast-notification toast-${e}`,i.textContent=r,document.body.appendChild(i),requestAnimationFrame(()=>{i.classList.add("show")}),setTimeout(()=>{i.classList.remove("show"),setTimeout(()=>i.remove(),300)},3e3)}function br(r="light"){if(navigator.vibrate){const e={light:[10],medium:[20],heavy:[30],success:[10,50,10],error:[50,30,50]};navigator.vibrate(e[r]||e.light)}}function YR(){const r=["#0f7b6c","#10b981","#3b82f6","#f59e0b","#ef4444"];for(let t=0;t<50;t++){const i=document.createElement("div");i.className="confetti",i.style.left=Math.random()*100+"vw",i.style.backgroundColor=r[Math.floor(Math.random()*r.length)],i.style.animationDelay=Math.random()*.5+"s",i.style.animationDuration=Math.random()*1+2+"s",document.body.appendChild(i),setTimeout(()=>i.remove(),3e3)}}function pl(r){if(!r)return"??";const e=r.trim().split(/[\s_]+/);return e.length>=2?(e[0][0]+e[1][0]).toUpperCase():r.slice(0,2).toUpperCase()}function ml(r){const e=[{bg:"#dbeafe",text:"#1e40af"},{bg:"#dcfce7",text:"#166534"},{bg:"#fef3c7",text:"#92400e"},{bg:"#fce7f3",text:"#9d174d"},{bg:"#e0e7ff",text:"#3730a3"},{bg:"#ccfbf1",text:"#0f766e"},{bg:"#fee2e2",text:"#991b1b"},{bg:"#f3e8ff",text:"#6b21a8"}];let t=0;for(let i=0;i<(r||"").length;i++)t=r.charCodeAt(i)+((t<<5)-t);return e[Math.abs(t)%e.length]}function xv(r){return r?(r instanceof Date?r:r.toDate()).toLocaleDateString("en-AU",{weekday:"long",day:"numeric",month:"long"}):""}function XR(r){return r?(r instanceof Date?r:r.toDate()).toLocaleDateString("en-AU",{weekday:"short",day:"numeric",month:"short"}):""}function JR(r,e){var f,p;const i=(((p=(f=r.date)==null?void 0:f.toDate)==null?void 0:p.call(f))||new Date).toISOString().split("T")[0].replace(/-/g,""),o=encodeURIComponent(r.title||"Golf Round"),l=encodeURIComponent(r.courseName||""),h=encodeURIComponent(`${r.notes||""}

Event details: ${e}`);return`https://calendar.google.com/calendar/render?action=TEMPLATE&text=${o}&dates=${i}/${i}&location=${l}&details=${h}`}const Qd=r=>r?typeof r=="string"?r:r.status:null;function Dv({event:r,users:e=[]}){var p,y;const{user:t}=zi(),i=(y=(p=r.date)==null?void 0:p.toDate)==null?void 0:y.call(p),o=t&&r.responses?Qd(r.responses[t.uid]):null,l=r.responses?Object.values(r.responses).filter(E=>Qd(E)==="available").length:0,h=r.responses?Object.entries(r.responses).filter(([E,T])=>Qd(T)==="available").map(([E])=>E).slice(0,4):[],f=E=>{var S;const T=e.find(V=>V.id===E);return(T==null?void 0:T.username)||((S=T==null?void 0:T.email)==null?void 0:S.split("@")[0])||"User"};return w.jsxs(ar,{to:`/event/${r.id}`,className:"event-card",children:[w.jsxs("div",{className:"event-card-header",children:[w.jsxs("div",{className:"event-card-date",children:[w.jsx("span",{className:"event-card-day",children:i==null?void 0:i.getDate()}),w.jsx("span",{className:"event-card-month",children:i==null?void 0:i.toLocaleDateString("en-AU",{month:"short"})})]}),w.jsxs("div",{className:"event-card-info",children:[w.jsxs("div",{className:"event-card-title",children:[r.title||"Golf Round",r.booked&&w.jsx("span",{className:"badge badge-success",children:"Booked"}),!r.booked&&w.jsx("span",{className:"badge badge-info",children:"Proposed"})]}),r.tee&&w.jsxs("div",{className:"event-card-detail",children:[" ",r.tee]}),r.courseName&&w.jsxs("div",{className:"event-card-detail",children:[" ",r.courseName]})]})]}),w.jsxs("div",{className:"event-card-footer",children:[w.jsxs("div",{className:"event-card-avatars",children:[h.map(E=>{const T=f(E),S=ml(T);return w.jsx("div",{className:"avatar avatar-sm",style:{backgroundColor:S.bg,color:S.text},title:T,children:pl(T)},E)}),w.jsxs("span",{className:"event-card-count",children:[l,"/4"]})]}),o==="available"&&w.jsx("span",{className:"badge badge-success-soft",children:" You're in"})]})]})}function ZR(){const{user:r,profile:e}=zi(),[t,i]=Q.useState([]),[o,l]=Q.useState([]),[h,f]=Q.useState(!0),[p,y]=Q.useState(!1),[E,T]=Q.useState(!1),[S,V]=Q.useState({date:"",tee:"",courseName:"",notes:""}),[L,z]=Q.useState({timePreference:"",cartPreference:"",formatPreference:"",coursePreference:""});Q.useEffect(()=>{const ie=Dc(ki(Tt,"events"),k=>{const A=k.docs.map(C=>({id:C.id,...C.data()}));i(A),f(!1)});return()=>ie()},[]),Q.useEffect(()=>{async function ie(){const k=await ih(ki(Tt,"users"));l(k.docs.map(A=>({id:A.id,...A.data()})))}ie()},[]);const F=ie=>{if(!ie)return"";const[k,A,C]=ie.split("-").map(Number),x=new Date(k,A-1,C),b=x.toLocaleDateString("en-AU",{weekday:"long"}),M=x.toLocaleDateString("en-AU",{month:"long"});return`${b} ${(He=>{const rt=["th","st","nd","rd"],at=He%100;return He+(rt[(at-20)%10]||rt[at]||rt[0])})(C)} ${M}`},oe=async ie=>{var k;if(ie.preventDefault(),!S.date){st("Please select a date","error");return}T(!0),br("medium");try{const[A,C,x]=S.date.split("-").map(Number),b=new Date(A,C-1,x);await qR(ki(Tt,"events"),{title:F(S.date),date:qe.fromDate(b),tee:S.tee||null,courseName:S.courseName||null,notes:S.notes||null,proposedBy:r.uid,proposedByName:(e==null?void 0:e.username)||((k=r.email)==null?void 0:k.split("@")[0]),booked:!1,createdAt:qe.now(),responses:{[r.uid]:{status:"available",preferences:{timePreference:L.timePreference||null,cartPreference:L.cartPreference||null,formatPreference:L.formatPreference||null,coursePreference:L.coursePreference||null},updatedAt:new Date().toISOString()}}}),st("Round proposed! ","success"),V({date:"",tee:"",courseName:"",notes:""}),z({timePreference:"",cartPreference:"",formatPreference:"",coursePreference:""}),y(!1)}catch(A){console.error("Error creating event:",A),st("Failed to create event","error")}finally{T(!1)}},Y=new Date;Y.setHours(0,0,0,0);const re=t.filter(ie=>{var A,C;const k=(C=(A=ie.date)==null?void 0:A.toDate)==null?void 0:C.call(A);return k&&k>=Y}).sort((ie,k)=>ie.date.toMillis()-k.date.toMillis()),ye=t.filter(ie=>{var A,C;const k=(C=(A=ie.date)==null?void 0:A.toDate)==null?void 0:C.call(A);return k&&k<Y}).sort((ie,k)=>k.date.toMillis()-ie.date.toMillis()).slice(0,5),Re=()=>{const ie=new Date;return ie.setDate(ie.getDate()+1),ie.toISOString().split("T")[0]};return h?w.jsx("div",{className:"page",children:w.jsxs("div",{className:"page-content",children:[w.jsx("div",{className:"skeleton",style:{height:60,marginBottom:16}}),w.jsx("div",{className:"skeleton",style:{height:100,marginBottom:12}}),w.jsx("div",{className:"skeleton",style:{height:100,marginBottom:12}}),w.jsx("div",{className:"skeleton",style:{height:100}})]})}):w.jsx("div",{className:"page",children:w.jsxs("div",{className:"page-content",children:[w.jsxs("div",{className:"page-header",children:[w.jsx("h1",{className:"page-title",children:"Upcoming Rounds"}),w.jsx("button",{className:"btn btn-primary",onClick:()=>y(!p),children:p?"Cancel":"+ Propose"})]}),p&&w.jsxs("div",{className:"card",style:{marginBottom:24},children:[w.jsx("h3",{style:{marginTop:0,marginBottom:16},children:"Propose a Round"}),w.jsxs("form",{onSubmit:oe,children:[w.jsxs("div",{className:"form-group",children:[w.jsx("label",{htmlFor:"date",children:"Date *"}),w.jsx("input",{id:"date",type:"date",className:"input",value:S.date,onChange:ie=>V({...S,date:ie.target.value}),min:Re(),required:!0})]}),w.jsxs("div",{className:"form-group",children:[w.jsx("label",{htmlFor:"tee",children:"Tee Time (if known)"}),w.jsx("input",{id:"tee",type:"time",className:"input",value:S.tee,onChange:ie=>V({...S,tee:ie.target.value})})]}),w.jsxs("div",{className:"form-group",children:[w.jsx("label",{htmlFor:"course",children:"Course (if known)"}),w.jsx("input",{id:"course",type:"text",className:"input",value:S.courseName,onChange:ie=>V({...S,courseName:ie.target.value}),placeholder:"e.g., Royal Melbourne"})]}),w.jsxs("div",{className:"preferences-section",children:[w.jsx("h4",{className:"preferences-title",children:"Your Preferences"}),w.jsxs("div",{className:"form-group",children:[w.jsx("label",{children:"Time Preference"}),w.jsxs("div",{className:"toggle-group",children:[w.jsx("button",{type:"button",className:`toggle-btn ${L.timePreference==="AM"?"active":""}`,onClick:()=>z({...L,timePreference:L.timePreference==="AM"?"":"AM"}),children:" AM"}),w.jsx("button",{type:"button",className:`toggle-btn ${L.timePreference==="PM"?"active":""}`,onClick:()=>z({...L,timePreference:L.timePreference==="PM"?"":"PM"}),children:" PM"}),w.jsx("button",{type:"button",className:`toggle-btn ${L.timePreference==="Any"?"active":""}`,onClick:()=>z({...L,timePreference:L.timePreference==="Any"?"":"Any"}),children:" Any"})]})]}),w.jsxs("div",{className:"form-group",children:[w.jsx("label",{children:"Walk or Cart?"}),w.jsxs("div",{className:"toggle-group",children:[w.jsx("button",{type:"button",className:`toggle-btn ${L.cartPreference==="Walk"?"active":""}`,onClick:()=>z({...L,cartPreference:L.cartPreference==="Walk"?"":"Walk"}),children:" Walk"}),w.jsx("button",{type:"button",className:`toggle-btn ${L.cartPreference==="Cart"?"active":""}`,onClick:()=>z({...L,cartPreference:L.cartPreference==="Cart"?"":"Cart"}),children:" Cart"}),w.jsx("button",{type:"button",className:`toggle-btn ${L.cartPreference==="Any"?"active":""}`,onClick:()=>z({...L,cartPreference:L.cartPreference==="Any"?"":"Any"}),children:" Any"})]})]}),w.jsxs("div",{className:"form-group",children:[w.jsx("label",{children:"Game Format"}),w.jsxs("div",{className:"toggle-group",children:[w.jsx("button",{type:"button",className:`toggle-btn ${L.formatPreference==="Stroke"?"active":""}`,onClick:()=>z({...L,formatPreference:L.formatPreference==="Stroke"?"":"Stroke"}),children:" Stroke"}),w.jsx("button",{type:"button",className:`toggle-btn ${L.formatPreference==="Scramble"?"active":""}`,onClick:()=>z({...L,formatPreference:L.formatPreference==="Scramble"?"":"Scramble"}),children:" Scramble"}),w.jsx("button",{type:"button",className:`toggle-btn ${L.formatPreference==="Any"?"active":""}`,onClick:()=>z({...L,formatPreference:L.formatPreference==="Any"?"":"Any"}),children:" Any"})]})]}),w.jsxs("div",{className:"form-group",children:[w.jsx("label",{htmlFor:"coursePreference",children:"Course Preference"}),w.jsx("input",{id:"coursePreference",type:"text",className:"input",value:L.coursePreference,onChange:ie=>z({...L,coursePreference:ie.target.value}),placeholder:"e.g., Somewhere close to CBD"})]})]}),w.jsxs("div",{className:"form-group",children:[w.jsx("label",{htmlFor:"notes",children:"Notes (optional)"}),w.jsx("textarea",{id:"notes",className:"input",rows:2,value:S.notes,onChange:ie=>V({...S,notes:ie.target.value}),placeholder:"Any additional details..."})]}),w.jsx("button",{type:"submit",className:"btn btn-primary btn-full",disabled:E,children:E?"Creating...":"Propose This Round"})]})]}),re.length===0?w.jsxs("div",{className:"card empty-state",children:[w.jsx("div",{className:"empty-state-icon",children:""}),w.jsx("div",{className:"empty-state-title",children:"No upcoming rounds"}),w.jsx("p",{children:"Be the first to propose a round!"})]}):w.jsx("div",{className:"event-list",children:re.map(ie=>w.jsx(Dv,{event:ie,users:o},ie.id))}),ye.length>0&&w.jsxs(w.Fragment,{children:[w.jsx("div",{className:"section-divider",children:w.jsx("span",{children:"Past Rounds"})}),w.jsx("div",{className:"event-list event-list-past",children:ye.map(ie=>w.jsx(Dv,{event:ie,users:o},ie.id))})]})]})})}function ek(){const r=zo(),[e,t]=Q.useState(""),[i,o]=Q.useState(""),[l,h]=Q.useState(""),[f,p]=Q.useState(!1);async function y(E){E.preventDefault(),h(""),p(!0);try{let T=e.trim();if(!e.includes("@")){const S=cw(ki(Tt,"users"),hw("username","==",e.trim().toLowerCase())),V=await ih(S);if(V.empty)throw new Error("Username not found.");T=V.docs[0].data().email}await yA(bc,T,i),r("/")}catch(T){console.error(T),T.code==="auth/user-not-found"||T.code==="auth/wrong-password"?h("Invalid email/username or password."):T.code==="auth/invalid-email"?h("Invalid email format."):h(T.message||"Failed to sign in.")}p(!1)}return w.jsx("div",{className:"auth-page",children:w.jsxs("div",{className:"card auth-card",children:[w.jsxs("div",{className:"auth-header",children:[w.jsx("h1",{className:"auth-logo",children:" GolfGang"}),w.jsx("h2",{className:"auth-title",children:"Welcome back"}),w.jsx("p",{className:"auth-subtitle",children:"Sign in to coordinate your rounds"})]}),l&&w.jsx("div",{className:"toast toast-danger",children:l}),w.jsxs("form",{onSubmit:y,className:"auth-form",children:[w.jsxs("div",{className:"form-group",children:[w.jsx("label",{htmlFor:"identifier",children:"Email or Username"}),w.jsx("input",{id:"identifier",type:"text",className:"input",value:e,onChange:E=>t(E.target.value),placeholder:"you@example.com",required:!0,autoComplete:"username"})]}),w.jsxs("div",{className:"form-group",children:[w.jsx("label",{htmlFor:"password",children:"Password"}),w.jsx("input",{id:"password",type:"password",className:"input",value:i,onChange:E=>o(E.target.value),placeholder:"",required:!0,autoComplete:"current-password"})]}),w.jsx("button",{type:"submit",className:"btn btn-primary btn-full",disabled:f,children:f?"Signing in...":"Sign In"})]}),w.jsx("div",{className:"auth-footer",children:w.jsxs("p",{children:["Don't have an account?"," ",w.jsx(ar,{to:"/signup",className:"link",children:"Sign up"})]})})]})})}function tk(){const r=zo(),[e,t]=Q.useState(""),[i,o]=Q.useState(""),[l,h]=Q.useState(""),[f,p]=Q.useState(""),[y,E]=Q.useState(!1);async function T(V){const L=V.toLowerCase(),z=cw(ki(Tt,"users"),hw("username","==",L));return!(await ih(z)).empty}async function S(V){V.preventDefault(),p("");const L=i.trim().toLowerCase();if(!L.match(/^[a-z0-9_]+$/)){p("Username can only contain letters, numbers, and underscores.");return}if(L.length<3){p("Username must be at least 3 characters.");return}if(l.length<6){p("Password must be at least 6 characters.");return}E(!0);try{if(await T(L)){p("That username is already taken."),E(!1);return}const z=await gA(bc,e,l);await WR(Pn(Tt,"users",z.user.uid),{email:e,username:L,isAdmin:!1,createdAt:new Date().toISOString()}),r("/")}catch(z){console.error(z),z.code==="auth/email-already-in-use"?p("An account with this email already exists."):z.code==="auth/invalid-email"?p("Invalid email format."):z.code==="auth/weak-password"?p("Password is too weak. Use at least 6 characters."):p(z.message||"Signup failed.")}E(!1)}return w.jsx("div",{className:"auth-page",children:w.jsxs("div",{className:"card auth-card",children:[w.jsxs("div",{className:"auth-header",children:[w.jsx("h1",{className:"auth-logo",children:" GolfGang"}),w.jsx("h2",{className:"auth-title",children:"Create account"}),w.jsx("p",{className:"auth-subtitle",children:"Join the crew and start playing"})]}),f&&w.jsx("div",{className:"toast toast-danger",children:f}),w.jsxs("form",{onSubmit:S,className:"auth-form",children:[w.jsxs("div",{className:"form-group",children:[w.jsx("label",{htmlFor:"email",children:"Email"}),w.jsx("input",{id:"email",type:"email",className:"input",value:e,onChange:V=>t(V.target.value),placeholder:"you@example.com",required:!0,autoComplete:"email"})]}),w.jsxs("div",{className:"form-group",children:[w.jsx("label",{htmlFor:"username",children:"Username"}),w.jsx("input",{id:"username",type:"text",className:"input",value:i,onChange:V=>o(V.target.value),placeholder:"golfer123",required:!0,autoComplete:"username"}),w.jsx("span",{className:"input-hint",children:"Letters, numbers, and underscores only"})]}),w.jsxs("div",{className:"form-group",children:[w.jsx("label",{htmlFor:"password",children:"Password"}),w.jsx("input",{id:"password",type:"password",className:"input",value:l,onChange:V=>h(V.target.value),placeholder:"",required:!0,autoComplete:"new-password"}),w.jsx("span",{className:"input-hint",children:"At least 6 characters"})]}),w.jsx("button",{type:"submit",className:"btn btn-primary btn-full",disabled:y,children:y?"Creating account...":"Create Account"})]}),w.jsx("div",{className:"auth-footer",children:w.jsxs("p",{children:["Already have an account?"," ",w.jsx(ar,{to:"/login",className:"link",children:"Sign in"})]})})]})})}const Yd=4,Xu=r=>r?typeof r=="string"?r:r.status:null,Ju=r=>!r||typeof r=="string"?null:r.preferences||null;function nk(){var me,ke;const{id:r}=uT(),e=zo(),{user:t,isAdmin:i}=zi(),[o,l]=Q.useState(null),[h,f]=Q.useState([]),[p,y]=Q.useState(!0),[E,T]=Q.useState(!1),[S,V]=Q.useState(!1),[L,z]=Q.useState(!1),[F,oe]=Q.useState({tee:"",courseName:"",notes:""}),[Y,re]=Q.useState({timePreference:"",cartPreference:"",formatPreference:"",coursePreference:""});Q.useEffect(()=>{const H=Dc(Pn(Tt,"events",r),ee=>{ee.exists()?(l({id:ee.id,...ee.data()}),oe({tee:ee.data().tee||"",courseName:ee.data().courseName||"",notes:ee.data().notes||""})):l(null),y(!1)});return()=>H()},[r]),Q.useEffect(()=>{var H;if(o&&t){const ee=(H=o.responses)==null?void 0:H[t.uid],ue=Ju(ee);ue&&re({timePreference:ue.timePreference||"",cartPreference:ue.cartPreference||"",formatPreference:ue.formatPreference||"",coursePreference:ue.coursePreference||""})}},[o,t]),Q.useEffect(()=>{async function H(){const ee=await ih(ki(Tt,"users"));f(ee.docs.map(ue=>({id:ue.id,...ue.data()})))}H()},[]);const ye=H=>{var ue;const ee=h.find(Ce=>Ce.id===H);return(ee==null?void 0:ee.username)||((ue=ee==null?void 0:ee.email)==null?void 0:ue.split("@")[0])||"Unknown"},Re=(o==null?void 0:o.responses)||{},ie=t?Xu(Re[t.uid]):null,k=t?Ju(Re[t.uid]):null,A=Object.entries(Re).filter(([H,ee])=>Xu(ee)==="available").map(([H])=>H),C=Object.entries(Re).filter(([H,ee])=>Xu(ee)==="unavailable").map(([H])=>H),x=(t==null?void 0:t.uid)===(o==null?void 0:o.proposedBy),b=i||x,M=async H=>{if(!(!o||!t)){br("medium");try{const ee=Pn(Tt,"events",o.id),ue={...Re};H===null?delete ue[t.uid]:ue[t.uid]={status:H,preferences:H==="available"?{timePreference:Y.timePreference||null,cartPreference:Y.cartPreference||null,formatPreference:Y.formatPreference||null,coursePreference:Y.coursePreference||null}:null,updatedAt:new Date().toISOString()},await Co(ee,{responses:ue}),H==="available"?(st("You're in! ","success"),z(!1)):H==="unavailable"&&(st("Response saved","default"),z(!1))}catch(ee){console.error("Error updating RSVP:",ee),st("Failed to save response","error")}}},R=async H=>{if(!(!o||!H)){br("medium");try{const ee=Pn(Tt,"events",o.id),ue={...Re};delete ue[H],await Co(ee,{responses:ue}),st("Player removed","default")}catch(ee){console.error("Error removing player:",ee),st("Failed to remove player","error")}}},He=async()=>{if(o){br("success");try{const H=Pn(Tt,"events",o.id);await Co(H,{booked:!0,bookedAt:new Date().toISOString()}),YR(),st("Round confirmed! ","success")}catch(H){console.error("Error booking:",H),st("Failed to book","error")}}},rt=async()=>{if(o){br("medium");try{const H=Pn(Tt,"events",o.id);await Co(H,{booked:!1,bookedAt:null}),st("Booking removed","default")}catch(H){console.error("Error:",H),st("Failed to update","error")}}},at=async()=>{if(o){V(!0);try{const H=Pn(Tt,"events",o.id);await Co(H,{tee:F.tee||null,courseName:F.courseName||null,notes:F.notes||null}),T(!1),st("Changes saved","success")}catch(H){console.error("Error saving:",H),st("Failed to save","error")}finally{V(!1)}}},Ue=async()=>{if(o&&confirm("Are you sure you want to delete this event?")){br("heavy");try{await pw(Pn(Tt,"events",o.id)),st("Event deleted","default"),e("/")}catch(H){console.error("Error deleting:",H),st("Failed to delete","error")}}},se=async()=>{var Qt,mr;br("light");const H=(mr=(Qt=o.date)==null?void 0:Qt.toDate)==null?void 0:mr.call(Qt),ee=xv(H),Ce=`${window.location.origin+(window.location.pathname.includes("/golfgang")?"/golfgang":"/golfgang/")}/event/${o.id}`,De=A.map(Kn=>ye(Kn)).join(", ");let $e=` Golf - ${o.booked?"Booked":"Proposed"}!
`;$e+=` ${o.title||ee}
`,o.tee&&($e+=` ${o.tee}
`),o.courseName&&($e+=` ${o.courseName}
`),De&&($e+=` ${De}
`),o.notes&&($e+=`
 ${o.notes}
`),$e+=`
 ${Ce}`,o.booked&&($e+=`

 Add to Calendar:
${JR(o,Ce)}`);try{await navigator.clipboard.writeText($e),st("Copied to clipboard! ","success")}catch{st("Could not copy","error")}},ve=()=>{const H=Object.entries(Re).filter(([ue,Ce])=>Xu(Ce)==="available").map(([ue,Ce])=>({uid:ue,name:ye(ue),prefs:Ju(Ce)})).filter(ue=>ue.prefs);if(H.length===0)return null;const ee={time:{},cart:{},format:{}};return H.forEach(ue=>{ue.prefs.timePreference&&(ee.time[ue.prefs.timePreference]=(ee.time[ue.prefs.timePreference]||0)+1),ue.prefs.cartPreference&&(ee.cart[ue.prefs.cartPreference]=(ee.cart[ue.prefs.cartPreference]||0)+1),ue.prefs.formatPreference&&(ee.format[ue.prefs.formatPreference]=(ee.format[ue.prefs.formatPreference]||0)+1)}),{summary:ee,allPrefs:H}};if(p)return w.jsx("div",{className:"page",children:w.jsxs("div",{className:"page-content",children:[w.jsx("div",{className:"skeleton",style:{height:32,width:"60%",marginBottom:16}}),w.jsx("div",{className:"skeleton",style:{height:120,marginBottom:16}}),w.jsx("div",{className:"skeleton",style:{height:80}})]})});if(!o)return w.jsx("div",{className:"page",children:w.jsx("div",{className:"page-content",children:w.jsx("div",{className:"card",children:w.jsxs("div",{className:"empty-state",children:[w.jsx("div",{className:"empty-state-icon",children:""}),w.jsx("div",{className:"empty-state-title",children:"Event not found"}),w.jsx(ar,{to:"/",className:"btn btn-primary",style:{marginTop:16},children:"Back to Home"})]})})})});const le=(ke=(me=o.date)==null?void 0:me.toDate)==null?void 0:ke.call(me),O=xv(le),q=ve();return w.jsx("div",{className:"page",children:w.jsxs("div",{className:"page-content",children:[w.jsx(ar,{to:"/",className:"back-link",children:" Back to rounds"}),w.jsxs("div",{className:"event-header",children:[w.jsx("h1",{className:"event-title",children:o.title||"Golf Round"}),w.jsx("div",{className:"event-status",children:o.booked?w.jsx("span",{className:"badge badge-success",children:" Booked"}):w.jsx("span",{className:"badge badge-info",children:"Proposed"})})]}),w.jsx("div",{className:"card",children:E?w.jsxs("div",{className:"event-edit-form",children:[w.jsxs("div",{className:"form-group",children:[w.jsx("label",{children:"Tee Time"}),w.jsx("input",{type:"time",className:"input",value:F.tee,onChange:H=>oe({...F,tee:H.target.value})})]}),w.jsxs("div",{className:"form-group",children:[w.jsx("label",{children:"Course"}),w.jsx("input",{type:"text",className:"input",value:F.courseName,onChange:H=>oe({...F,courseName:H.target.value}),placeholder:"Course name"})]}),w.jsxs("div",{className:"form-group",children:[w.jsx("label",{children:"Notes"}),w.jsx("textarea",{className:"input",rows:2,value:F.notes,onChange:H=>oe({...F,notes:H.target.value}),placeholder:"Additional details..."})]}),w.jsxs("div",{className:"form-actions",children:[w.jsx("button",{className:"btn btn-ghost",onClick:()=>T(!1),children:"Cancel"}),w.jsx("button",{className:"btn btn-primary",onClick:at,disabled:S,children:S?"Saving...":"Save Changes"})]})]}):w.jsxs("div",{className:"event-details",children:[w.jsxs("div",{className:"event-detail",children:[w.jsx("span",{className:"event-detail-icon",children:""}),w.jsx("span",{children:O})]}),w.jsxs("div",{className:"event-detail",children:[w.jsx("span",{className:"event-detail-icon",children:""}),w.jsx("span",{children:o.tee||"Time TBA"})]}),w.jsxs("div",{className:"event-detail",children:[w.jsx("span",{className:"event-detail-icon",children:""}),w.jsx("span",{children:o.courseName||"Course TBA"})]}),w.jsxs("div",{className:"event-detail",children:[w.jsx("span",{className:"event-detail-icon",children:""}),w.jsxs("span",{children:[A.length,"/",Yd," players"]})]}),o.notes&&w.jsxs("div",{className:"event-detail event-notes",children:[w.jsx("span",{className:"event-detail-icon",children:""}),w.jsx("span",{children:o.notes})]}),w.jsxs("div",{className:"event-actions",children:[w.jsx("button",{className:"btn btn-ghost btn-sm",onClick:se,children:"Share"}),b&&w.jsx("button",{className:"btn btn-ghost btn-sm",onClick:()=>T(!0),children:"Edit"})]})]})}),!o.booked&&w.jsxs("div",{className:"card",children:[w.jsx("h3",{className:"card-title",children:"Are you in?"}),A.length>=Yd&&!ie&&w.jsx("div",{className:"toast toast-warning",style:{marginBottom:12},children:"Group is full  you'll be on the reserve list"}),ie&&!L&&w.jsxs("div",{className:"current-rsvp",children:[w.jsx("div",{className:`rsvp-status ${ie==="available"?"rsvp-status-in":"rsvp-status-out"}`,children:ie==="available"?" You're in!":" Can't make it"}),k&&ie==="available"&&w.jsxs("div",{className:"my-preferences",children:[k.timePreference&&w.jsxs("span",{className:"pref-tag",children:[" ",k.timePreference]}),k.cartPreference&&w.jsxs("span",{className:"pref-tag",children:[" ",k.cartPreference]}),k.formatPreference&&w.jsxs("span",{className:"pref-tag",children:[" ",k.formatPreference]})]}),w.jsx("button",{className:"btn btn-ghost btn-sm",onClick:()=>z(!0),style:{marginTop:12},children:"Change Response"})]}),(!ie||L)&&w.jsxs("div",{className:"rsvp-form",children:[w.jsxs("div",{className:"preferences-section",children:[w.jsx("h4",{className:"preferences-title",children:"Your Preferences"}),w.jsxs("div",{className:"form-group",children:[w.jsx("label",{children:"Time Preference"}),w.jsxs("div",{className:"toggle-group",children:[w.jsx("button",{type:"button",className:`toggle-btn ${Y.timePreference==="AM"?"active":""}`,onClick:()=>re({...Y,timePreference:Y.timePreference==="AM"?"":"AM"}),children:" AM"}),w.jsx("button",{type:"button",className:`toggle-btn ${Y.timePreference==="PM"?"active":""}`,onClick:()=>re({...Y,timePreference:Y.timePreference==="PM"?"":"PM"}),children:" PM"}),w.jsx("button",{type:"button",className:`toggle-btn ${Y.timePreference==="Any"?"active":""}`,onClick:()=>re({...Y,timePreference:Y.timePreference==="Any"?"":"Any"}),children:" Any"})]})]}),w.jsxs("div",{className:"form-group",children:[w.jsx("label",{children:"Walk or Cart?"}),w.jsxs("div",{className:"toggle-group",children:[w.jsx("button",{type:"button",className:`toggle-btn ${Y.cartPreference==="Walk"?"active":""}`,onClick:()=>re({...Y,cartPreference:Y.cartPreference==="Walk"?"":"Walk"}),children:" Walk"}),w.jsx("button",{type:"button",className:`toggle-btn ${Y.cartPreference==="Cart"?"active":""}`,onClick:()=>re({...Y,cartPreference:Y.cartPreference==="Cart"?"":"Cart"}),children:" Cart"}),w.jsx("button",{type:"button",className:`toggle-btn ${Y.cartPreference==="Any"?"active":""}`,onClick:()=>re({...Y,cartPreference:Y.cartPreference==="Any"?"":"Any"}),children:" Any"})]})]}),w.jsxs("div",{className:"form-group",children:[w.jsx("label",{children:"Game Format"}),w.jsxs("div",{className:"toggle-group",children:[w.jsx("button",{type:"button",className:`toggle-btn ${Y.formatPreference==="Stroke"?"active":""}`,onClick:()=>re({...Y,formatPreference:Y.formatPreference==="Stroke"?"":"Stroke"}),children:" Stroke"}),w.jsx("button",{type:"button",className:`toggle-btn ${Y.formatPreference==="Scramble"?"active":""}`,onClick:()=>re({...Y,formatPreference:Y.formatPreference==="Scramble"?"":"Scramble"}),children:" Scramble"}),w.jsx("button",{type:"button",className:`toggle-btn ${Y.formatPreference==="Any"?"active":""}`,onClick:()=>re({...Y,formatPreference:Y.formatPreference==="Any"?"":"Any"}),children:" Any"})]})]}),w.jsxs("div",{className:"form-group",children:[w.jsx("label",{htmlFor:"coursePreference",children:"Course Preference"}),w.jsx("input",{id:"coursePreference",type:"text",className:"input",value:Y.coursePreference,onChange:H=>re({...Y,coursePreference:H.target.value}),placeholder:"e.g., Somewhere close to CBD"})]})]}),w.jsxs("div",{className:"rsvp-buttons",children:[w.jsx("button",{className:"rsvp-btn rsvp-btn-available",onClick:()=>M("available"),children:" I'm in"}),w.jsx("button",{className:"rsvp-btn rsvp-btn-unavailable",onClick:()=>M("unavailable"),children:" Can't make it"})]}),L&&w.jsx("button",{className:"btn btn-ghost btn-full",onClick:()=>z(!1),style:{marginTop:12},children:"Cancel"})]})]}),o.booked&&ie==="available"&&w.jsx("div",{className:"card card-success",children:w.jsxs("div",{style:{display:"flex",alignItems:"center",gap:10},children:[w.jsx("span",{style:{fontSize:20},children:""}),w.jsx("span",{style:{fontWeight:600},children:"You're confirmed for this round"})]})}),q&&A.length>0&&w.jsxs("div",{className:"card",children:[w.jsx("h3",{className:"card-title",children:"Group Preferences"}),w.jsxs("div",{className:"prefs-summary",children:[Object.keys(q.summary.time).length>0&&w.jsxs("div",{className:"prefs-row",children:[w.jsx("span",{className:"prefs-label",children:" Time:"}),w.jsx("div",{className:"prefs-values",children:Object.entries(q.summary.time).map(([H,ee])=>w.jsxs("span",{className:"pref-chip",children:[H," (",ee,")"]},H))})]}),Object.keys(q.summary.cart).length>0&&w.jsxs("div",{className:"prefs-row",children:[w.jsx("span",{className:"prefs-label",children:" Transport:"}),w.jsx("div",{className:"prefs-values",children:Object.entries(q.summary.cart).map(([H,ee])=>w.jsxs("span",{className:"pref-chip",children:[H," (",ee,")"]},H))})]}),Object.keys(q.summary.format).length>0&&w.jsxs("div",{className:"prefs-row",children:[w.jsx("span",{className:"prefs-label",children:" Format:"}),w.jsx("div",{className:"prefs-values",children:Object.entries(q.summary.format).map(([H,ee])=>w.jsxs("span",{className:"pref-chip",children:[H," (",ee,")"]},H))})]}),q.allPrefs.some(H=>{var ee;return(ee=H.prefs)==null?void 0:ee.coursePreference})&&w.jsxs("div",{className:"prefs-row prefs-row-courses",children:[w.jsx("span",{className:"prefs-label",children:" Courses:"}),w.jsx("div",{className:"prefs-courses",children:q.allPrefs.filter(H=>{var ee;return(ee=H.prefs)==null?void 0:ee.coursePreference}).map(H=>w.jsxs("div",{className:"pref-course",children:[w.jsxs("span",{className:"pref-course-name",children:[H.name,":"]}),w.jsx("span",{className:"pref-course-value",children:H.prefs.coursePreference})]},H.uid))})]})]})]}),w.jsxs("div",{className:"card",children:[w.jsxs("h3",{className:"card-title",children:["Players (",A.length,"/",Yd,")"]}),A.length===0?w.jsx("p",{className:"text-secondary",children:"No one has RSVP'd yet"}):w.jsx("div",{className:"player-list",children:A.map(H=>{const ee=ye(H),ue=ml(ee),Ce=H===(t==null?void 0:t.uid),De=Ju(Re[H]);return w.jsxs("div",{className:"player-item",children:[w.jsxs("div",{className:"player-info",children:[w.jsx("div",{className:"avatar",style:{backgroundColor:ue.bg,color:ue.text},children:pl(ee)}),w.jsxs("div",{className:"player-details",children:[w.jsxs("span",{className:"player-name",children:[ee," ",Ce&&w.jsx("span",{className:"text-secondary",children:"(you)"})]}),De&&w.jsxs("div",{className:"player-prefs",children:[De.timePreference&&w.jsx("span",{className:"pref-mini",children:De.timePreference}),De.cartPreference&&w.jsx("span",{className:"pref-mini",children:De.cartPreference}),De.formatPreference&&w.jsx("span",{className:"pref-mini",children:De.formatPreference})]})]})]}),i&&!Ce&&w.jsx("button",{className:"btn btn-ghost btn-sm btn-danger",onClick:()=>R(H),children:"Remove"})]},H)})}),C.length>0&&w.jsxs(w.Fragment,{children:[w.jsx("h4",{className:"card-subtitle",children:"Can't make it"}),w.jsx("div",{className:"player-list player-list-unavailable",children:C.map(H=>{const ee=ye(H);return ml(ee),w.jsx("div",{className:"player-item",children:w.jsxs("div",{className:"player-info",children:[w.jsx("div",{className:"avatar avatar-muted",style:{backgroundColor:"#e5e7eb",color:"#6b7280"},children:pl(ee)}),w.jsx("span",{className:"player-name text-secondary",children:ee})]})},H)})})]})]}),b&&w.jsxs("div",{className:"card",children:[w.jsx("h3",{className:"card-title",children:"Actions"}),w.jsxs("div",{className:"admin-actions",children:[o.booked?w.jsx("button",{className:"btn btn-ghost btn-full",onClick:rt,children:"Remove Booking"}):w.jsx("button",{className:"btn btn-success btn-full",onClick:He,disabled:A.length===0,children:" Mark as Booked"}),w.jsx("button",{className:"btn btn-danger btn-full",onClick:Ue,children:"Delete Event"})]})]})]})})}function rk(){var f;const{user:r,profile:e,isAdmin:t,logout:i}=zi(),o=(e==null?void 0:e.username)||((f=r==null?void 0:r.email)==null?void 0:f.split("@")[0])||"User",l=ml(o),h=async()=>{await i()};return w.jsx("div",{className:"page",children:w.jsxs("div",{className:"page-content",children:[w.jsxs("div",{className:"card profile-card",children:[w.jsx("div",{className:"avatar avatar-lg",style:{backgroundColor:l.bg,color:l.text,margin:"0 auto 16px"},children:pl(o)}),w.jsx("h2",{className:"profile-name",children:o}),w.jsx("p",{className:"profile-email",children:r==null?void 0:r.email}),t&&w.jsx("span",{className:"badge badge-success",style:{marginTop:8},children:"Admin"})]}),w.jsxs("div",{className:"card",children:[w.jsx("h3",{className:"card-title",children:"Account"}),w.jsxs("div",{className:"info-row",children:[w.jsx("span",{className:"info-label",children:"Email"}),w.jsx("span",{className:"info-value",children:r==null?void 0:r.email})]}),w.jsxs("div",{className:"info-row",children:[w.jsx("span",{className:"info-label",children:"Username"}),w.jsx("span",{className:"info-value",children:(e==null?void 0:e.username)||"Not set"})]}),w.jsxs("div",{className:"info-row",children:[w.jsx("span",{className:"info-label",children:"Member since"}),w.jsx("span",{className:"info-value",children:e!=null&&e.createdAt?new Date(e.createdAt).toLocaleDateString("en-AU",{month:"long",year:"numeric"}):"Unknown"})]})]}),w.jsx("button",{className:"btn btn-danger btn-full",onClick:h,children:"Sign Out"})]})})}function ik(){const[r,e]=Q.useState([]),[t,i]=Q.useState([]),[o,l]=Q.useState(!0);Q.useEffect(()=>{const p=Dc(ki(Tt,"events"),y=>{const E=y.docs.map(T=>({id:T.id,...T.data()}));E.sort((T,S)=>{var V,L;return(((V=S.date)==null?void 0:V.toMillis())||0)-(((L=T.date)==null?void 0:L.toMillis())||0)}),e(E),l(!1)});return()=>p()},[]),Q.useEffect(()=>{const p=Dc(ki(Tt,"users"),y=>{const E=y.docs.map(T=>({id:T.id,...T.data()}));i(E)});return()=>p()},[]);const h=async p=>{if(confirm("Delete this event?")){br("medium");try{await pw(Pn(Tt,"events",p)),st("Event deleted","default")}catch(y){console.error("Error deleting event:",y),st("Failed to delete","error")}}},f=async(p,y)=>{if(confirm(`${y?"Remove":"Grant"} admin privileges?`)){br("medium");try{await Co(Pn(Tt,"users",p),{isAdmin:!y}),st(`Admin ${y?"removed":"granted"}`,"success")}catch(E){console.error("Error updating user:",E),st("Failed to update","error")}}};return o?w.jsx("div",{className:"page",children:w.jsxs("div",{className:"page-content",children:[w.jsx("div",{className:"skeleton",style:{height:32,width:"40%",marginBottom:24}}),w.jsx("div",{className:"skeleton",style:{height:200,marginBottom:16}}),w.jsx("div",{className:"skeleton",style:{height:200}})]})}):w.jsx("div",{className:"page",children:w.jsxs("div",{className:"page-content",children:[w.jsx("h1",{className:"page-title",children:"Admin Panel"}),w.jsxs("div",{className:"card",children:[w.jsxs("div",{className:"card-header",children:[w.jsx("h3",{className:"card-title",children:"Events"}),w.jsx("span",{className:"badge",children:r.length})]}),r.length===0?w.jsx("p",{className:"text-secondary",children:"No events yet"}):w.jsx("div",{className:"admin-list",children:r.map(p=>{var T,S;const y=XR((S=(T=p.date)==null?void 0:T.toDate)==null?void 0:S.call(T)),E=p.responses?Object.values(p.responses).filter(V=>(typeof V=="string"?V:V==null?void 0:V.status)==="available").length:0;return w.jsxs("div",{className:"admin-list-item",children:[w.jsxs("div",{className:"admin-list-info",children:[w.jsxs("div",{className:"admin-list-title",children:[p.title||"Golf Round",p.booked&&w.jsx("span",{className:"badge badge-success badge-sm",children:"Booked"})]}),w.jsxs("div",{className:"admin-list-meta",children:[y,"  ",E,"/4 players",p.courseName&&`  ${p.courseName}`]})]}),w.jsxs("div",{className:"admin-list-actions",children:[w.jsx(ar,{to:`/event/${p.id}`,className:"btn btn-ghost btn-sm",children:"View"}),w.jsx("button",{className:"btn btn-ghost btn-sm btn-danger",onClick:()=>h(p.id),children:"Delete"})]})]},p.id)})})]}),w.jsxs("div",{className:"card",children:[w.jsxs("div",{className:"card-header",children:[w.jsx("h3",{className:"card-title",children:"Users"}),w.jsx("span",{className:"badge",children:t.length})]}),t.length===0?w.jsx("p",{className:"text-secondary",children:"No users yet"}):w.jsx("div",{className:"admin-list",children:t.map(p=>{var T;const y=p.username||((T=p.email)==null?void 0:T.split("@")[0])||"User",E=ml(y);return w.jsxs("div",{className:"admin-list-item",children:[w.jsx("div",{className:"admin-list-info",children:w.jsxs("div",{style:{display:"flex",alignItems:"center",gap:12},children:[w.jsx("div",{className:"avatar avatar-sm",style:{backgroundColor:E.bg,color:E.text},children:pl(y)}),w.jsxs("div",{children:[w.jsxs("div",{className:"admin-list-title",children:[y,p.isAdmin&&w.jsx("span",{className:"badge badge-success badge-sm",children:"Admin"})]}),w.jsx("div",{className:"admin-list-meta",children:p.email})]})]})}),w.jsx("div",{className:"admin-list-actions",children:w.jsx("button",{className:`btn btn-ghost btn-sm ${p.isAdmin?"btn-danger":""}`,onClick:()=>f(p.id,p.isAdmin),children:p.isAdmin?"Remove Admin":"Make Admin"})})]},p.id)})})]})]})})}function Xd({children:r}){const{user:e,loading:t}=zi();return t?w.jsx("div",{className:"page",style:{display:"flex",justifyContent:"center",alignItems:"center",minHeight:"50vh"},children:w.jsx("div",{className:"spinner"})}):e?r:w.jsx(cc,{to:"/login",replace:!0})}function sk({children:r}){const{user:e,isAdmin:t,loading:i}=zi();return i?w.jsx("div",{className:"page",style:{display:"flex",justifyContent:"center",alignItems:"center",minHeight:"50vh"},children:w.jsx("div",{className:"spinner"})}):e?t?r:w.jsx(cc,{to:"/",replace:!0}):w.jsx(cc,{to:"/login",replace:!0})}function ok(){return w.jsxs("div",{className:"app-shell",children:[w.jsx(KR,{}),w.jsx("main",{className:"main-content",children:w.jsxs(AT,{children:[w.jsx(gi,{path:"/login",element:w.jsx(ek,{})}),w.jsx(gi,{path:"/signup",element:w.jsx(tk,{})}),w.jsx(gi,{path:"/",element:w.jsx(Xd,{children:w.jsx(ZR,{})})}),w.jsx(gi,{path:"/event/:id",element:w.jsx(Xd,{children:w.jsx(nk,{})})}),w.jsx(gi,{path:"/profile",element:w.jsx(Xd,{children:w.jsx(rk,{})})}),w.jsx(gi,{path:"/admin",element:w.jsx(sk,{children:w.jsx(ik,{})})}),w.jsx(gi,{path:"*",element:w.jsx(cc,{to:"/",replace:!0})})]})}),w.jsx(QR,{})]})}const ak="/golfgang/";D0.createRoot(document.getElementById("root")).render(w.jsx(Q.StrictMode,{children:w.jsx(DT,{basename:ak,children:w.jsx(GR,{children:w.jsx(ok,{})})})}));
