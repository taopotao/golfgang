function S0(n,e){for(var t=0;t<e.length;t++){const i=e[t];if(typeof i!="string"&&!Array.isArray(i)){for(const o in i)if(o!=="default"&&!(o in n)){const l=Object.getOwnPropertyDescriptor(i,o);l&&Object.defineProperty(n,o,l.get?l:{enumerable:!0,get:()=>i[o]})}}}return Object.freeze(Object.defineProperty(n,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))i(o);new MutationObserver(o=>{for(const l of o)if(l.type==="childList")for(const h of l.addedNodes)h.tagName==="LINK"&&h.rel==="modulepreload"&&i(h)}).observe(document,{childList:!0,subtree:!0});function t(o){const l={};return o.integrity&&(l.integrity=o.integrity),o.referrerPolicy&&(l.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?l.credentials="include":o.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function i(o){if(o.ep)return;o.ep=!0;const l=t(o);fetch(o.href,l)}})();function P0(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var bd={exports:{}},Ha={},Dd={exports:{}},be={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var jg;function A0(){if(jg)return be;jg=1;var n=Symbol.for("react.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),i=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),l=Symbol.for("react.provider"),h=Symbol.for("react.context"),f=Symbol.for("react.forward_ref"),p=Symbol.for("react.suspense"),y=Symbol.for("react.memo"),w=Symbol.for("react.lazy"),T=Symbol.iterator;function S(F){return F===null||typeof F!="object"?null:(F=T&&F[T]||F["@@iterator"],typeof F=="function"?F:null)}var V={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},O=Object.assign,j={};function L(F,Q,fe){this.props=F,this.context=Q,this.refs=j,this.updater=fe||V}L.prototype.isReactComponent={},L.prototype.setState=function(F,Q){if(typeof F!="object"&&typeof F!="function"&&F!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,F,Q,"setState")},L.prototype.forceUpdate=function(F){this.updater.enqueueForceUpdate(this,F,"forceUpdate")};function se(){}se.prototype=L.prototype;function q(F,Q,fe){this.props=F,this.context=Q,this.refs=j,this.updater=fe||V}var te=q.prototype=new se;te.constructor=q,O(te,L.prototype),te.isPureReactComponent=!0;var ae=Array.isArray,we=Object.prototype.hasOwnProperty,re={current:null},k={key:!0,ref:!0,__self:!0,__source:!0};function P(F,Q,fe){var Ce,ke={},K=null,ee=null;if(Q!=null)for(Ce in Q.ref!==void 0&&(ee=Q.ref),Q.key!==void 0&&(K=""+Q.key),Q)we.call(Q,Ce)&&!k.hasOwnProperty(Ce)&&(ke[Ce]=Q[Ce]);var le=arguments.length-2;if(le===1)ke.children=fe;else if(1<le){for(var xe=Array(le),$e=0;$e<le;$e++)xe[$e]=arguments[$e+2];ke.children=xe}if(F&&F.defaultProps)for(Ce in le=F.defaultProps,le)ke[Ce]===void 0&&(ke[Ce]=le[Ce]);return{$$typeof:n,type:F,key:K,ref:ee,props:ke,_owner:re.current}}function C(F,Q){return{$$typeof:n,type:F.type,key:Q,ref:F.ref,props:F.props,_owner:F._owner}}function b(F){return typeof F=="object"&&F!==null&&F.$$typeof===n}function N(F){var Q={"=":"=0",":":"=2"};return"$"+F.replace(/[=:]/g,function(fe){return Q[fe]})}var M=/\/+/g;function R(F,Q){return typeof F=="object"&&F!==null&&F.key!=null?N(""+F.key):Q.toString(36)}function He(F,Q,fe,Ce,ke){var K=typeof F;(K==="undefined"||K==="boolean")&&(F=null);var ee=!1;if(F===null)ee=!0;else switch(K){case"string":case"number":ee=!0;break;case"object":switch(F.$$typeof){case n:case e:ee=!0}}if(ee)return ee=F,ke=ke(ee),F=Ce===""?"."+R(ee,0):Ce,ae(ke)?(fe="",F!=null&&(fe=F.replace(M,"$&/")+"/"),He(ke,Q,fe,"",function($e){return $e})):ke!=null&&(b(ke)&&(ke=C(ke,fe+(!ke.key||ee&&ee.key===ke.key?"":(""+ke.key).replace(M,"$&/")+"/")+F)),Q.push(ke)),1;if(ee=0,Ce=Ce===""?".":Ce+":",ae(F))for(var le=0;le<F.length;le++){K=F[le];var xe=Ce+R(K,le);ee+=He(K,Q,fe,xe,ke)}else if(xe=S(F),typeof xe=="function")for(F=xe.call(F),le=0;!(K=F.next()).done;)K=K.value,xe=Ce+R(K,le++),ee+=He(K,Q,fe,xe,ke);else if(K==="object")throw Q=String(F),Error("Objects are not valid as a React child (found: "+(Q==="[object Object]"?"object with keys {"+Object.keys(F).join(", ")+"}":Q)+"). If you meant to render a collection of children, use an array instead.");return ee}function Ze(F,Q,fe){if(F==null)return F;var Ce=[],ke=0;return He(F,Ce,"","",function(K){return Q.call(fe,K,ke++)}),Ce}function at(F){if(F._status===-1){var Q=F._result;Q=Q(),Q.then(function(fe){(F._status===0||F._status===-1)&&(F._status=1,F._result=fe)},function(fe){(F._status===0||F._status===-1)&&(F._status=2,F._result=fe)}),F._status===-1&&(F._status=0,F._result=Q)}if(F._status===1)return F._result.default;throw F._result}var ze={current:null},oe={transition:null},ve={ReactCurrentDispatcher:ze,ReactCurrentBatchConfig:oe,ReactCurrentOwner:re};function ce(){throw Error("act(...) is not supported in production builds of React.")}return be.Children={map:Ze,forEach:function(F,Q,fe){Ze(F,function(){Q.apply(this,arguments)},fe)},count:function(F){var Q=0;return Ze(F,function(){Q++}),Q},toArray:function(F){return Ze(F,function(Q){return Q})||[]},only:function(F){if(!b(F))throw Error("React.Children.only expected to receive a single React element child.");return F}},be.Component=L,be.Fragment=t,be.Profiler=o,be.PureComponent=q,be.StrictMode=i,be.Suspense=p,be.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=ve,be.act=ce,be.cloneElement=function(F,Q,fe){if(F==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+F+".");var Ce=O({},F.props),ke=F.key,K=F.ref,ee=F._owner;if(Q!=null){if(Q.ref!==void 0&&(K=Q.ref,ee=re.current),Q.key!==void 0&&(ke=""+Q.key),F.type&&F.type.defaultProps)var le=F.type.defaultProps;for(xe in Q)we.call(Q,xe)&&!k.hasOwnProperty(xe)&&(Ce[xe]=Q[xe]===void 0&&le!==void 0?le[xe]:Q[xe])}var xe=arguments.length-2;if(xe===1)Ce.children=fe;else if(1<xe){le=Array(xe);for(var $e=0;$e<xe;$e++)le[$e]=arguments[$e+2];Ce.children=le}return{$$typeof:n,type:F.type,key:ke,ref:K,props:Ce,_owner:ee}},be.createContext=function(F){return F={$$typeof:h,_currentValue:F,_currentValue2:F,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},F.Provider={$$typeof:l,_context:F},F.Consumer=F},be.createElement=P,be.createFactory=function(F){var Q=P.bind(null,F);return Q.type=F,Q},be.createRef=function(){return{current:null}},be.forwardRef=function(F){return{$$typeof:f,render:F}},be.isValidElement=b,be.lazy=function(F){return{$$typeof:w,_payload:{_status:-1,_result:F},_init:at}},be.memo=function(F,Q){return{$$typeof:y,type:F,compare:Q===void 0?null:Q}},be.startTransition=function(F){var Q=oe.transition;oe.transition={};try{F()}finally{oe.transition=Q}},be.unstable_act=ce,be.useCallback=function(F,Q){return ze.current.useCallback(F,Q)},be.useContext=function(F){return ze.current.useContext(F)},be.useDebugValue=function(){},be.useDeferredValue=function(F){return ze.current.useDeferredValue(F)},be.useEffect=function(F,Q){return ze.current.useEffect(F,Q)},be.useId=function(){return ze.current.useId()},be.useImperativeHandle=function(F,Q,fe){return ze.current.useImperativeHandle(F,Q,fe)},be.useInsertionEffect=function(F,Q){return ze.current.useInsertionEffect(F,Q)},be.useLayoutEffect=function(F,Q){return ze.current.useLayoutEffect(F,Q)},be.useMemo=function(F,Q){return ze.current.useMemo(F,Q)},be.useReducer=function(F,Q,fe){return ze.current.useReducer(F,Q,fe)},be.useRef=function(F){return ze.current.useRef(F)},be.useState=function(F){return ze.current.useState(F)},be.useSyncExternalStore=function(F,Q,fe){return ze.current.useSyncExternalStore(F,Q,fe)},be.useTransition=function(){return ze.current.useTransition()},be.version="18.3.1",be}var Fg;function kf(){return Fg||(Fg=1,Dd.exports=A0()),Dd.exports}/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ug;function C0(){if(Ug)return Ha;Ug=1;var n=kf(),e=Symbol.for("react.element"),t=Symbol.for("react.fragment"),i=Object.prototype.hasOwnProperty,o=n.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,l={key:!0,ref:!0,__self:!0,__source:!0};function h(f,p,y){var w,T={},S=null,V=null;y!==void 0&&(S=""+y),p.key!==void 0&&(S=""+p.key),p.ref!==void 0&&(V=p.ref);for(w in p)i.call(p,w)&&!l.hasOwnProperty(w)&&(T[w]=p[w]);if(f&&f.defaultProps)for(w in p=f.defaultProps,p)T[w]===void 0&&(T[w]=p[w]);return{$$typeof:e,type:f,key:S,ref:V,props:T,_owner:o.current}}return Ha.Fragment=t,Ha.jsx=h,Ha.jsxs=h,Ha}var zg;function R0(){return zg||(zg=1,bd.exports=C0()),bd.exports}var _=R0(),H=kf();const k0=P0(H),N0=S0({__proto__:null,default:k0},[H]);var $u={},Vd={exports:{}},rn={},Od={exports:{}},Ld={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Bg;function x0(){return Bg||(Bg=1,(function(n){function e(oe,ve){var ce=oe.length;oe.push(ve);e:for(;0<ce;){var F=ce-1>>>1,Q=oe[F];if(0<o(Q,ve))oe[F]=ve,oe[ce]=Q,ce=F;else break e}}function t(oe){return oe.length===0?null:oe[0]}function i(oe){if(oe.length===0)return null;var ve=oe[0],ce=oe.pop();if(ce!==ve){oe[0]=ce;e:for(var F=0,Q=oe.length,fe=Q>>>1;F<fe;){var Ce=2*(F+1)-1,ke=oe[Ce],K=Ce+1,ee=oe[K];if(0>o(ke,ce))K<Q&&0>o(ee,ke)?(oe[F]=ee,oe[K]=ce,F=K):(oe[F]=ke,oe[Ce]=ce,F=Ce);else if(K<Q&&0>o(ee,ce))oe[F]=ee,oe[K]=ce,F=K;else break e}}return ve}function o(oe,ve){var ce=oe.sortIndex-ve.sortIndex;return ce!==0?ce:oe.id-ve.id}if(typeof performance=="object"&&typeof performance.now=="function"){var l=performance;n.unstable_now=function(){return l.now()}}else{var h=Date,f=h.now();n.unstable_now=function(){return h.now()-f}}var p=[],y=[],w=1,T=null,S=3,V=!1,O=!1,j=!1,L=typeof setTimeout=="function"?setTimeout:null,se=typeof clearTimeout=="function"?clearTimeout:null,q=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function te(oe){for(var ve=t(y);ve!==null;){if(ve.callback===null)i(y);else if(ve.startTime<=oe)i(y),ve.sortIndex=ve.expirationTime,e(p,ve);else break;ve=t(y)}}function ae(oe){if(j=!1,te(oe),!O)if(t(p)!==null)O=!0,at(we);else{var ve=t(y);ve!==null&&ze(ae,ve.startTime-oe)}}function we(oe,ve){O=!1,j&&(j=!1,se(P),P=-1),V=!0;var ce=S;try{for(te(ve),T=t(p);T!==null&&(!(T.expirationTime>ve)||oe&&!N());){var F=T.callback;if(typeof F=="function"){T.callback=null,S=T.priorityLevel;var Q=F(T.expirationTime<=ve);ve=n.unstable_now(),typeof Q=="function"?T.callback=Q:T===t(p)&&i(p),te(ve)}else i(p);T=t(p)}if(T!==null)var fe=!0;else{var Ce=t(y);Ce!==null&&ze(ae,Ce.startTime-ve),fe=!1}return fe}finally{T=null,S=ce,V=!1}}var re=!1,k=null,P=-1,C=5,b=-1;function N(){return!(n.unstable_now()-b<C)}function M(){if(k!==null){var oe=n.unstable_now();b=oe;var ve=!0;try{ve=k(!0,oe)}finally{ve?R():(re=!1,k=null)}}else re=!1}var R;if(typeof q=="function")R=function(){q(M)};else if(typeof MessageChannel<"u"){var He=new MessageChannel,Ze=He.port2;He.port1.onmessage=M,R=function(){Ze.postMessage(null)}}else R=function(){L(M,0)};function at(oe){k=oe,re||(re=!0,R())}function ze(oe,ve){P=L(function(){oe(n.unstable_now())},ve)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(oe){oe.callback=null},n.unstable_continueExecution=function(){O||V||(O=!0,at(we))},n.unstable_forceFrameRate=function(oe){0>oe||125<oe?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):C=0<oe?Math.floor(1e3/oe):5},n.unstable_getCurrentPriorityLevel=function(){return S},n.unstable_getFirstCallbackNode=function(){return t(p)},n.unstable_next=function(oe){switch(S){case 1:case 2:case 3:var ve=3;break;default:ve=S}var ce=S;S=ve;try{return oe()}finally{S=ce}},n.unstable_pauseExecution=function(){},n.unstable_requestPaint=function(){},n.unstable_runWithPriority=function(oe,ve){switch(oe){case 1:case 2:case 3:case 4:case 5:break;default:oe=3}var ce=S;S=oe;try{return ve()}finally{S=ce}},n.unstable_scheduleCallback=function(oe,ve,ce){var F=n.unstable_now();switch(typeof ce=="object"&&ce!==null?(ce=ce.delay,ce=typeof ce=="number"&&0<ce?F+ce:F):ce=F,oe){case 1:var Q=-1;break;case 2:Q=250;break;case 5:Q=1073741823;break;case 4:Q=1e4;break;default:Q=5e3}return Q=ce+Q,oe={id:w++,callback:ve,priorityLevel:oe,startTime:ce,expirationTime:Q,sortIndex:-1},ce>F?(oe.sortIndex=ce,e(y,oe),t(p)===null&&oe===t(y)&&(j?(se(P),P=-1):j=!0,ze(ae,ce-F))):(oe.sortIndex=Q,e(p,oe),O||V||(O=!0,at(we))),oe},n.unstable_shouldYield=N,n.unstable_wrapCallback=function(oe){var ve=S;return function(){var ce=S;S=ve;try{return oe.apply(this,arguments)}finally{S=ce}}}})(Ld)),Ld}var $g;function b0(){return $g||($g=1,Od.exports=x0()),Od.exports}/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Wg;function D0(){if(Wg)return rn;Wg=1;var n=kf(),e=b0();function t(r){for(var s="https://reactjs.org/docs/error-decoder.html?invariant="+r,a=1;a<arguments.length;a++)s+="&args[]="+encodeURIComponent(arguments[a]);return"Minified React error #"+r+"; visit "+s+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var i=new Set,o={};function l(r,s){h(r,s),h(r+"Capture",s)}function h(r,s){for(o[r]=s,r=0;r<s.length;r++)i.add(s[r])}var f=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),p=Object.prototype.hasOwnProperty,y=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,w={},T={};function S(r){return p.call(T,r)?!0:p.call(w,r)?!1:y.test(r)?T[r]=!0:(w[r]=!0,!1)}function V(r,s,a,c){if(a!==null&&a.type===0)return!1;switch(typeof s){case"function":case"symbol":return!0;case"boolean":return c?!1:a!==null?!a.acceptsBooleans:(r=r.toLowerCase().slice(0,5),r!=="data-"&&r!=="aria-");default:return!1}}function O(r,s,a,c){if(s===null||typeof s>"u"||V(r,s,a,c))return!0;if(c)return!1;if(a!==null)switch(a.type){case 3:return!s;case 4:return s===!1;case 5:return isNaN(s);case 6:return isNaN(s)||1>s}return!1}function j(r,s,a,c,d,g,E){this.acceptsBooleans=s===2||s===3||s===4,this.attributeName=c,this.attributeNamespace=d,this.mustUseProperty=a,this.propertyName=r,this.type=s,this.sanitizeURL=g,this.removeEmptyString=E}var L={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(r){L[r]=new j(r,0,!1,r,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(r){var s=r[0];L[s]=new j(s,1,!1,r[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(r){L[r]=new j(r,2,!1,r.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(r){L[r]=new j(r,2,!1,r,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(r){L[r]=new j(r,3,!1,r.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(r){L[r]=new j(r,3,!0,r,null,!1,!1)}),["capture","download"].forEach(function(r){L[r]=new j(r,4,!1,r,null,!1,!1)}),["cols","rows","size","span"].forEach(function(r){L[r]=new j(r,6,!1,r,null,!1,!1)}),["rowSpan","start"].forEach(function(r){L[r]=new j(r,5,!1,r.toLowerCase(),null,!1,!1)});var se=/[\-:]([a-z])/g;function q(r){return r[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(r){var s=r.replace(se,q);L[s]=new j(s,1,!1,r,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(r){var s=r.replace(se,q);L[s]=new j(s,1,!1,r,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(r){var s=r.replace(se,q);L[s]=new j(s,1,!1,r,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(r){L[r]=new j(r,1,!1,r.toLowerCase(),null,!1,!1)}),L.xlinkHref=new j("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(r){L[r]=new j(r,1,!1,r.toLowerCase(),null,!0,!0)});function te(r,s,a,c){var d=L.hasOwnProperty(s)?L[s]:null;(d!==null?d.type!==0:c||!(2<s.length)||s[0]!=="o"&&s[0]!=="O"||s[1]!=="n"&&s[1]!=="N")&&(O(s,a,d,c)&&(a=null),c||d===null?S(s)&&(a===null?r.removeAttribute(s):r.setAttribute(s,""+a)):d.mustUseProperty?r[d.propertyName]=a===null?d.type===3?!1:"":a:(s=d.attributeName,c=d.attributeNamespace,a===null?r.removeAttribute(s):(d=d.type,a=d===3||d===4&&a===!0?"":""+a,c?r.setAttributeNS(c,s,a):r.setAttribute(s,a))))}var ae=n.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,we=Symbol.for("react.element"),re=Symbol.for("react.portal"),k=Symbol.for("react.fragment"),P=Symbol.for("react.strict_mode"),C=Symbol.for("react.profiler"),b=Symbol.for("react.provider"),N=Symbol.for("react.context"),M=Symbol.for("react.forward_ref"),R=Symbol.for("react.suspense"),He=Symbol.for("react.suspense_list"),Ze=Symbol.for("react.memo"),at=Symbol.for("react.lazy"),ze=Symbol.for("react.offscreen"),oe=Symbol.iterator;function ve(r){return r===null||typeof r!="object"?null:(r=oe&&r[oe]||r["@@iterator"],typeof r=="function"?r:null)}var ce=Object.assign,F;function Q(r){if(F===void 0)try{throw Error()}catch(a){var s=a.stack.trim().match(/\n( *(at )?)/);F=s&&s[1]||""}return`
`+F+r}var fe=!1;function Ce(r,s){if(!r||fe)return"";fe=!0;var a=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(s)if(s=function(){throw Error()},Object.defineProperty(s.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(s,[])}catch($){var c=$}Reflect.construct(r,[],s)}else{try{s.call()}catch($){c=$}r.call(s.prototype)}else{try{throw Error()}catch($){c=$}r()}}catch($){if($&&c&&typeof $.stack=="string"){for(var d=$.stack.split(`
`),g=c.stack.split(`
`),E=d.length-1,A=g.length-1;1<=E&&0<=A&&d[E]!==g[A];)A--;for(;1<=E&&0<=A;E--,A--)if(d[E]!==g[A]){if(E!==1||A!==1)do if(E--,A--,0>A||d[E]!==g[A]){var x=`
`+d[E].replace(" at new "," at ");return r.displayName&&x.includes("<anonymous>")&&(x=x.replace("<anonymous>",r.displayName)),x}while(1<=E&&0<=A);break}}}finally{fe=!1,Error.prepareStackTrace=a}return(r=r?r.displayName||r.name:"")?Q(r):""}function ke(r){switch(r.tag){case 5:return Q(r.type);case 16:return Q("Lazy");case 13:return Q("Suspense");case 19:return Q("SuspenseList");case 0:case 2:case 15:return r=Ce(r.type,!1),r;case 11:return r=Ce(r.type.render,!1),r;case 1:return r=Ce(r.type,!0),r;default:return""}}function K(r){if(r==null)return null;if(typeof r=="function")return r.displayName||r.name||null;if(typeof r=="string")return r;switch(r){case k:return"Fragment";case re:return"Portal";case C:return"Profiler";case P:return"StrictMode";case R:return"Suspense";case He:return"SuspenseList"}if(typeof r=="object")switch(r.$$typeof){case N:return(r.displayName||"Context")+".Consumer";case b:return(r._context.displayName||"Context")+".Provider";case M:var s=r.render;return r=r.displayName,r||(r=s.displayName||s.name||"",r=r!==""?"ForwardRef("+r+")":"ForwardRef"),r;case Ze:return s=r.displayName||null,s!==null?s:K(r.type)||"Memo";case at:s=r._payload,r=r._init;try{return K(r(s))}catch{}}return null}function ee(r){var s=r.type;switch(r.tag){case 24:return"Cache";case 9:return(s.displayName||"Context")+".Consumer";case 10:return(s._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return r=s.render,r=r.displayName||r.name||"",s.displayName||(r!==""?"ForwardRef("+r+")":"ForwardRef");case 7:return"Fragment";case 5:return s;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return K(s);case 8:return s===P?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof s=="function")return s.displayName||s.name||null;if(typeof s=="string")return s}return null}function le(r){switch(typeof r){case"boolean":case"number":case"string":case"undefined":return r;case"object":return r;default:return""}}function xe(r){var s=r.type;return(r=r.nodeName)&&r.toLowerCase()==="input"&&(s==="checkbox"||s==="radio")}function $e(r){var s=xe(r)?"checked":"value",a=Object.getOwnPropertyDescriptor(r.constructor.prototype,s),c=""+r[s];if(!r.hasOwnProperty(s)&&typeof a<"u"&&typeof a.get=="function"&&typeof a.set=="function"){var d=a.get,g=a.set;return Object.defineProperty(r,s,{configurable:!0,get:function(){return d.call(this)},set:function(E){c=""+E,g.call(this,E)}}),Object.defineProperty(r,s,{enumerable:a.enumerable}),{getValue:function(){return c},setValue:function(E){c=""+E},stopTracking:function(){r._valueTracker=null,delete r[s]}}}}function Pt(r){r._valueTracker||(r._valueTracker=$e(r))}function Nn(r){if(!r)return!1;var s=r._valueTracker;if(!s)return!0;var a=s.getValue(),c="";return r&&(c=xe(r)?r.checked?"true":"false":r.value),r=c,r!==a?(s.setValue(r),!0):!1}function xn(r){if(r=r||(typeof document<"u"?document:void 0),typeof r>"u")return null;try{return r.activeElement||r.body}catch{return r.body}}function yr(r,s){var a=s.checked;return ce({},s,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:a??r._wrapperState.initialChecked})}function Ds(r,s){var a=s.defaultValue==null?"":s.defaultValue,c=s.checked!=null?s.checked:s.defaultChecked;a=le(s.value!=null?s.value:a),r._wrapperState={initialChecked:c,initialValue:a,controlled:s.type==="checkbox"||s.type==="radio"?s.checked!=null:s.value!=null}}function Jo(r,s){s=s.checked,s!=null&&te(r,"checked",s,!1)}function Xo(r,s){Jo(r,s);var a=le(s.value),c=s.type;if(a!=null)c==="number"?(a===0&&r.value===""||r.value!=a)&&(r.value=""+a):r.value!==""+a&&(r.value=""+a);else if(c==="submit"||c==="reset"){r.removeAttribute("value");return}s.hasOwnProperty("value")?Vs(r,s.type,a):s.hasOwnProperty("defaultValue")&&Vs(r,s.type,le(s.defaultValue)),s.checked==null&&s.defaultChecked!=null&&(r.defaultChecked=!!s.defaultChecked)}function Rl(r,s,a){if(s.hasOwnProperty("value")||s.hasOwnProperty("defaultValue")){var c=s.type;if(!(c!=="submit"&&c!=="reset"||s.value!==void 0&&s.value!==null))return;s=""+r._wrapperState.initialValue,a||s===r.value||(r.value=s),r.defaultValue=s}a=r.name,a!==""&&(r.name=""),r.defaultChecked=!!r._wrapperState.initialChecked,a!==""&&(r.name=a)}function Vs(r,s,a){(s!=="number"||xn(r.ownerDocument)!==r)&&(a==null?r.defaultValue=""+r._wrapperState.initialValue:r.defaultValue!==""+a&&(r.defaultValue=""+a))}var vr=Array.isArray;function _r(r,s,a,c){if(r=r.options,s){s={};for(var d=0;d<a.length;d++)s["$"+a[d]]=!0;for(a=0;a<r.length;a++)d=s.hasOwnProperty("$"+r[a].value),r[a].selected!==d&&(r[a].selected=d),d&&c&&(r[a].defaultSelected=!0)}else{for(a=""+le(a),s=null,d=0;d<r.length;d++){if(r[d].value===a){r[d].selected=!0,c&&(r[d].defaultSelected=!0);return}s!==null||r[d].disabled||(s=r[d])}s!==null&&(s.selected=!0)}}function Zo(r,s){if(s.dangerouslySetInnerHTML!=null)throw Error(t(91));return ce({},s,{value:void 0,defaultValue:void 0,children:""+r._wrapperState.initialValue})}function Os(r,s){var a=s.value;if(a==null){if(a=s.children,s=s.defaultValue,a!=null){if(s!=null)throw Error(t(92));if(vr(a)){if(1<a.length)throw Error(t(93));a=a[0]}s=a}s==null&&(s=""),a=s}r._wrapperState={initialValue:le(a)}}function Ls(r,s){var a=le(s.value),c=le(s.defaultValue);a!=null&&(a=""+a,a!==r.value&&(r.value=a),s.defaultValue==null&&r.defaultValue!==a&&(r.defaultValue=a)),c!=null&&(r.defaultValue=""+c)}function ea(r){var s=r.textContent;s===r._wrapperState.initialValue&&s!==""&&s!==null&&(r.value=s)}function _t(r){switch(r){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function wt(r,s){return r==null||r==="http://www.w3.org/1999/xhtml"?_t(s):r==="http://www.w3.org/2000/svg"&&s==="foreignObject"?"http://www.w3.org/1999/xhtml":r}var wr,ta=(function(r){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(s,a,c,d){MSApp.execUnsafeLocalFunction(function(){return r(s,a,c,d)})}:r})(function(r,s){if(r.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in r)r.innerHTML=s;else{for(wr=wr||document.createElement("div"),wr.innerHTML="<svg>"+s.valueOf().toString()+"</svg>",s=wr.firstChild;r.firstChild;)r.removeChild(r.firstChild);for(;s.firstChild;)r.appendChild(s.firstChild)}});function Kr(r,s){if(s){var a=r.firstChild;if(a&&a===r.lastChild&&a.nodeType===3){a.nodeValue=s;return}}r.textContent=s}var Wi={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Hi=["Webkit","ms","Moz","O"];Object.keys(Wi).forEach(function(r){Hi.forEach(function(s){s=s+r.charAt(0).toUpperCase()+r.substring(1),Wi[s]=Wi[r]})});function na(r,s,a){return s==null||typeof s=="boolean"||s===""?"":a||typeof s!="number"||s===0||Wi.hasOwnProperty(r)&&Wi[r]?(""+s).trim():s+"px"}function ra(r,s){r=r.style;for(var a in s)if(s.hasOwnProperty(a)){var c=a.indexOf("--")===0,d=na(a,s[a],c);a==="float"&&(a="cssFloat"),c?r.setProperty(a,d):r[a]=d}}var ia=ce({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function sa(r,s){if(s){if(ia[r]&&(s.children!=null||s.dangerouslySetInnerHTML!=null))throw Error(t(137,r));if(s.dangerouslySetInnerHTML!=null){if(s.children!=null)throw Error(t(60));if(typeof s.dangerouslySetInnerHTML!="object"||!("__html"in s.dangerouslySetInnerHTML))throw Error(t(61))}if(s.style!=null&&typeof s.style!="object")throw Error(t(62))}}function oa(r,s){if(r.indexOf("-")===-1)return typeof s.is=="string";switch(r){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var qi=null;function Ms(r){return r=r.target||r.srcElement||window,r.correspondingUseElement&&(r=r.correspondingUseElement),r.nodeType===3?r.parentNode:r}var js=null,yn=null,Jn=null;function Fs(r){if(r=Na(r)){if(typeof js!="function")throw Error(t(280));var s=r.stateNode;s&&(s=iu(s),js(r.stateNode,r.type,s))}}function Xn(r){yn?Jn?Jn.push(r):Jn=[r]:yn=r}function aa(){if(yn){var r=yn,s=Jn;if(Jn=yn=null,Fs(r),s)for(r=0;r<s.length;r++)Fs(s[r])}}function Gi(r,s){return r(s)}function la(){}var Er=!1;function ua(r,s,a){if(Er)return r(s,a);Er=!0;try{return Gi(r,s,a)}finally{Er=!1,(yn!==null||Jn!==null)&&(la(),aa())}}function lt(r,s){var a=r.stateNode;if(a===null)return null;var c=iu(a);if(c===null)return null;a=c[s];e:switch(s){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(c=!c.disabled)||(r=r.type,c=!(r==="button"||r==="input"||r==="select"||r==="textarea")),r=!c;break e;default:r=!1}if(r)return null;if(a&&typeof a!="function")throw Error(t(231,s,typeof a));return a}var Us=!1;if(f)try{var bn={};Object.defineProperty(bn,"passive",{get:function(){Us=!0}}),window.addEventListener("test",bn,bn),window.removeEventListener("test",bn,bn)}catch{Us=!1}function Ki(r,s,a,c,d,g,E,A,x){var $=Array.prototype.slice.call(arguments,3);try{s.apply(a,$)}catch(X){this.onError(X)}}var Qi=!1,zs=null,Dn=!1,ca=null,oh={onError:function(r){Qi=!0,zs=r}};function Bs(r,s,a,c,d,g,E,A,x){Qi=!1,zs=null,Ki.apply(oh,arguments)}function kl(r,s,a,c,d,g,E,A,x){if(Bs.apply(this,arguments),Qi){if(Qi){var $=zs;Qi=!1,zs=null}else throw Error(t(198));Dn||(Dn=!0,ca=$)}}function Vn(r){var s=r,a=r;if(r.alternate)for(;s.return;)s=s.return;else{r=s;do s=r,(s.flags&4098)!==0&&(a=s.return),r=s.return;while(r)}return s.tag===3?a:null}function Yi(r){if(r.tag===13){var s=r.memoizedState;if(s===null&&(r=r.alternate,r!==null&&(s=r.memoizedState)),s!==null)return s.dehydrated}return null}function On(r){if(Vn(r)!==r)throw Error(t(188))}function Nl(r){var s=r.alternate;if(!s){if(s=Vn(r),s===null)throw Error(t(188));return s!==r?null:r}for(var a=r,c=s;;){var d=a.return;if(d===null)break;var g=d.alternate;if(g===null){if(c=d.return,c!==null){a=c;continue}break}if(d.child===g.child){for(g=d.child;g;){if(g===a)return On(d),r;if(g===c)return On(d),s;g=g.sibling}throw Error(t(188))}if(a.return!==c.return)a=d,c=g;else{for(var E=!1,A=d.child;A;){if(A===a){E=!0,a=d,c=g;break}if(A===c){E=!0,c=d,a=g;break}A=A.sibling}if(!E){for(A=g.child;A;){if(A===a){E=!0,a=g,c=d;break}if(A===c){E=!0,c=g,a=d;break}A=A.sibling}if(!E)throw Error(t(189))}}if(a.alternate!==c)throw Error(t(190))}if(a.tag!==3)throw Error(t(188));return a.stateNode.current===a?r:s}function ha(r){return r=Nl(r),r!==null?$s(r):null}function $s(r){if(r.tag===5||r.tag===6)return r;for(r=r.child;r!==null;){var s=$s(r);if(s!==null)return s;r=r.sibling}return null}var Ws=e.unstable_scheduleCallback,da=e.unstable_cancelCallback,xl=e.unstable_shouldYield,ah=e.unstable_requestPaint,Ke=e.unstable_now,bl=e.unstable_getCurrentPriorityLevel,Ji=e.unstable_ImmediatePriority,Qr=e.unstable_UserBlockingPriority,vn=e.unstable_NormalPriority,fa=e.unstable_LowPriority,Dl=e.unstable_IdlePriority,Xi=null,ln=null;function Vl(r){if(ln&&typeof ln.onCommitFiberRoot=="function")try{ln.onCommitFiberRoot(Xi,r,void 0,(r.current.flags&128)===128)}catch{}}var qt=Math.clz32?Math.clz32:Ll,pa=Math.log,Ol=Math.LN2;function Ll(r){return r>>>=0,r===0?32:31-(pa(r)/Ol|0)|0}var Hs=64,qs=4194304;function Yr(r){switch(r&-r){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return r&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return r&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return r}}function Zi(r,s){var a=r.pendingLanes;if(a===0)return 0;var c=0,d=r.suspendedLanes,g=r.pingedLanes,E=a&268435455;if(E!==0){var A=E&~d;A!==0?c=Yr(A):(g&=E,g!==0&&(c=Yr(g)))}else E=a&~d,E!==0?c=Yr(E):g!==0&&(c=Yr(g));if(c===0)return 0;if(s!==0&&s!==c&&(s&d)===0&&(d=c&-c,g=s&-s,d>=g||d===16&&(g&4194240)!==0))return s;if((c&4)!==0&&(c|=a&16),s=r.entangledLanes,s!==0)for(r=r.entanglements,s&=c;0<s;)a=31-qt(s),d=1<<a,c|=r[a],s&=~d;return c}function lh(r,s){switch(r){case 1:case 2:case 4:return s+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return s+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Tr(r,s){for(var a=r.suspendedLanes,c=r.pingedLanes,d=r.expirationTimes,g=r.pendingLanes;0<g;){var E=31-qt(g),A=1<<E,x=d[E];x===-1?((A&a)===0||(A&c)!==0)&&(d[E]=lh(A,s)):x<=s&&(r.expiredLanes|=A),g&=~A}}function un(r){return r=r.pendingLanes&-1073741825,r!==0?r:r&1073741824?1073741824:0}function es(){var r=Hs;return Hs<<=1,(Hs&4194240)===0&&(Hs=64),r}function Jr(r){for(var s=[],a=0;31>a;a++)s.push(r);return s}function Xr(r,s,a){r.pendingLanes|=s,s!==536870912&&(r.suspendedLanes=0,r.pingedLanes=0),r=r.eventTimes,s=31-qt(s),r[s]=a}function qe(r,s){var a=r.pendingLanes&~s;r.pendingLanes=s,r.suspendedLanes=0,r.pingedLanes=0,r.expiredLanes&=s,r.mutableReadLanes&=s,r.entangledLanes&=s,s=r.entanglements;var c=r.eventTimes;for(r=r.expirationTimes;0<a;){var d=31-qt(a),g=1<<d;s[d]=0,c[d]=-1,r[d]=-1,a&=~g}}function Zr(r,s){var a=r.entangledLanes|=s;for(r=r.entanglements;a;){var c=31-qt(a),d=1<<c;d&s|r[c]&s&&(r[c]|=s),a&=~d}}var Oe=0;function ei(r){return r&=-r,1<r?4<r?(r&268435455)!==0?16:536870912:4:1}var Ml,Gs,jl,Fl,Ul,ma=!1,Zn=[],xt=null,Ln=null,Mn=null,ti=new Map,_n=new Map,er=[],uh="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function zl(r,s){switch(r){case"focusin":case"focusout":xt=null;break;case"dragenter":case"dragleave":Ln=null;break;case"mouseover":case"mouseout":Mn=null;break;case"pointerover":case"pointerout":ti.delete(s.pointerId);break;case"gotpointercapture":case"lostpointercapture":_n.delete(s.pointerId)}}function Yt(r,s,a,c,d,g){return r===null||r.nativeEvent!==g?(r={blockedOn:s,domEventName:a,eventSystemFlags:c,nativeEvent:g,targetContainers:[d]},s!==null&&(s=Na(s),s!==null&&Gs(s)),r):(r.eventSystemFlags|=c,s=r.targetContainers,d!==null&&s.indexOf(d)===-1&&s.push(d),r)}function ch(r,s,a,c,d){switch(s){case"focusin":return xt=Yt(xt,r,s,a,c,d),!0;case"dragenter":return Ln=Yt(Ln,r,s,a,c,d),!0;case"mouseover":return Mn=Yt(Mn,r,s,a,c,d),!0;case"pointerover":var g=d.pointerId;return ti.set(g,Yt(ti.get(g)||null,r,s,a,c,d)),!0;case"gotpointercapture":return g=d.pointerId,_n.set(g,Yt(_n.get(g)||null,r,s,a,c,d)),!0}return!1}function Bl(r){var s=ss(r.target);if(s!==null){var a=Vn(s);if(a!==null){if(s=a.tag,s===13){if(s=Yi(a),s!==null){r.blockedOn=s,Ul(r.priority,function(){jl(a)});return}}else if(s===3&&a.stateNode.current.memoizedState.isDehydrated){r.blockedOn=a.tag===3?a.stateNode.containerInfo:null;return}}}r.blockedOn=null}function Ir(r){if(r.blockedOn!==null)return!1;for(var s=r.targetContainers;0<s.length;){var a=Ks(r.domEventName,r.eventSystemFlags,s[0],r.nativeEvent);if(a===null){a=r.nativeEvent;var c=new a.constructor(a.type,a);qi=c,a.target.dispatchEvent(c),qi=null}else return s=Na(a),s!==null&&Gs(s),r.blockedOn=a,!1;s.shift()}return!0}function ts(r,s,a){Ir(r)&&a.delete(s)}function $l(){ma=!1,xt!==null&&Ir(xt)&&(xt=null),Ln!==null&&Ir(Ln)&&(Ln=null),Mn!==null&&Ir(Mn)&&(Mn=null),ti.forEach(ts),_n.forEach(ts)}function jn(r,s){r.blockedOn===s&&(r.blockedOn=null,ma||(ma=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,$l)))}function Fn(r){function s(d){return jn(d,r)}if(0<Zn.length){jn(Zn[0],r);for(var a=1;a<Zn.length;a++){var c=Zn[a];c.blockedOn===r&&(c.blockedOn=null)}}for(xt!==null&&jn(xt,r),Ln!==null&&jn(Ln,r),Mn!==null&&jn(Mn,r),ti.forEach(s),_n.forEach(s),a=0;a<er.length;a++)c=er[a],c.blockedOn===r&&(c.blockedOn=null);for(;0<er.length&&(a=er[0],a.blockedOn===null);)Bl(a),a.blockedOn===null&&er.shift()}var Sr=ae.ReactCurrentBatchConfig,ni=!0;function et(r,s,a,c){var d=Oe,g=Sr.transition;Sr.transition=null;try{Oe=1,ga(r,s,a,c)}finally{Oe=d,Sr.transition=g}}function hh(r,s,a,c){var d=Oe,g=Sr.transition;Sr.transition=null;try{Oe=4,ga(r,s,a,c)}finally{Oe=d,Sr.transition=g}}function ga(r,s,a,c){if(ni){var d=Ks(r,s,a,c);if(d===null)Th(r,s,c,ns,a),zl(r,c);else if(ch(d,r,s,a,c))c.stopPropagation();else if(zl(r,c),s&4&&-1<uh.indexOf(r)){for(;d!==null;){var g=Na(d);if(g!==null&&Ml(g),g=Ks(r,s,a,c),g===null&&Th(r,s,c,ns,a),g===d)break;d=g}d!==null&&c.stopPropagation()}else Th(r,s,c,null,a)}}var ns=null;function Ks(r,s,a,c){if(ns=null,r=Ms(c),r=ss(r),r!==null)if(s=Vn(r),s===null)r=null;else if(a=s.tag,a===13){if(r=Yi(s),r!==null)return r;r=null}else if(a===3){if(s.stateNode.current.memoizedState.isDehydrated)return s.tag===3?s.stateNode.containerInfo:null;r=null}else s!==r&&(r=null);return ns=r,null}function ya(r){switch(r){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(bl()){case Ji:return 1;case Qr:return 4;case vn:case fa:return 16;case Dl:return 536870912;default:return 16}default:return 16}}var cn=null,Qs=null,Jt=null;function va(){if(Jt)return Jt;var r,s=Qs,a=s.length,c,d="value"in cn?cn.value:cn.textContent,g=d.length;for(r=0;r<a&&s[r]===d[r];r++);var E=a-r;for(c=1;c<=E&&s[a-c]===d[g-c];c++);return Jt=d.slice(r,1<c?1-c:void 0)}function Ys(r){var s=r.keyCode;return"charCode"in r?(r=r.charCode,r===0&&s===13&&(r=13)):r=s,r===10&&(r=13),32<=r||r===13?r:0}function tr(){return!0}function _a(){return!1}function bt(r){function s(a,c,d,g,E){this._reactName=a,this._targetInst=d,this.type=c,this.nativeEvent=g,this.target=E,this.currentTarget=null;for(var A in r)r.hasOwnProperty(A)&&(a=r[A],this[A]=a?a(g):g[A]);return this.isDefaultPrevented=(g.defaultPrevented!=null?g.defaultPrevented:g.returnValue===!1)?tr:_a,this.isPropagationStopped=_a,this}return ce(s.prototype,{preventDefault:function(){this.defaultPrevented=!0;var a=this.nativeEvent;a&&(a.preventDefault?a.preventDefault():typeof a.returnValue!="unknown"&&(a.returnValue=!1),this.isDefaultPrevented=tr)},stopPropagation:function(){var a=this.nativeEvent;a&&(a.stopPropagation?a.stopPropagation():typeof a.cancelBubble!="unknown"&&(a.cancelBubble=!0),this.isPropagationStopped=tr)},persist:function(){},isPersistent:tr}),s}var Un={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(r){return r.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Js=bt(Un),nr=ce({},Un,{view:0,detail:0}),dh=bt(nr),Xs,Pr,ri,rs=ce({},nr,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:rr,button:0,buttons:0,relatedTarget:function(r){return r.relatedTarget===void 0?r.fromElement===r.srcElement?r.toElement:r.fromElement:r.relatedTarget},movementX:function(r){return"movementX"in r?r.movementX:(r!==ri&&(ri&&r.type==="mousemove"?(Xs=r.screenX-ri.screenX,Pr=r.screenY-ri.screenY):Pr=Xs=0,ri=r),Xs)},movementY:function(r){return"movementY"in r?r.movementY:Pr}}),Zs=bt(rs),wa=ce({},rs,{dataTransfer:0}),Wl=bt(wa),eo=ce({},nr,{relatedTarget:0}),to=bt(eo),Hl=ce({},Un,{animationName:0,elapsedTime:0,pseudoElement:0}),Ar=bt(Hl),ql=ce({},Un,{clipboardData:function(r){return"clipboardData"in r?r.clipboardData:window.clipboardData}}),Gl=bt(ql),Kl=ce({},Un,{data:0}),Ea=bt(Kl),no={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Gt={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Ql={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Yl(r){var s=this.nativeEvent;return s.getModifierState?s.getModifierState(r):(r=Ql[r])?!!s[r]:!1}function rr(){return Yl}var u=ce({},nr,{key:function(r){if(r.key){var s=no[r.key]||r.key;if(s!=="Unidentified")return s}return r.type==="keypress"?(r=Ys(r),r===13?"Enter":String.fromCharCode(r)):r.type==="keydown"||r.type==="keyup"?Gt[r.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:rr,charCode:function(r){return r.type==="keypress"?Ys(r):0},keyCode:function(r){return r.type==="keydown"||r.type==="keyup"?r.keyCode:0},which:function(r){return r.type==="keypress"?Ys(r):r.type==="keydown"||r.type==="keyup"?r.keyCode:0}}),m=bt(u),v=ce({},rs,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),I=bt(v),U=ce({},nr,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:rr}),W=bt(U),ie=ce({},Un,{propertyName:0,elapsedTime:0,pseudoElement:0}),We=bt(ie),Et=ce({},rs,{deltaX:function(r){return"deltaX"in r?r.deltaX:"wheelDeltaX"in r?-r.wheelDeltaX:0},deltaY:function(r){return"deltaY"in r?r.deltaY:"wheelDeltaY"in r?-r.wheelDeltaY:"wheelDelta"in r?-r.wheelDelta:0},deltaZ:0,deltaMode:0}),Le=bt(Et),At=[9,13,27,32],pt=f&&"CompositionEvent"in window,wn=null;f&&"documentMode"in document&&(wn=document.documentMode);var hn=f&&"TextEvent"in window&&!wn,is=f&&(!pt||wn&&8<wn&&11>=wn),ro=" ",bp=!1;function Dp(r,s){switch(r){case"keyup":return At.indexOf(s.keyCode)!==-1;case"keydown":return s.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Vp(r){return r=r.detail,typeof r=="object"&&"data"in r?r.data:null}var io=!1;function EE(r,s){switch(r){case"compositionend":return Vp(s);case"keypress":return s.which!==32?null:(bp=!0,ro);case"textInput":return r=s.data,r===ro&&bp?null:r;default:return null}}function TE(r,s){if(io)return r==="compositionend"||!pt&&Dp(r,s)?(r=va(),Jt=Qs=cn=null,io=!1,r):null;switch(r){case"paste":return null;case"keypress":if(!(s.ctrlKey||s.altKey||s.metaKey)||s.ctrlKey&&s.altKey){if(s.char&&1<s.char.length)return s.char;if(s.which)return String.fromCharCode(s.which)}return null;case"compositionend":return is&&s.locale!=="ko"?null:s.data;default:return null}}var IE={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Op(r){var s=r&&r.nodeName&&r.nodeName.toLowerCase();return s==="input"?!!IE[r.type]:s==="textarea"}function Lp(r,s,a,c){Xn(c),s=tu(s,"onChange"),0<s.length&&(a=new Js("onChange","change",null,a,c),r.push({event:a,listeners:s}))}var Ta=null,Ia=null;function SE(r){em(r,0)}function Jl(r){var s=uo(r);if(Nn(s))return r}function PE(r,s){if(r==="change")return s}var Mp=!1;if(f){var fh;if(f){var ph="oninput"in document;if(!ph){var jp=document.createElement("div");jp.setAttribute("oninput","return;"),ph=typeof jp.oninput=="function"}fh=ph}else fh=!1;Mp=fh&&(!document.documentMode||9<document.documentMode)}function Fp(){Ta&&(Ta.detachEvent("onpropertychange",Up),Ia=Ta=null)}function Up(r){if(r.propertyName==="value"&&Jl(Ia)){var s=[];Lp(s,Ia,r,Ms(r)),ua(SE,s)}}function AE(r,s,a){r==="focusin"?(Fp(),Ta=s,Ia=a,Ta.attachEvent("onpropertychange",Up)):r==="focusout"&&Fp()}function CE(r){if(r==="selectionchange"||r==="keyup"||r==="keydown")return Jl(Ia)}function RE(r,s){if(r==="click")return Jl(s)}function kE(r,s){if(r==="input"||r==="change")return Jl(s)}function NE(r,s){return r===s&&(r!==0||1/r===1/s)||r!==r&&s!==s}var zn=typeof Object.is=="function"?Object.is:NE;function Sa(r,s){if(zn(r,s))return!0;if(typeof r!="object"||r===null||typeof s!="object"||s===null)return!1;var a=Object.keys(r),c=Object.keys(s);if(a.length!==c.length)return!1;for(c=0;c<a.length;c++){var d=a[c];if(!p.call(s,d)||!zn(r[d],s[d]))return!1}return!0}function zp(r){for(;r&&r.firstChild;)r=r.firstChild;return r}function Bp(r,s){var a=zp(r);r=0;for(var c;a;){if(a.nodeType===3){if(c=r+a.textContent.length,r<=s&&c>=s)return{node:a,offset:s-r};r=c}e:{for(;a;){if(a.nextSibling){a=a.nextSibling;break e}a=a.parentNode}a=void 0}a=zp(a)}}function $p(r,s){return r&&s?r===s?!0:r&&r.nodeType===3?!1:s&&s.nodeType===3?$p(r,s.parentNode):"contains"in r?r.contains(s):r.compareDocumentPosition?!!(r.compareDocumentPosition(s)&16):!1:!1}function Wp(){for(var r=window,s=xn();s instanceof r.HTMLIFrameElement;){try{var a=typeof s.contentWindow.location.href=="string"}catch{a=!1}if(a)r=s.contentWindow;else break;s=xn(r.document)}return s}function mh(r){var s=r&&r.nodeName&&r.nodeName.toLowerCase();return s&&(s==="input"&&(r.type==="text"||r.type==="search"||r.type==="tel"||r.type==="url"||r.type==="password")||s==="textarea"||r.contentEditable==="true")}function xE(r){var s=Wp(),a=r.focusedElem,c=r.selectionRange;if(s!==a&&a&&a.ownerDocument&&$p(a.ownerDocument.documentElement,a)){if(c!==null&&mh(a)){if(s=c.start,r=c.end,r===void 0&&(r=s),"selectionStart"in a)a.selectionStart=s,a.selectionEnd=Math.min(r,a.value.length);else if(r=(s=a.ownerDocument||document)&&s.defaultView||window,r.getSelection){r=r.getSelection();var d=a.textContent.length,g=Math.min(c.start,d);c=c.end===void 0?g:Math.min(c.end,d),!r.extend&&g>c&&(d=c,c=g,g=d),d=Bp(a,g);var E=Bp(a,c);d&&E&&(r.rangeCount!==1||r.anchorNode!==d.node||r.anchorOffset!==d.offset||r.focusNode!==E.node||r.focusOffset!==E.offset)&&(s=s.createRange(),s.setStart(d.node,d.offset),r.removeAllRanges(),g>c?(r.addRange(s),r.extend(E.node,E.offset)):(s.setEnd(E.node,E.offset),r.addRange(s)))}}for(s=[],r=a;r=r.parentNode;)r.nodeType===1&&s.push({element:r,left:r.scrollLeft,top:r.scrollTop});for(typeof a.focus=="function"&&a.focus(),a=0;a<s.length;a++)r=s[a],r.element.scrollLeft=r.left,r.element.scrollTop=r.top}}var bE=f&&"documentMode"in document&&11>=document.documentMode,so=null,gh=null,Pa=null,yh=!1;function Hp(r,s,a){var c=a.window===a?a.document:a.nodeType===9?a:a.ownerDocument;yh||so==null||so!==xn(c)||(c=so,"selectionStart"in c&&mh(c)?c={start:c.selectionStart,end:c.selectionEnd}:(c=(c.ownerDocument&&c.ownerDocument.defaultView||window).getSelection(),c={anchorNode:c.anchorNode,anchorOffset:c.anchorOffset,focusNode:c.focusNode,focusOffset:c.focusOffset}),Pa&&Sa(Pa,c)||(Pa=c,c=tu(gh,"onSelect"),0<c.length&&(s=new Js("onSelect","select",null,s,a),r.push({event:s,listeners:c}),s.target=so)))}function Xl(r,s){var a={};return a[r.toLowerCase()]=s.toLowerCase(),a["Webkit"+r]="webkit"+s,a["Moz"+r]="moz"+s,a}var oo={animationend:Xl("Animation","AnimationEnd"),animationiteration:Xl("Animation","AnimationIteration"),animationstart:Xl("Animation","AnimationStart"),transitionend:Xl("Transition","TransitionEnd")},vh={},qp={};f&&(qp=document.createElement("div").style,"AnimationEvent"in window||(delete oo.animationend.animation,delete oo.animationiteration.animation,delete oo.animationstart.animation),"TransitionEvent"in window||delete oo.transitionend.transition);function Zl(r){if(vh[r])return vh[r];if(!oo[r])return r;var s=oo[r],a;for(a in s)if(s.hasOwnProperty(a)&&a in qp)return vh[r]=s[a];return r}var Gp=Zl("animationend"),Kp=Zl("animationiteration"),Qp=Zl("animationstart"),Yp=Zl("transitionend"),Jp=new Map,Xp="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function ii(r,s){Jp.set(r,s),l(s,[r])}for(var _h=0;_h<Xp.length;_h++){var wh=Xp[_h],DE=wh.toLowerCase(),VE=wh[0].toUpperCase()+wh.slice(1);ii(DE,"on"+VE)}ii(Gp,"onAnimationEnd"),ii(Kp,"onAnimationIteration"),ii(Qp,"onAnimationStart"),ii("dblclick","onDoubleClick"),ii("focusin","onFocus"),ii("focusout","onBlur"),ii(Yp,"onTransitionEnd"),h("onMouseEnter",["mouseout","mouseover"]),h("onMouseLeave",["mouseout","mouseover"]),h("onPointerEnter",["pointerout","pointerover"]),h("onPointerLeave",["pointerout","pointerover"]),l("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),l("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),l("onBeforeInput",["compositionend","keypress","textInput","paste"]),l("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Aa="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),OE=new Set("cancel close invalid load scroll toggle".split(" ").concat(Aa));function Zp(r,s,a){var c=r.type||"unknown-event";r.currentTarget=a,kl(c,s,void 0,r),r.currentTarget=null}function em(r,s){s=(s&4)!==0;for(var a=0;a<r.length;a++){var c=r[a],d=c.event;c=c.listeners;e:{var g=void 0;if(s)for(var E=c.length-1;0<=E;E--){var A=c[E],x=A.instance,$=A.currentTarget;if(A=A.listener,x!==g&&d.isPropagationStopped())break e;Zp(d,A,$),g=x}else for(E=0;E<c.length;E++){if(A=c[E],x=A.instance,$=A.currentTarget,A=A.listener,x!==g&&d.isPropagationStopped())break e;Zp(d,A,$),g=x}}}if(Dn)throw r=ca,Dn=!1,ca=null,r}function Je(r,s){var a=s[Rh];a===void 0&&(a=s[Rh]=new Set);var c=r+"__bubble";a.has(c)||(tm(s,r,2,!1),a.add(c))}function Eh(r,s,a){var c=0;s&&(c|=4),tm(a,r,c,s)}var eu="_reactListening"+Math.random().toString(36).slice(2);function Ca(r){if(!r[eu]){r[eu]=!0,i.forEach(function(a){a!=="selectionchange"&&(OE.has(a)||Eh(a,!1,r),Eh(a,!0,r))});var s=r.nodeType===9?r:r.ownerDocument;s===null||s[eu]||(s[eu]=!0,Eh("selectionchange",!1,s))}}function tm(r,s,a,c){switch(ya(s)){case 1:var d=et;break;case 4:d=hh;break;default:d=ga}a=d.bind(null,s,a,r),d=void 0,!Us||s!=="touchstart"&&s!=="touchmove"&&s!=="wheel"||(d=!0),c?d!==void 0?r.addEventListener(s,a,{capture:!0,passive:d}):r.addEventListener(s,a,!0):d!==void 0?r.addEventListener(s,a,{passive:d}):r.addEventListener(s,a,!1)}function Th(r,s,a,c,d){var g=c;if((s&1)===0&&(s&2)===0&&c!==null)e:for(;;){if(c===null)return;var E=c.tag;if(E===3||E===4){var A=c.stateNode.containerInfo;if(A===d||A.nodeType===8&&A.parentNode===d)break;if(E===4)for(E=c.return;E!==null;){var x=E.tag;if((x===3||x===4)&&(x=E.stateNode.containerInfo,x===d||x.nodeType===8&&x.parentNode===d))return;E=E.return}for(;A!==null;){if(E=ss(A),E===null)return;if(x=E.tag,x===5||x===6){c=g=E;continue e}A=A.parentNode}}c=c.return}ua(function(){var $=g,X=Ms(a),Z=[];e:{var J=Jp.get(r);if(J!==void 0){var he=Js,me=r;switch(r){case"keypress":if(Ys(a)===0)break e;case"keydown":case"keyup":he=m;break;case"focusin":me="focus",he=to;break;case"focusout":me="blur",he=to;break;case"beforeblur":case"afterblur":he=to;break;case"click":if(a.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":he=Zs;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":he=Wl;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":he=W;break;case Gp:case Kp:case Qp:he=Ar;break;case Yp:he=We;break;case"scroll":he=dh;break;case"wheel":he=Le;break;case"copy":case"cut":case"paste":he=Gl;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":he=I}var ge=(s&4)!==0,ut=!ge&&r==="scroll",z=ge?J!==null?J+"Capture":null:J;ge=[];for(var D=$,B;D!==null;){B=D;var ne=B.stateNode;if(B.tag===5&&ne!==null&&(B=ne,z!==null&&(ne=lt(D,z),ne!=null&&ge.push(Ra(D,ne,B)))),ut)break;D=D.return}0<ge.length&&(J=new he(J,me,null,a,X),Z.push({event:J,listeners:ge}))}}if((s&7)===0){e:{if(J=r==="mouseover"||r==="pointerover",he=r==="mouseout"||r==="pointerout",J&&a!==qi&&(me=a.relatedTarget||a.fromElement)&&(ss(me)||me[Cr]))break e;if((he||J)&&(J=X.window===X?X:(J=X.ownerDocument)?J.defaultView||J.parentWindow:window,he?(me=a.relatedTarget||a.toElement,he=$,me=me?ss(me):null,me!==null&&(ut=Vn(me),me!==ut||me.tag!==5&&me.tag!==6)&&(me=null)):(he=null,me=$),he!==me)){if(ge=Zs,ne="onMouseLeave",z="onMouseEnter",D="mouse",(r==="pointerout"||r==="pointerover")&&(ge=I,ne="onPointerLeave",z="onPointerEnter",D="pointer"),ut=he==null?J:uo(he),B=me==null?J:uo(me),J=new ge(ne,D+"leave",he,a,X),J.target=ut,J.relatedTarget=B,ne=null,ss(X)===$&&(ge=new ge(z,D+"enter",me,a,X),ge.target=B,ge.relatedTarget=ut,ne=ge),ut=ne,he&&me)t:{for(ge=he,z=me,D=0,B=ge;B;B=ao(B))D++;for(B=0,ne=z;ne;ne=ao(ne))B++;for(;0<D-B;)ge=ao(ge),D--;for(;0<B-D;)z=ao(z),B--;for(;D--;){if(ge===z||z!==null&&ge===z.alternate)break t;ge=ao(ge),z=ao(z)}ge=null}else ge=null;he!==null&&nm(Z,J,he,ge,!1),me!==null&&ut!==null&&nm(Z,ut,me,ge,!0)}}e:{if(J=$?uo($):window,he=J.nodeName&&J.nodeName.toLowerCase(),he==="select"||he==="input"&&J.type==="file")var ye=PE;else if(Op(J))if(Mp)ye=kE;else{ye=CE;var Ee=AE}else(he=J.nodeName)&&he.toLowerCase()==="input"&&(J.type==="checkbox"||J.type==="radio")&&(ye=RE);if(ye&&(ye=ye(r,$))){Lp(Z,ye,a,X);break e}Ee&&Ee(r,J,$),r==="focusout"&&(Ee=J._wrapperState)&&Ee.controlled&&J.type==="number"&&Vs(J,"number",J.value)}switch(Ee=$?uo($):window,r){case"focusin":(Op(Ee)||Ee.contentEditable==="true")&&(so=Ee,gh=$,Pa=null);break;case"focusout":Pa=gh=so=null;break;case"mousedown":yh=!0;break;case"contextmenu":case"mouseup":case"dragend":yh=!1,Hp(Z,a,X);break;case"selectionchange":if(bE)break;case"keydown":case"keyup":Hp(Z,a,X)}var Te;if(pt)e:{switch(r){case"compositionstart":var Pe="onCompositionStart";break e;case"compositionend":Pe="onCompositionEnd";break e;case"compositionupdate":Pe="onCompositionUpdate";break e}Pe=void 0}else io?Dp(r,a)&&(Pe="onCompositionEnd"):r==="keydown"&&a.keyCode===229&&(Pe="onCompositionStart");Pe&&(is&&a.locale!=="ko"&&(io||Pe!=="onCompositionStart"?Pe==="onCompositionEnd"&&io&&(Te=va()):(cn=X,Qs="value"in cn?cn.value:cn.textContent,io=!0)),Ee=tu($,Pe),0<Ee.length&&(Pe=new Ea(Pe,r,null,a,X),Z.push({event:Pe,listeners:Ee}),Te?Pe.data=Te:(Te=Vp(a),Te!==null&&(Pe.data=Te)))),(Te=hn?EE(r,a):TE(r,a))&&($=tu($,"onBeforeInput"),0<$.length&&(X=new Ea("onBeforeInput","beforeinput",null,a,X),Z.push({event:X,listeners:$}),X.data=Te))}em(Z,s)})}function Ra(r,s,a){return{instance:r,listener:s,currentTarget:a}}function tu(r,s){for(var a=s+"Capture",c=[];r!==null;){var d=r,g=d.stateNode;d.tag===5&&g!==null&&(d=g,g=lt(r,a),g!=null&&c.unshift(Ra(r,g,d)),g=lt(r,s),g!=null&&c.push(Ra(r,g,d))),r=r.return}return c}function ao(r){if(r===null)return null;do r=r.return;while(r&&r.tag!==5);return r||null}function nm(r,s,a,c,d){for(var g=s._reactName,E=[];a!==null&&a!==c;){var A=a,x=A.alternate,$=A.stateNode;if(x!==null&&x===c)break;A.tag===5&&$!==null&&(A=$,d?(x=lt(a,g),x!=null&&E.unshift(Ra(a,x,A))):d||(x=lt(a,g),x!=null&&E.push(Ra(a,x,A)))),a=a.return}E.length!==0&&r.push({event:s,listeners:E})}var LE=/\r\n?/g,ME=/\u0000|\uFFFD/g;function rm(r){return(typeof r=="string"?r:""+r).replace(LE,`
`).replace(ME,"")}function nu(r,s,a){if(s=rm(s),rm(r)!==s&&a)throw Error(t(425))}function ru(){}var Ih=null,Sh=null;function Ph(r,s){return r==="textarea"||r==="noscript"||typeof s.children=="string"||typeof s.children=="number"||typeof s.dangerouslySetInnerHTML=="object"&&s.dangerouslySetInnerHTML!==null&&s.dangerouslySetInnerHTML.__html!=null}var Ah=typeof setTimeout=="function"?setTimeout:void 0,jE=typeof clearTimeout=="function"?clearTimeout:void 0,im=typeof Promise=="function"?Promise:void 0,FE=typeof queueMicrotask=="function"?queueMicrotask:typeof im<"u"?function(r){return im.resolve(null).then(r).catch(UE)}:Ah;function UE(r){setTimeout(function(){throw r})}function Ch(r,s){var a=s,c=0;do{var d=a.nextSibling;if(r.removeChild(a),d&&d.nodeType===8)if(a=d.data,a==="/$"){if(c===0){r.removeChild(d),Fn(s);return}c--}else a!=="$"&&a!=="$?"&&a!=="$!"||c++;a=d}while(a);Fn(s)}function si(r){for(;r!=null;r=r.nextSibling){var s=r.nodeType;if(s===1||s===3)break;if(s===8){if(s=r.data,s==="$"||s==="$!"||s==="$?")break;if(s==="/$")return null}}return r}function sm(r){r=r.previousSibling;for(var s=0;r;){if(r.nodeType===8){var a=r.data;if(a==="$"||a==="$!"||a==="$?"){if(s===0)return r;s--}else a==="/$"&&s++}r=r.previousSibling}return null}var lo=Math.random().toString(36).slice(2),ir="__reactFiber$"+lo,ka="__reactProps$"+lo,Cr="__reactContainer$"+lo,Rh="__reactEvents$"+lo,zE="__reactListeners$"+lo,BE="__reactHandles$"+lo;function ss(r){var s=r[ir];if(s)return s;for(var a=r.parentNode;a;){if(s=a[Cr]||a[ir]){if(a=s.alternate,s.child!==null||a!==null&&a.child!==null)for(r=sm(r);r!==null;){if(a=r[ir])return a;r=sm(r)}return s}r=a,a=r.parentNode}return null}function Na(r){return r=r[ir]||r[Cr],!r||r.tag!==5&&r.tag!==6&&r.tag!==13&&r.tag!==3?null:r}function uo(r){if(r.tag===5||r.tag===6)return r.stateNode;throw Error(t(33))}function iu(r){return r[ka]||null}var kh=[],co=-1;function oi(r){return{current:r}}function Xe(r){0>co||(r.current=kh[co],kh[co]=null,co--)}function Qe(r,s){co++,kh[co]=r.current,r.current=s}var ai={},jt=oi(ai),Xt=oi(!1),os=ai;function ho(r,s){var a=r.type.contextTypes;if(!a)return ai;var c=r.stateNode;if(c&&c.__reactInternalMemoizedUnmaskedChildContext===s)return c.__reactInternalMemoizedMaskedChildContext;var d={},g;for(g in a)d[g]=s[g];return c&&(r=r.stateNode,r.__reactInternalMemoizedUnmaskedChildContext=s,r.__reactInternalMemoizedMaskedChildContext=d),d}function Zt(r){return r=r.childContextTypes,r!=null}function su(){Xe(Xt),Xe(jt)}function om(r,s,a){if(jt.current!==ai)throw Error(t(168));Qe(jt,s),Qe(Xt,a)}function am(r,s,a){var c=r.stateNode;if(s=s.childContextTypes,typeof c.getChildContext!="function")return a;c=c.getChildContext();for(var d in c)if(!(d in s))throw Error(t(108,ee(r)||"Unknown",d));return ce({},a,c)}function ou(r){return r=(r=r.stateNode)&&r.__reactInternalMemoizedMergedChildContext||ai,os=jt.current,Qe(jt,r),Qe(Xt,Xt.current),!0}function lm(r,s,a){var c=r.stateNode;if(!c)throw Error(t(169));a?(r=am(r,s,os),c.__reactInternalMemoizedMergedChildContext=r,Xe(Xt),Xe(jt),Qe(jt,r)):Xe(Xt),Qe(Xt,a)}var Rr=null,au=!1,Nh=!1;function um(r){Rr===null?Rr=[r]:Rr.push(r)}function $E(r){au=!0,um(r)}function li(){if(!Nh&&Rr!==null){Nh=!0;var r=0,s=Oe;try{var a=Rr;for(Oe=1;r<a.length;r++){var c=a[r];do c=c(!0);while(c!==null)}Rr=null,au=!1}catch(d){throw Rr!==null&&(Rr=Rr.slice(r+1)),Ws(Ji,li),d}finally{Oe=s,Nh=!1}}return null}var fo=[],po=0,lu=null,uu=0,En=[],Tn=0,as=null,kr=1,Nr="";function ls(r,s){fo[po++]=uu,fo[po++]=lu,lu=r,uu=s}function cm(r,s,a){En[Tn++]=kr,En[Tn++]=Nr,En[Tn++]=as,as=r;var c=kr;r=Nr;var d=32-qt(c)-1;c&=~(1<<d),a+=1;var g=32-qt(s)+d;if(30<g){var E=d-d%5;g=(c&(1<<E)-1).toString(32),c>>=E,d-=E,kr=1<<32-qt(s)+d|a<<d|c,Nr=g+r}else kr=1<<g|a<<d|c,Nr=r}function xh(r){r.return!==null&&(ls(r,1),cm(r,1,0))}function bh(r){for(;r===lu;)lu=fo[--po],fo[po]=null,uu=fo[--po],fo[po]=null;for(;r===as;)as=En[--Tn],En[Tn]=null,Nr=En[--Tn],En[Tn]=null,kr=En[--Tn],En[Tn]=null}var dn=null,fn=null,tt=!1,Bn=null;function hm(r,s){var a=An(5,null,null,0);a.elementType="DELETED",a.stateNode=s,a.return=r,s=r.deletions,s===null?(r.deletions=[a],r.flags|=16):s.push(a)}function dm(r,s){switch(r.tag){case 5:var a=r.type;return s=s.nodeType!==1||a.toLowerCase()!==s.nodeName.toLowerCase()?null:s,s!==null?(r.stateNode=s,dn=r,fn=si(s.firstChild),!0):!1;case 6:return s=r.pendingProps===""||s.nodeType!==3?null:s,s!==null?(r.stateNode=s,dn=r,fn=null,!0):!1;case 13:return s=s.nodeType!==8?null:s,s!==null?(a=as!==null?{id:kr,overflow:Nr}:null,r.memoizedState={dehydrated:s,treeContext:a,retryLane:1073741824},a=An(18,null,null,0),a.stateNode=s,a.return=r,r.child=a,dn=r,fn=null,!0):!1;default:return!1}}function Dh(r){return(r.mode&1)!==0&&(r.flags&128)===0}function Vh(r){if(tt){var s=fn;if(s){var a=s;if(!dm(r,s)){if(Dh(r))throw Error(t(418));s=si(a.nextSibling);var c=dn;s&&dm(r,s)?hm(c,a):(r.flags=r.flags&-4097|2,tt=!1,dn=r)}}else{if(Dh(r))throw Error(t(418));r.flags=r.flags&-4097|2,tt=!1,dn=r}}}function fm(r){for(r=r.return;r!==null&&r.tag!==5&&r.tag!==3&&r.tag!==13;)r=r.return;dn=r}function cu(r){if(r!==dn)return!1;if(!tt)return fm(r),tt=!0,!1;var s;if((s=r.tag!==3)&&!(s=r.tag!==5)&&(s=r.type,s=s!=="head"&&s!=="body"&&!Ph(r.type,r.memoizedProps)),s&&(s=fn)){if(Dh(r))throw pm(),Error(t(418));for(;s;)hm(r,s),s=si(s.nextSibling)}if(fm(r),r.tag===13){if(r=r.memoizedState,r=r!==null?r.dehydrated:null,!r)throw Error(t(317));e:{for(r=r.nextSibling,s=0;r;){if(r.nodeType===8){var a=r.data;if(a==="/$"){if(s===0){fn=si(r.nextSibling);break e}s--}else a!=="$"&&a!=="$!"&&a!=="$?"||s++}r=r.nextSibling}fn=null}}else fn=dn?si(r.stateNode.nextSibling):null;return!0}function pm(){for(var r=fn;r;)r=si(r.nextSibling)}function mo(){fn=dn=null,tt=!1}function Oh(r){Bn===null?Bn=[r]:Bn.push(r)}var WE=ae.ReactCurrentBatchConfig;function xa(r,s,a){if(r=a.ref,r!==null&&typeof r!="function"&&typeof r!="object"){if(a._owner){if(a=a._owner,a){if(a.tag!==1)throw Error(t(309));var c=a.stateNode}if(!c)throw Error(t(147,r));var d=c,g=""+r;return s!==null&&s.ref!==null&&typeof s.ref=="function"&&s.ref._stringRef===g?s.ref:(s=function(E){var A=d.refs;E===null?delete A[g]:A[g]=E},s._stringRef=g,s)}if(typeof r!="string")throw Error(t(284));if(!a._owner)throw Error(t(290,r))}return r}function hu(r,s){throw r=Object.prototype.toString.call(s),Error(t(31,r==="[object Object]"?"object with keys {"+Object.keys(s).join(", ")+"}":r))}function mm(r){var s=r._init;return s(r._payload)}function gm(r){function s(z,D){if(r){var B=z.deletions;B===null?(z.deletions=[D],z.flags|=16):B.push(D)}}function a(z,D){if(!r)return null;for(;D!==null;)s(z,D),D=D.sibling;return null}function c(z,D){for(z=new Map;D!==null;)D.key!==null?z.set(D.key,D):z.set(D.index,D),D=D.sibling;return z}function d(z,D){return z=gi(z,D),z.index=0,z.sibling=null,z}function g(z,D,B){return z.index=B,r?(B=z.alternate,B!==null?(B=B.index,B<D?(z.flags|=2,D):B):(z.flags|=2,D)):(z.flags|=1048576,D)}function E(z){return r&&z.alternate===null&&(z.flags|=2),z}function A(z,D,B,ne){return D===null||D.tag!==6?(D=Ad(B,z.mode,ne),D.return=z,D):(D=d(D,B),D.return=z,D)}function x(z,D,B,ne){var ye=B.type;return ye===k?X(z,D,B.props.children,ne,B.key):D!==null&&(D.elementType===ye||typeof ye=="object"&&ye!==null&&ye.$$typeof===at&&mm(ye)===D.type)?(ne=d(D,B.props),ne.ref=xa(z,D,B),ne.return=z,ne):(ne=Ou(B.type,B.key,B.props,null,z.mode,ne),ne.ref=xa(z,D,B),ne.return=z,ne)}function $(z,D,B,ne){return D===null||D.tag!==4||D.stateNode.containerInfo!==B.containerInfo||D.stateNode.implementation!==B.implementation?(D=Cd(B,z.mode,ne),D.return=z,D):(D=d(D,B.children||[]),D.return=z,D)}function X(z,D,B,ne,ye){return D===null||D.tag!==7?(D=gs(B,z.mode,ne,ye),D.return=z,D):(D=d(D,B),D.return=z,D)}function Z(z,D,B){if(typeof D=="string"&&D!==""||typeof D=="number")return D=Ad(""+D,z.mode,B),D.return=z,D;if(typeof D=="object"&&D!==null){switch(D.$$typeof){case we:return B=Ou(D.type,D.key,D.props,null,z.mode,B),B.ref=xa(z,null,D),B.return=z,B;case re:return D=Cd(D,z.mode,B),D.return=z,D;case at:var ne=D._init;return Z(z,ne(D._payload),B)}if(vr(D)||ve(D))return D=gs(D,z.mode,B,null),D.return=z,D;hu(z,D)}return null}function J(z,D,B,ne){var ye=D!==null?D.key:null;if(typeof B=="string"&&B!==""||typeof B=="number")return ye!==null?null:A(z,D,""+B,ne);if(typeof B=="object"&&B!==null){switch(B.$$typeof){case we:return B.key===ye?x(z,D,B,ne):null;case re:return B.key===ye?$(z,D,B,ne):null;case at:return ye=B._init,J(z,D,ye(B._payload),ne)}if(vr(B)||ve(B))return ye!==null?null:X(z,D,B,ne,null);hu(z,B)}return null}function he(z,D,B,ne,ye){if(typeof ne=="string"&&ne!==""||typeof ne=="number")return z=z.get(B)||null,A(D,z,""+ne,ye);if(typeof ne=="object"&&ne!==null){switch(ne.$$typeof){case we:return z=z.get(ne.key===null?B:ne.key)||null,x(D,z,ne,ye);case re:return z=z.get(ne.key===null?B:ne.key)||null,$(D,z,ne,ye);case at:var Ee=ne._init;return he(z,D,B,Ee(ne._payload),ye)}if(vr(ne)||ve(ne))return z=z.get(B)||null,X(D,z,ne,ye,null);hu(D,ne)}return null}function me(z,D,B,ne){for(var ye=null,Ee=null,Te=D,Pe=D=0,kt=null;Te!==null&&Pe<B.length;Pe++){Te.index>Pe?(kt=Te,Te=null):kt=Te.sibling;var Ue=J(z,Te,B[Pe],ne);if(Ue===null){Te===null&&(Te=kt);break}r&&Te&&Ue.alternate===null&&s(z,Te),D=g(Ue,D,Pe),Ee===null?ye=Ue:Ee.sibling=Ue,Ee=Ue,Te=kt}if(Pe===B.length)return a(z,Te),tt&&ls(z,Pe),ye;if(Te===null){for(;Pe<B.length;Pe++)Te=Z(z,B[Pe],ne),Te!==null&&(D=g(Te,D,Pe),Ee===null?ye=Te:Ee.sibling=Te,Ee=Te);return tt&&ls(z,Pe),ye}for(Te=c(z,Te);Pe<B.length;Pe++)kt=he(Te,z,Pe,B[Pe],ne),kt!==null&&(r&&kt.alternate!==null&&Te.delete(kt.key===null?Pe:kt.key),D=g(kt,D,Pe),Ee===null?ye=kt:Ee.sibling=kt,Ee=kt);return r&&Te.forEach(function(yi){return s(z,yi)}),tt&&ls(z,Pe),ye}function ge(z,D,B,ne){var ye=ve(B);if(typeof ye!="function")throw Error(t(150));if(B=ye.call(B),B==null)throw Error(t(151));for(var Ee=ye=null,Te=D,Pe=D=0,kt=null,Ue=B.next();Te!==null&&!Ue.done;Pe++,Ue=B.next()){Te.index>Pe?(kt=Te,Te=null):kt=Te.sibling;var yi=J(z,Te,Ue.value,ne);if(yi===null){Te===null&&(Te=kt);break}r&&Te&&yi.alternate===null&&s(z,Te),D=g(yi,D,Pe),Ee===null?ye=yi:Ee.sibling=yi,Ee=yi,Te=kt}if(Ue.done)return a(z,Te),tt&&ls(z,Pe),ye;if(Te===null){for(;!Ue.done;Pe++,Ue=B.next())Ue=Z(z,Ue.value,ne),Ue!==null&&(D=g(Ue,D,Pe),Ee===null?ye=Ue:Ee.sibling=Ue,Ee=Ue);return tt&&ls(z,Pe),ye}for(Te=c(z,Te);!Ue.done;Pe++,Ue=B.next())Ue=he(Te,z,Pe,Ue.value,ne),Ue!==null&&(r&&Ue.alternate!==null&&Te.delete(Ue.key===null?Pe:Ue.key),D=g(Ue,D,Pe),Ee===null?ye=Ue:Ee.sibling=Ue,Ee=Ue);return r&&Te.forEach(function(I0){return s(z,I0)}),tt&&ls(z,Pe),ye}function ut(z,D,B,ne){if(typeof B=="object"&&B!==null&&B.type===k&&B.key===null&&(B=B.props.children),typeof B=="object"&&B!==null){switch(B.$$typeof){case we:e:{for(var ye=B.key,Ee=D;Ee!==null;){if(Ee.key===ye){if(ye=B.type,ye===k){if(Ee.tag===7){a(z,Ee.sibling),D=d(Ee,B.props.children),D.return=z,z=D;break e}}else if(Ee.elementType===ye||typeof ye=="object"&&ye!==null&&ye.$$typeof===at&&mm(ye)===Ee.type){a(z,Ee.sibling),D=d(Ee,B.props),D.ref=xa(z,Ee,B),D.return=z,z=D;break e}a(z,Ee);break}else s(z,Ee);Ee=Ee.sibling}B.type===k?(D=gs(B.props.children,z.mode,ne,B.key),D.return=z,z=D):(ne=Ou(B.type,B.key,B.props,null,z.mode,ne),ne.ref=xa(z,D,B),ne.return=z,z=ne)}return E(z);case re:e:{for(Ee=B.key;D!==null;){if(D.key===Ee)if(D.tag===4&&D.stateNode.containerInfo===B.containerInfo&&D.stateNode.implementation===B.implementation){a(z,D.sibling),D=d(D,B.children||[]),D.return=z,z=D;break e}else{a(z,D);break}else s(z,D);D=D.sibling}D=Cd(B,z.mode,ne),D.return=z,z=D}return E(z);case at:return Ee=B._init,ut(z,D,Ee(B._payload),ne)}if(vr(B))return me(z,D,B,ne);if(ve(B))return ge(z,D,B,ne);hu(z,B)}return typeof B=="string"&&B!==""||typeof B=="number"?(B=""+B,D!==null&&D.tag===6?(a(z,D.sibling),D=d(D,B),D.return=z,z=D):(a(z,D),D=Ad(B,z.mode,ne),D.return=z,z=D),E(z)):a(z,D)}return ut}var go=gm(!0),ym=gm(!1),du=oi(null),fu=null,yo=null,Lh=null;function Mh(){Lh=yo=fu=null}function jh(r){var s=du.current;Xe(du),r._currentValue=s}function Fh(r,s,a){for(;r!==null;){var c=r.alternate;if((r.childLanes&s)!==s?(r.childLanes|=s,c!==null&&(c.childLanes|=s)):c!==null&&(c.childLanes&s)!==s&&(c.childLanes|=s),r===a)break;r=r.return}}function vo(r,s){fu=r,Lh=yo=null,r=r.dependencies,r!==null&&r.firstContext!==null&&((r.lanes&s)!==0&&(en=!0),r.firstContext=null)}function In(r){var s=r._currentValue;if(Lh!==r)if(r={context:r,memoizedValue:s,next:null},yo===null){if(fu===null)throw Error(t(308));yo=r,fu.dependencies={lanes:0,firstContext:r}}else yo=yo.next=r;return s}var us=null;function Uh(r){us===null?us=[r]:us.push(r)}function vm(r,s,a,c){var d=s.interleaved;return d===null?(a.next=a,Uh(s)):(a.next=d.next,d.next=a),s.interleaved=a,xr(r,c)}function xr(r,s){r.lanes|=s;var a=r.alternate;for(a!==null&&(a.lanes|=s),a=r,r=r.return;r!==null;)r.childLanes|=s,a=r.alternate,a!==null&&(a.childLanes|=s),a=r,r=r.return;return a.tag===3?a.stateNode:null}var ui=!1;function zh(r){r.updateQueue={baseState:r.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function _m(r,s){r=r.updateQueue,s.updateQueue===r&&(s.updateQueue={baseState:r.baseState,firstBaseUpdate:r.firstBaseUpdate,lastBaseUpdate:r.lastBaseUpdate,shared:r.shared,effects:r.effects})}function br(r,s){return{eventTime:r,lane:s,tag:0,payload:null,callback:null,next:null}}function ci(r,s,a){var c=r.updateQueue;if(c===null)return null;if(c=c.shared,(Fe&2)!==0){var d=c.pending;return d===null?s.next=s:(s.next=d.next,d.next=s),c.pending=s,xr(r,a)}return d=c.interleaved,d===null?(s.next=s,Uh(c)):(s.next=d.next,d.next=s),c.interleaved=s,xr(r,a)}function pu(r,s,a){if(s=s.updateQueue,s!==null&&(s=s.shared,(a&4194240)!==0)){var c=s.lanes;c&=r.pendingLanes,a|=c,s.lanes=a,Zr(r,a)}}function wm(r,s){var a=r.updateQueue,c=r.alternate;if(c!==null&&(c=c.updateQueue,a===c)){var d=null,g=null;if(a=a.firstBaseUpdate,a!==null){do{var E={eventTime:a.eventTime,lane:a.lane,tag:a.tag,payload:a.payload,callback:a.callback,next:null};g===null?d=g=E:g=g.next=E,a=a.next}while(a!==null);g===null?d=g=s:g=g.next=s}else d=g=s;a={baseState:c.baseState,firstBaseUpdate:d,lastBaseUpdate:g,shared:c.shared,effects:c.effects},r.updateQueue=a;return}r=a.lastBaseUpdate,r===null?a.firstBaseUpdate=s:r.next=s,a.lastBaseUpdate=s}function mu(r,s,a,c){var d=r.updateQueue;ui=!1;var g=d.firstBaseUpdate,E=d.lastBaseUpdate,A=d.shared.pending;if(A!==null){d.shared.pending=null;var x=A,$=x.next;x.next=null,E===null?g=$:E.next=$,E=x;var X=r.alternate;X!==null&&(X=X.updateQueue,A=X.lastBaseUpdate,A!==E&&(A===null?X.firstBaseUpdate=$:A.next=$,X.lastBaseUpdate=x))}if(g!==null){var Z=d.baseState;E=0,X=$=x=null,A=g;do{var J=A.lane,he=A.eventTime;if((c&J)===J){X!==null&&(X=X.next={eventTime:he,lane:0,tag:A.tag,payload:A.payload,callback:A.callback,next:null});e:{var me=r,ge=A;switch(J=s,he=a,ge.tag){case 1:if(me=ge.payload,typeof me=="function"){Z=me.call(he,Z,J);break e}Z=me;break e;case 3:me.flags=me.flags&-65537|128;case 0:if(me=ge.payload,J=typeof me=="function"?me.call(he,Z,J):me,J==null)break e;Z=ce({},Z,J);break e;case 2:ui=!0}}A.callback!==null&&A.lane!==0&&(r.flags|=64,J=d.effects,J===null?d.effects=[A]:J.push(A))}else he={eventTime:he,lane:J,tag:A.tag,payload:A.payload,callback:A.callback,next:null},X===null?($=X=he,x=Z):X=X.next=he,E|=J;if(A=A.next,A===null){if(A=d.shared.pending,A===null)break;J=A,A=J.next,J.next=null,d.lastBaseUpdate=J,d.shared.pending=null}}while(!0);if(X===null&&(x=Z),d.baseState=x,d.firstBaseUpdate=$,d.lastBaseUpdate=X,s=d.shared.interleaved,s!==null){d=s;do E|=d.lane,d=d.next;while(d!==s)}else g===null&&(d.shared.lanes=0);ds|=E,r.lanes=E,r.memoizedState=Z}}function Em(r,s,a){if(r=s.effects,s.effects=null,r!==null)for(s=0;s<r.length;s++){var c=r[s],d=c.callback;if(d!==null){if(c.callback=null,c=a,typeof d!="function")throw Error(t(191,d));d.call(c)}}}var ba={},sr=oi(ba),Da=oi(ba),Va=oi(ba);function cs(r){if(r===ba)throw Error(t(174));return r}function Bh(r,s){switch(Qe(Va,s),Qe(Da,r),Qe(sr,ba),r=s.nodeType,r){case 9:case 11:s=(s=s.documentElement)?s.namespaceURI:wt(null,"");break;default:r=r===8?s.parentNode:s,s=r.namespaceURI||null,r=r.tagName,s=wt(s,r)}Xe(sr),Qe(sr,s)}function _o(){Xe(sr),Xe(Da),Xe(Va)}function Tm(r){cs(Va.current);var s=cs(sr.current),a=wt(s,r.type);s!==a&&(Qe(Da,r),Qe(sr,a))}function $h(r){Da.current===r&&(Xe(sr),Xe(Da))}var nt=oi(0);function gu(r){for(var s=r;s!==null;){if(s.tag===13){var a=s.memoizedState;if(a!==null&&(a=a.dehydrated,a===null||a.data==="$?"||a.data==="$!"))return s}else if(s.tag===19&&s.memoizedProps.revealOrder!==void 0){if((s.flags&128)!==0)return s}else if(s.child!==null){s.child.return=s,s=s.child;continue}if(s===r)break;for(;s.sibling===null;){if(s.return===null||s.return===r)return null;s=s.return}s.sibling.return=s.return,s=s.sibling}return null}var Wh=[];function Hh(){for(var r=0;r<Wh.length;r++)Wh[r]._workInProgressVersionPrimary=null;Wh.length=0}var yu=ae.ReactCurrentDispatcher,qh=ae.ReactCurrentBatchConfig,hs=0,rt=null,Tt=null,Ct=null,vu=!1,Oa=!1,La=0,HE=0;function Ft(){throw Error(t(321))}function Gh(r,s){if(s===null)return!1;for(var a=0;a<s.length&&a<r.length;a++)if(!zn(r[a],s[a]))return!1;return!0}function Kh(r,s,a,c,d,g){if(hs=g,rt=s,s.memoizedState=null,s.updateQueue=null,s.lanes=0,yu.current=r===null||r.memoizedState===null?QE:YE,r=a(c,d),Oa){g=0;do{if(Oa=!1,La=0,25<=g)throw Error(t(301));g+=1,Ct=Tt=null,s.updateQueue=null,yu.current=JE,r=a(c,d)}while(Oa)}if(yu.current=Eu,s=Tt!==null&&Tt.next!==null,hs=0,Ct=Tt=rt=null,vu=!1,s)throw Error(t(300));return r}function Qh(){var r=La!==0;return La=0,r}function or(){var r={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Ct===null?rt.memoizedState=Ct=r:Ct=Ct.next=r,Ct}function Sn(){if(Tt===null){var r=rt.alternate;r=r!==null?r.memoizedState:null}else r=Tt.next;var s=Ct===null?rt.memoizedState:Ct.next;if(s!==null)Ct=s,Tt=r;else{if(r===null)throw Error(t(310));Tt=r,r={memoizedState:Tt.memoizedState,baseState:Tt.baseState,baseQueue:Tt.baseQueue,queue:Tt.queue,next:null},Ct===null?rt.memoizedState=Ct=r:Ct=Ct.next=r}return Ct}function Ma(r,s){return typeof s=="function"?s(r):s}function Yh(r){var s=Sn(),a=s.queue;if(a===null)throw Error(t(311));a.lastRenderedReducer=r;var c=Tt,d=c.baseQueue,g=a.pending;if(g!==null){if(d!==null){var E=d.next;d.next=g.next,g.next=E}c.baseQueue=d=g,a.pending=null}if(d!==null){g=d.next,c=c.baseState;var A=E=null,x=null,$=g;do{var X=$.lane;if((hs&X)===X)x!==null&&(x=x.next={lane:0,action:$.action,hasEagerState:$.hasEagerState,eagerState:$.eagerState,next:null}),c=$.hasEagerState?$.eagerState:r(c,$.action);else{var Z={lane:X,action:$.action,hasEagerState:$.hasEagerState,eagerState:$.eagerState,next:null};x===null?(A=x=Z,E=c):x=x.next=Z,rt.lanes|=X,ds|=X}$=$.next}while($!==null&&$!==g);x===null?E=c:x.next=A,zn(c,s.memoizedState)||(en=!0),s.memoizedState=c,s.baseState=E,s.baseQueue=x,a.lastRenderedState=c}if(r=a.interleaved,r!==null){d=r;do g=d.lane,rt.lanes|=g,ds|=g,d=d.next;while(d!==r)}else d===null&&(a.lanes=0);return[s.memoizedState,a.dispatch]}function Jh(r){var s=Sn(),a=s.queue;if(a===null)throw Error(t(311));a.lastRenderedReducer=r;var c=a.dispatch,d=a.pending,g=s.memoizedState;if(d!==null){a.pending=null;var E=d=d.next;do g=r(g,E.action),E=E.next;while(E!==d);zn(g,s.memoizedState)||(en=!0),s.memoizedState=g,s.baseQueue===null&&(s.baseState=g),a.lastRenderedState=g}return[g,c]}function Im(){}function Sm(r,s){var a=rt,c=Sn(),d=s(),g=!zn(c.memoizedState,d);if(g&&(c.memoizedState=d,en=!0),c=c.queue,Xh(Cm.bind(null,a,c,r),[r]),c.getSnapshot!==s||g||Ct!==null&&Ct.memoizedState.tag&1){if(a.flags|=2048,ja(9,Am.bind(null,a,c,d,s),void 0,null),Rt===null)throw Error(t(349));(hs&30)!==0||Pm(a,s,d)}return d}function Pm(r,s,a){r.flags|=16384,r={getSnapshot:s,value:a},s=rt.updateQueue,s===null?(s={lastEffect:null,stores:null},rt.updateQueue=s,s.stores=[r]):(a=s.stores,a===null?s.stores=[r]:a.push(r))}function Am(r,s,a,c){s.value=a,s.getSnapshot=c,Rm(s)&&km(r)}function Cm(r,s,a){return a(function(){Rm(s)&&km(r)})}function Rm(r){var s=r.getSnapshot;r=r.value;try{var a=s();return!zn(r,a)}catch{return!0}}function km(r){var s=xr(r,1);s!==null&&qn(s,r,1,-1)}function Nm(r){var s=or();return typeof r=="function"&&(r=r()),s.memoizedState=s.baseState=r,r={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Ma,lastRenderedState:r},s.queue=r,r=r.dispatch=KE.bind(null,rt,r),[s.memoizedState,r]}function ja(r,s,a,c){return r={tag:r,create:s,destroy:a,deps:c,next:null},s=rt.updateQueue,s===null?(s={lastEffect:null,stores:null},rt.updateQueue=s,s.lastEffect=r.next=r):(a=s.lastEffect,a===null?s.lastEffect=r.next=r:(c=a.next,a.next=r,r.next=c,s.lastEffect=r)),r}function xm(){return Sn().memoizedState}function _u(r,s,a,c){var d=or();rt.flags|=r,d.memoizedState=ja(1|s,a,void 0,c===void 0?null:c)}function wu(r,s,a,c){var d=Sn();c=c===void 0?null:c;var g=void 0;if(Tt!==null){var E=Tt.memoizedState;if(g=E.destroy,c!==null&&Gh(c,E.deps)){d.memoizedState=ja(s,a,g,c);return}}rt.flags|=r,d.memoizedState=ja(1|s,a,g,c)}function bm(r,s){return _u(8390656,8,r,s)}function Xh(r,s){return wu(2048,8,r,s)}function Dm(r,s){return wu(4,2,r,s)}function Vm(r,s){return wu(4,4,r,s)}function Om(r,s){if(typeof s=="function")return r=r(),s(r),function(){s(null)};if(s!=null)return r=r(),s.current=r,function(){s.current=null}}function Lm(r,s,a){return a=a!=null?a.concat([r]):null,wu(4,4,Om.bind(null,s,r),a)}function Zh(){}function Mm(r,s){var a=Sn();s=s===void 0?null:s;var c=a.memoizedState;return c!==null&&s!==null&&Gh(s,c[1])?c[0]:(a.memoizedState=[r,s],r)}function jm(r,s){var a=Sn();s=s===void 0?null:s;var c=a.memoizedState;return c!==null&&s!==null&&Gh(s,c[1])?c[0]:(r=r(),a.memoizedState=[r,s],r)}function Fm(r,s,a){return(hs&21)===0?(r.baseState&&(r.baseState=!1,en=!0),r.memoizedState=a):(zn(a,s)||(a=es(),rt.lanes|=a,ds|=a,r.baseState=!0),s)}function qE(r,s){var a=Oe;Oe=a!==0&&4>a?a:4,r(!0);var c=qh.transition;qh.transition={};try{r(!1),s()}finally{Oe=a,qh.transition=c}}function Um(){return Sn().memoizedState}function GE(r,s,a){var c=pi(r);if(a={lane:c,action:a,hasEagerState:!1,eagerState:null,next:null},zm(r))Bm(s,a);else if(a=vm(r,s,a,c),a!==null){var d=Qt();qn(a,r,c,d),$m(a,s,c)}}function KE(r,s,a){var c=pi(r),d={lane:c,action:a,hasEagerState:!1,eagerState:null,next:null};if(zm(r))Bm(s,d);else{var g=r.alternate;if(r.lanes===0&&(g===null||g.lanes===0)&&(g=s.lastRenderedReducer,g!==null))try{var E=s.lastRenderedState,A=g(E,a);if(d.hasEagerState=!0,d.eagerState=A,zn(A,E)){var x=s.interleaved;x===null?(d.next=d,Uh(s)):(d.next=x.next,x.next=d),s.interleaved=d;return}}catch{}finally{}a=vm(r,s,d,c),a!==null&&(d=Qt(),qn(a,r,c,d),$m(a,s,c))}}function zm(r){var s=r.alternate;return r===rt||s!==null&&s===rt}function Bm(r,s){Oa=vu=!0;var a=r.pending;a===null?s.next=s:(s.next=a.next,a.next=s),r.pending=s}function $m(r,s,a){if((a&4194240)!==0){var c=s.lanes;c&=r.pendingLanes,a|=c,s.lanes=a,Zr(r,a)}}var Eu={readContext:In,useCallback:Ft,useContext:Ft,useEffect:Ft,useImperativeHandle:Ft,useInsertionEffect:Ft,useLayoutEffect:Ft,useMemo:Ft,useReducer:Ft,useRef:Ft,useState:Ft,useDebugValue:Ft,useDeferredValue:Ft,useTransition:Ft,useMutableSource:Ft,useSyncExternalStore:Ft,useId:Ft,unstable_isNewReconciler:!1},QE={readContext:In,useCallback:function(r,s){return or().memoizedState=[r,s===void 0?null:s],r},useContext:In,useEffect:bm,useImperativeHandle:function(r,s,a){return a=a!=null?a.concat([r]):null,_u(4194308,4,Om.bind(null,s,r),a)},useLayoutEffect:function(r,s){return _u(4194308,4,r,s)},useInsertionEffect:function(r,s){return _u(4,2,r,s)},useMemo:function(r,s){var a=or();return s=s===void 0?null:s,r=r(),a.memoizedState=[r,s],r},useReducer:function(r,s,a){var c=or();return s=a!==void 0?a(s):s,c.memoizedState=c.baseState=s,r={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:r,lastRenderedState:s},c.queue=r,r=r.dispatch=GE.bind(null,rt,r),[c.memoizedState,r]},useRef:function(r){var s=or();return r={current:r},s.memoizedState=r},useState:Nm,useDebugValue:Zh,useDeferredValue:function(r){return or().memoizedState=r},useTransition:function(){var r=Nm(!1),s=r[0];return r=qE.bind(null,r[1]),or().memoizedState=r,[s,r]},useMutableSource:function(){},useSyncExternalStore:function(r,s,a){var c=rt,d=or();if(tt){if(a===void 0)throw Error(t(407));a=a()}else{if(a=s(),Rt===null)throw Error(t(349));(hs&30)!==0||Pm(c,s,a)}d.memoizedState=a;var g={value:a,getSnapshot:s};return d.queue=g,bm(Cm.bind(null,c,g,r),[r]),c.flags|=2048,ja(9,Am.bind(null,c,g,a,s),void 0,null),a},useId:function(){var r=or(),s=Rt.identifierPrefix;if(tt){var a=Nr,c=kr;a=(c&~(1<<32-qt(c)-1)).toString(32)+a,s=":"+s+"R"+a,a=La++,0<a&&(s+="H"+a.toString(32)),s+=":"}else a=HE++,s=":"+s+"r"+a.toString(32)+":";return r.memoizedState=s},unstable_isNewReconciler:!1},YE={readContext:In,useCallback:Mm,useContext:In,useEffect:Xh,useImperativeHandle:Lm,useInsertionEffect:Dm,useLayoutEffect:Vm,useMemo:jm,useReducer:Yh,useRef:xm,useState:function(){return Yh(Ma)},useDebugValue:Zh,useDeferredValue:function(r){var s=Sn();return Fm(s,Tt.memoizedState,r)},useTransition:function(){var r=Yh(Ma)[0],s=Sn().memoizedState;return[r,s]},useMutableSource:Im,useSyncExternalStore:Sm,useId:Um,unstable_isNewReconciler:!1},JE={readContext:In,useCallback:Mm,useContext:In,useEffect:Xh,useImperativeHandle:Lm,useInsertionEffect:Dm,useLayoutEffect:Vm,useMemo:jm,useReducer:Jh,useRef:xm,useState:function(){return Jh(Ma)},useDebugValue:Zh,useDeferredValue:function(r){var s=Sn();return Tt===null?s.memoizedState=r:Fm(s,Tt.memoizedState,r)},useTransition:function(){var r=Jh(Ma)[0],s=Sn().memoizedState;return[r,s]},useMutableSource:Im,useSyncExternalStore:Sm,useId:Um,unstable_isNewReconciler:!1};function $n(r,s){if(r&&r.defaultProps){s=ce({},s),r=r.defaultProps;for(var a in r)s[a]===void 0&&(s[a]=r[a]);return s}return s}function ed(r,s,a,c){s=r.memoizedState,a=a(c,s),a=a==null?s:ce({},s,a),r.memoizedState=a,r.lanes===0&&(r.updateQueue.baseState=a)}var Tu={isMounted:function(r){return(r=r._reactInternals)?Vn(r)===r:!1},enqueueSetState:function(r,s,a){r=r._reactInternals;var c=Qt(),d=pi(r),g=br(c,d);g.payload=s,a!=null&&(g.callback=a),s=ci(r,g,d),s!==null&&(qn(s,r,d,c),pu(s,r,d))},enqueueReplaceState:function(r,s,a){r=r._reactInternals;var c=Qt(),d=pi(r),g=br(c,d);g.tag=1,g.payload=s,a!=null&&(g.callback=a),s=ci(r,g,d),s!==null&&(qn(s,r,d,c),pu(s,r,d))},enqueueForceUpdate:function(r,s){r=r._reactInternals;var a=Qt(),c=pi(r),d=br(a,c);d.tag=2,s!=null&&(d.callback=s),s=ci(r,d,c),s!==null&&(qn(s,r,c,a),pu(s,r,c))}};function Wm(r,s,a,c,d,g,E){return r=r.stateNode,typeof r.shouldComponentUpdate=="function"?r.shouldComponentUpdate(c,g,E):s.prototype&&s.prototype.isPureReactComponent?!Sa(a,c)||!Sa(d,g):!0}function Hm(r,s,a){var c=!1,d=ai,g=s.contextType;return typeof g=="object"&&g!==null?g=In(g):(d=Zt(s)?os:jt.current,c=s.contextTypes,g=(c=c!=null)?ho(r,d):ai),s=new s(a,g),r.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,s.updater=Tu,r.stateNode=s,s._reactInternals=r,c&&(r=r.stateNode,r.__reactInternalMemoizedUnmaskedChildContext=d,r.__reactInternalMemoizedMaskedChildContext=g),s}function qm(r,s,a,c){r=s.state,typeof s.componentWillReceiveProps=="function"&&s.componentWillReceiveProps(a,c),typeof s.UNSAFE_componentWillReceiveProps=="function"&&s.UNSAFE_componentWillReceiveProps(a,c),s.state!==r&&Tu.enqueueReplaceState(s,s.state,null)}function td(r,s,a,c){var d=r.stateNode;d.props=a,d.state=r.memoizedState,d.refs={},zh(r);var g=s.contextType;typeof g=="object"&&g!==null?d.context=In(g):(g=Zt(s)?os:jt.current,d.context=ho(r,g)),d.state=r.memoizedState,g=s.getDerivedStateFromProps,typeof g=="function"&&(ed(r,s,g,a),d.state=r.memoizedState),typeof s.getDerivedStateFromProps=="function"||typeof d.getSnapshotBeforeUpdate=="function"||typeof d.UNSAFE_componentWillMount!="function"&&typeof d.componentWillMount!="function"||(s=d.state,typeof d.componentWillMount=="function"&&d.componentWillMount(),typeof d.UNSAFE_componentWillMount=="function"&&d.UNSAFE_componentWillMount(),s!==d.state&&Tu.enqueueReplaceState(d,d.state,null),mu(r,a,d,c),d.state=r.memoizedState),typeof d.componentDidMount=="function"&&(r.flags|=4194308)}function wo(r,s){try{var a="",c=s;do a+=ke(c),c=c.return;while(c);var d=a}catch(g){d=`
Error generating stack: `+g.message+`
`+g.stack}return{value:r,source:s,stack:d,digest:null}}function nd(r,s,a){return{value:r,source:null,stack:a??null,digest:s??null}}function rd(r,s){try{console.error(s.value)}catch(a){setTimeout(function(){throw a})}}var XE=typeof WeakMap=="function"?WeakMap:Map;function Gm(r,s,a){a=br(-1,a),a.tag=3,a.payload={element:null};var c=s.value;return a.callback=function(){ku||(ku=!0,vd=c),rd(r,s)},a}function Km(r,s,a){a=br(-1,a),a.tag=3;var c=r.type.getDerivedStateFromError;if(typeof c=="function"){var d=s.value;a.payload=function(){return c(d)},a.callback=function(){rd(r,s)}}var g=r.stateNode;return g!==null&&typeof g.componentDidCatch=="function"&&(a.callback=function(){rd(r,s),typeof c!="function"&&(di===null?di=new Set([this]):di.add(this));var E=s.stack;this.componentDidCatch(s.value,{componentStack:E!==null?E:""})}),a}function Qm(r,s,a){var c=r.pingCache;if(c===null){c=r.pingCache=new XE;var d=new Set;c.set(s,d)}else d=c.get(s),d===void 0&&(d=new Set,c.set(s,d));d.has(a)||(d.add(a),r=d0.bind(null,r,s,a),s.then(r,r))}function Ym(r){do{var s;if((s=r.tag===13)&&(s=r.memoizedState,s=s!==null?s.dehydrated!==null:!0),s)return r;r=r.return}while(r!==null);return null}function Jm(r,s,a,c,d){return(r.mode&1)===0?(r===s?r.flags|=65536:(r.flags|=128,a.flags|=131072,a.flags&=-52805,a.tag===1&&(a.alternate===null?a.tag=17:(s=br(-1,1),s.tag=2,ci(a,s,1))),a.lanes|=1),r):(r.flags|=65536,r.lanes=d,r)}var ZE=ae.ReactCurrentOwner,en=!1;function Kt(r,s,a,c){s.child=r===null?ym(s,null,a,c):go(s,r.child,a,c)}function Xm(r,s,a,c,d){a=a.render;var g=s.ref;return vo(s,d),c=Kh(r,s,a,c,g,d),a=Qh(),r!==null&&!en?(s.updateQueue=r.updateQueue,s.flags&=-2053,r.lanes&=~d,Dr(r,s,d)):(tt&&a&&xh(s),s.flags|=1,Kt(r,s,c,d),s.child)}function Zm(r,s,a,c,d){if(r===null){var g=a.type;return typeof g=="function"&&!Pd(g)&&g.defaultProps===void 0&&a.compare===null&&a.defaultProps===void 0?(s.tag=15,s.type=g,eg(r,s,g,c,d)):(r=Ou(a.type,null,c,s,s.mode,d),r.ref=s.ref,r.return=s,s.child=r)}if(g=r.child,(r.lanes&d)===0){var E=g.memoizedProps;if(a=a.compare,a=a!==null?a:Sa,a(E,c)&&r.ref===s.ref)return Dr(r,s,d)}return s.flags|=1,r=gi(g,c),r.ref=s.ref,r.return=s,s.child=r}function eg(r,s,a,c,d){if(r!==null){var g=r.memoizedProps;if(Sa(g,c)&&r.ref===s.ref)if(en=!1,s.pendingProps=c=g,(r.lanes&d)!==0)(r.flags&131072)!==0&&(en=!0);else return s.lanes=r.lanes,Dr(r,s,d)}return id(r,s,a,c,d)}function tg(r,s,a){var c=s.pendingProps,d=c.children,g=r!==null?r.memoizedState:null;if(c.mode==="hidden")if((s.mode&1)===0)s.memoizedState={baseLanes:0,cachePool:null,transitions:null},Qe(To,pn),pn|=a;else{if((a&1073741824)===0)return r=g!==null?g.baseLanes|a:a,s.lanes=s.childLanes=1073741824,s.memoizedState={baseLanes:r,cachePool:null,transitions:null},s.updateQueue=null,Qe(To,pn),pn|=r,null;s.memoizedState={baseLanes:0,cachePool:null,transitions:null},c=g!==null?g.baseLanes:a,Qe(To,pn),pn|=c}else g!==null?(c=g.baseLanes|a,s.memoizedState=null):c=a,Qe(To,pn),pn|=c;return Kt(r,s,d,a),s.child}function ng(r,s){var a=s.ref;(r===null&&a!==null||r!==null&&r.ref!==a)&&(s.flags|=512,s.flags|=2097152)}function id(r,s,a,c,d){var g=Zt(a)?os:jt.current;return g=ho(s,g),vo(s,d),a=Kh(r,s,a,c,g,d),c=Qh(),r!==null&&!en?(s.updateQueue=r.updateQueue,s.flags&=-2053,r.lanes&=~d,Dr(r,s,d)):(tt&&c&&xh(s),s.flags|=1,Kt(r,s,a,d),s.child)}function rg(r,s,a,c,d){if(Zt(a)){var g=!0;ou(s)}else g=!1;if(vo(s,d),s.stateNode===null)Su(r,s),Hm(s,a,c),td(s,a,c,d),c=!0;else if(r===null){var E=s.stateNode,A=s.memoizedProps;E.props=A;var x=E.context,$=a.contextType;typeof $=="object"&&$!==null?$=In($):($=Zt(a)?os:jt.current,$=ho(s,$));var X=a.getDerivedStateFromProps,Z=typeof X=="function"||typeof E.getSnapshotBeforeUpdate=="function";Z||typeof E.UNSAFE_componentWillReceiveProps!="function"&&typeof E.componentWillReceiveProps!="function"||(A!==c||x!==$)&&qm(s,E,c,$),ui=!1;var J=s.memoizedState;E.state=J,mu(s,c,E,d),x=s.memoizedState,A!==c||J!==x||Xt.current||ui?(typeof X=="function"&&(ed(s,a,X,c),x=s.memoizedState),(A=ui||Wm(s,a,A,c,J,x,$))?(Z||typeof E.UNSAFE_componentWillMount!="function"&&typeof E.componentWillMount!="function"||(typeof E.componentWillMount=="function"&&E.componentWillMount(),typeof E.UNSAFE_componentWillMount=="function"&&E.UNSAFE_componentWillMount()),typeof E.componentDidMount=="function"&&(s.flags|=4194308)):(typeof E.componentDidMount=="function"&&(s.flags|=4194308),s.memoizedProps=c,s.memoizedState=x),E.props=c,E.state=x,E.context=$,c=A):(typeof E.componentDidMount=="function"&&(s.flags|=4194308),c=!1)}else{E=s.stateNode,_m(r,s),A=s.memoizedProps,$=s.type===s.elementType?A:$n(s.type,A),E.props=$,Z=s.pendingProps,J=E.context,x=a.contextType,typeof x=="object"&&x!==null?x=In(x):(x=Zt(a)?os:jt.current,x=ho(s,x));var he=a.getDerivedStateFromProps;(X=typeof he=="function"||typeof E.getSnapshotBeforeUpdate=="function")||typeof E.UNSAFE_componentWillReceiveProps!="function"&&typeof E.componentWillReceiveProps!="function"||(A!==Z||J!==x)&&qm(s,E,c,x),ui=!1,J=s.memoizedState,E.state=J,mu(s,c,E,d);var me=s.memoizedState;A!==Z||J!==me||Xt.current||ui?(typeof he=="function"&&(ed(s,a,he,c),me=s.memoizedState),($=ui||Wm(s,a,$,c,J,me,x)||!1)?(X||typeof E.UNSAFE_componentWillUpdate!="function"&&typeof E.componentWillUpdate!="function"||(typeof E.componentWillUpdate=="function"&&E.componentWillUpdate(c,me,x),typeof E.UNSAFE_componentWillUpdate=="function"&&E.UNSAFE_componentWillUpdate(c,me,x)),typeof E.componentDidUpdate=="function"&&(s.flags|=4),typeof E.getSnapshotBeforeUpdate=="function"&&(s.flags|=1024)):(typeof E.componentDidUpdate!="function"||A===r.memoizedProps&&J===r.memoizedState||(s.flags|=4),typeof E.getSnapshotBeforeUpdate!="function"||A===r.memoizedProps&&J===r.memoizedState||(s.flags|=1024),s.memoizedProps=c,s.memoizedState=me),E.props=c,E.state=me,E.context=x,c=$):(typeof E.componentDidUpdate!="function"||A===r.memoizedProps&&J===r.memoizedState||(s.flags|=4),typeof E.getSnapshotBeforeUpdate!="function"||A===r.memoizedProps&&J===r.memoizedState||(s.flags|=1024),c=!1)}return sd(r,s,a,c,g,d)}function sd(r,s,a,c,d,g){ng(r,s);var E=(s.flags&128)!==0;if(!c&&!E)return d&&lm(s,a,!1),Dr(r,s,g);c=s.stateNode,ZE.current=s;var A=E&&typeof a.getDerivedStateFromError!="function"?null:c.render();return s.flags|=1,r!==null&&E?(s.child=go(s,r.child,null,g),s.child=go(s,null,A,g)):Kt(r,s,A,g),s.memoizedState=c.state,d&&lm(s,a,!0),s.child}function ig(r){var s=r.stateNode;s.pendingContext?om(r,s.pendingContext,s.pendingContext!==s.context):s.context&&om(r,s.context,!1),Bh(r,s.containerInfo)}function sg(r,s,a,c,d){return mo(),Oh(d),s.flags|=256,Kt(r,s,a,c),s.child}var od={dehydrated:null,treeContext:null,retryLane:0};function ad(r){return{baseLanes:r,cachePool:null,transitions:null}}function og(r,s,a){var c=s.pendingProps,d=nt.current,g=!1,E=(s.flags&128)!==0,A;if((A=E)||(A=r!==null&&r.memoizedState===null?!1:(d&2)!==0),A?(g=!0,s.flags&=-129):(r===null||r.memoizedState!==null)&&(d|=1),Qe(nt,d&1),r===null)return Vh(s),r=s.memoizedState,r!==null&&(r=r.dehydrated,r!==null)?((s.mode&1)===0?s.lanes=1:r.data==="$!"?s.lanes=8:s.lanes=1073741824,null):(E=c.children,r=c.fallback,g?(c=s.mode,g=s.child,E={mode:"hidden",children:E},(c&1)===0&&g!==null?(g.childLanes=0,g.pendingProps=E):g=Lu(E,c,0,null),r=gs(r,c,a,null),g.return=s,r.return=s,g.sibling=r,s.child=g,s.child.memoizedState=ad(a),s.memoizedState=od,r):ld(s,E));if(d=r.memoizedState,d!==null&&(A=d.dehydrated,A!==null))return e0(r,s,E,c,A,d,a);if(g){g=c.fallback,E=s.mode,d=r.child,A=d.sibling;var x={mode:"hidden",children:c.children};return(E&1)===0&&s.child!==d?(c=s.child,c.childLanes=0,c.pendingProps=x,s.deletions=null):(c=gi(d,x),c.subtreeFlags=d.subtreeFlags&14680064),A!==null?g=gi(A,g):(g=gs(g,E,a,null),g.flags|=2),g.return=s,c.return=s,c.sibling=g,s.child=c,c=g,g=s.child,E=r.child.memoizedState,E=E===null?ad(a):{baseLanes:E.baseLanes|a,cachePool:null,transitions:E.transitions},g.memoizedState=E,g.childLanes=r.childLanes&~a,s.memoizedState=od,c}return g=r.child,r=g.sibling,c=gi(g,{mode:"visible",children:c.children}),(s.mode&1)===0&&(c.lanes=a),c.return=s,c.sibling=null,r!==null&&(a=s.deletions,a===null?(s.deletions=[r],s.flags|=16):a.push(r)),s.child=c,s.memoizedState=null,c}function ld(r,s){return s=Lu({mode:"visible",children:s},r.mode,0,null),s.return=r,r.child=s}function Iu(r,s,a,c){return c!==null&&Oh(c),go(s,r.child,null,a),r=ld(s,s.pendingProps.children),r.flags|=2,s.memoizedState=null,r}function e0(r,s,a,c,d,g,E){if(a)return s.flags&256?(s.flags&=-257,c=nd(Error(t(422))),Iu(r,s,E,c)):s.memoizedState!==null?(s.child=r.child,s.flags|=128,null):(g=c.fallback,d=s.mode,c=Lu({mode:"visible",children:c.children},d,0,null),g=gs(g,d,E,null),g.flags|=2,c.return=s,g.return=s,c.sibling=g,s.child=c,(s.mode&1)!==0&&go(s,r.child,null,E),s.child.memoizedState=ad(E),s.memoizedState=od,g);if((s.mode&1)===0)return Iu(r,s,E,null);if(d.data==="$!"){if(c=d.nextSibling&&d.nextSibling.dataset,c)var A=c.dgst;return c=A,g=Error(t(419)),c=nd(g,c,void 0),Iu(r,s,E,c)}if(A=(E&r.childLanes)!==0,en||A){if(c=Rt,c!==null){switch(E&-E){case 4:d=2;break;case 16:d=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:d=32;break;case 536870912:d=268435456;break;default:d=0}d=(d&(c.suspendedLanes|E))!==0?0:d,d!==0&&d!==g.retryLane&&(g.retryLane=d,xr(r,d),qn(c,r,d,-1))}return Sd(),c=nd(Error(t(421))),Iu(r,s,E,c)}return d.data==="$?"?(s.flags|=128,s.child=r.child,s=f0.bind(null,r),d._reactRetry=s,null):(r=g.treeContext,fn=si(d.nextSibling),dn=s,tt=!0,Bn=null,r!==null&&(En[Tn++]=kr,En[Tn++]=Nr,En[Tn++]=as,kr=r.id,Nr=r.overflow,as=s),s=ld(s,c.children),s.flags|=4096,s)}function ag(r,s,a){r.lanes|=s;var c=r.alternate;c!==null&&(c.lanes|=s),Fh(r.return,s,a)}function ud(r,s,a,c,d){var g=r.memoizedState;g===null?r.memoizedState={isBackwards:s,rendering:null,renderingStartTime:0,last:c,tail:a,tailMode:d}:(g.isBackwards=s,g.rendering=null,g.renderingStartTime=0,g.last=c,g.tail=a,g.tailMode=d)}function lg(r,s,a){var c=s.pendingProps,d=c.revealOrder,g=c.tail;if(Kt(r,s,c.children,a),c=nt.current,(c&2)!==0)c=c&1|2,s.flags|=128;else{if(r!==null&&(r.flags&128)!==0)e:for(r=s.child;r!==null;){if(r.tag===13)r.memoizedState!==null&&ag(r,a,s);else if(r.tag===19)ag(r,a,s);else if(r.child!==null){r.child.return=r,r=r.child;continue}if(r===s)break e;for(;r.sibling===null;){if(r.return===null||r.return===s)break e;r=r.return}r.sibling.return=r.return,r=r.sibling}c&=1}if(Qe(nt,c),(s.mode&1)===0)s.memoizedState=null;else switch(d){case"forwards":for(a=s.child,d=null;a!==null;)r=a.alternate,r!==null&&gu(r)===null&&(d=a),a=a.sibling;a=d,a===null?(d=s.child,s.child=null):(d=a.sibling,a.sibling=null),ud(s,!1,d,a,g);break;case"backwards":for(a=null,d=s.child,s.child=null;d!==null;){if(r=d.alternate,r!==null&&gu(r)===null){s.child=d;break}r=d.sibling,d.sibling=a,a=d,d=r}ud(s,!0,a,null,g);break;case"together":ud(s,!1,null,null,void 0);break;default:s.memoizedState=null}return s.child}function Su(r,s){(s.mode&1)===0&&r!==null&&(r.alternate=null,s.alternate=null,s.flags|=2)}function Dr(r,s,a){if(r!==null&&(s.dependencies=r.dependencies),ds|=s.lanes,(a&s.childLanes)===0)return null;if(r!==null&&s.child!==r.child)throw Error(t(153));if(s.child!==null){for(r=s.child,a=gi(r,r.pendingProps),s.child=a,a.return=s;r.sibling!==null;)r=r.sibling,a=a.sibling=gi(r,r.pendingProps),a.return=s;a.sibling=null}return s.child}function t0(r,s,a){switch(s.tag){case 3:ig(s),mo();break;case 5:Tm(s);break;case 1:Zt(s.type)&&ou(s);break;case 4:Bh(s,s.stateNode.containerInfo);break;case 10:var c=s.type._context,d=s.memoizedProps.value;Qe(du,c._currentValue),c._currentValue=d;break;case 13:if(c=s.memoizedState,c!==null)return c.dehydrated!==null?(Qe(nt,nt.current&1),s.flags|=128,null):(a&s.child.childLanes)!==0?og(r,s,a):(Qe(nt,nt.current&1),r=Dr(r,s,a),r!==null?r.sibling:null);Qe(nt,nt.current&1);break;case 19:if(c=(a&s.childLanes)!==0,(r.flags&128)!==0){if(c)return lg(r,s,a);s.flags|=128}if(d=s.memoizedState,d!==null&&(d.rendering=null,d.tail=null,d.lastEffect=null),Qe(nt,nt.current),c)break;return null;case 22:case 23:return s.lanes=0,tg(r,s,a)}return Dr(r,s,a)}var ug,cd,cg,hg;ug=function(r,s){for(var a=s.child;a!==null;){if(a.tag===5||a.tag===6)r.appendChild(a.stateNode);else if(a.tag!==4&&a.child!==null){a.child.return=a,a=a.child;continue}if(a===s)break;for(;a.sibling===null;){if(a.return===null||a.return===s)return;a=a.return}a.sibling.return=a.return,a=a.sibling}},cd=function(){},cg=function(r,s,a,c){var d=r.memoizedProps;if(d!==c){r=s.stateNode,cs(sr.current);var g=null;switch(a){case"input":d=yr(r,d),c=yr(r,c),g=[];break;case"select":d=ce({},d,{value:void 0}),c=ce({},c,{value:void 0}),g=[];break;case"textarea":d=Zo(r,d),c=Zo(r,c),g=[];break;default:typeof d.onClick!="function"&&typeof c.onClick=="function"&&(r.onclick=ru)}sa(a,c);var E;a=null;for($ in d)if(!c.hasOwnProperty($)&&d.hasOwnProperty($)&&d[$]!=null)if($==="style"){var A=d[$];for(E in A)A.hasOwnProperty(E)&&(a||(a={}),a[E]="")}else $!=="dangerouslySetInnerHTML"&&$!=="children"&&$!=="suppressContentEditableWarning"&&$!=="suppressHydrationWarning"&&$!=="autoFocus"&&(o.hasOwnProperty($)?g||(g=[]):(g=g||[]).push($,null));for($ in c){var x=c[$];if(A=d!=null?d[$]:void 0,c.hasOwnProperty($)&&x!==A&&(x!=null||A!=null))if($==="style")if(A){for(E in A)!A.hasOwnProperty(E)||x&&x.hasOwnProperty(E)||(a||(a={}),a[E]="");for(E in x)x.hasOwnProperty(E)&&A[E]!==x[E]&&(a||(a={}),a[E]=x[E])}else a||(g||(g=[]),g.push($,a)),a=x;else $==="dangerouslySetInnerHTML"?(x=x?x.__html:void 0,A=A?A.__html:void 0,x!=null&&A!==x&&(g=g||[]).push($,x)):$==="children"?typeof x!="string"&&typeof x!="number"||(g=g||[]).push($,""+x):$!=="suppressContentEditableWarning"&&$!=="suppressHydrationWarning"&&(o.hasOwnProperty($)?(x!=null&&$==="onScroll"&&Je("scroll",r),g||A===x||(g=[])):(g=g||[]).push($,x))}a&&(g=g||[]).push("style",a);var $=g;(s.updateQueue=$)&&(s.flags|=4)}},hg=function(r,s,a,c){a!==c&&(s.flags|=4)};function Fa(r,s){if(!tt)switch(r.tailMode){case"hidden":s=r.tail;for(var a=null;s!==null;)s.alternate!==null&&(a=s),s=s.sibling;a===null?r.tail=null:a.sibling=null;break;case"collapsed":a=r.tail;for(var c=null;a!==null;)a.alternate!==null&&(c=a),a=a.sibling;c===null?s||r.tail===null?r.tail=null:r.tail.sibling=null:c.sibling=null}}function Ut(r){var s=r.alternate!==null&&r.alternate.child===r.child,a=0,c=0;if(s)for(var d=r.child;d!==null;)a|=d.lanes|d.childLanes,c|=d.subtreeFlags&14680064,c|=d.flags&14680064,d.return=r,d=d.sibling;else for(d=r.child;d!==null;)a|=d.lanes|d.childLanes,c|=d.subtreeFlags,c|=d.flags,d.return=r,d=d.sibling;return r.subtreeFlags|=c,r.childLanes=a,s}function n0(r,s,a){var c=s.pendingProps;switch(bh(s),s.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Ut(s),null;case 1:return Zt(s.type)&&su(),Ut(s),null;case 3:return c=s.stateNode,_o(),Xe(Xt),Xe(jt),Hh(),c.pendingContext&&(c.context=c.pendingContext,c.pendingContext=null),(r===null||r.child===null)&&(cu(s)?s.flags|=4:r===null||r.memoizedState.isDehydrated&&(s.flags&256)===0||(s.flags|=1024,Bn!==null&&(Ed(Bn),Bn=null))),cd(r,s),Ut(s),null;case 5:$h(s);var d=cs(Va.current);if(a=s.type,r!==null&&s.stateNode!=null)cg(r,s,a,c,d),r.ref!==s.ref&&(s.flags|=512,s.flags|=2097152);else{if(!c){if(s.stateNode===null)throw Error(t(166));return Ut(s),null}if(r=cs(sr.current),cu(s)){c=s.stateNode,a=s.type;var g=s.memoizedProps;switch(c[ir]=s,c[ka]=g,r=(s.mode&1)!==0,a){case"dialog":Je("cancel",c),Je("close",c);break;case"iframe":case"object":case"embed":Je("load",c);break;case"video":case"audio":for(d=0;d<Aa.length;d++)Je(Aa[d],c);break;case"source":Je("error",c);break;case"img":case"image":case"link":Je("error",c),Je("load",c);break;case"details":Je("toggle",c);break;case"input":Ds(c,g),Je("invalid",c);break;case"select":c._wrapperState={wasMultiple:!!g.multiple},Je("invalid",c);break;case"textarea":Os(c,g),Je("invalid",c)}sa(a,g),d=null;for(var E in g)if(g.hasOwnProperty(E)){var A=g[E];E==="children"?typeof A=="string"?c.textContent!==A&&(g.suppressHydrationWarning!==!0&&nu(c.textContent,A,r),d=["children",A]):typeof A=="number"&&c.textContent!==""+A&&(g.suppressHydrationWarning!==!0&&nu(c.textContent,A,r),d=["children",""+A]):o.hasOwnProperty(E)&&A!=null&&E==="onScroll"&&Je("scroll",c)}switch(a){case"input":Pt(c),Rl(c,g,!0);break;case"textarea":Pt(c),ea(c);break;case"select":case"option":break;default:typeof g.onClick=="function"&&(c.onclick=ru)}c=d,s.updateQueue=c,c!==null&&(s.flags|=4)}else{E=d.nodeType===9?d:d.ownerDocument,r==="http://www.w3.org/1999/xhtml"&&(r=_t(a)),r==="http://www.w3.org/1999/xhtml"?a==="script"?(r=E.createElement("div"),r.innerHTML="<script><\/script>",r=r.removeChild(r.firstChild)):typeof c.is=="string"?r=E.createElement(a,{is:c.is}):(r=E.createElement(a),a==="select"&&(E=r,c.multiple?E.multiple=!0:c.size&&(E.size=c.size))):r=E.createElementNS(r,a),r[ir]=s,r[ka]=c,ug(r,s,!1,!1),s.stateNode=r;e:{switch(E=oa(a,c),a){case"dialog":Je("cancel",r),Je("close",r),d=c;break;case"iframe":case"object":case"embed":Je("load",r),d=c;break;case"video":case"audio":for(d=0;d<Aa.length;d++)Je(Aa[d],r);d=c;break;case"source":Je("error",r),d=c;break;case"img":case"image":case"link":Je("error",r),Je("load",r),d=c;break;case"details":Je("toggle",r),d=c;break;case"input":Ds(r,c),d=yr(r,c),Je("invalid",r);break;case"option":d=c;break;case"select":r._wrapperState={wasMultiple:!!c.multiple},d=ce({},c,{value:void 0}),Je("invalid",r);break;case"textarea":Os(r,c),d=Zo(r,c),Je("invalid",r);break;default:d=c}sa(a,d),A=d;for(g in A)if(A.hasOwnProperty(g)){var x=A[g];g==="style"?ra(r,x):g==="dangerouslySetInnerHTML"?(x=x?x.__html:void 0,x!=null&&ta(r,x)):g==="children"?typeof x=="string"?(a!=="textarea"||x!=="")&&Kr(r,x):typeof x=="number"&&Kr(r,""+x):g!=="suppressContentEditableWarning"&&g!=="suppressHydrationWarning"&&g!=="autoFocus"&&(o.hasOwnProperty(g)?x!=null&&g==="onScroll"&&Je("scroll",r):x!=null&&te(r,g,x,E))}switch(a){case"input":Pt(r),Rl(r,c,!1);break;case"textarea":Pt(r),ea(r);break;case"option":c.value!=null&&r.setAttribute("value",""+le(c.value));break;case"select":r.multiple=!!c.multiple,g=c.value,g!=null?_r(r,!!c.multiple,g,!1):c.defaultValue!=null&&_r(r,!!c.multiple,c.defaultValue,!0);break;default:typeof d.onClick=="function"&&(r.onclick=ru)}switch(a){case"button":case"input":case"select":case"textarea":c=!!c.autoFocus;break e;case"img":c=!0;break e;default:c=!1}}c&&(s.flags|=4)}s.ref!==null&&(s.flags|=512,s.flags|=2097152)}return Ut(s),null;case 6:if(r&&s.stateNode!=null)hg(r,s,r.memoizedProps,c);else{if(typeof c!="string"&&s.stateNode===null)throw Error(t(166));if(a=cs(Va.current),cs(sr.current),cu(s)){if(c=s.stateNode,a=s.memoizedProps,c[ir]=s,(g=c.nodeValue!==a)&&(r=dn,r!==null))switch(r.tag){case 3:nu(c.nodeValue,a,(r.mode&1)!==0);break;case 5:r.memoizedProps.suppressHydrationWarning!==!0&&nu(c.nodeValue,a,(r.mode&1)!==0)}g&&(s.flags|=4)}else c=(a.nodeType===9?a:a.ownerDocument).createTextNode(c),c[ir]=s,s.stateNode=c}return Ut(s),null;case 13:if(Xe(nt),c=s.memoizedState,r===null||r.memoizedState!==null&&r.memoizedState.dehydrated!==null){if(tt&&fn!==null&&(s.mode&1)!==0&&(s.flags&128)===0)pm(),mo(),s.flags|=98560,g=!1;else if(g=cu(s),c!==null&&c.dehydrated!==null){if(r===null){if(!g)throw Error(t(318));if(g=s.memoizedState,g=g!==null?g.dehydrated:null,!g)throw Error(t(317));g[ir]=s}else mo(),(s.flags&128)===0&&(s.memoizedState=null),s.flags|=4;Ut(s),g=!1}else Bn!==null&&(Ed(Bn),Bn=null),g=!0;if(!g)return s.flags&65536?s:null}return(s.flags&128)!==0?(s.lanes=a,s):(c=c!==null,c!==(r!==null&&r.memoizedState!==null)&&c&&(s.child.flags|=8192,(s.mode&1)!==0&&(r===null||(nt.current&1)!==0?It===0&&(It=3):Sd())),s.updateQueue!==null&&(s.flags|=4),Ut(s),null);case 4:return _o(),cd(r,s),r===null&&Ca(s.stateNode.containerInfo),Ut(s),null;case 10:return jh(s.type._context),Ut(s),null;case 17:return Zt(s.type)&&su(),Ut(s),null;case 19:if(Xe(nt),g=s.memoizedState,g===null)return Ut(s),null;if(c=(s.flags&128)!==0,E=g.rendering,E===null)if(c)Fa(g,!1);else{if(It!==0||r!==null&&(r.flags&128)!==0)for(r=s.child;r!==null;){if(E=gu(r),E!==null){for(s.flags|=128,Fa(g,!1),c=E.updateQueue,c!==null&&(s.updateQueue=c,s.flags|=4),s.subtreeFlags=0,c=a,a=s.child;a!==null;)g=a,r=c,g.flags&=14680066,E=g.alternate,E===null?(g.childLanes=0,g.lanes=r,g.child=null,g.subtreeFlags=0,g.memoizedProps=null,g.memoizedState=null,g.updateQueue=null,g.dependencies=null,g.stateNode=null):(g.childLanes=E.childLanes,g.lanes=E.lanes,g.child=E.child,g.subtreeFlags=0,g.deletions=null,g.memoizedProps=E.memoizedProps,g.memoizedState=E.memoizedState,g.updateQueue=E.updateQueue,g.type=E.type,r=E.dependencies,g.dependencies=r===null?null:{lanes:r.lanes,firstContext:r.firstContext}),a=a.sibling;return Qe(nt,nt.current&1|2),s.child}r=r.sibling}g.tail!==null&&Ke()>Io&&(s.flags|=128,c=!0,Fa(g,!1),s.lanes=4194304)}else{if(!c)if(r=gu(E),r!==null){if(s.flags|=128,c=!0,a=r.updateQueue,a!==null&&(s.updateQueue=a,s.flags|=4),Fa(g,!0),g.tail===null&&g.tailMode==="hidden"&&!E.alternate&&!tt)return Ut(s),null}else 2*Ke()-g.renderingStartTime>Io&&a!==1073741824&&(s.flags|=128,c=!0,Fa(g,!1),s.lanes=4194304);g.isBackwards?(E.sibling=s.child,s.child=E):(a=g.last,a!==null?a.sibling=E:s.child=E,g.last=E)}return g.tail!==null?(s=g.tail,g.rendering=s,g.tail=s.sibling,g.renderingStartTime=Ke(),s.sibling=null,a=nt.current,Qe(nt,c?a&1|2:a&1),s):(Ut(s),null);case 22:case 23:return Id(),c=s.memoizedState!==null,r!==null&&r.memoizedState!==null!==c&&(s.flags|=8192),c&&(s.mode&1)!==0?(pn&1073741824)!==0&&(Ut(s),s.subtreeFlags&6&&(s.flags|=8192)):Ut(s),null;case 24:return null;case 25:return null}throw Error(t(156,s.tag))}function r0(r,s){switch(bh(s),s.tag){case 1:return Zt(s.type)&&su(),r=s.flags,r&65536?(s.flags=r&-65537|128,s):null;case 3:return _o(),Xe(Xt),Xe(jt),Hh(),r=s.flags,(r&65536)!==0&&(r&128)===0?(s.flags=r&-65537|128,s):null;case 5:return $h(s),null;case 13:if(Xe(nt),r=s.memoizedState,r!==null&&r.dehydrated!==null){if(s.alternate===null)throw Error(t(340));mo()}return r=s.flags,r&65536?(s.flags=r&-65537|128,s):null;case 19:return Xe(nt),null;case 4:return _o(),null;case 10:return jh(s.type._context),null;case 22:case 23:return Id(),null;case 24:return null;default:return null}}var Pu=!1,zt=!1,i0=typeof WeakSet=="function"?WeakSet:Set,pe=null;function Eo(r,s){var a=r.ref;if(a!==null)if(typeof a=="function")try{a(null)}catch(c){st(r,s,c)}else a.current=null}function hd(r,s,a){try{a()}catch(c){st(r,s,c)}}var dg=!1;function s0(r,s){if(Ih=ni,r=Wp(),mh(r)){if("selectionStart"in r)var a={start:r.selectionStart,end:r.selectionEnd};else e:{a=(a=r.ownerDocument)&&a.defaultView||window;var c=a.getSelection&&a.getSelection();if(c&&c.rangeCount!==0){a=c.anchorNode;var d=c.anchorOffset,g=c.focusNode;c=c.focusOffset;try{a.nodeType,g.nodeType}catch{a=null;break e}var E=0,A=-1,x=-1,$=0,X=0,Z=r,J=null;t:for(;;){for(var he;Z!==a||d!==0&&Z.nodeType!==3||(A=E+d),Z!==g||c!==0&&Z.nodeType!==3||(x=E+c),Z.nodeType===3&&(E+=Z.nodeValue.length),(he=Z.firstChild)!==null;)J=Z,Z=he;for(;;){if(Z===r)break t;if(J===a&&++$===d&&(A=E),J===g&&++X===c&&(x=E),(he=Z.nextSibling)!==null)break;Z=J,J=Z.parentNode}Z=he}a=A===-1||x===-1?null:{start:A,end:x}}else a=null}a=a||{start:0,end:0}}else a=null;for(Sh={focusedElem:r,selectionRange:a},ni=!1,pe=s;pe!==null;)if(s=pe,r=s.child,(s.subtreeFlags&1028)!==0&&r!==null)r.return=s,pe=r;else for(;pe!==null;){s=pe;try{var me=s.alternate;if((s.flags&1024)!==0)switch(s.tag){case 0:case 11:case 15:break;case 1:if(me!==null){var ge=me.memoizedProps,ut=me.memoizedState,z=s.stateNode,D=z.getSnapshotBeforeUpdate(s.elementType===s.type?ge:$n(s.type,ge),ut);z.__reactInternalSnapshotBeforeUpdate=D}break;case 3:var B=s.stateNode.containerInfo;B.nodeType===1?B.textContent="":B.nodeType===9&&B.documentElement&&B.removeChild(B.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(t(163))}}catch(ne){st(s,s.return,ne)}if(r=s.sibling,r!==null){r.return=s.return,pe=r;break}pe=s.return}return me=dg,dg=!1,me}function Ua(r,s,a){var c=s.updateQueue;if(c=c!==null?c.lastEffect:null,c!==null){var d=c=c.next;do{if((d.tag&r)===r){var g=d.destroy;d.destroy=void 0,g!==void 0&&hd(s,a,g)}d=d.next}while(d!==c)}}function Au(r,s){if(s=s.updateQueue,s=s!==null?s.lastEffect:null,s!==null){var a=s=s.next;do{if((a.tag&r)===r){var c=a.create;a.destroy=c()}a=a.next}while(a!==s)}}function dd(r){var s=r.ref;if(s!==null){var a=r.stateNode;switch(r.tag){case 5:r=a;break;default:r=a}typeof s=="function"?s(r):s.current=r}}function fg(r){var s=r.alternate;s!==null&&(r.alternate=null,fg(s)),r.child=null,r.deletions=null,r.sibling=null,r.tag===5&&(s=r.stateNode,s!==null&&(delete s[ir],delete s[ka],delete s[Rh],delete s[zE],delete s[BE])),r.stateNode=null,r.return=null,r.dependencies=null,r.memoizedProps=null,r.memoizedState=null,r.pendingProps=null,r.stateNode=null,r.updateQueue=null}function pg(r){return r.tag===5||r.tag===3||r.tag===4}function mg(r){e:for(;;){for(;r.sibling===null;){if(r.return===null||pg(r.return))return null;r=r.return}for(r.sibling.return=r.return,r=r.sibling;r.tag!==5&&r.tag!==6&&r.tag!==18;){if(r.flags&2||r.child===null||r.tag===4)continue e;r.child.return=r,r=r.child}if(!(r.flags&2))return r.stateNode}}function fd(r,s,a){var c=r.tag;if(c===5||c===6)r=r.stateNode,s?a.nodeType===8?a.parentNode.insertBefore(r,s):a.insertBefore(r,s):(a.nodeType===8?(s=a.parentNode,s.insertBefore(r,a)):(s=a,s.appendChild(r)),a=a._reactRootContainer,a!=null||s.onclick!==null||(s.onclick=ru));else if(c!==4&&(r=r.child,r!==null))for(fd(r,s,a),r=r.sibling;r!==null;)fd(r,s,a),r=r.sibling}function pd(r,s,a){var c=r.tag;if(c===5||c===6)r=r.stateNode,s?a.insertBefore(r,s):a.appendChild(r);else if(c!==4&&(r=r.child,r!==null))for(pd(r,s,a),r=r.sibling;r!==null;)pd(r,s,a),r=r.sibling}var Dt=null,Wn=!1;function hi(r,s,a){for(a=a.child;a!==null;)gg(r,s,a),a=a.sibling}function gg(r,s,a){if(ln&&typeof ln.onCommitFiberUnmount=="function")try{ln.onCommitFiberUnmount(Xi,a)}catch{}switch(a.tag){case 5:zt||Eo(a,s);case 6:var c=Dt,d=Wn;Dt=null,hi(r,s,a),Dt=c,Wn=d,Dt!==null&&(Wn?(r=Dt,a=a.stateNode,r.nodeType===8?r.parentNode.removeChild(a):r.removeChild(a)):Dt.removeChild(a.stateNode));break;case 18:Dt!==null&&(Wn?(r=Dt,a=a.stateNode,r.nodeType===8?Ch(r.parentNode,a):r.nodeType===1&&Ch(r,a),Fn(r)):Ch(Dt,a.stateNode));break;case 4:c=Dt,d=Wn,Dt=a.stateNode.containerInfo,Wn=!0,hi(r,s,a),Dt=c,Wn=d;break;case 0:case 11:case 14:case 15:if(!zt&&(c=a.updateQueue,c!==null&&(c=c.lastEffect,c!==null))){d=c=c.next;do{var g=d,E=g.destroy;g=g.tag,E!==void 0&&((g&2)!==0||(g&4)!==0)&&hd(a,s,E),d=d.next}while(d!==c)}hi(r,s,a);break;case 1:if(!zt&&(Eo(a,s),c=a.stateNode,typeof c.componentWillUnmount=="function"))try{c.props=a.memoizedProps,c.state=a.memoizedState,c.componentWillUnmount()}catch(A){st(a,s,A)}hi(r,s,a);break;case 21:hi(r,s,a);break;case 22:a.mode&1?(zt=(c=zt)||a.memoizedState!==null,hi(r,s,a),zt=c):hi(r,s,a);break;default:hi(r,s,a)}}function yg(r){var s=r.updateQueue;if(s!==null){r.updateQueue=null;var a=r.stateNode;a===null&&(a=r.stateNode=new i0),s.forEach(function(c){var d=p0.bind(null,r,c);a.has(c)||(a.add(c),c.then(d,d))})}}function Hn(r,s){var a=s.deletions;if(a!==null)for(var c=0;c<a.length;c++){var d=a[c];try{var g=r,E=s,A=E;e:for(;A!==null;){switch(A.tag){case 5:Dt=A.stateNode,Wn=!1;break e;case 3:Dt=A.stateNode.containerInfo,Wn=!0;break e;case 4:Dt=A.stateNode.containerInfo,Wn=!0;break e}A=A.return}if(Dt===null)throw Error(t(160));gg(g,E,d),Dt=null,Wn=!1;var x=d.alternate;x!==null&&(x.return=null),d.return=null}catch($){st(d,s,$)}}if(s.subtreeFlags&12854)for(s=s.child;s!==null;)vg(s,r),s=s.sibling}function vg(r,s){var a=r.alternate,c=r.flags;switch(r.tag){case 0:case 11:case 14:case 15:if(Hn(s,r),ar(r),c&4){try{Ua(3,r,r.return),Au(3,r)}catch(ge){st(r,r.return,ge)}try{Ua(5,r,r.return)}catch(ge){st(r,r.return,ge)}}break;case 1:Hn(s,r),ar(r),c&512&&a!==null&&Eo(a,a.return);break;case 5:if(Hn(s,r),ar(r),c&512&&a!==null&&Eo(a,a.return),r.flags&32){var d=r.stateNode;try{Kr(d,"")}catch(ge){st(r,r.return,ge)}}if(c&4&&(d=r.stateNode,d!=null)){var g=r.memoizedProps,E=a!==null?a.memoizedProps:g,A=r.type,x=r.updateQueue;if(r.updateQueue=null,x!==null)try{A==="input"&&g.type==="radio"&&g.name!=null&&Jo(d,g),oa(A,E);var $=oa(A,g);for(E=0;E<x.length;E+=2){var X=x[E],Z=x[E+1];X==="style"?ra(d,Z):X==="dangerouslySetInnerHTML"?ta(d,Z):X==="children"?Kr(d,Z):te(d,X,Z,$)}switch(A){case"input":Xo(d,g);break;case"textarea":Ls(d,g);break;case"select":var J=d._wrapperState.wasMultiple;d._wrapperState.wasMultiple=!!g.multiple;var he=g.value;he!=null?_r(d,!!g.multiple,he,!1):J!==!!g.multiple&&(g.defaultValue!=null?_r(d,!!g.multiple,g.defaultValue,!0):_r(d,!!g.multiple,g.multiple?[]:"",!1))}d[ka]=g}catch(ge){st(r,r.return,ge)}}break;case 6:if(Hn(s,r),ar(r),c&4){if(r.stateNode===null)throw Error(t(162));d=r.stateNode,g=r.memoizedProps;try{d.nodeValue=g}catch(ge){st(r,r.return,ge)}}break;case 3:if(Hn(s,r),ar(r),c&4&&a!==null&&a.memoizedState.isDehydrated)try{Fn(s.containerInfo)}catch(ge){st(r,r.return,ge)}break;case 4:Hn(s,r),ar(r);break;case 13:Hn(s,r),ar(r),d=r.child,d.flags&8192&&(g=d.memoizedState!==null,d.stateNode.isHidden=g,!g||d.alternate!==null&&d.alternate.memoizedState!==null||(yd=Ke())),c&4&&yg(r);break;case 22:if(X=a!==null&&a.memoizedState!==null,r.mode&1?(zt=($=zt)||X,Hn(s,r),zt=$):Hn(s,r),ar(r),c&8192){if($=r.memoizedState!==null,(r.stateNode.isHidden=$)&&!X&&(r.mode&1)!==0)for(pe=r,X=r.child;X!==null;){for(Z=pe=X;pe!==null;){switch(J=pe,he=J.child,J.tag){case 0:case 11:case 14:case 15:Ua(4,J,J.return);break;case 1:Eo(J,J.return);var me=J.stateNode;if(typeof me.componentWillUnmount=="function"){c=J,a=J.return;try{s=c,me.props=s.memoizedProps,me.state=s.memoizedState,me.componentWillUnmount()}catch(ge){st(c,a,ge)}}break;case 5:Eo(J,J.return);break;case 22:if(J.memoizedState!==null){Eg(Z);continue}}he!==null?(he.return=J,pe=he):Eg(Z)}X=X.sibling}e:for(X=null,Z=r;;){if(Z.tag===5){if(X===null){X=Z;try{d=Z.stateNode,$?(g=d.style,typeof g.setProperty=="function"?g.setProperty("display","none","important"):g.display="none"):(A=Z.stateNode,x=Z.memoizedProps.style,E=x!=null&&x.hasOwnProperty("display")?x.display:null,A.style.display=na("display",E))}catch(ge){st(r,r.return,ge)}}}else if(Z.tag===6){if(X===null)try{Z.stateNode.nodeValue=$?"":Z.memoizedProps}catch(ge){st(r,r.return,ge)}}else if((Z.tag!==22&&Z.tag!==23||Z.memoizedState===null||Z===r)&&Z.child!==null){Z.child.return=Z,Z=Z.child;continue}if(Z===r)break e;for(;Z.sibling===null;){if(Z.return===null||Z.return===r)break e;X===Z&&(X=null),Z=Z.return}X===Z&&(X=null),Z.sibling.return=Z.return,Z=Z.sibling}}break;case 19:Hn(s,r),ar(r),c&4&&yg(r);break;case 21:break;default:Hn(s,r),ar(r)}}function ar(r){var s=r.flags;if(s&2){try{e:{for(var a=r.return;a!==null;){if(pg(a)){var c=a;break e}a=a.return}throw Error(t(160))}switch(c.tag){case 5:var d=c.stateNode;c.flags&32&&(Kr(d,""),c.flags&=-33);var g=mg(r);pd(r,g,d);break;case 3:case 4:var E=c.stateNode.containerInfo,A=mg(r);fd(r,A,E);break;default:throw Error(t(161))}}catch(x){st(r,r.return,x)}r.flags&=-3}s&4096&&(r.flags&=-4097)}function o0(r,s,a){pe=r,_g(r)}function _g(r,s,a){for(var c=(r.mode&1)!==0;pe!==null;){var d=pe,g=d.child;if(d.tag===22&&c){var E=d.memoizedState!==null||Pu;if(!E){var A=d.alternate,x=A!==null&&A.memoizedState!==null||zt;A=Pu;var $=zt;if(Pu=E,(zt=x)&&!$)for(pe=d;pe!==null;)E=pe,x=E.child,E.tag===22&&E.memoizedState!==null?Tg(d):x!==null?(x.return=E,pe=x):Tg(d);for(;g!==null;)pe=g,_g(g),g=g.sibling;pe=d,Pu=A,zt=$}wg(r)}else(d.subtreeFlags&8772)!==0&&g!==null?(g.return=d,pe=g):wg(r)}}function wg(r){for(;pe!==null;){var s=pe;if((s.flags&8772)!==0){var a=s.alternate;try{if((s.flags&8772)!==0)switch(s.tag){case 0:case 11:case 15:zt||Au(5,s);break;case 1:var c=s.stateNode;if(s.flags&4&&!zt)if(a===null)c.componentDidMount();else{var d=s.elementType===s.type?a.memoizedProps:$n(s.type,a.memoizedProps);c.componentDidUpdate(d,a.memoizedState,c.__reactInternalSnapshotBeforeUpdate)}var g=s.updateQueue;g!==null&&Em(s,g,c);break;case 3:var E=s.updateQueue;if(E!==null){if(a=null,s.child!==null)switch(s.child.tag){case 5:a=s.child.stateNode;break;case 1:a=s.child.stateNode}Em(s,E,a)}break;case 5:var A=s.stateNode;if(a===null&&s.flags&4){a=A;var x=s.memoizedProps;switch(s.type){case"button":case"input":case"select":case"textarea":x.autoFocus&&a.focus();break;case"img":x.src&&(a.src=x.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(s.memoizedState===null){var $=s.alternate;if($!==null){var X=$.memoizedState;if(X!==null){var Z=X.dehydrated;Z!==null&&Fn(Z)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(t(163))}zt||s.flags&512&&dd(s)}catch(J){st(s,s.return,J)}}if(s===r){pe=null;break}if(a=s.sibling,a!==null){a.return=s.return,pe=a;break}pe=s.return}}function Eg(r){for(;pe!==null;){var s=pe;if(s===r){pe=null;break}var a=s.sibling;if(a!==null){a.return=s.return,pe=a;break}pe=s.return}}function Tg(r){for(;pe!==null;){var s=pe;try{switch(s.tag){case 0:case 11:case 15:var a=s.return;try{Au(4,s)}catch(x){st(s,a,x)}break;case 1:var c=s.stateNode;if(typeof c.componentDidMount=="function"){var d=s.return;try{c.componentDidMount()}catch(x){st(s,d,x)}}var g=s.return;try{dd(s)}catch(x){st(s,g,x)}break;case 5:var E=s.return;try{dd(s)}catch(x){st(s,E,x)}}}catch(x){st(s,s.return,x)}if(s===r){pe=null;break}var A=s.sibling;if(A!==null){A.return=s.return,pe=A;break}pe=s.return}}var a0=Math.ceil,Cu=ae.ReactCurrentDispatcher,md=ae.ReactCurrentOwner,Pn=ae.ReactCurrentBatchConfig,Fe=0,Rt=null,mt=null,Vt=0,pn=0,To=oi(0),It=0,za=null,ds=0,Ru=0,gd=0,Ba=null,tn=null,yd=0,Io=1/0,Vr=null,ku=!1,vd=null,di=null,Nu=!1,fi=null,xu=0,$a=0,_d=null,bu=-1,Du=0;function Qt(){return(Fe&6)!==0?Ke():bu!==-1?bu:bu=Ke()}function pi(r){return(r.mode&1)===0?1:(Fe&2)!==0&&Vt!==0?Vt&-Vt:WE.transition!==null?(Du===0&&(Du=es()),Du):(r=Oe,r!==0||(r=window.event,r=r===void 0?16:ya(r.type)),r)}function qn(r,s,a,c){if(50<$a)throw $a=0,_d=null,Error(t(185));Xr(r,a,c),((Fe&2)===0||r!==Rt)&&(r===Rt&&((Fe&2)===0&&(Ru|=a),It===4&&mi(r,Vt)),nn(r,c),a===1&&Fe===0&&(s.mode&1)===0&&(Io=Ke()+500,au&&li()))}function nn(r,s){var a=r.callbackNode;Tr(r,s);var c=Zi(r,r===Rt?Vt:0);if(c===0)a!==null&&da(a),r.callbackNode=null,r.callbackPriority=0;else if(s=c&-c,r.callbackPriority!==s){if(a!=null&&da(a),s===1)r.tag===0?$E(Sg.bind(null,r)):um(Sg.bind(null,r)),FE(function(){(Fe&6)===0&&li()}),a=null;else{switch(ei(c)){case 1:a=Ji;break;case 4:a=Qr;break;case 16:a=vn;break;case 536870912:a=Dl;break;default:a=vn}a=bg(a,Ig.bind(null,r))}r.callbackPriority=s,r.callbackNode=a}}function Ig(r,s){if(bu=-1,Du=0,(Fe&6)!==0)throw Error(t(327));var a=r.callbackNode;if(So()&&r.callbackNode!==a)return null;var c=Zi(r,r===Rt?Vt:0);if(c===0)return null;if((c&30)!==0||(c&r.expiredLanes)!==0||s)s=Vu(r,c);else{s=c;var d=Fe;Fe|=2;var g=Ag();(Rt!==r||Vt!==s)&&(Vr=null,Io=Ke()+500,ps(r,s));do try{c0();break}catch(A){Pg(r,A)}while(!0);Mh(),Cu.current=g,Fe=d,mt!==null?s=0:(Rt=null,Vt=0,s=It)}if(s!==0){if(s===2&&(d=un(r),d!==0&&(c=d,s=wd(r,d))),s===1)throw a=za,ps(r,0),mi(r,c),nn(r,Ke()),a;if(s===6)mi(r,c);else{if(d=r.current.alternate,(c&30)===0&&!l0(d)&&(s=Vu(r,c),s===2&&(g=un(r),g!==0&&(c=g,s=wd(r,g))),s===1))throw a=za,ps(r,0),mi(r,c),nn(r,Ke()),a;switch(r.finishedWork=d,r.finishedLanes=c,s){case 0:case 1:throw Error(t(345));case 2:ms(r,tn,Vr);break;case 3:if(mi(r,c),(c&130023424)===c&&(s=yd+500-Ke(),10<s)){if(Zi(r,0)!==0)break;if(d=r.suspendedLanes,(d&c)!==c){Qt(),r.pingedLanes|=r.suspendedLanes&d;break}r.timeoutHandle=Ah(ms.bind(null,r,tn,Vr),s);break}ms(r,tn,Vr);break;case 4:if(mi(r,c),(c&4194240)===c)break;for(s=r.eventTimes,d=-1;0<c;){var E=31-qt(c);g=1<<E,E=s[E],E>d&&(d=E),c&=~g}if(c=d,c=Ke()-c,c=(120>c?120:480>c?480:1080>c?1080:1920>c?1920:3e3>c?3e3:4320>c?4320:1960*a0(c/1960))-c,10<c){r.timeoutHandle=Ah(ms.bind(null,r,tn,Vr),c);break}ms(r,tn,Vr);break;case 5:ms(r,tn,Vr);break;default:throw Error(t(329))}}}return nn(r,Ke()),r.callbackNode===a?Ig.bind(null,r):null}function wd(r,s){var a=Ba;return r.current.memoizedState.isDehydrated&&(ps(r,s).flags|=256),r=Vu(r,s),r!==2&&(s=tn,tn=a,s!==null&&Ed(s)),r}function Ed(r){tn===null?tn=r:tn.push.apply(tn,r)}function l0(r){for(var s=r;;){if(s.flags&16384){var a=s.updateQueue;if(a!==null&&(a=a.stores,a!==null))for(var c=0;c<a.length;c++){var d=a[c],g=d.getSnapshot;d=d.value;try{if(!zn(g(),d))return!1}catch{return!1}}}if(a=s.child,s.subtreeFlags&16384&&a!==null)a.return=s,s=a;else{if(s===r)break;for(;s.sibling===null;){if(s.return===null||s.return===r)return!0;s=s.return}s.sibling.return=s.return,s=s.sibling}}return!0}function mi(r,s){for(s&=~gd,s&=~Ru,r.suspendedLanes|=s,r.pingedLanes&=~s,r=r.expirationTimes;0<s;){var a=31-qt(s),c=1<<a;r[a]=-1,s&=~c}}function Sg(r){if((Fe&6)!==0)throw Error(t(327));So();var s=Zi(r,0);if((s&1)===0)return nn(r,Ke()),null;var a=Vu(r,s);if(r.tag!==0&&a===2){var c=un(r);c!==0&&(s=c,a=wd(r,c))}if(a===1)throw a=za,ps(r,0),mi(r,s),nn(r,Ke()),a;if(a===6)throw Error(t(345));return r.finishedWork=r.current.alternate,r.finishedLanes=s,ms(r,tn,Vr),nn(r,Ke()),null}function Td(r,s){var a=Fe;Fe|=1;try{return r(s)}finally{Fe=a,Fe===0&&(Io=Ke()+500,au&&li())}}function fs(r){fi!==null&&fi.tag===0&&(Fe&6)===0&&So();var s=Fe;Fe|=1;var a=Pn.transition,c=Oe;try{if(Pn.transition=null,Oe=1,r)return r()}finally{Oe=c,Pn.transition=a,Fe=s,(Fe&6)===0&&li()}}function Id(){pn=To.current,Xe(To)}function ps(r,s){r.finishedWork=null,r.finishedLanes=0;var a=r.timeoutHandle;if(a!==-1&&(r.timeoutHandle=-1,jE(a)),mt!==null)for(a=mt.return;a!==null;){var c=a;switch(bh(c),c.tag){case 1:c=c.type.childContextTypes,c!=null&&su();break;case 3:_o(),Xe(Xt),Xe(jt),Hh();break;case 5:$h(c);break;case 4:_o();break;case 13:Xe(nt);break;case 19:Xe(nt);break;case 10:jh(c.type._context);break;case 22:case 23:Id()}a=a.return}if(Rt=r,mt=r=gi(r.current,null),Vt=pn=s,It=0,za=null,gd=Ru=ds=0,tn=Ba=null,us!==null){for(s=0;s<us.length;s++)if(a=us[s],c=a.interleaved,c!==null){a.interleaved=null;var d=c.next,g=a.pending;if(g!==null){var E=g.next;g.next=d,c.next=E}a.pending=c}us=null}return r}function Pg(r,s){do{var a=mt;try{if(Mh(),yu.current=Eu,vu){for(var c=rt.memoizedState;c!==null;){var d=c.queue;d!==null&&(d.pending=null),c=c.next}vu=!1}if(hs=0,Ct=Tt=rt=null,Oa=!1,La=0,md.current=null,a===null||a.return===null){It=1,za=s,mt=null;break}e:{var g=r,E=a.return,A=a,x=s;if(s=Vt,A.flags|=32768,x!==null&&typeof x=="object"&&typeof x.then=="function"){var $=x,X=A,Z=X.tag;if((X.mode&1)===0&&(Z===0||Z===11||Z===15)){var J=X.alternate;J?(X.updateQueue=J.updateQueue,X.memoizedState=J.memoizedState,X.lanes=J.lanes):(X.updateQueue=null,X.memoizedState=null)}var he=Ym(E);if(he!==null){he.flags&=-257,Jm(he,E,A,g,s),he.mode&1&&Qm(g,$,s),s=he,x=$;var me=s.updateQueue;if(me===null){var ge=new Set;ge.add(x),s.updateQueue=ge}else me.add(x);break e}else{if((s&1)===0){Qm(g,$,s),Sd();break e}x=Error(t(426))}}else if(tt&&A.mode&1){var ut=Ym(E);if(ut!==null){(ut.flags&65536)===0&&(ut.flags|=256),Jm(ut,E,A,g,s),Oh(wo(x,A));break e}}g=x=wo(x,A),It!==4&&(It=2),Ba===null?Ba=[g]:Ba.push(g),g=E;do{switch(g.tag){case 3:g.flags|=65536,s&=-s,g.lanes|=s;var z=Gm(g,x,s);wm(g,z);break e;case 1:A=x;var D=g.type,B=g.stateNode;if((g.flags&128)===0&&(typeof D.getDerivedStateFromError=="function"||B!==null&&typeof B.componentDidCatch=="function"&&(di===null||!di.has(B)))){g.flags|=65536,s&=-s,g.lanes|=s;var ne=Km(g,A,s);wm(g,ne);break e}}g=g.return}while(g!==null)}Rg(a)}catch(ye){s=ye,mt===a&&a!==null&&(mt=a=a.return);continue}break}while(!0)}function Ag(){var r=Cu.current;return Cu.current=Eu,r===null?Eu:r}function Sd(){(It===0||It===3||It===2)&&(It=4),Rt===null||(ds&268435455)===0&&(Ru&268435455)===0||mi(Rt,Vt)}function Vu(r,s){var a=Fe;Fe|=2;var c=Ag();(Rt!==r||Vt!==s)&&(Vr=null,ps(r,s));do try{u0();break}catch(d){Pg(r,d)}while(!0);if(Mh(),Fe=a,Cu.current=c,mt!==null)throw Error(t(261));return Rt=null,Vt=0,It}function u0(){for(;mt!==null;)Cg(mt)}function c0(){for(;mt!==null&&!xl();)Cg(mt)}function Cg(r){var s=xg(r.alternate,r,pn);r.memoizedProps=r.pendingProps,s===null?Rg(r):mt=s,md.current=null}function Rg(r){var s=r;do{var a=s.alternate;if(r=s.return,(s.flags&32768)===0){if(a=n0(a,s,pn),a!==null){mt=a;return}}else{if(a=r0(a,s),a!==null){a.flags&=32767,mt=a;return}if(r!==null)r.flags|=32768,r.subtreeFlags=0,r.deletions=null;else{It=6,mt=null;return}}if(s=s.sibling,s!==null){mt=s;return}mt=s=r}while(s!==null);It===0&&(It=5)}function ms(r,s,a){var c=Oe,d=Pn.transition;try{Pn.transition=null,Oe=1,h0(r,s,a,c)}finally{Pn.transition=d,Oe=c}return null}function h0(r,s,a,c){do So();while(fi!==null);if((Fe&6)!==0)throw Error(t(327));a=r.finishedWork;var d=r.finishedLanes;if(a===null)return null;if(r.finishedWork=null,r.finishedLanes=0,a===r.current)throw Error(t(177));r.callbackNode=null,r.callbackPriority=0;var g=a.lanes|a.childLanes;if(qe(r,g),r===Rt&&(mt=Rt=null,Vt=0),(a.subtreeFlags&2064)===0&&(a.flags&2064)===0||Nu||(Nu=!0,bg(vn,function(){return So(),null})),g=(a.flags&15990)!==0,(a.subtreeFlags&15990)!==0||g){g=Pn.transition,Pn.transition=null;var E=Oe;Oe=1;var A=Fe;Fe|=4,md.current=null,s0(r,a),vg(a,r),xE(Sh),ni=!!Ih,Sh=Ih=null,r.current=a,o0(a),ah(),Fe=A,Oe=E,Pn.transition=g}else r.current=a;if(Nu&&(Nu=!1,fi=r,xu=d),g=r.pendingLanes,g===0&&(di=null),Vl(a.stateNode),nn(r,Ke()),s!==null)for(c=r.onRecoverableError,a=0;a<s.length;a++)d=s[a],c(d.value,{componentStack:d.stack,digest:d.digest});if(ku)throw ku=!1,r=vd,vd=null,r;return(xu&1)!==0&&r.tag!==0&&So(),g=r.pendingLanes,(g&1)!==0?r===_d?$a++:($a=0,_d=r):$a=0,li(),null}function So(){if(fi!==null){var r=ei(xu),s=Pn.transition,a=Oe;try{if(Pn.transition=null,Oe=16>r?16:r,fi===null)var c=!1;else{if(r=fi,fi=null,xu=0,(Fe&6)!==0)throw Error(t(331));var d=Fe;for(Fe|=4,pe=r.current;pe!==null;){var g=pe,E=g.child;if((pe.flags&16)!==0){var A=g.deletions;if(A!==null){for(var x=0;x<A.length;x++){var $=A[x];for(pe=$;pe!==null;){var X=pe;switch(X.tag){case 0:case 11:case 15:Ua(8,X,g)}var Z=X.child;if(Z!==null)Z.return=X,pe=Z;else for(;pe!==null;){X=pe;var J=X.sibling,he=X.return;if(fg(X),X===$){pe=null;break}if(J!==null){J.return=he,pe=J;break}pe=he}}}var me=g.alternate;if(me!==null){var ge=me.child;if(ge!==null){me.child=null;do{var ut=ge.sibling;ge.sibling=null,ge=ut}while(ge!==null)}}pe=g}}if((g.subtreeFlags&2064)!==0&&E!==null)E.return=g,pe=E;else e:for(;pe!==null;){if(g=pe,(g.flags&2048)!==0)switch(g.tag){case 0:case 11:case 15:Ua(9,g,g.return)}var z=g.sibling;if(z!==null){z.return=g.return,pe=z;break e}pe=g.return}}var D=r.current;for(pe=D;pe!==null;){E=pe;var B=E.child;if((E.subtreeFlags&2064)!==0&&B!==null)B.return=E,pe=B;else e:for(E=D;pe!==null;){if(A=pe,(A.flags&2048)!==0)try{switch(A.tag){case 0:case 11:case 15:Au(9,A)}}catch(ye){st(A,A.return,ye)}if(A===E){pe=null;break e}var ne=A.sibling;if(ne!==null){ne.return=A.return,pe=ne;break e}pe=A.return}}if(Fe=d,li(),ln&&typeof ln.onPostCommitFiberRoot=="function")try{ln.onPostCommitFiberRoot(Xi,r)}catch{}c=!0}return c}finally{Oe=a,Pn.transition=s}}return!1}function kg(r,s,a){s=wo(a,s),s=Gm(r,s,1),r=ci(r,s,1),s=Qt(),r!==null&&(Xr(r,1,s),nn(r,s))}function st(r,s,a){if(r.tag===3)kg(r,r,a);else for(;s!==null;){if(s.tag===3){kg(s,r,a);break}else if(s.tag===1){var c=s.stateNode;if(typeof s.type.getDerivedStateFromError=="function"||typeof c.componentDidCatch=="function"&&(di===null||!di.has(c))){r=wo(a,r),r=Km(s,r,1),s=ci(s,r,1),r=Qt(),s!==null&&(Xr(s,1,r),nn(s,r));break}}s=s.return}}function d0(r,s,a){var c=r.pingCache;c!==null&&c.delete(s),s=Qt(),r.pingedLanes|=r.suspendedLanes&a,Rt===r&&(Vt&a)===a&&(It===4||It===3&&(Vt&130023424)===Vt&&500>Ke()-yd?ps(r,0):gd|=a),nn(r,s)}function Ng(r,s){s===0&&((r.mode&1)===0?s=1:(s=qs,qs<<=1,(qs&130023424)===0&&(qs=4194304)));var a=Qt();r=xr(r,s),r!==null&&(Xr(r,s,a),nn(r,a))}function f0(r){var s=r.memoizedState,a=0;s!==null&&(a=s.retryLane),Ng(r,a)}function p0(r,s){var a=0;switch(r.tag){case 13:var c=r.stateNode,d=r.memoizedState;d!==null&&(a=d.retryLane);break;case 19:c=r.stateNode;break;default:throw Error(t(314))}c!==null&&c.delete(s),Ng(r,a)}var xg;xg=function(r,s,a){if(r!==null)if(r.memoizedProps!==s.pendingProps||Xt.current)en=!0;else{if((r.lanes&a)===0&&(s.flags&128)===0)return en=!1,t0(r,s,a);en=(r.flags&131072)!==0}else en=!1,tt&&(s.flags&1048576)!==0&&cm(s,uu,s.index);switch(s.lanes=0,s.tag){case 2:var c=s.type;Su(r,s),r=s.pendingProps;var d=ho(s,jt.current);vo(s,a),d=Kh(null,s,c,r,d,a);var g=Qh();return s.flags|=1,typeof d=="object"&&d!==null&&typeof d.render=="function"&&d.$$typeof===void 0?(s.tag=1,s.memoizedState=null,s.updateQueue=null,Zt(c)?(g=!0,ou(s)):g=!1,s.memoizedState=d.state!==null&&d.state!==void 0?d.state:null,zh(s),d.updater=Tu,s.stateNode=d,d._reactInternals=s,td(s,c,r,a),s=sd(null,s,c,!0,g,a)):(s.tag=0,tt&&g&&xh(s),Kt(null,s,d,a),s=s.child),s;case 16:c=s.elementType;e:{switch(Su(r,s),r=s.pendingProps,d=c._init,c=d(c._payload),s.type=c,d=s.tag=g0(c),r=$n(c,r),d){case 0:s=id(null,s,c,r,a);break e;case 1:s=rg(null,s,c,r,a);break e;case 11:s=Xm(null,s,c,r,a);break e;case 14:s=Zm(null,s,c,$n(c.type,r),a);break e}throw Error(t(306,c,""))}return s;case 0:return c=s.type,d=s.pendingProps,d=s.elementType===c?d:$n(c,d),id(r,s,c,d,a);case 1:return c=s.type,d=s.pendingProps,d=s.elementType===c?d:$n(c,d),rg(r,s,c,d,a);case 3:e:{if(ig(s),r===null)throw Error(t(387));c=s.pendingProps,g=s.memoizedState,d=g.element,_m(r,s),mu(s,c,null,a);var E=s.memoizedState;if(c=E.element,g.isDehydrated)if(g={element:c,isDehydrated:!1,cache:E.cache,pendingSuspenseBoundaries:E.pendingSuspenseBoundaries,transitions:E.transitions},s.updateQueue.baseState=g,s.memoizedState=g,s.flags&256){d=wo(Error(t(423)),s),s=sg(r,s,c,a,d);break e}else if(c!==d){d=wo(Error(t(424)),s),s=sg(r,s,c,a,d);break e}else for(fn=si(s.stateNode.containerInfo.firstChild),dn=s,tt=!0,Bn=null,a=ym(s,null,c,a),s.child=a;a;)a.flags=a.flags&-3|4096,a=a.sibling;else{if(mo(),c===d){s=Dr(r,s,a);break e}Kt(r,s,c,a)}s=s.child}return s;case 5:return Tm(s),r===null&&Vh(s),c=s.type,d=s.pendingProps,g=r!==null?r.memoizedProps:null,E=d.children,Ph(c,d)?E=null:g!==null&&Ph(c,g)&&(s.flags|=32),ng(r,s),Kt(r,s,E,a),s.child;case 6:return r===null&&Vh(s),null;case 13:return og(r,s,a);case 4:return Bh(s,s.stateNode.containerInfo),c=s.pendingProps,r===null?s.child=go(s,null,c,a):Kt(r,s,c,a),s.child;case 11:return c=s.type,d=s.pendingProps,d=s.elementType===c?d:$n(c,d),Xm(r,s,c,d,a);case 7:return Kt(r,s,s.pendingProps,a),s.child;case 8:return Kt(r,s,s.pendingProps.children,a),s.child;case 12:return Kt(r,s,s.pendingProps.children,a),s.child;case 10:e:{if(c=s.type._context,d=s.pendingProps,g=s.memoizedProps,E=d.value,Qe(du,c._currentValue),c._currentValue=E,g!==null)if(zn(g.value,E)){if(g.children===d.children&&!Xt.current){s=Dr(r,s,a);break e}}else for(g=s.child,g!==null&&(g.return=s);g!==null;){var A=g.dependencies;if(A!==null){E=g.child;for(var x=A.firstContext;x!==null;){if(x.context===c){if(g.tag===1){x=br(-1,a&-a),x.tag=2;var $=g.updateQueue;if($!==null){$=$.shared;var X=$.pending;X===null?x.next=x:(x.next=X.next,X.next=x),$.pending=x}}g.lanes|=a,x=g.alternate,x!==null&&(x.lanes|=a),Fh(g.return,a,s),A.lanes|=a;break}x=x.next}}else if(g.tag===10)E=g.type===s.type?null:g.child;else if(g.tag===18){if(E=g.return,E===null)throw Error(t(341));E.lanes|=a,A=E.alternate,A!==null&&(A.lanes|=a),Fh(E,a,s),E=g.sibling}else E=g.child;if(E!==null)E.return=g;else for(E=g;E!==null;){if(E===s){E=null;break}if(g=E.sibling,g!==null){g.return=E.return,E=g;break}E=E.return}g=E}Kt(r,s,d.children,a),s=s.child}return s;case 9:return d=s.type,c=s.pendingProps.children,vo(s,a),d=In(d),c=c(d),s.flags|=1,Kt(r,s,c,a),s.child;case 14:return c=s.type,d=$n(c,s.pendingProps),d=$n(c.type,d),Zm(r,s,c,d,a);case 15:return eg(r,s,s.type,s.pendingProps,a);case 17:return c=s.type,d=s.pendingProps,d=s.elementType===c?d:$n(c,d),Su(r,s),s.tag=1,Zt(c)?(r=!0,ou(s)):r=!1,vo(s,a),Hm(s,c,d),td(s,c,d,a),sd(null,s,c,!0,r,a);case 19:return lg(r,s,a);case 22:return tg(r,s,a)}throw Error(t(156,s.tag))};function bg(r,s){return Ws(r,s)}function m0(r,s,a,c){this.tag=r,this.key=a,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=s,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=c,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function An(r,s,a,c){return new m0(r,s,a,c)}function Pd(r){return r=r.prototype,!(!r||!r.isReactComponent)}function g0(r){if(typeof r=="function")return Pd(r)?1:0;if(r!=null){if(r=r.$$typeof,r===M)return 11;if(r===Ze)return 14}return 2}function gi(r,s){var a=r.alternate;return a===null?(a=An(r.tag,s,r.key,r.mode),a.elementType=r.elementType,a.type=r.type,a.stateNode=r.stateNode,a.alternate=r,r.alternate=a):(a.pendingProps=s,a.type=r.type,a.flags=0,a.subtreeFlags=0,a.deletions=null),a.flags=r.flags&14680064,a.childLanes=r.childLanes,a.lanes=r.lanes,a.child=r.child,a.memoizedProps=r.memoizedProps,a.memoizedState=r.memoizedState,a.updateQueue=r.updateQueue,s=r.dependencies,a.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext},a.sibling=r.sibling,a.index=r.index,a.ref=r.ref,a}function Ou(r,s,a,c,d,g){var E=2;if(c=r,typeof r=="function")Pd(r)&&(E=1);else if(typeof r=="string")E=5;else e:switch(r){case k:return gs(a.children,d,g,s);case P:E=8,d|=8;break;case C:return r=An(12,a,s,d|2),r.elementType=C,r.lanes=g,r;case R:return r=An(13,a,s,d),r.elementType=R,r.lanes=g,r;case He:return r=An(19,a,s,d),r.elementType=He,r.lanes=g,r;case ze:return Lu(a,d,g,s);default:if(typeof r=="object"&&r!==null)switch(r.$$typeof){case b:E=10;break e;case N:E=9;break e;case M:E=11;break e;case Ze:E=14;break e;case at:E=16,c=null;break e}throw Error(t(130,r==null?r:typeof r,""))}return s=An(E,a,s,d),s.elementType=r,s.type=c,s.lanes=g,s}function gs(r,s,a,c){return r=An(7,r,c,s),r.lanes=a,r}function Lu(r,s,a,c){return r=An(22,r,c,s),r.elementType=ze,r.lanes=a,r.stateNode={isHidden:!1},r}function Ad(r,s,a){return r=An(6,r,null,s),r.lanes=a,r}function Cd(r,s,a){return s=An(4,r.children!==null?r.children:[],r.key,s),s.lanes=a,s.stateNode={containerInfo:r.containerInfo,pendingChildren:null,implementation:r.implementation},s}function y0(r,s,a,c,d){this.tag=s,this.containerInfo=r,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Jr(0),this.expirationTimes=Jr(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Jr(0),this.identifierPrefix=c,this.onRecoverableError=d,this.mutableSourceEagerHydrationData=null}function Rd(r,s,a,c,d,g,E,A,x){return r=new y0(r,s,a,A,x),s===1?(s=1,g===!0&&(s|=8)):s=0,g=An(3,null,null,s),r.current=g,g.stateNode=r,g.memoizedState={element:c,isDehydrated:a,cache:null,transitions:null,pendingSuspenseBoundaries:null},zh(g),r}function v0(r,s,a){var c=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:re,key:c==null?null:""+c,children:r,containerInfo:s,implementation:a}}function Dg(r){if(!r)return ai;r=r._reactInternals;e:{if(Vn(r)!==r||r.tag!==1)throw Error(t(170));var s=r;do{switch(s.tag){case 3:s=s.stateNode.context;break e;case 1:if(Zt(s.type)){s=s.stateNode.__reactInternalMemoizedMergedChildContext;break e}}s=s.return}while(s!==null);throw Error(t(171))}if(r.tag===1){var a=r.type;if(Zt(a))return am(r,a,s)}return s}function Vg(r,s,a,c,d,g,E,A,x){return r=Rd(a,c,!0,r,d,g,E,A,x),r.context=Dg(null),a=r.current,c=Qt(),d=pi(a),g=br(c,d),g.callback=s??null,ci(a,g,d),r.current.lanes=d,Xr(r,d,c),nn(r,c),r}function Mu(r,s,a,c){var d=s.current,g=Qt(),E=pi(d);return a=Dg(a),s.context===null?s.context=a:s.pendingContext=a,s=br(g,E),s.payload={element:r},c=c===void 0?null:c,c!==null&&(s.callback=c),r=ci(d,s,E),r!==null&&(qn(r,d,E,g),pu(r,d,E)),E}function ju(r){if(r=r.current,!r.child)return null;switch(r.child.tag){case 5:return r.child.stateNode;default:return r.child.stateNode}}function Og(r,s){if(r=r.memoizedState,r!==null&&r.dehydrated!==null){var a=r.retryLane;r.retryLane=a!==0&&a<s?a:s}}function kd(r,s){Og(r,s),(r=r.alternate)&&Og(r,s)}function _0(){return null}var Lg=typeof reportError=="function"?reportError:function(r){console.error(r)};function Nd(r){this._internalRoot=r}Fu.prototype.render=Nd.prototype.render=function(r){var s=this._internalRoot;if(s===null)throw Error(t(409));Mu(r,s,null,null)},Fu.prototype.unmount=Nd.prototype.unmount=function(){var r=this._internalRoot;if(r!==null){this._internalRoot=null;var s=r.containerInfo;fs(function(){Mu(null,r,null,null)}),s[Cr]=null}};function Fu(r){this._internalRoot=r}Fu.prototype.unstable_scheduleHydration=function(r){if(r){var s=Fl();r={blockedOn:null,target:r,priority:s};for(var a=0;a<er.length&&s!==0&&s<er[a].priority;a++);er.splice(a,0,r),a===0&&Bl(r)}};function xd(r){return!(!r||r.nodeType!==1&&r.nodeType!==9&&r.nodeType!==11)}function Uu(r){return!(!r||r.nodeType!==1&&r.nodeType!==9&&r.nodeType!==11&&(r.nodeType!==8||r.nodeValue!==" react-mount-point-unstable "))}function Mg(){}function w0(r,s,a,c,d){if(d){if(typeof c=="function"){var g=c;c=function(){var $=ju(E);g.call($)}}var E=Vg(s,c,r,0,null,!1,!1,"",Mg);return r._reactRootContainer=E,r[Cr]=E.current,Ca(r.nodeType===8?r.parentNode:r),fs(),E}for(;d=r.lastChild;)r.removeChild(d);if(typeof c=="function"){var A=c;c=function(){var $=ju(x);A.call($)}}var x=Rd(r,0,!1,null,null,!1,!1,"",Mg);return r._reactRootContainer=x,r[Cr]=x.current,Ca(r.nodeType===8?r.parentNode:r),fs(function(){Mu(s,x,a,c)}),x}function zu(r,s,a,c,d){var g=a._reactRootContainer;if(g){var E=g;if(typeof d=="function"){var A=d;d=function(){var x=ju(E);A.call(x)}}Mu(s,E,r,d)}else E=w0(a,s,r,d,c);return ju(E)}Ml=function(r){switch(r.tag){case 3:var s=r.stateNode;if(s.current.memoizedState.isDehydrated){var a=Yr(s.pendingLanes);a!==0&&(Zr(s,a|1),nn(s,Ke()),(Fe&6)===0&&(Io=Ke()+500,li()))}break;case 13:fs(function(){var c=xr(r,1);if(c!==null){var d=Qt();qn(c,r,1,d)}}),kd(r,1)}},Gs=function(r){if(r.tag===13){var s=xr(r,134217728);if(s!==null){var a=Qt();qn(s,r,134217728,a)}kd(r,134217728)}},jl=function(r){if(r.tag===13){var s=pi(r),a=xr(r,s);if(a!==null){var c=Qt();qn(a,r,s,c)}kd(r,s)}},Fl=function(){return Oe},Ul=function(r,s){var a=Oe;try{return Oe=r,s()}finally{Oe=a}},js=function(r,s,a){switch(s){case"input":if(Xo(r,a),s=a.name,a.type==="radio"&&s!=null){for(a=r;a.parentNode;)a=a.parentNode;for(a=a.querySelectorAll("input[name="+JSON.stringify(""+s)+'][type="radio"]'),s=0;s<a.length;s++){var c=a[s];if(c!==r&&c.form===r.form){var d=iu(c);if(!d)throw Error(t(90));Nn(c),Xo(c,d)}}}break;case"textarea":Ls(r,a);break;case"select":s=a.value,s!=null&&_r(r,!!a.multiple,s,!1)}},Gi=Td,la=fs;var E0={usingClientEntryPoint:!1,Events:[Na,uo,iu,Xn,aa,Td]},Wa={findFiberByHostInstance:ss,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},T0={bundleType:Wa.bundleType,version:Wa.version,rendererPackageName:Wa.rendererPackageName,rendererConfig:Wa.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:ae.ReactCurrentDispatcher,findHostInstanceByFiber:function(r){return r=ha(r),r===null?null:r.stateNode},findFiberByHostInstance:Wa.findFiberByHostInstance||_0,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Bu=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Bu.isDisabled&&Bu.supportsFiber)try{Xi=Bu.inject(T0),ln=Bu}catch{}}return rn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=E0,rn.createPortal=function(r,s){var a=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!xd(s))throw Error(t(200));return v0(r,s,null,a)},rn.createRoot=function(r,s){if(!xd(r))throw Error(t(299));var a=!1,c="",d=Lg;return s!=null&&(s.unstable_strictMode===!0&&(a=!0),s.identifierPrefix!==void 0&&(c=s.identifierPrefix),s.onRecoverableError!==void 0&&(d=s.onRecoverableError)),s=Rd(r,1,!1,null,null,a,!1,c,d),r[Cr]=s.current,Ca(r.nodeType===8?r.parentNode:r),new Nd(s)},rn.findDOMNode=function(r){if(r==null)return null;if(r.nodeType===1)return r;var s=r._reactInternals;if(s===void 0)throw typeof r.render=="function"?Error(t(188)):(r=Object.keys(r).join(","),Error(t(268,r)));return r=ha(s),r=r===null?null:r.stateNode,r},rn.flushSync=function(r){return fs(r)},rn.hydrate=function(r,s,a){if(!Uu(s))throw Error(t(200));return zu(null,r,s,!0,a)},rn.hydrateRoot=function(r,s,a){if(!xd(r))throw Error(t(405));var c=a!=null&&a.hydratedSources||null,d=!1,g="",E=Lg;if(a!=null&&(a.unstable_strictMode===!0&&(d=!0),a.identifierPrefix!==void 0&&(g=a.identifierPrefix),a.onRecoverableError!==void 0&&(E=a.onRecoverableError)),s=Vg(s,null,r,1,a??null,d,!1,g,E),r[Cr]=s.current,Ca(r),c)for(r=0;r<c.length;r++)a=c[r],d=a._getVersion,d=d(a._source),s.mutableSourceEagerHydrationData==null?s.mutableSourceEagerHydrationData=[a,d]:s.mutableSourceEagerHydrationData.push(a,d);return new Fu(s)},rn.render=function(r,s,a){if(!Uu(s))throw Error(t(200));return zu(null,r,s,!1,a)},rn.unmountComponentAtNode=function(r){if(!Uu(r))throw Error(t(40));return r._reactRootContainer?(fs(function(){zu(null,null,r,!1,function(){r._reactRootContainer=null,r[Cr]=null})}),!0):!1},rn.unstable_batchedUpdates=Td,rn.unstable_renderSubtreeIntoContainer=function(r,s,a,c){if(!Uu(a))throw Error(t(200));if(r==null||r._reactInternals===void 0)throw Error(t(38));return zu(r,s,a,!1,c)},rn.version="18.3.1-next-f1338f8080-20240426",rn}var Hg;function Mv(){if(Hg)return Vd.exports;Hg=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}return n(),Vd.exports=D0(),Vd.exports}var qg;function V0(){if(qg)return $u;qg=1;var n=Mv();return $u.createRoot=n.createRoot,$u.hydrateRoot=n.hydrateRoot,$u}var O0=V0();Mv();/**
 * @remix-run/router v1.23.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function il(){return il=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(n[i]=t[i])}return n},il.apply(this,arguments)}var Si;(function(n){n.Pop="POP",n.Push="PUSH",n.Replace="REPLACE"})(Si||(Si={}));const Gg="popstate";function L0(n){n===void 0&&(n={});function e(i,o){let{pathname:l,search:h,hash:f}=i.location;return Jd("",{pathname:l,search:h,hash:f},o.state&&o.state.usr||null,o.state&&o.state.key||"default")}function t(i,o){return typeof o=="string"?o:lc(o)}return j0(e,t,null,n)}function dt(n,e){if(n===!1||n===null||typeof n>"u")throw new Error(e)}function Nf(n,e){if(!n){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function M0(){return Math.random().toString(36).substr(2,8)}function Kg(n,e){return{usr:n.state,key:n.key,idx:e}}function Jd(n,e,t,i){return t===void 0&&(t=null),il({pathname:typeof n=="string"?n:n.pathname,search:"",hash:""},typeof e=="string"?zo(e):e,{state:t,key:e&&e.key||i||M0()})}function lc(n){let{pathname:e="/",search:t="",hash:i=""}=n;return t&&t!=="?"&&(e+=t.charAt(0)==="?"?t:"?"+t),i&&i!=="#"&&(e+=i.charAt(0)==="#"?i:"#"+i),e}function zo(n){let e={};if(n){let t=n.indexOf("#");t>=0&&(e.hash=n.substr(t),n=n.substr(0,t));let i=n.indexOf("?");i>=0&&(e.search=n.substr(i),n=n.substr(0,i)),n&&(e.pathname=n)}return e}function j0(n,e,t,i){i===void 0&&(i={});let{window:o=document.defaultView,v5Compat:l=!1}=i,h=o.history,f=Si.Pop,p=null,y=w();y==null&&(y=0,h.replaceState(il({},h.state,{idx:y}),""));function w(){return(h.state||{idx:null}).idx}function T(){f=Si.Pop;let L=w(),se=L==null?null:L-y;y=L,p&&p({action:f,location:j.location,delta:se})}function S(L,se){f=Si.Push;let q=Jd(j.location,L,se);y=w()+1;let te=Kg(q,y),ae=j.createHref(q);try{h.pushState(te,"",ae)}catch(we){if(we instanceof DOMException&&we.name==="DataCloneError")throw we;o.location.assign(ae)}l&&p&&p({action:f,location:j.location,delta:1})}function V(L,se){f=Si.Replace;let q=Jd(j.location,L,se);y=w();let te=Kg(q,y),ae=j.createHref(q);h.replaceState(te,"",ae),l&&p&&p({action:f,location:j.location,delta:0})}function O(L){let se=o.location.origin!=="null"?o.location.origin:o.location.href,q=typeof L=="string"?L:lc(L);return q=q.replace(/ $/,"%20"),dt(se,"No window.location.(origin|href) available to create URL for href: "+q),new URL(q,se)}let j={get action(){return f},get location(){return n(o,h)},listen(L){if(p)throw new Error("A history only accepts one active listener");return o.addEventListener(Gg,T),p=L,()=>{o.removeEventListener(Gg,T),p=null}},createHref(L){return e(o,L)},createURL:O,encodeLocation(L){let se=O(L);return{pathname:se.pathname,search:se.search,hash:se.hash}},push:S,replace:V,go(L){return h.go(L)}};return j}var Qg;(function(n){n.data="data",n.deferred="deferred",n.redirect="redirect",n.error="error"})(Qg||(Qg={}));function F0(n,e,t){return t===void 0&&(t="/"),U0(n,e,t)}function U0(n,e,t,i){let o=typeof e=="string"?zo(e):e,l=xf(o.pathname||"/",t);if(l==null)return null;let h=jv(n);z0(h);let f=null;for(let p=0;f==null&&p<h.length;++p){let y=Z0(l);f=Y0(h[p],y)}return f}function jv(n,e,t,i){e===void 0&&(e=[]),t===void 0&&(t=[]),i===void 0&&(i="");let o=(l,h,f)=>{let p={relativePath:f===void 0?l.path||"":f,caseSensitive:l.caseSensitive===!0,childrenIndex:h,route:l};p.relativePath.startsWith("/")&&(dt(p.relativePath.startsWith(i),'Absolute route path "'+p.relativePath+'" nested under path '+('"'+i+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),p.relativePath=p.relativePath.slice(i.length));let y=Ai([i,p.relativePath]),w=t.concat(p);l.children&&l.children.length>0&&(dt(l.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+y+'".')),jv(l.children,e,w,y)),!(l.path==null&&!l.index)&&e.push({path:y,score:K0(y,l.index),routesMeta:w})};return n.forEach((l,h)=>{var f;if(l.path===""||!((f=l.path)!=null&&f.includes("?")))o(l,h);else for(let p of Fv(l.path))o(l,h,p)}),e}function Fv(n){let e=n.split("/");if(e.length===0)return[];let[t,...i]=e,o=t.endsWith("?"),l=t.replace(/\?$/,"");if(i.length===0)return o?[l,""]:[l];let h=Fv(i.join("/")),f=[];return f.push(...h.map(p=>p===""?l:[l,p].join("/"))),o&&f.push(...h),f.map(p=>n.startsWith("/")&&p===""?"/":p)}function z0(n){n.sort((e,t)=>e.score!==t.score?t.score-e.score:Q0(e.routesMeta.map(i=>i.childrenIndex),t.routesMeta.map(i=>i.childrenIndex)))}const B0=/^:[\w-]+$/,$0=3,W0=2,H0=1,q0=10,G0=-2,Yg=n=>n==="*";function K0(n,e){let t=n.split("/"),i=t.length;return t.some(Yg)&&(i+=G0),e&&(i+=W0),t.filter(o=>!Yg(o)).reduce((o,l)=>o+(B0.test(l)?$0:l===""?H0:q0),i)}function Q0(n,e){return n.length===e.length&&n.slice(0,-1).every((i,o)=>i===e[o])?n[n.length-1]-e[e.length-1]:0}function Y0(n,e,t){let{routesMeta:i}=n,o={},l="/",h=[];for(let f=0;f<i.length;++f){let p=i[f],y=f===i.length-1,w=l==="/"?e:e.slice(l.length)||"/",T=J0({path:p.relativePath,caseSensitive:p.caseSensitive,end:y},w),S=p.route;if(!T)return null;Object.assign(o,T.params),h.push({params:o,pathname:Ai([l,T.pathname]),pathnameBase:iT(Ai([l,T.pathnameBase])),route:S}),T.pathnameBase!=="/"&&(l=Ai([l,T.pathnameBase]))}return h}function J0(n,e){typeof n=="string"&&(n={path:n,caseSensitive:!1,end:!0});let[t,i]=X0(n.path,n.caseSensitive,n.end),o=e.match(t);if(!o)return null;let l=o[0],h=l.replace(/(.)\/+$/,"$1"),f=o.slice(1);return{params:i.reduce((y,w,T)=>{let{paramName:S,isOptional:V}=w;if(S==="*"){let j=f[T]||"";h=l.slice(0,l.length-j.length).replace(/(.)\/+$/,"$1")}const O=f[T];return V&&!O?y[S]=void 0:y[S]=(O||"").replace(/%2F/g,"/"),y},{}),pathname:l,pathnameBase:h,pattern:n}}function X0(n,e,t){e===void 0&&(e=!1),t===void 0&&(t=!0),Nf(n==="*"||!n.endsWith("*")||n.endsWith("/*"),'Route path "'+n+'" will be treated as if it were '+('"'+n.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+n.replace(/\*$/,"/*")+'".'));let i=[],o="^"+n.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(h,f,p)=>(i.push({paramName:f,isOptional:p!=null}),p?"/?([^\\/]+)?":"/([^\\/]+)"));return n.endsWith("*")?(i.push({paramName:"*"}),o+=n==="*"||n==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):t?o+="\\/*$":n!==""&&n!=="/"&&(o+="(?:(?=\\/|$))"),[new RegExp(o,e?void 0:"i"),i]}function Z0(n){try{return n.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return Nf(!1,'The URL path "'+n+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),n}}function xf(n,e){if(e==="/")return n;if(!n.toLowerCase().startsWith(e.toLowerCase()))return null;let t=e.endsWith("/")?e.length-1:e.length,i=n.charAt(t);return i&&i!=="/"?null:n.slice(t)||"/"}const eT=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,tT=n=>eT.test(n);function nT(n,e){e===void 0&&(e="/");let{pathname:t,search:i="",hash:o=""}=typeof n=="string"?zo(n):n,l;if(t)if(tT(t))l=t;else{if(t.includes("//")){let h=t;t=t.replace(/\/\/+/g,"/"),Nf(!1,"Pathnames cannot have embedded double slashes - normalizing "+(h+" -> "+t))}t.startsWith("/")?l=Jg(t.substring(1),"/"):l=Jg(t,e)}else l=e;return{pathname:l,search:sT(i),hash:oT(o)}}function Jg(n,e){let t=e.replace(/\/+$/,"").split("/");return n.split("/").forEach(o=>{o===".."?t.length>1&&t.pop():o!=="."&&t.push(o)}),t.length>1?t.join("/"):"/"}function Md(n,e,t,i){return"Cannot include a '"+n+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(i)+"].  Please separate it out to the ")+("`to."+t+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function rT(n){return n.filter((e,t)=>t===0||e.route.path&&e.route.path.length>0)}function bf(n,e){let t=rT(n);return e?t.map((i,o)=>o===t.length-1?i.pathname:i.pathnameBase):t.map(i=>i.pathnameBase)}function Df(n,e,t,i){i===void 0&&(i=!1);let o;typeof n=="string"?o=zo(n):(o=il({},n),dt(!o.pathname||!o.pathname.includes("?"),Md("?","pathname","search",o)),dt(!o.pathname||!o.pathname.includes("#"),Md("#","pathname","hash",o)),dt(!o.search||!o.search.includes("#"),Md("#","search","hash",o)));let l=n===""||o.pathname==="",h=l?"/":o.pathname,f;if(h==null)f=t;else{let T=e.length-1;if(!i&&h.startsWith("..")){let S=h.split("/");for(;S[0]==="..";)S.shift(),T-=1;o.pathname=S.join("/")}f=T>=0?e[T]:"/"}let p=nT(o,f),y=h&&h!=="/"&&h.endsWith("/"),w=(l||h===".")&&t.endsWith("/");return!p.pathname.endsWith("/")&&(y||w)&&(p.pathname+="/"),p}const Ai=n=>n.join("/").replace(/\/\/+/g,"/"),iT=n=>n.replace(/\/+$/,"").replace(/^\/*/,"/"),sT=n=>!n||n==="?"?"":n.startsWith("?")?n:"?"+n,oT=n=>!n||n==="#"?"":n.startsWith("#")?n:"#"+n;function aT(n){return n!=null&&typeof n.status=="number"&&typeof n.statusText=="string"&&typeof n.internal=="boolean"&&"data"in n}const Uv=["post","put","patch","delete"];new Set(Uv);const lT=["get",...Uv];new Set(lT);/**
 * React Router v6.30.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function sl(){return sl=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(n[i]=t[i])}return n},sl.apply(this,arguments)}const Vf=H.createContext(null),uT=H.createContext(null),Fi=H.createContext(null),Oc=H.createContext(null),Hr=H.createContext({outlet:null,matches:[],isDataRoute:!1}),zv=H.createContext(null);function cT(n,e){let{relative:t}=e===void 0?{}:e;Bo()||dt(!1);let{basename:i,navigator:o}=H.useContext(Fi),{hash:l,pathname:h,search:f}=$v(n,{relative:t}),p=h;return i!=="/"&&(p=h==="/"?i:Ai([i,h])),o.createHref({pathname:p,search:f,hash:l})}function Bo(){return H.useContext(Oc)!=null}function $o(){return Bo()||dt(!1),H.useContext(Oc).location}function Bv(n){H.useContext(Fi).static||H.useLayoutEffect(n)}function Wo(){let{isDataRoute:n}=H.useContext(Hr);return n?ST():hT()}function hT(){Bo()||dt(!1);let n=H.useContext(Vf),{basename:e,future:t,navigator:i}=H.useContext(Fi),{matches:o}=H.useContext(Hr),{pathname:l}=$o(),h=JSON.stringify(bf(o,t.v7_relativeSplatPath)),f=H.useRef(!1);return Bv(()=>{f.current=!0}),H.useCallback(function(y,w){if(w===void 0&&(w={}),!f.current)return;if(typeof y=="number"){i.go(y);return}let T=Df(y,JSON.parse(h),l,w.relative==="path");n==null&&e!=="/"&&(T.pathname=T.pathname==="/"?e:Ai([e,T.pathname])),(w.replace?i.replace:i.push)(T,w.state,w)},[e,i,h,l,n])}function dT(){let{matches:n}=H.useContext(Hr),e=n[n.length-1];return e?e.params:{}}function $v(n,e){let{relative:t}=e===void 0?{}:e,{future:i}=H.useContext(Fi),{matches:o}=H.useContext(Hr),{pathname:l}=$o(),h=JSON.stringify(bf(o,i.v7_relativeSplatPath));return H.useMemo(()=>Df(n,JSON.parse(h),l,t==="path"),[n,h,l,t])}function fT(n,e){return pT(n,e)}function pT(n,e,t,i){Bo()||dt(!1);let{navigator:o}=H.useContext(Fi),{matches:l}=H.useContext(Hr),h=l[l.length-1],f=h?h.params:{};h&&h.pathname;let p=h?h.pathnameBase:"/";h&&h.route;let y=$o(),w;if(e){var T;let L=typeof e=="string"?zo(e):e;p==="/"||(T=L.pathname)!=null&&T.startsWith(p)||dt(!1),w=L}else w=y;let S=w.pathname||"/",V=S;if(p!=="/"){let L=p.replace(/^\//,"").split("/");V="/"+S.replace(/^\//,"").split("/").slice(L.length).join("/")}let O=F0(n,{pathname:V}),j=_T(O&&O.map(L=>Object.assign({},L,{params:Object.assign({},f,L.params),pathname:Ai([p,o.encodeLocation?o.encodeLocation(L.pathname).pathname:L.pathname]),pathnameBase:L.pathnameBase==="/"?p:Ai([p,o.encodeLocation?o.encodeLocation(L.pathnameBase).pathname:L.pathnameBase])})),l,t,i);return e&&j?H.createElement(Oc.Provider,{value:{location:sl({pathname:"/",search:"",hash:"",state:null,key:"default"},w),navigationType:Si.Pop}},j):j}function mT(){let n=IT(),e=aT(n)?n.status+" "+n.statusText:n instanceof Error?n.message:JSON.stringify(n),t=n instanceof Error?n.stack:null,o={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return H.createElement(H.Fragment,null,H.createElement("h2",null,"Unexpected Application Error!"),H.createElement("h3",{style:{fontStyle:"italic"}},e),t?H.createElement("pre",{style:o},t):null,null)}const gT=H.createElement(mT,null);class yT extends H.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,t){return t.location!==e.location||t.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:t.error,location:t.location,revalidation:e.revalidation||t.revalidation}}componentDidCatch(e,t){console.error("React Router caught the following error during render",e,t)}render(){return this.state.error!==void 0?H.createElement(Hr.Provider,{value:this.props.routeContext},H.createElement(zv.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function vT(n){let{routeContext:e,match:t,children:i}=n,o=H.useContext(Vf);return o&&o.static&&o.staticContext&&(t.route.errorElement||t.route.ErrorBoundary)&&(o.staticContext._deepestRenderedBoundaryId=t.route.id),H.createElement(Hr.Provider,{value:e},i)}function _T(n,e,t,i){var o;if(e===void 0&&(e=[]),t===void 0&&(t=null),i===void 0&&(i=null),n==null){var l;if(!t)return null;if(t.errors)n=t.matches;else if((l=i)!=null&&l.v7_partialHydration&&e.length===0&&!t.initialized&&t.matches.length>0)n=t.matches;else return null}let h=n,f=(o=t)==null?void 0:o.errors;if(f!=null){let w=h.findIndex(T=>T.route.id&&(f==null?void 0:f[T.route.id])!==void 0);w>=0||dt(!1),h=h.slice(0,Math.min(h.length,w+1))}let p=!1,y=-1;if(t&&i&&i.v7_partialHydration)for(let w=0;w<h.length;w++){let T=h[w];if((T.route.HydrateFallback||T.route.hydrateFallbackElement)&&(y=w),T.route.id){let{loaderData:S,errors:V}=t,O=T.route.loader&&S[T.route.id]===void 0&&(!V||V[T.route.id]===void 0);if(T.route.lazy||O){p=!0,y>=0?h=h.slice(0,y+1):h=[h[0]];break}}}return h.reduceRight((w,T,S)=>{let V,O=!1,j=null,L=null;t&&(V=f&&T.route.id?f[T.route.id]:void 0,j=T.route.errorElement||gT,p&&(y<0&&S===0?(PT("route-fallback"),O=!0,L=null):y===S&&(O=!0,L=T.route.hydrateFallbackElement||null)));let se=e.concat(h.slice(0,S+1)),q=()=>{let te;return V?te=j:O?te=L:T.route.Component?te=H.createElement(T.route.Component,null):T.route.element?te=T.route.element:te=w,H.createElement(vT,{match:T,routeContext:{outlet:w,matches:se,isDataRoute:t!=null},children:te})};return t&&(T.route.ErrorBoundary||T.route.errorElement||S===0)?H.createElement(yT,{location:t.location,revalidation:t.revalidation,component:j,error:V,children:q(),routeContext:{outlet:null,matches:se,isDataRoute:!0}}):q()},null)}var Wv=(function(n){return n.UseBlocker="useBlocker",n.UseRevalidator="useRevalidator",n.UseNavigateStable="useNavigate",n})(Wv||{}),Hv=(function(n){return n.UseBlocker="useBlocker",n.UseLoaderData="useLoaderData",n.UseActionData="useActionData",n.UseRouteError="useRouteError",n.UseNavigation="useNavigation",n.UseRouteLoaderData="useRouteLoaderData",n.UseMatches="useMatches",n.UseRevalidator="useRevalidator",n.UseNavigateStable="useNavigate",n.UseRouteId="useRouteId",n})(Hv||{});function wT(n){let e=H.useContext(Vf);return e||dt(!1),e}function ET(n){let e=H.useContext(uT);return e||dt(!1),e}function TT(n){let e=H.useContext(Hr);return e||dt(!1),e}function qv(n){let e=TT(),t=e.matches[e.matches.length-1];return t.route.id||dt(!1),t.route.id}function IT(){var n;let e=H.useContext(zv),t=ET(),i=qv();return e!==void 0?e:(n=t.errors)==null?void 0:n[i]}function ST(){let{router:n}=wT(Wv.UseNavigateStable),e=qv(Hv.UseNavigateStable),t=H.useRef(!1);return Bv(()=>{t.current=!0}),H.useCallback(function(o,l){l===void 0&&(l={}),t.current&&(typeof o=="number"?n.navigate(o):n.navigate(o,sl({fromRouteId:e},l)))},[n,e])}const Xg={};function PT(n,e,t){Xg[n]||(Xg[n]=!0)}function AT(n,e){n==null||n.v7_startTransition,n==null||n.v7_relativeSplatPath}function uc(n){let{to:e,replace:t,state:i,relative:o}=n;Bo()||dt(!1);let{future:l,static:h}=H.useContext(Fi),{matches:f}=H.useContext(Hr),{pathname:p}=$o(),y=Wo(),w=Df(e,bf(f,l.v7_relativeSplatPath),p,o==="path"),T=JSON.stringify(w);return H.useEffect(()=>y(JSON.parse(T),{replace:t,state:i,relative:o}),[y,T,o,t,i]),null}function _i(n){dt(!1)}function CT(n){let{basename:e="/",children:t=null,location:i,navigationType:o=Si.Pop,navigator:l,static:h=!1,future:f}=n;Bo()&&dt(!1);let p=e.replace(/^\/*/,"/"),y=H.useMemo(()=>({basename:p,navigator:l,static:h,future:sl({v7_relativeSplatPath:!1},f)}),[p,f,l,h]);typeof i=="string"&&(i=zo(i));let{pathname:w="/",search:T="",hash:S="",state:V=null,key:O="default"}=i,j=H.useMemo(()=>{let L=xf(w,p);return L==null?null:{location:{pathname:L,search:T,hash:S,state:V,key:O},navigationType:o}},[p,w,T,S,V,O,o]);return j==null?null:H.createElement(Fi.Provider,{value:y},H.createElement(Oc.Provider,{children:t,value:j}))}function RT(n){let{children:e,location:t}=n;return fT(Xd(e),t)}new Promise(()=>{});function Xd(n,e){e===void 0&&(e=[]);let t=[];return H.Children.forEach(n,(i,o)=>{if(!H.isValidElement(i))return;let l=[...e,o];if(i.type===H.Fragment){t.push.apply(t,Xd(i.props.children,l));return}i.type!==_i&&dt(!1),!i.props.index||!i.props.children||dt(!1);let h={id:i.props.id||l.join("-"),caseSensitive:i.props.caseSensitive,element:i.props.element,Component:i.props.Component,index:i.props.index,path:i.props.path,loader:i.props.loader,action:i.props.action,errorElement:i.props.errorElement,ErrorBoundary:i.props.ErrorBoundary,hasErrorBoundary:i.props.ErrorBoundary!=null||i.props.errorElement!=null,shouldRevalidate:i.props.shouldRevalidate,handle:i.props.handle,lazy:i.props.lazy};i.props.children&&(h.children=Xd(i.props.children,l)),t.push(h)}),t}/**
 * React Router DOM v6.30.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Zd(){return Zd=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(n[i]=t[i])}return n},Zd.apply(this,arguments)}function kT(n,e){if(n==null)return{};var t={},i=Object.keys(n),o,l;for(l=0;l<i.length;l++)o=i[l],!(e.indexOf(o)>=0)&&(t[o]=n[o]);return t}function NT(n){return!!(n.metaKey||n.altKey||n.ctrlKey||n.shiftKey)}function xT(n,e){return n.button===0&&(!e||e==="_self")&&!NT(n)}const bT=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],DT="6";try{window.__reactRouterVersion=DT}catch{}const VT="startTransition",Zg=N0[VT];function OT(n){let{basename:e,children:t,future:i,window:o}=n,l=H.useRef();l.current==null&&(l.current=L0({window:o,v5Compat:!0}));let h=l.current,[f,p]=H.useState({action:h.action,location:h.location}),{v7_startTransition:y}=i||{},w=H.useCallback(T=>{y&&Zg?Zg(()=>p(T)):p(T)},[p,y]);return H.useLayoutEffect(()=>h.listen(w),[h,w]),H.useEffect(()=>AT(i),[i]),H.createElement(CT,{basename:e,children:t,location:f.location,navigationType:f.action,navigator:h,future:i})}const LT=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",MT=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,ur=H.forwardRef(function(e,t){let{onClick:i,relative:o,reloadDocument:l,replace:h,state:f,target:p,to:y,preventScrollReset:w,viewTransition:T}=e,S=kT(e,bT),{basename:V}=H.useContext(Fi),O,j=!1;if(typeof y=="string"&&MT.test(y)&&(O=y,LT))try{let te=new URL(window.location.href),ae=y.startsWith("//")?new URL(te.protocol+y):new URL(y),we=xf(ae.pathname,V);ae.origin===te.origin&&we!=null?y=we+ae.search+ae.hash:j=!0}catch{}let L=cT(y,{relative:o}),se=jT(y,{replace:h,state:f,target:p,preventScrollReset:w,relative:o,viewTransition:T});function q(te){i&&i(te),te.defaultPrevented||se(te)}return H.createElement("a",Zd({},S,{href:O||L,onClick:j||l?i:q,ref:t,target:p}))});var ey;(function(n){n.UseScrollRestoration="useScrollRestoration",n.UseSubmit="useSubmit",n.UseSubmitFetcher="useSubmitFetcher",n.UseFetcher="useFetcher",n.useViewTransitionState="useViewTransitionState"})(ey||(ey={}));var ty;(function(n){n.UseFetcher="useFetcher",n.UseFetchers="useFetchers",n.UseScrollRestoration="useScrollRestoration"})(ty||(ty={}));function jT(n,e){let{target:t,replace:i,state:o,preventScrollReset:l,relative:h,viewTransition:f}=e===void 0?{}:e,p=Wo(),y=$o(),w=$v(n,{relative:h});return H.useCallback(T=>{if(xT(T,t)){T.preventDefault();let S=i!==void 0?i:lc(y)===lc(w);p(n,{replace:S,state:o,preventScrollReset:l,relative:h,viewTransition:f})}},[y,p,w,i,o,t,n,l,h,f])}const FT=()=>{};var ny={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gv=function(n){const e=[];let t=0;for(let i=0;i<n.length;i++){let o=n.charCodeAt(i);o<128?e[t++]=o:o<2048?(e[t++]=o>>6|192,e[t++]=o&63|128):(o&64512)===55296&&i+1<n.length&&(n.charCodeAt(i+1)&64512)===56320?(o=65536+((o&1023)<<10)+(n.charCodeAt(++i)&1023),e[t++]=o>>18|240,e[t++]=o>>12&63|128,e[t++]=o>>6&63|128,e[t++]=o&63|128):(e[t++]=o>>12|224,e[t++]=o>>6&63|128,e[t++]=o&63|128)}return e},UT=function(n){const e=[];let t=0,i=0;for(;t<n.length;){const o=n[t++];if(o<128)e[i++]=String.fromCharCode(o);else if(o>191&&o<224){const l=n[t++];e[i++]=String.fromCharCode((o&31)<<6|l&63)}else if(o>239&&o<365){const l=n[t++],h=n[t++],f=n[t++],p=((o&7)<<18|(l&63)<<12|(h&63)<<6|f&63)-65536;e[i++]=String.fromCharCode(55296+(p>>10)),e[i++]=String.fromCharCode(56320+(p&1023))}else{const l=n[t++],h=n[t++];e[i++]=String.fromCharCode((o&15)<<12|(l&63)<<6|h&63)}}return e.join("")},Kv={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(n,e){if(!Array.isArray(n))throw Error("encodeByteArray takes an array as a parameter");this.init_();const t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,i=[];for(let o=0;o<n.length;o+=3){const l=n[o],h=o+1<n.length,f=h?n[o+1]:0,p=o+2<n.length,y=p?n[o+2]:0,w=l>>2,T=(l&3)<<4|f>>4;let S=(f&15)<<2|y>>6,V=y&63;p||(V=64,h||(S=64)),i.push(t[w],t[T],t[S],t[V])}return i.join("")},encodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(n):this.encodeByteArray(Gv(n),e)},decodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(n):UT(this.decodeStringToByteArray(n,e))},decodeStringToByteArray(n,e){this.init_();const t=e?this.charToByteMapWebSafe_:this.charToByteMap_,i=[];for(let o=0;o<n.length;){const l=t[n.charAt(o++)],f=o<n.length?t[n.charAt(o)]:0;++o;const y=o<n.length?t[n.charAt(o)]:64;++o;const T=o<n.length?t[n.charAt(o)]:64;if(++o,l==null||f==null||y==null||T==null)throw new zT;const S=l<<2|f>>4;if(i.push(S),y!==64){const V=f<<4&240|y>>2;if(i.push(V),T!==64){const O=y<<6&192|T;i.push(O)}}}return i},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let n=0;n<this.ENCODED_VALS.length;n++)this.byteToCharMap_[n]=this.ENCODED_VALS.charAt(n),this.charToByteMap_[this.byteToCharMap_[n]]=n,this.byteToCharMapWebSafe_[n]=this.ENCODED_VALS_WEBSAFE.charAt(n),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[n]]=n,n>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(n)]=n,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(n)]=n)}}};class zT extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const BT=function(n){const e=Gv(n);return Kv.encodeByteArray(e,!0)},cc=function(n){return BT(n).replace(/\./g,"")},Qv=function(n){try{return Kv.decodeString(n,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $T(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const WT=()=>$T().__FIREBASE_DEFAULTS__,HT=()=>{if(typeof process>"u"||typeof ny>"u")return;const n=ny.__FIREBASE_DEFAULTS__;if(n)return JSON.parse(n)},qT=()=>{if(typeof document>"u")return;let n;try{n=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=n&&Qv(n[1]);return e&&JSON.parse(e)},Lc=()=>{try{return FT()||WT()||HT()||qT()}catch(n){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${n}`);return}},Yv=n=>{var e,t;return(t=(e=Lc())===null||e===void 0?void 0:e.emulatorHosts)===null||t===void 0?void 0:t[n]},GT=n=>{const e=Yv(n);if(!e)return;const t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const i=parseInt(e.substring(t+1),10);return e[0]==="["?[e.substring(1,t-1),i]:[e.substring(0,t),i]},Jv=()=>{var n;return(n=Lc())===null||n===void 0?void 0:n.config},Xv=n=>{var e;return(e=Lc())===null||e===void 0?void 0:e[`_${n}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KT{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,i)=>{t?this.reject(t):this.resolve(i),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,i))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ho(n){try{return(n.startsWith("http://")||n.startsWith("https://")?new URL(n).hostname:n).endsWith(".cloudworkstations.dev")}catch{return!1}}async function Zv(n){return(await fetch(n,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function QT(n,e){if(n.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const t={alg:"none",type:"JWT"},i=e||"demo-project",o=n.iat||0,l=n.sub||n.user_id;if(!l)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const h=Object.assign({iss:`https://securetoken.google.com/${i}`,aud:i,iat:o,exp:o+3600,auth_time:o,sub:l,user_id:l,firebase:{sign_in_provider:"custom",identities:{}}},n);return[cc(JSON.stringify(t)),cc(JSON.stringify(h)),""].join(".")}const Xa={};function YT(){const n={prod:[],emulator:[]};for(const e of Object.keys(Xa))Xa[e]?n.emulator.push(e):n.prod.push(e);return n}function JT(n){let e=document.getElementById(n),t=!1;return e||(e=document.createElement("div"),e.setAttribute("id",n),t=!0),{created:t,element:e}}let ry=!1;function e_(n,e){if(typeof window>"u"||typeof document>"u"||!Ho(window.location.host)||Xa[n]===e||Xa[n]||ry)return;Xa[n]=e;function t(S){return`__firebase__banner__${S}`}const i="__firebase__banner",l=YT().prod.length>0;function h(){const S=document.getElementById(i);S&&S.remove()}function f(S){S.style.display="flex",S.style.background="#7faaf0",S.style.position="fixed",S.style.bottom="5px",S.style.left="5px",S.style.padding=".5em",S.style.borderRadius="5px",S.style.alignItems="center"}function p(S,V){S.setAttribute("width","24"),S.setAttribute("id",V),S.setAttribute("height","24"),S.setAttribute("viewBox","0 0 24 24"),S.setAttribute("fill","none"),S.style.marginLeft="-6px"}function y(){const S=document.createElement("span");return S.style.cursor="pointer",S.style.marginLeft="16px",S.style.fontSize="24px",S.innerHTML=" &times;",S.onclick=()=>{ry=!0,h()},S}function w(S,V){S.setAttribute("id",V),S.innerText="Learn more",S.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",S.setAttribute("target","__blank"),S.style.paddingLeft="5px",S.style.textDecoration="underline"}function T(){const S=JT(i),V=t("text"),O=document.getElementById(V)||document.createElement("span"),j=t("learnmore"),L=document.getElementById(j)||document.createElement("a"),se=t("preprendIcon"),q=document.getElementById(se)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(S.created){const te=S.element;f(te),w(L,j);const ae=y();p(q,se),te.append(q,O,L,ae),document.body.appendChild(te)}l?(O.innerText="Preview backend disconnected.",q.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(q.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,O.innerText="Preview backend running in this workspace."),O.setAttribute("id",V)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",T):T()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ht(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function XT(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Ht())}function ZT(){var n;const e=(n=Lc())===null||n===void 0?void 0:n.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function eI(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function tI(){const n=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof n=="object"&&n.id!==void 0}function nI(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function rI(){const n=Ht();return n.indexOf("MSIE ")>=0||n.indexOf("Trident/")>=0}function iI(){return!ZT()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function sI(){try{return typeof indexedDB=="object"}catch{return!1}}function oI(){return new Promise((n,e)=>{try{let t=!0;const i="validate-browser-context-for-indexeddb-analytics-module",o=self.indexedDB.open(i);o.onsuccess=()=>{o.result.close(),t||self.indexedDB.deleteDatabase(i),n(!0)},o.onupgradeneeded=()=>{t=!1},o.onerror=()=>{var l;e(((l=o.error)===null||l===void 0?void 0:l.message)||"")}}catch(t){e(t)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aI="FirebaseError";class qr extends Error{constructor(e,t,i){super(t),this.code=e,this.customData=i,this.name=aI,Object.setPrototypeOf(this,qr.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,pl.prototype.create)}}class pl{constructor(e,t,i){this.service=e,this.serviceName=t,this.errors=i}create(e,...t){const i=t[0]||{},o=`${this.service}/${e}`,l=this.errors[e],h=l?lI(l,i):"Error",f=`${this.serviceName}: ${h} (${o}).`;return new qr(o,f,i)}}function lI(n,e){return n.replace(uI,(t,i)=>{const o=e[i];return o!=null?String(o):`<${i}?>`})}const uI=/\{\$([^}]+)}/g;function cI(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}function Ts(n,e){if(n===e)return!0;const t=Object.keys(n),i=Object.keys(e);for(const o of t){if(!i.includes(o))return!1;const l=n[o],h=e[o];if(iy(l)&&iy(h)){if(!Ts(l,h))return!1}else if(l!==h)return!1}for(const o of i)if(!t.includes(o))return!1;return!0}function iy(n){return n!==null&&typeof n=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ml(n){const e=[];for(const[t,i]of Object.entries(n))Array.isArray(i)?i.forEach(o=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(o))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(i));return e.length?"&"+e.join("&"):""}function qa(n){const e={};return n.replace(/^\?/,"").split("&").forEach(i=>{if(i){const[o,l]=i.split("=");e[decodeURIComponent(o)]=decodeURIComponent(l)}}),e}function Ga(n){const e=n.indexOf("?");if(!e)return"";const t=n.indexOf("#",e);return n.substring(e,t>0?t:void 0)}function hI(n,e){const t=new dI(n,e);return t.subscribe.bind(t)}class dI{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(i=>{this.error(i)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,i){let o;if(e===void 0&&t===void 0&&i===void 0)throw new Error("Missing Observer.");fI(e,["next","error","complete"])?o=e:o={next:e,error:t,complete:i},o.next===void 0&&(o.next=jd),o.error===void 0&&(o.error=jd),o.complete===void 0&&(o.complete=jd);const l=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?o.error(this.finalError):o.complete()}catch{}}),this.observers.push(o),l}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(i){typeof console<"u"&&console.error&&console.error(i)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function fI(n,e){if(typeof n!="object"||n===null)return!1;for(const t of e)if(t in n&&typeof n[t]=="function")return!0;return!1}function jd(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ft(n){return n&&n._delegate?n._delegate:n}class Is{constructor(e,t,i){this.name=e,this.instanceFactory=t,this.type=i,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ys="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pI{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const i=new KT;if(this.instancesDeferred.set(t,i),this.isInitialized(t)||this.shouldAutoInitialize())try{const o=this.getOrInitializeService({instanceIdentifier:t});o&&i.resolve(o)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){var t;const i=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),o=(t=e==null?void 0:e.optional)!==null&&t!==void 0?t:!1;if(this.isInitialized(i)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:i})}catch(l){if(o)return null;throw l}else{if(o)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(gI(e))try{this.getOrInitializeService({instanceIdentifier:ys})}catch{}for(const[t,i]of this.instancesDeferred.entries()){const o=this.normalizeInstanceIdentifier(t);try{const l=this.getOrInitializeService({instanceIdentifier:o});i.resolve(l)}catch{}}}}clearInstance(e=ys){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=ys){return this.instances.has(e)}getOptions(e=ys){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e,i=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(i))throw Error(`${this.name}(${i}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const o=this.getOrInitializeService({instanceIdentifier:i,options:t});for(const[l,h]of this.instancesDeferred.entries()){const f=this.normalizeInstanceIdentifier(l);i===f&&h.resolve(o)}return o}onInit(e,t){var i;const o=this.normalizeInstanceIdentifier(t),l=(i=this.onInitCallbacks.get(o))!==null&&i!==void 0?i:new Set;l.add(e),this.onInitCallbacks.set(o,l);const h=this.instances.get(o);return h&&e(h,o),()=>{l.delete(e)}}invokeOnInitCallbacks(e,t){const i=this.onInitCallbacks.get(t);if(i)for(const o of i)try{o(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let i=this.instances.get(e);if(!i&&this.component&&(i=this.component.instanceFactory(this.container,{instanceIdentifier:mI(e),options:t}),this.instances.set(e,i),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(i,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,i)}catch{}return i||null}normalizeInstanceIdentifier(e=ys){return this.component?this.component.multipleInstances?e:ys:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function mI(n){return n===ys?void 0:n}function gI(n){return n.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yI{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new pI(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var De;(function(n){n[n.DEBUG=0]="DEBUG",n[n.VERBOSE=1]="VERBOSE",n[n.INFO=2]="INFO",n[n.WARN=3]="WARN",n[n.ERROR=4]="ERROR",n[n.SILENT=5]="SILENT"})(De||(De={}));const vI={debug:De.DEBUG,verbose:De.VERBOSE,info:De.INFO,warn:De.WARN,error:De.ERROR,silent:De.SILENT},_I=De.INFO,wI={[De.DEBUG]:"log",[De.VERBOSE]:"log",[De.INFO]:"info",[De.WARN]:"warn",[De.ERROR]:"error"},EI=(n,e,...t)=>{if(e<n.logLevel)return;const i=new Date().toISOString(),o=wI[e];if(o)console[o](`[${i}]  ${n.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class Of{constructor(e){this.name=e,this._logLevel=_I,this._logHandler=EI,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in De))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?vI[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,De.DEBUG,...e),this._logHandler(this,De.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,De.VERBOSE,...e),this._logHandler(this,De.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,De.INFO,...e),this._logHandler(this,De.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,De.WARN,...e),this._logHandler(this,De.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,De.ERROR,...e),this._logHandler(this,De.ERROR,...e)}}const TI=(n,e)=>e.some(t=>n instanceof t);let sy,oy;function II(){return sy||(sy=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function SI(){return oy||(oy=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const t_=new WeakMap,ef=new WeakMap,n_=new WeakMap,Fd=new WeakMap,Lf=new WeakMap;function PI(n){const e=new Promise((t,i)=>{const o=()=>{n.removeEventListener("success",l),n.removeEventListener("error",h)},l=()=>{t(Ci(n.result)),o()},h=()=>{i(n.error),o()};n.addEventListener("success",l),n.addEventListener("error",h)});return e.then(t=>{t instanceof IDBCursor&&t_.set(t,n)}).catch(()=>{}),Lf.set(e,n),e}function AI(n){if(ef.has(n))return;const e=new Promise((t,i)=>{const o=()=>{n.removeEventListener("complete",l),n.removeEventListener("error",h),n.removeEventListener("abort",h)},l=()=>{t(),o()},h=()=>{i(n.error||new DOMException("AbortError","AbortError")),o()};n.addEventListener("complete",l),n.addEventListener("error",h),n.addEventListener("abort",h)});ef.set(n,e)}let tf={get(n,e,t){if(n instanceof IDBTransaction){if(e==="done")return ef.get(n);if(e==="objectStoreNames")return n.objectStoreNames||n_.get(n);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return Ci(n[e])},set(n,e,t){return n[e]=t,!0},has(n,e){return n instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in n}};function CI(n){tf=n(tf)}function RI(n){return n===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){const i=n.call(Ud(this),e,...t);return n_.set(i,e.sort?e.sort():[e]),Ci(i)}:SI().includes(n)?function(...e){return n.apply(Ud(this),e),Ci(t_.get(this))}:function(...e){return Ci(n.apply(Ud(this),e))}}function kI(n){return typeof n=="function"?RI(n):(n instanceof IDBTransaction&&AI(n),TI(n,II())?new Proxy(n,tf):n)}function Ci(n){if(n instanceof IDBRequest)return PI(n);if(Fd.has(n))return Fd.get(n);const e=kI(n);return e!==n&&(Fd.set(n,e),Lf.set(e,n)),e}const Ud=n=>Lf.get(n);function NI(n,e,{blocked:t,upgrade:i,blocking:o,terminated:l}={}){const h=indexedDB.open(n,e),f=Ci(h);return i&&h.addEventListener("upgradeneeded",p=>{i(Ci(h.result),p.oldVersion,p.newVersion,Ci(h.transaction),p)}),t&&h.addEventListener("blocked",p=>t(p.oldVersion,p.newVersion,p)),f.then(p=>{l&&p.addEventListener("close",()=>l()),o&&p.addEventListener("versionchange",y=>o(y.oldVersion,y.newVersion,y))}).catch(()=>{}),f}const xI=["get","getKey","getAll","getAllKeys","count"],bI=["put","add","delete","clear"],zd=new Map;function ay(n,e){if(!(n instanceof IDBDatabase&&!(e in n)&&typeof e=="string"))return;if(zd.get(e))return zd.get(e);const t=e.replace(/FromIndex$/,""),i=e!==t,o=bI.includes(t);if(!(t in(i?IDBIndex:IDBObjectStore).prototype)||!(o||xI.includes(t)))return;const l=async function(h,...f){const p=this.transaction(h,o?"readwrite":"readonly");let y=p.store;return i&&(y=y.index(f.shift())),(await Promise.all([y[t](...f),o&&p.done]))[0]};return zd.set(e,l),l}CI(n=>({...n,get:(e,t,i)=>ay(e,t)||n.get(e,t,i),has:(e,t)=>!!ay(e,t)||n.has(e,t)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DI{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(VI(t)){const i=t.getImmediate();return`${i.library}/${i.version}`}else return null}).filter(t=>t).join(" ")}}function VI(n){const e=n.getComponent();return(e==null?void 0:e.type)==="VERSION"}const nf="@firebase/app",ly="0.13.2";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ur=new Of("@firebase/app"),OI="@firebase/app-compat",LI="@firebase/analytics-compat",MI="@firebase/analytics",jI="@firebase/app-check-compat",FI="@firebase/app-check",UI="@firebase/auth",zI="@firebase/auth-compat",BI="@firebase/database",$I="@firebase/data-connect",WI="@firebase/database-compat",HI="@firebase/functions",qI="@firebase/functions-compat",GI="@firebase/installations",KI="@firebase/installations-compat",QI="@firebase/messaging",YI="@firebase/messaging-compat",JI="@firebase/performance",XI="@firebase/performance-compat",ZI="@firebase/remote-config",eS="@firebase/remote-config-compat",tS="@firebase/storage",nS="@firebase/storage-compat",rS="@firebase/firestore",iS="@firebase/ai",sS="@firebase/firestore-compat",oS="firebase",aS="11.10.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rf="[DEFAULT]",lS={[nf]:"fire-core",[OI]:"fire-core-compat",[MI]:"fire-analytics",[LI]:"fire-analytics-compat",[FI]:"fire-app-check",[jI]:"fire-app-check-compat",[UI]:"fire-auth",[zI]:"fire-auth-compat",[BI]:"fire-rtdb",[$I]:"fire-data-connect",[WI]:"fire-rtdb-compat",[HI]:"fire-fn",[qI]:"fire-fn-compat",[GI]:"fire-iid",[KI]:"fire-iid-compat",[QI]:"fire-fcm",[YI]:"fire-fcm-compat",[JI]:"fire-perf",[XI]:"fire-perf-compat",[ZI]:"fire-rc",[eS]:"fire-rc-compat",[tS]:"fire-gcs",[nS]:"fire-gcs-compat",[rS]:"fire-fst",[sS]:"fire-fst-compat",[iS]:"fire-vertex","fire-js":"fire-js",[oS]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hc=new Map,uS=new Map,sf=new Map;function uy(n,e){try{n.container.addComponent(e)}catch(t){Ur.debug(`Component ${e.name} failed to register with FirebaseApp ${n.name}`,t)}}function Vo(n){const e=n.name;if(sf.has(e))return Ur.debug(`There were multiple attempts to register component ${e}.`),!1;sf.set(e,n);for(const t of hc.values())uy(t,n);for(const t of uS.values())uy(t,n);return!0}function Mf(n,e){const t=n.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),n.container.getProvider(e)}function Cn(n){return n==null?!1:n.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cS={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Ri=new pl("app","Firebase",cS);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hS{constructor(e,t,i){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=i,this.container.addComponent(new Is("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Ri.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qo=aS;function r_(n,e={}){let t=n;typeof e!="object"&&(e={name:e});const i=Object.assign({name:rf,automaticDataCollectionEnabled:!0},e),o=i.name;if(typeof o!="string"||!o)throw Ri.create("bad-app-name",{appName:String(o)});if(t||(t=Jv()),!t)throw Ri.create("no-options");const l=hc.get(o);if(l){if(Ts(t,l.options)&&Ts(i,l.config))return l;throw Ri.create("duplicate-app",{appName:o})}const h=new yI(o);for(const p of sf.values())h.addComponent(p);const f=new hS(t,i,h);return hc.set(o,f),f}function i_(n=rf){const e=hc.get(n);if(!e&&n===rf&&Jv())return r_();if(!e)throw Ri.create("no-app",{appName:n});return e}function ki(n,e,t){var i;let o=(i=lS[n])!==null&&i!==void 0?i:n;t&&(o+=`-${t}`);const l=o.match(/\s|\//),h=e.match(/\s|\//);if(l||h){const f=[`Unable to register library "${o}" with version "${e}":`];l&&f.push(`library name "${o}" contains illegal characters (whitespace or "/")`),l&&h&&f.push("and"),h&&f.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Ur.warn(f.join(" "));return}Vo(new Is(`${o}-version`,()=>({library:o,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dS="firebase-heartbeat-database",fS=1,ol="firebase-heartbeat-store";let Bd=null;function s_(){return Bd||(Bd=NI(dS,fS,{upgrade:(n,e)=>{switch(e){case 0:try{n.createObjectStore(ol)}catch(t){console.warn(t)}}}}).catch(n=>{throw Ri.create("idb-open",{originalErrorMessage:n.message})})),Bd}async function pS(n){try{const t=(await s_()).transaction(ol),i=await t.objectStore(ol).get(o_(n));return await t.done,i}catch(e){if(e instanceof qr)Ur.warn(e.message);else{const t=Ri.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});Ur.warn(t.message)}}}async function cy(n,e){try{const i=(await s_()).transaction(ol,"readwrite");await i.objectStore(ol).put(e,o_(n)),await i.done}catch(t){if(t instanceof qr)Ur.warn(t.message);else{const i=Ri.create("idb-set",{originalErrorMessage:t==null?void 0:t.message});Ur.warn(i.message)}}}function o_(n){return`${n.name}!${n.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mS=1024,gS=30;class yS{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new _S(t),this._heartbeatsCachePromise=this._storage.read().then(i=>(this._heartbeatsCache=i,i))}async triggerHeartbeat(){var e,t;try{const o=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),l=hy();if(((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===l||this._heartbeatsCache.heartbeats.some(h=>h.date===l))return;if(this._heartbeatsCache.heartbeats.push({date:l,agent:o}),this._heartbeatsCache.heartbeats.length>gS){const h=wS(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(h,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(i){Ur.warn(i)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const t=hy(),{heartbeatsToSend:i,unsentEntries:o}=vS(this._heartbeatsCache.heartbeats),l=cc(JSON.stringify({version:2,heartbeats:i}));return this._heartbeatsCache.lastSentHeartbeatDate=t,o.length>0?(this._heartbeatsCache.heartbeats=o,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),l}catch(t){return Ur.warn(t),""}}}function hy(){return new Date().toISOString().substring(0,10)}function vS(n,e=mS){const t=[];let i=n.slice();for(const o of n){const l=t.find(h=>h.agent===o.agent);if(l){if(l.dates.push(o.date),dy(t)>e){l.dates.pop();break}}else if(t.push({agent:o.agent,dates:[o.date]}),dy(t)>e){t.pop();break}i=i.slice(1)}return{heartbeatsToSend:t,unsentEntries:i}}class _S{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return sI()?oI().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const t=await pS(this.app);return t!=null&&t.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var t;if(await this._canUseIndexedDBPromise){const o=await this.read();return cy(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:o.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var t;if(await this._canUseIndexedDBPromise){const o=await this.read();return cy(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:o.lastSentHeartbeatDate,heartbeats:[...o.heartbeats,...e.heartbeats]})}else return}}function dy(n){return cc(JSON.stringify({version:2,heartbeats:n})).length}function wS(n){if(n.length===0)return-1;let e=0,t=n[0].date;for(let i=1;i<n.length;i++)n[i].date<t&&(t=n[i].date,e=i);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ES(n){Vo(new Is("platform-logger",e=>new DI(e),"PRIVATE")),Vo(new Is("heartbeat",e=>new yS(e),"PRIVATE")),ki(nf,ly,n),ki(nf,ly,"esm2017"),ki("fire-js","")}ES("");function jf(n,e){var t={};for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&e.indexOf(i)<0&&(t[i]=n[i]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,i=Object.getOwnPropertySymbols(n);o<i.length;o++)e.indexOf(i[o])<0&&Object.prototype.propertyIsEnumerable.call(n,i[o])&&(t[i[o]]=n[i[o]]);return t}function a_(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const TS=a_,l_=new pl("auth","Firebase",a_());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dc=new Of("@firebase/auth");function IS(n,...e){dc.logLevel<=De.WARN&&dc.warn(`Auth (${qo}): ${n}`,...e)}function Xu(n,...e){dc.logLevel<=De.ERROR&&dc.error(`Auth (${qo}): ${n}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Qn(n,...e){throw Ff(n,...e)}function cr(n,...e){return Ff(n,...e)}function u_(n,e,t){const i=Object.assign(Object.assign({},TS()),{[e]:t});return new pl("auth","Firebase",i).create(e,{appName:n.name})}function Mr(n){return u_(n,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function Ff(n,...e){if(typeof n!="string"){const t=e[0],i=[...e.slice(1)];return i[0]&&(i[0].appName=n.name),n._errorFactory.create(t,...i)}return l_.create(n,...e)}function Ie(n,e,...t){if(!n)throw Ff(e,...t)}function Or(n){const e="INTERNAL ASSERTION FAILED: "+n;throw Xu(e),new Error(e)}function zr(n,e){n||Or(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function of(){var n;return typeof self<"u"&&((n=self.location)===null||n===void 0?void 0:n.href)||""}function SS(){return fy()==="http:"||fy()==="https:"}function fy(){var n;return typeof self<"u"&&((n=self.location)===null||n===void 0?void 0:n.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function PS(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(SS()||tI()||"connection"in navigator)?navigator.onLine:!0}function AS(){if(typeof navigator>"u")return null;const n=navigator;return n.languages&&n.languages[0]||n.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gl{constructor(e,t){this.shortDelay=e,this.longDelay=t,zr(t>e,"Short delay should be less than long delay!"),this.isMobile=XT()||nI()}get(){return PS()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Uf(n,e){zr(n.emulator,"Emulator should always be set here");const{url:t}=n.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class c_{static initialize(e,t,i){this.fetchImpl=e,t&&(this.headersImpl=t),i&&(this.responseImpl=i)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Or("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Or("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Or("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const CS={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const RS=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],kS=new gl(3e4,6e4);function Ui(n,e){return n.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:n.tenantId}):e}async function Gr(n,e,t,i,o={}){return h_(n,o,async()=>{let l={},h={};i&&(e==="GET"?h=i:l={body:JSON.stringify(i)});const f=ml(Object.assign({key:n.config.apiKey},h)).slice(1),p=await n._getAdditionalHeaders();p["Content-Type"]="application/json",n.languageCode&&(p["X-Firebase-Locale"]=n.languageCode);const y=Object.assign({method:e,headers:p},l);return eI()||(y.referrerPolicy="no-referrer"),n.emulatorConfig&&Ho(n.emulatorConfig.host)&&(y.credentials="include"),c_.fetch()(await d_(n,n.config.apiHost,t,f),y)})}async function h_(n,e,t){n._canInitEmulator=!1;const i=Object.assign(Object.assign({},CS),e);try{const o=new xS(n),l=await Promise.race([t(),o.promise]);o.clearNetworkTimeout();const h=await l.json();if("needConfirmation"in h)throw Wu(n,"account-exists-with-different-credential",h);if(l.ok&&!("errorMessage"in h))return h;{const f=l.ok?h.errorMessage:h.error.message,[p,y]=f.split(" : ");if(p==="FEDERATED_USER_ID_ALREADY_LINKED")throw Wu(n,"credential-already-in-use",h);if(p==="EMAIL_EXISTS")throw Wu(n,"email-already-in-use",h);if(p==="USER_DISABLED")throw Wu(n,"user-disabled",h);const w=i[p]||p.toLowerCase().replace(/[_\s]+/g,"-");if(y)throw u_(n,w,y);Qn(n,w)}}catch(o){if(o instanceof qr)throw o;Qn(n,"network-request-failed",{message:String(o)})}}async function yl(n,e,t,i,o={}){const l=await Gr(n,e,t,i,o);return"mfaPendingCredential"in l&&Qn(n,"multi-factor-auth-required",{_serverResponse:l}),l}async function d_(n,e,t,i){const o=`${e}${t}?${i}`,l=n,h=l.config.emulator?Uf(n.config,o):`${n.config.apiScheme}://${o}`;return RS.includes(t)&&(await l._persistenceManagerAvailable,l._getPersistenceType()==="COOKIE")?l._getPersistence()._getFinalTarget(h).toString():h}function NS(n){switch(n){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class xS{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,i)=>{this.timer=setTimeout(()=>i(cr(this.auth,"network-request-failed")),kS.get())})}}function Wu(n,e,t){const i={appName:n.name};t.email&&(i.email=t.email),t.phoneNumber&&(i.phoneNumber=t.phoneNumber);const o=cr(n,e,i);return o.customData._tokenResponse=t,o}function py(n){return n!==void 0&&n.enterprise!==void 0}class bS{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const t of this.recaptchaEnforcementState)if(t.provider&&t.provider===e)return NS(t.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function DS(n,e){return Gr(n,"GET","/v2/recaptchaConfig",Ui(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function VS(n,e){return Gr(n,"POST","/v1/accounts:delete",e)}async function fc(n,e){return Gr(n,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Za(n){if(n)try{const e=new Date(Number(n));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function OS(n,e=!1){const t=ft(n),i=await t.getIdToken(e),o=zf(i);Ie(o&&o.exp&&o.auth_time&&o.iat,t.auth,"internal-error");const l=typeof o.firebase=="object"?o.firebase:void 0,h=l==null?void 0:l.sign_in_provider;return{claims:o,token:i,authTime:Za($d(o.auth_time)),issuedAtTime:Za($d(o.iat)),expirationTime:Za($d(o.exp)),signInProvider:h||null,signInSecondFactor:(l==null?void 0:l.sign_in_second_factor)||null}}function $d(n){return Number(n)*1e3}function zf(n){const[e,t,i]=n.split(".");if(e===void 0||t===void 0||i===void 0)return Xu("JWT malformed, contained fewer than 3 sections"),null;try{const o=Qv(t);return o?JSON.parse(o):(Xu("Failed to decode base64 JWT payload"),null)}catch(o){return Xu("Caught error parsing JWT payload as JSON",o==null?void 0:o.toString()),null}}function my(n){const e=zf(n);return Ie(e,"internal-error"),Ie(typeof e.exp<"u","internal-error"),Ie(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Oo(n,e,t=!1){if(t)return e;try{return await e}catch(i){throw i instanceof qr&&LS(i)&&n.auth.currentUser===n&&await n.auth.signOut(),i}}function LS({code:n}){return n==="auth/user-disabled"||n==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MS{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var t;if(e){const i=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),i}else{this.errorBackoff=3e4;const o=((t=this.user.stsTokenManager.expirationTime)!==null&&t!==void 0?t:0)-Date.now()-3e5;return Math.max(0,o)}}schedule(e=!1){if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class af{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=Za(this.lastLoginAt),this.creationTime=Za(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function pc(n){var e;const t=n.auth,i=await n.getIdToken(),o=await Oo(n,fc(t,{idToken:i}));Ie(o==null?void 0:o.users.length,t,"internal-error");const l=o.users[0];n._notifyReloadListener(l);const h=!((e=l.providerUserInfo)===null||e===void 0)&&e.length?f_(l.providerUserInfo):[],f=FS(n.providerData,h),p=n.isAnonymous,y=!(n.email&&l.passwordHash)&&!(f!=null&&f.length),w=p?y:!1,T={uid:l.localId,displayName:l.displayName||null,photoURL:l.photoUrl||null,email:l.email||null,emailVerified:l.emailVerified||!1,phoneNumber:l.phoneNumber||null,tenantId:l.tenantId||null,providerData:f,metadata:new af(l.createdAt,l.lastLoginAt),isAnonymous:w};Object.assign(n,T)}async function jS(n){const e=ft(n);await pc(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function FS(n,e){return[...n.filter(i=>!e.some(o=>o.providerId===i.providerId)),...e]}function f_(n){return n.map(e=>{var{providerId:t}=e,i=jf(e,["providerId"]);return{providerId:t,uid:i.rawId||"",displayName:i.displayName||null,email:i.email||null,phoneNumber:i.phoneNumber||null,photoURL:i.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function US(n,e){const t=await h_(n,{},async()=>{const i=ml({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:o,apiKey:l}=n.config,h=await d_(n,o,"/v1/token",`key=${l}`),f=await n._getAdditionalHeaders();f["Content-Type"]="application/x-www-form-urlencoded";const p={method:"POST",headers:f,body:i};return n.emulatorConfig&&Ho(n.emulatorConfig.host)&&(p.credentials="include"),c_.fetch()(h,p)});return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}}async function zS(n,e){return Gr(n,"POST","/v2/accounts:revokeToken",Ui(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class No{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Ie(e.idToken,"internal-error"),Ie(typeof e.idToken<"u","internal-error"),Ie(typeof e.refreshToken<"u","internal-error");const t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):my(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){Ie(e.length!==0,"internal-error");const t=my(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e,t=!1){return!t&&this.accessToken&&!this.isExpired?this.accessToken:(Ie(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:i,refreshToken:o,expiresIn:l}=await US(e,t);this.updateTokensAndExpiration(i,o,Number(l))}updateTokensAndExpiration(e,t,i){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+i*1e3}static fromJSON(e,t){const{refreshToken:i,accessToken:o,expirationTime:l}=t,h=new No;return i&&(Ie(typeof i=="string","internal-error",{appName:e}),h.refreshToken=i),o&&(Ie(typeof o=="string","internal-error",{appName:e}),h.accessToken=o),l&&(Ie(typeof l=="number","internal-error",{appName:e}),h.expirationTime=l),h}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new No,this.toJSON())}_performRefresh(){return Or("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vi(n,e){Ie(typeof n=="string"||typeof n>"u","internal-error",{appName:e})}class Kn{constructor(e){var{uid:t,auth:i,stsTokenManager:o}=e,l=jf(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new MS(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=i,this.stsTokenManager=o,this.accessToken=o.accessToken,this.displayName=l.displayName||null,this.email=l.email||null,this.emailVerified=l.emailVerified||!1,this.phoneNumber=l.phoneNumber||null,this.photoURL=l.photoURL||null,this.isAnonymous=l.isAnonymous||!1,this.tenantId=l.tenantId||null,this.providerData=l.providerData?[...l.providerData]:[],this.metadata=new af(l.createdAt||void 0,l.lastLoginAt||void 0)}async getIdToken(e){const t=await Oo(this,this.stsTokenManager.getToken(this.auth,e));return Ie(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return OS(this,e)}reload(){return jS(this)}_assign(e){this!==e&&(Ie(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>Object.assign({},t)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new Kn(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return t.metadata._copy(this.metadata),t}_onReload(e){Ie(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,t=!1){let i=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),i=!0),t&&await pc(this),await this.auth._persistUserIfCurrent(this),i&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Cn(this.auth.app))return Promise.reject(Mr(this.auth));const e=await this.getIdToken();return await Oo(this,VS(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){var i,o,l,h,f,p,y,w;const T=(i=t.displayName)!==null&&i!==void 0?i:void 0,S=(o=t.email)!==null&&o!==void 0?o:void 0,V=(l=t.phoneNumber)!==null&&l!==void 0?l:void 0,O=(h=t.photoURL)!==null&&h!==void 0?h:void 0,j=(f=t.tenantId)!==null&&f!==void 0?f:void 0,L=(p=t._redirectEventId)!==null&&p!==void 0?p:void 0,se=(y=t.createdAt)!==null&&y!==void 0?y:void 0,q=(w=t.lastLoginAt)!==null&&w!==void 0?w:void 0,{uid:te,emailVerified:ae,isAnonymous:we,providerData:re,stsTokenManager:k}=t;Ie(te&&k,e,"internal-error");const P=No.fromJSON(this.name,k);Ie(typeof te=="string",e,"internal-error"),vi(T,e.name),vi(S,e.name),Ie(typeof ae=="boolean",e,"internal-error"),Ie(typeof we=="boolean",e,"internal-error"),vi(V,e.name),vi(O,e.name),vi(j,e.name),vi(L,e.name),vi(se,e.name),vi(q,e.name);const C=new Kn({uid:te,auth:e,email:S,emailVerified:ae,displayName:T,isAnonymous:we,photoURL:O,phoneNumber:V,tenantId:j,stsTokenManager:P,createdAt:se,lastLoginAt:q});return re&&Array.isArray(re)&&(C.providerData=re.map(b=>Object.assign({},b))),L&&(C._redirectEventId=L),C}static async _fromIdTokenResponse(e,t,i=!1){const o=new No;o.updateFromServerResponse(t);const l=new Kn({uid:t.localId,auth:e,stsTokenManager:o,isAnonymous:i});return await pc(l),l}static async _fromGetAccountInfoResponse(e,t,i){const o=t.users[0];Ie(o.localId!==void 0,"internal-error");const l=o.providerUserInfo!==void 0?f_(o.providerUserInfo):[],h=!(o.email&&o.passwordHash)&&!(l!=null&&l.length),f=new No;f.updateFromIdToken(i);const p=new Kn({uid:o.localId,auth:e,stsTokenManager:f,isAnonymous:h}),y={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:l,metadata:new af(o.createdAt,o.lastLoginAt),isAnonymous:!(o.email&&o.passwordHash)&&!(l!=null&&l.length)};return Object.assign(p,y),p}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gy=new Map;function Lr(n){zr(n instanceof Function,"Expected a class definition");let e=gy.get(n);return e?(zr(e instanceof n,"Instance stored in cache mismatched with class"),e):(e=new n,gy.set(n,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class p_{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return t===void 0?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}p_.type="NONE";const yy=p_;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Zu(n,e,t){return`firebase:${n}:${e}:${t}`}class xo{constructor(e,t,i){this.persistence=e,this.auth=t,this.userKey=i;const{config:o,name:l}=this.auth;this.fullUserKey=Zu(this.userKey,o.apiKey,l),this.fullPersistenceKey=Zu("persistence",o.apiKey,l),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const t=await fc(this.auth,{idToken:e}).catch(()=>{});return t?Kn._fromGetAccountInfoResponse(this.auth,t,e):null}return Kn._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t,i="authUser"){if(!t.length)return new xo(Lr(yy),e,i);const o=(await Promise.all(t.map(async y=>{if(await y._isAvailable())return y}))).filter(y=>y);let l=o[0]||Lr(yy);const h=Zu(i,e.config.apiKey,e.name);let f=null;for(const y of t)try{const w=await y._get(h);if(w){let T;if(typeof w=="string"){const S=await fc(e,{idToken:w}).catch(()=>{});if(!S)break;T=await Kn._fromGetAccountInfoResponse(e,S,w)}else T=Kn._fromJSON(e,w);y!==l&&(f=T),l=y;break}}catch{}const p=o.filter(y=>y._shouldAllowMigration);return!l._shouldAllowMigration||!p.length?new xo(l,e,i):(l=p[0],f&&await l._set(h,f.toJSON()),await Promise.all(t.map(async y=>{if(y!==l)try{await y._remove(h)}catch{}})),new xo(l,e,i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vy(n){const e=n.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(v_(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(m_(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(w_(e))return"Blackberry";if(E_(e))return"Webos";if(g_(e))return"Safari";if((e.includes("chrome/")||y_(e))&&!e.includes("edge/"))return"Chrome";if(__(e))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,i=n.match(t);if((i==null?void 0:i.length)===2)return i[1]}return"Other"}function m_(n=Ht()){return/firefox\//i.test(n)}function g_(n=Ht()){const e=n.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function y_(n=Ht()){return/crios\//i.test(n)}function v_(n=Ht()){return/iemobile/i.test(n)}function __(n=Ht()){return/android/i.test(n)}function w_(n=Ht()){return/blackberry/i.test(n)}function E_(n=Ht()){return/webos/i.test(n)}function Bf(n=Ht()){return/iphone|ipad|ipod/i.test(n)||/macintosh/i.test(n)&&/mobile/i.test(n)}function BS(n=Ht()){var e;return Bf(n)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function $S(){return rI()&&document.documentMode===10}function T_(n=Ht()){return Bf(n)||__(n)||E_(n)||w_(n)||/windows phone/i.test(n)||v_(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function I_(n,e=[]){let t;switch(n){case"Browser":t=vy(Ht());break;case"Worker":t=`${vy(Ht())}-${n}`;break;default:t=n}const i=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${qo}/${i}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WS{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const i=l=>new Promise((h,f)=>{try{const p=e(l);h(p)}catch(p){f(p)}});i.onAbort=t,this.queue.push(i);const o=this.queue.length-1;return()=>{this.queue[o]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const i of this.queue)await i(e),i.onAbort&&t.push(i.onAbort)}catch(i){t.reverse();for(const o of t)try{o()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:i==null?void 0:i.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function HS(n,e={}){return Gr(n,"GET","/v2/passwordPolicy",Ui(n,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qS=6;class GS{constructor(e){var t,i,o,l;const h=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(t=h.minPasswordLength)!==null&&t!==void 0?t:qS,h.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=h.maxPasswordLength),h.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=h.containsLowercaseCharacter),h.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=h.containsUppercaseCharacter),h.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=h.containsNumericCharacter),h.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=h.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(o=(i=e.allowedNonAlphanumericCharacters)===null||i===void 0?void 0:i.join(""))!==null&&o!==void 0?o:"",this.forceUpgradeOnSignin=(l=e.forceUpgradeOnSignin)!==null&&l!==void 0?l:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var t,i,o,l,h,f;const p={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,p),this.validatePasswordCharacterOptions(e,p),p.isValid&&(p.isValid=(t=p.meetsMinPasswordLength)!==null&&t!==void 0?t:!0),p.isValid&&(p.isValid=(i=p.meetsMaxPasswordLength)!==null&&i!==void 0?i:!0),p.isValid&&(p.isValid=(o=p.containsLowercaseLetter)!==null&&o!==void 0?o:!0),p.isValid&&(p.isValid=(l=p.containsUppercaseLetter)!==null&&l!==void 0?l:!0),p.isValid&&(p.isValid=(h=p.containsNumericCharacter)!==null&&h!==void 0?h:!0),p.isValid&&(p.isValid=(f=p.containsNonAlphanumericCharacter)!==null&&f!==void 0?f:!0),p}validatePasswordLengthOptions(e,t){const i=this.customStrengthOptions.minPasswordLength,o=this.customStrengthOptions.maxPasswordLength;i&&(t.meetsMinPasswordLength=e.length>=i),o&&(t.meetsMaxPasswordLength=e.length<=o)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let i;for(let o=0;o<e.length;o++)i=e.charAt(o),this.updatePasswordCharacterOptionsStatuses(t,i>="a"&&i<="z",i>="A"&&i<="Z",i>="0"&&i<="9",this.allowedNonAlphanumericCharacters.includes(i))}updatePasswordCharacterOptionsStatuses(e,t,i,o,l){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=i)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=o)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=l))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KS{constructor(e,t,i,o){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=i,this.config=o,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new _y(this),this.idTokenSubscription=new _y(this),this.beforeStateQueue=new WS(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=l_,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=o.sdkClientVersion,this._persistenceManagerAvailable=new Promise(l=>this._resolvePersistenceManagerAvailable=l)}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=Lr(t)),this._initializationPromise=this.queue(async()=>{var i,o,l;if(!this._deleted&&(this.persistenceManager=await xo.create(this,e),(i=this._resolvePersistenceManagerAvailable)===null||i===void 0||i.call(this),!this._deleted)){if(!((o=this._popupRedirectResolver)===null||o===void 0)&&o._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(t),this.lastNotifiedUid=((l=this.currentUser)===null||l===void 0?void 0:l.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const t=await fc(this,{idToken:e}),i=await Kn._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(i)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var t;if(Cn(this.app)){const h=this.app.settings.authIdToken;return h?new Promise(f=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(h).then(f,f))}):this.directlySetCurrentUser(null)}const i=await this.assertedPersistence.getCurrentUser();let o=i,l=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const h=(t=this.redirectUser)===null||t===void 0?void 0:t._redirectEventId,f=o==null?void 0:o._redirectEventId,p=await this.tryRedirectSignIn(e);(!h||h===f)&&(p!=null&&p.user)&&(o=p.user,l=!0)}if(!o)return this.directlySetCurrentUser(null);if(!o._redirectEventId){if(l)try{await this.beforeStateQueue.runMiddleware(o)}catch(h){o=i,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(h))}return o?this.reloadAndSetCurrentUserOrClear(o):this.directlySetCurrentUser(null)}return Ie(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===o._redirectEventId?this.directlySetCurrentUser(o):this.reloadAndSetCurrentUserOrClear(o)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await pc(e)}catch(t){if((t==null?void 0:t.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=AS()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(Cn(this.app))return Promise.reject(Mr(this));const t=e?ft(e):null;return t&&Ie(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e,t=!1){if(!this._deleted)return e&&Ie(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return Cn(this.app)?Promise.reject(Mr(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return Cn(this.app)?Promise.reject(Mr(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Lr(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await HS(this),t=new GS(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new pl("auth","Firebase",e())}onAuthStateChanged(e,t,i){return this.registerStateListener(this.authStateSubscription,e,t,i)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,i){return this.registerStateListener(this.idTokenSubscription,e,t,i)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{const i=this.onAuthStateChanged(()=>{i(),e()},t)}})}async revokeAccessToken(e){if(this.currentUser){const t=await this.currentUser.getIdToken(),i={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(i.tenantId=this.tenantId),await zS(this,i)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,t){const i=await this.getOrInitRedirectPersistenceManager(t);return e===null?i.removeCurrentUser():i.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&Lr(e)||this._popupRedirectResolver;Ie(t,this,"argument-error"),this.redirectPersistenceManager=await xo.create(this,[Lr(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var t,i;return this._isInitialized&&await this.queue(async()=>{}),((t=this._currentUser)===null||t===void 0?void 0:t._redirectEventId)===e?this._currentUser:((i=this.redirectUser)===null||i===void 0?void 0:i._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const i=(t=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&t!==void 0?t:null;this.lastNotifiedUid!==i&&(this.lastNotifiedUid=i,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,i,o){if(this._deleted)return()=>{};const l=typeof t=="function"?t:t.next.bind(t);let h=!1;const f=this._isInitialized?Promise.resolve():this._initializationPromise;if(Ie(f,this,"internal-error"),f.then(()=>{h||l(this.currentUser)}),typeof t=="function"){const p=e.addObserver(t,i,o);return()=>{h=!0,p()}}else{const p=e.addObserver(t);return()=>{h=!0,p()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Ie(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=I_(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const t={"X-Client-Version":this.clientVersion};this.app.options.appId&&(t["X-Firebase-gmpid"]=this.app.options.appId);const i=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());i&&(t["X-Firebase-Client"]=i);const o=await this._getAppCheckToken();return o&&(t["X-Firebase-AppCheck"]=o),t}async _getAppCheckToken(){var e;if(Cn(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const t=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return t!=null&&t.error&&IS(`Error while retrieving App Check token: ${t.error}`),t==null?void 0:t.token}}function Rs(n){return ft(n)}class _y{constructor(e){this.auth=e,this.observer=null,this.addObserver=hI(t=>this.observer=t)}get next(){return Ie(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Mc={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function QS(n){Mc=n}function S_(n){return Mc.loadJS(n)}function YS(){return Mc.recaptchaEnterpriseScript}function JS(){return Mc.gapiScript}function XS(n){return`__${n}${Math.floor(Math.random()*1e6)}`}class ZS{constructor(){this.enterprise=new e1}ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}class e1{ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}const t1="recaptcha-enterprise",P_="NO_RECAPTCHA";class n1{constructor(e){this.type=t1,this.auth=Rs(e)}async verify(e="verify",t=!1){async function i(l){if(!t){if(l.tenantId==null&&l._agentRecaptchaConfig!=null)return l._agentRecaptchaConfig.siteKey;if(l.tenantId!=null&&l._tenantRecaptchaConfigs[l.tenantId]!==void 0)return l._tenantRecaptchaConfigs[l.tenantId].siteKey}return new Promise(async(h,f)=>{DS(l,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(p=>{if(p.recaptchaKey===void 0)f(new Error("recaptcha Enterprise site key undefined"));else{const y=new bS(p);return l.tenantId==null?l._agentRecaptchaConfig=y:l._tenantRecaptchaConfigs[l.tenantId]=y,h(y.siteKey)}}).catch(p=>{f(p)})})}function o(l,h,f){const p=window.grecaptcha;py(p)?p.enterprise.ready(()=>{p.enterprise.execute(l,{action:e}).then(y=>{h(y)}).catch(()=>{h(P_)})}):f(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new ZS().execute("siteKey",{action:"verify"}):new Promise((l,h)=>{i(this.auth).then(f=>{if(!t&&py(window.grecaptcha))o(f,l,h);else{if(typeof window>"u"){h(new Error("RecaptchaVerifier is only supported in browser"));return}let p=YS();p.length!==0&&(p+=f),S_(p).then(()=>{o(f,l,h)}).catch(y=>{h(y)})}}).catch(f=>{h(f)})})}}async function wy(n,e,t,i=!1,o=!1){const l=new n1(n);let h;if(o)h=P_;else try{h=await l.verify(t)}catch{h=await l.verify(t,!0)}const f=Object.assign({},e);if(t==="mfaSmsEnrollment"||t==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in f){const p=f.phoneEnrollmentInfo.phoneNumber,y=f.phoneEnrollmentInfo.recaptchaToken;Object.assign(f,{phoneEnrollmentInfo:{phoneNumber:p,recaptchaToken:y,captchaResponse:h,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in f){const p=f.phoneSignInInfo.recaptchaToken;Object.assign(f,{phoneSignInInfo:{recaptchaToken:p,captchaResponse:h,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return f}return i?Object.assign(f,{captchaResp:h}):Object.assign(f,{captchaResponse:h}),Object.assign(f,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(f,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),f}async function lf(n,e,t,i,o){var l;if(!((l=n._getRecaptchaConfig())===null||l===void 0)&&l.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const h=await wy(n,e,t,t==="getOobCode");return i(n,h)}else return i(n,e).catch(async h=>{if(h.code==="auth/missing-recaptcha-token"){console.log(`${t} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const f=await wy(n,e,t,t==="getOobCode");return i(n,f)}else return Promise.reject(h)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function r1(n,e){const t=Mf(n,"auth");if(t.isInitialized()){const o=t.getImmediate(),l=t.getOptions();if(Ts(l,e??{}))return o;Qn(o,"already-initialized")}return t.initialize({options:e})}function i1(n,e){const t=(e==null?void 0:e.persistence)||[],i=(Array.isArray(t)?t:[t]).map(Lr);e!=null&&e.errorMap&&n._updateErrorMap(e.errorMap),n._initializeWithPersistence(i,e==null?void 0:e.popupRedirectResolver)}function s1(n,e,t){const i=Rs(n);Ie(/^https?:\/\//.test(e),i,"invalid-emulator-scheme");const o=!1,l=A_(e),{host:h,port:f}=o1(e),p=f===null?"":`:${f}`,y={url:`${l}//${h}${p}/`},w=Object.freeze({host:h,port:f,protocol:l.replace(":",""),options:Object.freeze({disableWarnings:o})});if(!i._canInitEmulator){Ie(i.config.emulator&&i.emulatorConfig,i,"emulator-config-failed"),Ie(Ts(y,i.config.emulator)&&Ts(w,i.emulatorConfig),i,"emulator-config-failed");return}i.config.emulator=y,i.emulatorConfig=w,i.settings.appVerificationDisabledForTesting=!0,Ho(h)?(Zv(`${l}//${h}${p}`),e_("Auth",!0)):a1()}function A_(n){const e=n.indexOf(":");return e<0?"":n.substr(0,e+1)}function o1(n){const e=A_(n),t=/(\/\/)?([^?#/]+)/.exec(n.substr(e.length));if(!t)return{host:"",port:null};const i=t[2].split("@").pop()||"",o=/^(\[[^\]]+\])(:|$)/.exec(i);if(o){const l=o[1];return{host:l,port:Ey(i.substr(l.length+1))}}else{const[l,h]=i.split(":");return{host:l,port:Ey(h)}}}function Ey(n){if(!n)return null;const e=Number(n);return isNaN(e)?null:e}function a1(){function n(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",n):n())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $f{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return Or("not implemented")}_getIdTokenResponse(e){return Or("not implemented")}_linkToIdToken(e,t){return Or("not implemented")}_getReauthenticationResolver(e){return Or("not implemented")}}async function l1(n,e){return Gr(n,"POST","/v1/accounts:update",e)}async function u1(n,e){return Gr(n,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function c1(n,e){return yl(n,"POST","/v1/accounts:signInWithPassword",Ui(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function h1(n,e){return yl(n,"POST","/v1/accounts:signInWithEmailLink",Ui(n,e))}async function d1(n,e){return yl(n,"POST","/v1/accounts:signInWithEmailLink",Ui(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class al extends $f{constructor(e,t,i,o=null){super("password",i),this._email=e,this._password=t,this._tenantId=o}static _fromEmailAndPassword(e,t){return new al(e,t,"password")}static _fromEmailAndCode(e,t,i=null){return new al(e,t,"emailLink",i)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e;if(t!=null&&t.email&&(t!=null&&t.password)){if(t.signInMethod==="password")return this._fromEmailAndPassword(t.email,t.password);if(t.signInMethod==="emailLink")return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const t={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return lf(e,t,"signInWithPassword",c1);case"emailLink":return h1(e,{email:this._email,oobCode:this._password});default:Qn(e,"internal-error")}}async _linkToIdToken(e,t){switch(this.signInMethod){case"password":const i={idToken:t,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return lf(e,i,"signUpPassword",u1);case"emailLink":return d1(e,{idToken:t,email:this._email,oobCode:this._password});default:Qn(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function bo(n,e){return yl(n,"POST","/v1/accounts:signInWithIdp",Ui(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const f1="http://localhost";class Ss extends $f{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new Ss(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):Qn("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e,{providerId:i,signInMethod:o}=t,l=jf(t,["providerId","signInMethod"]);if(!i||!o)return null;const h=new Ss(i,o);return h.idToken=l.idToken||void 0,h.accessToken=l.accessToken||void 0,h.secret=l.secret,h.nonce=l.nonce,h.pendingToken=l.pendingToken||null,h}_getIdTokenResponse(e){const t=this.buildRequest();return bo(e,t)}_linkToIdToken(e,t){const i=this.buildRequest();return i.idToken=t,bo(e,i)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,bo(e,t)}buildRequest(){const e={requestUri:f1,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=ml(t)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function p1(n){switch(n){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function m1(n){const e=qa(Ga(n)).link,t=e?qa(Ga(e)).deep_link_id:null,i=qa(Ga(n)).deep_link_id;return(i?qa(Ga(i)).link:null)||i||t||e||n}class Wf{constructor(e){var t,i,o,l,h,f;const p=qa(Ga(e)),y=(t=p.apiKey)!==null&&t!==void 0?t:null,w=(i=p.oobCode)!==null&&i!==void 0?i:null,T=p1((o=p.mode)!==null&&o!==void 0?o:null);Ie(y&&w&&T,"argument-error"),this.apiKey=y,this.operation=T,this.code=w,this.continueUrl=(l=p.continueUrl)!==null&&l!==void 0?l:null,this.languageCode=(h=p.lang)!==null&&h!==void 0?h:null,this.tenantId=(f=p.tenantId)!==null&&f!==void 0?f:null}static parseLink(e){const t=m1(e);try{return new Wf(t)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ks{constructor(){this.providerId=ks.PROVIDER_ID}static credential(e,t){return al._fromEmailAndPassword(e,t)}static credentialWithLink(e,t){const i=Wf.parseLink(t);return Ie(i,"argument-error"),al._fromEmailAndCode(e,i.code,i.tenantId)}}ks.PROVIDER_ID="password";ks.EMAIL_PASSWORD_SIGN_IN_METHOD="password";ks.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class C_{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vl extends C_{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wi extends vl{constructor(){super("facebook.com")}static credential(e){return Ss._fromParams({providerId:wi.PROVIDER_ID,signInMethod:wi.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return wi.credentialFromTaggedObject(e)}static credentialFromError(e){return wi.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return wi.credential(e.oauthAccessToken)}catch{return null}}}wi.FACEBOOK_SIGN_IN_METHOD="facebook.com";wi.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ei extends vl{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return Ss._fromParams({providerId:Ei.PROVIDER_ID,signInMethod:Ei.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return Ei.credentialFromTaggedObject(e)}static credentialFromError(e){return Ei.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:t,oauthAccessToken:i}=e;if(!t&&!i)return null;try{return Ei.credential(t,i)}catch{return null}}}Ei.GOOGLE_SIGN_IN_METHOD="google.com";Ei.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ti extends vl{constructor(){super("github.com")}static credential(e){return Ss._fromParams({providerId:Ti.PROVIDER_ID,signInMethod:Ti.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Ti.credentialFromTaggedObject(e)}static credentialFromError(e){return Ti.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Ti.credential(e.oauthAccessToken)}catch{return null}}}Ti.GITHUB_SIGN_IN_METHOD="github.com";Ti.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ii extends vl{constructor(){super("twitter.com")}static credential(e,t){return Ss._fromParams({providerId:Ii.PROVIDER_ID,signInMethod:Ii.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return Ii.credentialFromTaggedObject(e)}static credentialFromError(e){return Ii.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:t,oauthTokenSecret:i}=e;if(!t||!i)return null;try{return Ii.credential(t,i)}catch{return null}}}Ii.TWITTER_SIGN_IN_METHOD="twitter.com";Ii.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function g1(n,e){return yl(n,"POST","/v1/accounts:signUp",Ui(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ps{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,i,o=!1){const l=await Kn._fromIdTokenResponse(e,i,o),h=Ty(i);return new Ps({user:l,providerId:h,_tokenResponse:i,operationType:t})}static async _forOperation(e,t,i){await e._updateTokensIfNecessary(i,!0);const o=Ty(i);return new Ps({user:e,providerId:o,_tokenResponse:i,operationType:t})}}function Ty(n){return n.providerId?n.providerId:"phoneNumber"in n?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mc extends qr{constructor(e,t,i,o){var l;super(t.code,t.message),this.operationType=i,this.user=o,Object.setPrototypeOf(this,mc.prototype),this.customData={appName:e.name,tenantId:(l=e.tenantId)!==null&&l!==void 0?l:void 0,_serverResponse:t.customData._serverResponse,operationType:i}}static _fromErrorAndOperation(e,t,i,o){return new mc(e,t,i,o)}}function R_(n,e,t,i){return(e==="reauthenticate"?t._getReauthenticationResolver(n):t._getIdTokenResponse(n)).catch(l=>{throw l.code==="auth/multi-factor-auth-required"?mc._fromErrorAndOperation(n,l,e,i):l})}async function y1(n,e,t=!1){const i=await Oo(n,e._linkToIdToken(n.auth,await n.getIdToken()),t);return Ps._forOperation(n,"link",i)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function k_(n,e,t=!1){const{auth:i}=n;if(Cn(i.app))return Promise.reject(Mr(i));const o="reauthenticate";try{const l=await Oo(n,R_(i,o,e,n),t);Ie(l.idToken,i,"internal-error");const h=zf(l.idToken);Ie(h,i,"internal-error");const{sub:f}=h;return Ie(n.uid===f,i,"user-mismatch"),Ps._forOperation(n,o,l)}catch(l){throw(l==null?void 0:l.code)==="auth/user-not-found"&&Qn(i,"user-mismatch"),l}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function N_(n,e,t=!1){if(Cn(n.app))return Promise.reject(Mr(n));const i="signIn",o=await R_(n,i,e),l=await Ps._fromIdTokenResponse(n,i,o);return t||await n._updateCurrentUser(l.user),l}async function v1(n,e){return N_(Rs(n),e)}async function _1(n,e){return k_(ft(n),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function x_(n){const e=Rs(n);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function w1(n,e,t){if(Cn(n.app))return Promise.reject(Mr(n));const i=Rs(n),h=await lf(i,{returnSecureToken:!0,email:e,password:t,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",g1).catch(p=>{throw p.code==="auth/password-does-not-meet-requirements"&&x_(n),p}),f=await Ps._fromIdTokenResponse(i,"signIn",h);return await i._updateCurrentUser(f.user),f}function E1(n,e,t){return Cn(n.app)?Promise.reject(Mr(n)):v1(ft(n),ks.credential(e,t)).catch(async i=>{throw i.code==="auth/password-does-not-meet-requirements"&&x_(n),i})}function T1(n,e){return I1(ft(n),null,e)}async function I1(n,e,t){const{auth:i}=n,l={idToken:await n.getIdToken(),returnSecureToken:!0};t&&(l.password=t);const h=await Oo(n,l1(i,l));await n._updateTokensIfNecessary(h,!0)}function S1(n,e,t,i){return ft(n).onIdTokenChanged(e,t,i)}function P1(n,e,t){return ft(n).beforeAuthStateChanged(e,t)}function A1(n,e,t,i){return ft(n).onAuthStateChanged(e,t,i)}function C1(n){return ft(n).signOut()}const gc="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class b_{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(gc,"1"),this.storage.removeItem(gc),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const R1=1e3,k1=10;class D_ extends b_{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=T_(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const i=this.storage.getItem(t),o=this.localCache[t];i!==o&&e(t,o,i)}}onStorageEvent(e,t=!1){if(!e.key){this.forAllChangedKeys((h,f,p)=>{this.notifyListeners(h,p)});return}const i=e.key;t?this.detachListener():this.stopPolling();const o=()=>{const h=this.storage.getItem(i);!t&&this.localCache[i]===h||this.notifyListeners(i,h)},l=this.storage.getItem(i);$S()&&l!==e.newValue&&e.newValue!==e.oldValue?setTimeout(o,k1):o()}notifyListeners(e,t){this.localCache[e]=t;const i=this.listeners[e];if(i)for(const o of Array.from(i))o(t&&JSON.parse(t))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,t,i)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:i}),!0)})},R1)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}D_.type="LOCAL";const N1=D_;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class V_ extends b_{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,t){}_removeListener(e,t){}}V_.type="SESSION";const O_=V_;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function x1(n){return Promise.all(n.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jc{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find(o=>o.isListeningto(e));if(t)return t;const i=new jc(e);return this.receivers.push(i),i}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:i,eventType:o,data:l}=t.data,h=this.handlersMap[o];if(!(h!=null&&h.size))return;t.ports[0].postMessage({status:"ack",eventId:i,eventType:o});const f=Array.from(h).map(async y=>y(t.origin,l)),p=await x1(f);t.ports[0].postMessage({status:"done",eventId:i,eventType:o,response:p})}_subscribe(e,t){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),(!t||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}jc.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Hf(n="",e=10){let t="";for(let i=0;i<e;i++)t+=Math.floor(Math.random()*10);return n+t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class b1{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t,i=50){const o=typeof MessageChannel<"u"?new MessageChannel:null;if(!o)throw new Error("connection_unavailable");let l,h;return new Promise((f,p)=>{const y=Hf("",20);o.port1.start();const w=setTimeout(()=>{p(new Error("unsupported_event"))},i);h={messageChannel:o,onMessage(T){const S=T;if(S.data.eventId===y)switch(S.data.status){case"ack":clearTimeout(w),l=setTimeout(()=>{p(new Error("timeout"))},3e3);break;case"done":clearTimeout(l),f(S.data.response);break;default:clearTimeout(w),clearTimeout(l),p(new Error("invalid_response"));break}}},this.handlers.add(h),o.port1.addEventListener("message",h.onMessage),this.target.postMessage({eventType:e,eventId:y,data:t},[o.port2])}).finally(()=>{h&&this.removeMessageHandler(h)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hr(){return window}function D1(n){hr().location.href=n}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function L_(){return typeof hr().WorkerGlobalScope<"u"&&typeof hr().importScripts=="function"}async function V1(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function O1(){var n;return((n=navigator==null?void 0:navigator.serviceWorker)===null||n===void 0?void 0:n.controller)||null}function L1(){return L_()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const M_="firebaseLocalStorageDb",M1=1,yc="firebaseLocalStorage",j_="fbase_key";class _l{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}}function Fc(n,e){return n.transaction([yc],e?"readwrite":"readonly").objectStore(yc)}function j1(){const n=indexedDB.deleteDatabase(M_);return new _l(n).toPromise()}function uf(){const n=indexedDB.open(M_,M1);return new Promise((e,t)=>{n.addEventListener("error",()=>{t(n.error)}),n.addEventListener("upgradeneeded",()=>{const i=n.result;try{i.createObjectStore(yc,{keyPath:j_})}catch(o){t(o)}}),n.addEventListener("success",async()=>{const i=n.result;i.objectStoreNames.contains(yc)?e(i):(i.close(),await j1(),e(await uf()))})})}async function Iy(n,e,t){const i=Fc(n,!0).put({[j_]:e,value:t});return new _l(i).toPromise()}async function F1(n,e){const t=Fc(n,!1).get(e),i=await new _l(t).toPromise();return i===void 0?null:i.value}function Sy(n,e){const t=Fc(n,!0).delete(e);return new _l(t).toPromise()}const U1=800,z1=3;class F_{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await uf(),this.db)}async _withRetries(e){let t=0;for(;;)try{const i=await this._openDb();return await e(i)}catch(i){if(t++>z1)throw i;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return L_()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=jc._getInstance(L1()),this.receiver._subscribe("keyChanged",async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)})),this.receiver._subscribe("ping",async(e,t)=>["keyChanged"])}async initializeSender(){var e,t;if(this.activeServiceWorker=await V1(),!this.activeServiceWorker)return;this.sender=new b1(this.activeServiceWorker);const i=await this.sender._send("ping",{},800);i&&!((e=i[0])===null||e===void 0)&&e.fulfilled&&!((t=i[0])===null||t===void 0)&&t.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||O1()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await uf();return await Iy(e,gc,"1"),await Sy(e,gc),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite(async()=>(await this._withRetries(i=>Iy(i,e,t)),this.localCache[e]=t,this.notifyServiceWorker(e)))}async _get(e){const t=await this._withRetries(i=>F1(i,e));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(t=>Sy(t,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(o=>{const l=Fc(o,!1).getAll();return new _l(l).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const t=[],i=new Set;if(e.length!==0)for(const{fbase_key:o,value:l}of e)i.add(o),JSON.stringify(this.localCache[o])!==JSON.stringify(l)&&(this.notifyListeners(o,l),t.push(o));for(const o of Object.keys(this.localCache))this.localCache[o]&&!i.has(o)&&(this.notifyListeners(o,null),t.push(o));return t}notifyListeners(e,t){this.localCache[e]=t;const i=this.listeners[e];if(i)for(const o of Array.from(i))o(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),U1)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}F_.type="LOCAL";const B1=F_;new gl(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $1(n,e){return e?Lr(e):(Ie(n._popupRedirectResolver,n,"argument-error"),n._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qf extends $f{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return bo(e,this._buildIdpRequest())}_linkToIdToken(e,t){return bo(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return bo(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function W1(n){return N_(n.auth,new qf(n),n.bypassAuthState)}function H1(n){const{auth:e,user:t}=n;return Ie(t,e,"internal-error"),k_(t,new qf(n),n.bypassAuthState)}async function q1(n){const{auth:e,user:t}=n;return Ie(t,e,"internal-error"),y1(t,new qf(n),n.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class U_{constructor(e,t,i,o,l=!1){this.auth=e,this.resolver=i,this.user=o,this.bypassAuthState=l,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise(async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(i){this.reject(i)}})}async onAuthEvent(e){const{urlResponse:t,sessionId:i,postBody:o,tenantId:l,error:h,type:f}=e;if(h){this.reject(h);return}const p={auth:this.auth,requestUri:t,sessionId:i,tenantId:l||void 0,postBody:o||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(f)(p))}catch(y){this.reject(y)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return W1;case"linkViaPopup":case"linkViaRedirect":return q1;case"reauthViaPopup":case"reauthViaRedirect":return H1;default:Qn(this.auth,"internal-error")}}resolve(e){zr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){zr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const G1=new gl(2e3,1e4);class ko extends U_{constructor(e,t,i,o,l){super(e,t,o,l),this.provider=i,this.authWindow=null,this.pollId=null,ko.currentPopupAction&&ko.currentPopupAction.cancel(),ko.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return Ie(e,this.auth,"internal-error"),e}async onExecution(){zr(this.filter.length===1,"Popup operations only handle one event");const e=Hf();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(t=>{this.reject(t)}),this.resolver._isIframeWebStorageSupported(this.auth,t=>{t||this.reject(cr(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(cr(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,ko.currentPopupAction=null}pollUserCancellation(){const e=()=>{var t,i;if(!((i=(t=this.authWindow)===null||t===void 0?void 0:t.window)===null||i===void 0)&&i.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(cr(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,G1.get())};e()}}ko.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const K1="pendingRedirect",ec=new Map;class Q1 extends U_{constructor(e,t,i=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,i),this.eventId=null}async execute(){let e=ec.get(this.auth._key());if(!e){try{const i=await Y1(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(i)}catch(t){e=()=>Promise.reject(t)}ec.set(this.auth._key(),e)}return this.bypassAuthState||ec.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function Y1(n,e){const t=Z1(e),i=X1(n);if(!await i._isAvailable())return!1;const o=await i._get(t)==="true";return await i._remove(t),o}function J1(n,e){ec.set(n._key(),e)}function X1(n){return Lr(n._redirectPersistence)}function Z1(n){return Zu(K1,n.config.apiKey,n.name)}async function eP(n,e,t=!1){if(Cn(n.app))return Promise.reject(Mr(n));const i=Rs(n),o=$1(i,e),h=await new Q1(i,o,t).execute();return h&&!t&&(delete h.user._redirectEventId,await i._persistUserIfCurrent(h.user),await i._setRedirectUser(null,e)),h}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tP=600*1e3;class nP{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(i=>{this.isEventForConsumer(e,i)&&(t=!0,this.sendToConsumer(e,i),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!rP(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){var i;if(e.error&&!z_(e)){const o=((i=e.error.code)===null||i===void 0?void 0:i.split("auth/")[1])||"internal-error";t.onError(cr(this.auth,o))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const i=t.eventId===null||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&i}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=tP&&this.cachedEventUids.clear(),this.cachedEventUids.has(Py(e))}saveEventToCache(e){this.cachedEventUids.add(Py(e)),this.lastProcessedEventTime=Date.now()}}function Py(n){return[n.type,n.eventId,n.sessionId,n.tenantId].filter(e=>e).join("-")}function z_({type:n,error:e}){return n==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function rP(n){switch(n.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return z_(n);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function iP(n,e={}){return Gr(n,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sP=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,oP=/^https?/;async function aP(n){if(n.config.emulator)return;const{authorizedDomains:e}=await iP(n);for(const t of e)try{if(lP(t))return}catch{}Qn(n,"unauthorized-domain")}function lP(n){const e=of(),{protocol:t,hostname:i}=new URL(e);if(n.startsWith("chrome-extension://")){const h=new URL(n);return h.hostname===""&&i===""?t==="chrome-extension:"&&n.replace("chrome-extension://","")===e.replace("chrome-extension://",""):t==="chrome-extension:"&&h.hostname===i}if(!oP.test(t))return!1;if(sP.test(n))return i===n;const o=n.replace(/\./g,"\\.");return new RegExp("^(.+\\."+o+"|"+o+")$","i").test(i)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uP=new gl(3e4,6e4);function Ay(){const n=hr().___jsl;if(n!=null&&n.H){for(const e of Object.keys(n.H))if(n.H[e].r=n.H[e].r||[],n.H[e].L=n.H[e].L||[],n.H[e].r=[...n.H[e].L],n.CP)for(let t=0;t<n.CP.length;t++)n.CP[t]=null}}function cP(n){return new Promise((e,t)=>{var i,o,l;function h(){Ay(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{Ay(),t(cr(n,"network-request-failed"))},timeout:uP.get()})}if(!((o=(i=hr().gapi)===null||i===void 0?void 0:i.iframes)===null||o===void 0)&&o.Iframe)e(gapi.iframes.getContext());else if(!((l=hr().gapi)===null||l===void 0)&&l.load)h();else{const f=XS("iframefcb");return hr()[f]=()=>{gapi.load?h():t(cr(n,"network-request-failed"))},S_(`${JS()}?onload=${f}`).catch(p=>t(p))}}).catch(e=>{throw tc=null,e})}let tc=null;function hP(n){return tc=tc||cP(n),tc}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dP=new gl(5e3,15e3),fP="__/auth/iframe",pP="emulator/auth/iframe",mP={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},gP=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function yP(n){const e=n.config;Ie(e.authDomain,n,"auth-domain-config-required");const t=e.emulator?Uf(e,pP):`https://${n.config.authDomain}/${fP}`,i={apiKey:e.apiKey,appName:n.name,v:qo},o=gP.get(n.config.apiHost);o&&(i.eid=o);const l=n._getFrameworks();return l.length&&(i.fw=l.join(",")),`${t}?${ml(i).slice(1)}`}async function vP(n){const e=await hP(n),t=hr().gapi;return Ie(t,n,"internal-error"),e.open({where:document.body,url:yP(n),messageHandlersFilter:t.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:mP,dontclear:!0},i=>new Promise(async(o,l)=>{await i.restyle({setHideOnLeave:!1});const h=cr(n,"network-request-failed"),f=hr().setTimeout(()=>{l(h)},dP.get());function p(){hr().clearTimeout(f),o(i)}i.ping(p).then(p,()=>{l(h)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _P={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},wP=500,EP=600,TP="_blank",IP="http://localhost";class Cy{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function SP(n,e,t,i=wP,o=EP){const l=Math.max((window.screen.availHeight-o)/2,0).toString(),h=Math.max((window.screen.availWidth-i)/2,0).toString();let f="";const p=Object.assign(Object.assign({},_P),{width:i.toString(),height:o.toString(),top:l,left:h}),y=Ht().toLowerCase();t&&(f=y_(y)?TP:t),m_(y)&&(e=e||IP,p.scrollbars="yes");const w=Object.entries(p).reduce((S,[V,O])=>`${S}${V}=${O},`,"");if(BS(y)&&f!=="_self")return PP(e||"",f),new Cy(null);const T=window.open(e||"",f,w);Ie(T,n,"popup-blocked");try{T.focus()}catch{}return new Cy(T)}function PP(n,e){const t=document.createElement("a");t.href=n,t.target=e;const i=document.createEvent("MouseEvent");i.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),t.dispatchEvent(i)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const AP="__/auth/handler",CP="emulator/auth/handler",RP=encodeURIComponent("fac");async function Ry(n,e,t,i,o,l){Ie(n.config.authDomain,n,"auth-domain-config-required"),Ie(n.config.apiKey,n,"invalid-api-key");const h={apiKey:n.config.apiKey,appName:n.name,authType:t,redirectUrl:i,v:qo,eventId:o};if(e instanceof C_){e.setDefaultLanguage(n.languageCode),h.providerId=e.providerId||"",cI(e.getCustomParameters())||(h.customParameters=JSON.stringify(e.getCustomParameters()));for(const[w,T]of Object.entries({}))h[w]=T}if(e instanceof vl){const w=e.getScopes().filter(T=>T!=="");w.length>0&&(h.scopes=w.join(","))}n.tenantId&&(h.tid=n.tenantId);const f=h;for(const w of Object.keys(f))f[w]===void 0&&delete f[w];const p=await n._getAppCheckToken(),y=p?`#${RP}=${encodeURIComponent(p)}`:"";return`${kP(n)}?${ml(f).slice(1)}${y}`}function kP({config:n}){return n.emulator?Uf(n,CP):`https://${n.authDomain}/${AP}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Wd="webStorageSupport";class NP{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=O_,this._completeRedirectFn=eP,this._overrideRedirectResult=J1}async _openPopup(e,t,i,o){var l;zr((l=this.eventManagers[e._key()])===null||l===void 0?void 0:l.manager,"_initialize() not called before _openPopup()");const h=await Ry(e,t,i,of(),o);return SP(e,h,Hf())}async _openRedirect(e,t,i,o){await this._originValidation(e);const l=await Ry(e,t,i,of(),o);return D1(l),new Promise(()=>{})}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:o,promise:l}=this.eventManagers[t];return o?Promise.resolve(o):(zr(l,"If manager is not set, promise should be"),l)}const i=this.initAndGetManager(e);return this.eventManagers[t]={promise:i},i.catch(()=>{delete this.eventManagers[t]}),i}async initAndGetManager(e){const t=await vP(e),i=new nP(e);return t.register("authEvent",o=>(Ie(o==null?void 0:o.authEvent,e,"invalid-auth-event"),{status:i.onEvent(o.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:i},this.iframes[e._key()]=t,i}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(Wd,{type:Wd},o=>{var l;const h=(l=o==null?void 0:o[0])===null||l===void 0?void 0:l[Wd];h!==void 0&&t(!!h),Qn(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=aP(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return T_()||g_()||Bf()}}const xP=NP;var ky="@firebase/auth",Ny="1.10.8";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bP{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged(i=>{e((i==null?void 0:i.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){Ie(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function DP(n){switch(n){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function VP(n){Vo(new Is("auth",(e,{options:t})=>{const i=e.getProvider("app").getImmediate(),o=e.getProvider("heartbeat"),l=e.getProvider("app-check-internal"),{apiKey:h,authDomain:f}=i.options;Ie(h&&!h.includes(":"),"invalid-api-key",{appName:i.name});const p={apiKey:h,authDomain:f,clientPlatform:n,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:I_(n)},y=new KS(i,o,l,p);return i1(y,t),y},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,i)=>{e.getProvider("auth-internal").initialize()})),Vo(new Is("auth-internal",e=>{const t=Rs(e.getProvider("auth").getImmediate());return(i=>new bP(i))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),ki(ky,Ny,DP(n)),ki(ky,Ny,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const OP=300,LP=Xv("authIdTokenMaxAge")||OP;let xy=null;const MP=n=>async e=>{const t=e&&await e.getIdTokenResult(),i=t&&(new Date().getTime()-Date.parse(t.issuedAtTime))/1e3;if(i&&i>LP)return;const o=t==null?void 0:t.token;xy!==o&&(xy=o,await fetch(n,{method:o?"POST":"DELETE",headers:o?{Authorization:`Bearer ${o}`}:{}}))};function jP(n=i_()){const e=Mf(n,"auth");if(e.isInitialized())return e.getImmediate();const t=r1(n,{popupRedirectResolver:xP,persistence:[B1,N1,O_]}),i=Xv("authTokenSyncURL");if(i&&typeof isSecureContext=="boolean"&&isSecureContext){const l=new URL(i,location.origin);if(location.origin===l.origin){const h=MP(l.toString());P1(t,h,()=>h(t.currentUser)),S1(t,f=>h(f))}}const o=Yv("auth");return o&&s1(t,`http://${o}`),t}function FP(){var n,e;return(e=(n=document.getElementsByTagName("head"))===null||n===void 0?void 0:n[0])!==null&&e!==void 0?e:document}QS({loadJS(n){return new Promise((e,t)=>{const i=document.createElement("script");i.setAttribute("src",n),i.onload=e,i.onerror=o=>{const l=cr("internal-error");l.customData=o,t(l)},i.type="text/javascript",i.charset="UTF-8",FP().appendChild(i)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});VP("Browser");var UP="firebase",zP="11.10.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */ki(UP,zP,"app");var by=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Ni,B_;(function(){var n;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(k,P){function C(){}C.prototype=P.prototype,k.D=P.prototype,k.prototype=new C,k.prototype.constructor=k,k.C=function(b,N,M){for(var R=Array(arguments.length-2),He=2;He<arguments.length;He++)R[He-2]=arguments[He];return P.prototype[N].apply(b,R)}}function t(){this.blockSize=-1}function i(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(i,t),i.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function o(k,P,C){C||(C=0);var b=Array(16);if(typeof P=="string")for(var N=0;16>N;++N)b[N]=P.charCodeAt(C++)|P.charCodeAt(C++)<<8|P.charCodeAt(C++)<<16|P.charCodeAt(C++)<<24;else for(N=0;16>N;++N)b[N]=P[C++]|P[C++]<<8|P[C++]<<16|P[C++]<<24;P=k.g[0],C=k.g[1],N=k.g[2];var M=k.g[3],R=P+(M^C&(N^M))+b[0]+3614090360&4294967295;P=C+(R<<7&4294967295|R>>>25),R=M+(N^P&(C^N))+b[1]+3905402710&4294967295,M=P+(R<<12&4294967295|R>>>20),R=N+(C^M&(P^C))+b[2]+606105819&4294967295,N=M+(R<<17&4294967295|R>>>15),R=C+(P^N&(M^P))+b[3]+3250441966&4294967295,C=N+(R<<22&4294967295|R>>>10),R=P+(M^C&(N^M))+b[4]+4118548399&4294967295,P=C+(R<<7&4294967295|R>>>25),R=M+(N^P&(C^N))+b[5]+1200080426&4294967295,M=P+(R<<12&4294967295|R>>>20),R=N+(C^M&(P^C))+b[6]+2821735955&4294967295,N=M+(R<<17&4294967295|R>>>15),R=C+(P^N&(M^P))+b[7]+4249261313&4294967295,C=N+(R<<22&4294967295|R>>>10),R=P+(M^C&(N^M))+b[8]+1770035416&4294967295,P=C+(R<<7&4294967295|R>>>25),R=M+(N^P&(C^N))+b[9]+2336552879&4294967295,M=P+(R<<12&4294967295|R>>>20),R=N+(C^M&(P^C))+b[10]+4294925233&4294967295,N=M+(R<<17&4294967295|R>>>15),R=C+(P^N&(M^P))+b[11]+2304563134&4294967295,C=N+(R<<22&4294967295|R>>>10),R=P+(M^C&(N^M))+b[12]+1804603682&4294967295,P=C+(R<<7&4294967295|R>>>25),R=M+(N^P&(C^N))+b[13]+4254626195&4294967295,M=P+(R<<12&4294967295|R>>>20),R=N+(C^M&(P^C))+b[14]+2792965006&4294967295,N=M+(R<<17&4294967295|R>>>15),R=C+(P^N&(M^P))+b[15]+1236535329&4294967295,C=N+(R<<22&4294967295|R>>>10),R=P+(N^M&(C^N))+b[1]+4129170786&4294967295,P=C+(R<<5&4294967295|R>>>27),R=M+(C^N&(P^C))+b[6]+3225465664&4294967295,M=P+(R<<9&4294967295|R>>>23),R=N+(P^C&(M^P))+b[11]+643717713&4294967295,N=M+(R<<14&4294967295|R>>>18),R=C+(M^P&(N^M))+b[0]+3921069994&4294967295,C=N+(R<<20&4294967295|R>>>12),R=P+(N^M&(C^N))+b[5]+3593408605&4294967295,P=C+(R<<5&4294967295|R>>>27),R=M+(C^N&(P^C))+b[10]+38016083&4294967295,M=P+(R<<9&4294967295|R>>>23),R=N+(P^C&(M^P))+b[15]+3634488961&4294967295,N=M+(R<<14&4294967295|R>>>18),R=C+(M^P&(N^M))+b[4]+3889429448&4294967295,C=N+(R<<20&4294967295|R>>>12),R=P+(N^M&(C^N))+b[9]+568446438&4294967295,P=C+(R<<5&4294967295|R>>>27),R=M+(C^N&(P^C))+b[14]+3275163606&4294967295,M=P+(R<<9&4294967295|R>>>23),R=N+(P^C&(M^P))+b[3]+4107603335&4294967295,N=M+(R<<14&4294967295|R>>>18),R=C+(M^P&(N^M))+b[8]+1163531501&4294967295,C=N+(R<<20&4294967295|R>>>12),R=P+(N^M&(C^N))+b[13]+2850285829&4294967295,P=C+(R<<5&4294967295|R>>>27),R=M+(C^N&(P^C))+b[2]+4243563512&4294967295,M=P+(R<<9&4294967295|R>>>23),R=N+(P^C&(M^P))+b[7]+1735328473&4294967295,N=M+(R<<14&4294967295|R>>>18),R=C+(M^P&(N^M))+b[12]+2368359562&4294967295,C=N+(R<<20&4294967295|R>>>12),R=P+(C^N^M)+b[5]+4294588738&4294967295,P=C+(R<<4&4294967295|R>>>28),R=M+(P^C^N)+b[8]+2272392833&4294967295,M=P+(R<<11&4294967295|R>>>21),R=N+(M^P^C)+b[11]+1839030562&4294967295,N=M+(R<<16&4294967295|R>>>16),R=C+(N^M^P)+b[14]+4259657740&4294967295,C=N+(R<<23&4294967295|R>>>9),R=P+(C^N^M)+b[1]+2763975236&4294967295,P=C+(R<<4&4294967295|R>>>28),R=M+(P^C^N)+b[4]+1272893353&4294967295,M=P+(R<<11&4294967295|R>>>21),R=N+(M^P^C)+b[7]+4139469664&4294967295,N=M+(R<<16&4294967295|R>>>16),R=C+(N^M^P)+b[10]+3200236656&4294967295,C=N+(R<<23&4294967295|R>>>9),R=P+(C^N^M)+b[13]+681279174&4294967295,P=C+(R<<4&4294967295|R>>>28),R=M+(P^C^N)+b[0]+3936430074&4294967295,M=P+(R<<11&4294967295|R>>>21),R=N+(M^P^C)+b[3]+3572445317&4294967295,N=M+(R<<16&4294967295|R>>>16),R=C+(N^M^P)+b[6]+76029189&4294967295,C=N+(R<<23&4294967295|R>>>9),R=P+(C^N^M)+b[9]+3654602809&4294967295,P=C+(R<<4&4294967295|R>>>28),R=M+(P^C^N)+b[12]+3873151461&4294967295,M=P+(R<<11&4294967295|R>>>21),R=N+(M^P^C)+b[15]+530742520&4294967295,N=M+(R<<16&4294967295|R>>>16),R=C+(N^M^P)+b[2]+3299628645&4294967295,C=N+(R<<23&4294967295|R>>>9),R=P+(N^(C|~M))+b[0]+4096336452&4294967295,P=C+(R<<6&4294967295|R>>>26),R=M+(C^(P|~N))+b[7]+1126891415&4294967295,M=P+(R<<10&4294967295|R>>>22),R=N+(P^(M|~C))+b[14]+2878612391&4294967295,N=M+(R<<15&4294967295|R>>>17),R=C+(M^(N|~P))+b[5]+4237533241&4294967295,C=N+(R<<21&4294967295|R>>>11),R=P+(N^(C|~M))+b[12]+1700485571&4294967295,P=C+(R<<6&4294967295|R>>>26),R=M+(C^(P|~N))+b[3]+2399980690&4294967295,M=P+(R<<10&4294967295|R>>>22),R=N+(P^(M|~C))+b[10]+4293915773&4294967295,N=M+(R<<15&4294967295|R>>>17),R=C+(M^(N|~P))+b[1]+2240044497&4294967295,C=N+(R<<21&4294967295|R>>>11),R=P+(N^(C|~M))+b[8]+1873313359&4294967295,P=C+(R<<6&4294967295|R>>>26),R=M+(C^(P|~N))+b[15]+4264355552&4294967295,M=P+(R<<10&4294967295|R>>>22),R=N+(P^(M|~C))+b[6]+2734768916&4294967295,N=M+(R<<15&4294967295|R>>>17),R=C+(M^(N|~P))+b[13]+1309151649&4294967295,C=N+(R<<21&4294967295|R>>>11),R=P+(N^(C|~M))+b[4]+4149444226&4294967295,P=C+(R<<6&4294967295|R>>>26),R=M+(C^(P|~N))+b[11]+3174756917&4294967295,M=P+(R<<10&4294967295|R>>>22),R=N+(P^(M|~C))+b[2]+718787259&4294967295,N=M+(R<<15&4294967295|R>>>17),R=C+(M^(N|~P))+b[9]+3951481745&4294967295,k.g[0]=k.g[0]+P&4294967295,k.g[1]=k.g[1]+(N+(R<<21&4294967295|R>>>11))&4294967295,k.g[2]=k.g[2]+N&4294967295,k.g[3]=k.g[3]+M&4294967295}i.prototype.u=function(k,P){P===void 0&&(P=k.length);for(var C=P-this.blockSize,b=this.B,N=this.h,M=0;M<P;){if(N==0)for(;M<=C;)o(this,k,M),M+=this.blockSize;if(typeof k=="string"){for(;M<P;)if(b[N++]=k.charCodeAt(M++),N==this.blockSize){o(this,b),N=0;break}}else for(;M<P;)if(b[N++]=k[M++],N==this.blockSize){o(this,b),N=0;break}}this.h=N,this.o+=P},i.prototype.v=function(){var k=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);k[0]=128;for(var P=1;P<k.length-8;++P)k[P]=0;var C=8*this.o;for(P=k.length-8;P<k.length;++P)k[P]=C&255,C/=256;for(this.u(k),k=Array(16),P=C=0;4>P;++P)for(var b=0;32>b;b+=8)k[C++]=this.g[P]>>>b&255;return k};function l(k,P){var C=f;return Object.prototype.hasOwnProperty.call(C,k)?C[k]:C[k]=P(k)}function h(k,P){this.h=P;for(var C=[],b=!0,N=k.length-1;0<=N;N--){var M=k[N]|0;b&&M==P||(C[N]=M,b=!1)}this.g=C}var f={};function p(k){return-128<=k&&128>k?l(k,function(P){return new h([P|0],0>P?-1:0)}):new h([k|0],0>k?-1:0)}function y(k){if(isNaN(k)||!isFinite(k))return T;if(0>k)return L(y(-k));for(var P=[],C=1,b=0;k>=C;b++)P[b]=k/C|0,C*=4294967296;return new h(P,0)}function w(k,P){if(k.length==0)throw Error("number format error: empty string");if(P=P||10,2>P||36<P)throw Error("radix out of range: "+P);if(k.charAt(0)=="-")return L(w(k.substring(1),P));if(0<=k.indexOf("-"))throw Error('number format error: interior "-" character');for(var C=y(Math.pow(P,8)),b=T,N=0;N<k.length;N+=8){var M=Math.min(8,k.length-N),R=parseInt(k.substring(N,N+M),P);8>M?(M=y(Math.pow(P,M)),b=b.j(M).add(y(R))):(b=b.j(C),b=b.add(y(R)))}return b}var T=p(0),S=p(1),V=p(16777216);n=h.prototype,n.m=function(){if(j(this))return-L(this).m();for(var k=0,P=1,C=0;C<this.g.length;C++){var b=this.i(C);k+=(0<=b?b:4294967296+b)*P,P*=4294967296}return k},n.toString=function(k){if(k=k||10,2>k||36<k)throw Error("radix out of range: "+k);if(O(this))return"0";if(j(this))return"-"+L(this).toString(k);for(var P=y(Math.pow(k,6)),C=this,b="";;){var N=ae(C,P).g;C=se(C,N.j(P));var M=((0<C.g.length?C.g[0]:C.h)>>>0).toString(k);if(C=N,O(C))return M+b;for(;6>M.length;)M="0"+M;b=M+b}},n.i=function(k){return 0>k?0:k<this.g.length?this.g[k]:this.h};function O(k){if(k.h!=0)return!1;for(var P=0;P<k.g.length;P++)if(k.g[P]!=0)return!1;return!0}function j(k){return k.h==-1}n.l=function(k){return k=se(this,k),j(k)?-1:O(k)?0:1};function L(k){for(var P=k.g.length,C=[],b=0;b<P;b++)C[b]=~k.g[b];return new h(C,~k.h).add(S)}n.abs=function(){return j(this)?L(this):this},n.add=function(k){for(var P=Math.max(this.g.length,k.g.length),C=[],b=0,N=0;N<=P;N++){var M=b+(this.i(N)&65535)+(k.i(N)&65535),R=(M>>>16)+(this.i(N)>>>16)+(k.i(N)>>>16);b=R>>>16,M&=65535,R&=65535,C[N]=R<<16|M}return new h(C,C[C.length-1]&-2147483648?-1:0)};function se(k,P){return k.add(L(P))}n.j=function(k){if(O(this)||O(k))return T;if(j(this))return j(k)?L(this).j(L(k)):L(L(this).j(k));if(j(k))return L(this.j(L(k)));if(0>this.l(V)&&0>k.l(V))return y(this.m()*k.m());for(var P=this.g.length+k.g.length,C=[],b=0;b<2*P;b++)C[b]=0;for(b=0;b<this.g.length;b++)for(var N=0;N<k.g.length;N++){var M=this.i(b)>>>16,R=this.i(b)&65535,He=k.i(N)>>>16,Ze=k.i(N)&65535;C[2*b+2*N]+=R*Ze,q(C,2*b+2*N),C[2*b+2*N+1]+=M*Ze,q(C,2*b+2*N+1),C[2*b+2*N+1]+=R*He,q(C,2*b+2*N+1),C[2*b+2*N+2]+=M*He,q(C,2*b+2*N+2)}for(b=0;b<P;b++)C[b]=C[2*b+1]<<16|C[2*b];for(b=P;b<2*P;b++)C[b]=0;return new h(C,0)};function q(k,P){for(;(k[P]&65535)!=k[P];)k[P+1]+=k[P]>>>16,k[P]&=65535,P++}function te(k,P){this.g=k,this.h=P}function ae(k,P){if(O(P))throw Error("division by zero");if(O(k))return new te(T,T);if(j(k))return P=ae(L(k),P),new te(L(P.g),L(P.h));if(j(P))return P=ae(k,L(P)),new te(L(P.g),P.h);if(30<k.g.length){if(j(k)||j(P))throw Error("slowDivide_ only works with positive integers.");for(var C=S,b=P;0>=b.l(k);)C=we(C),b=we(b);var N=re(C,1),M=re(b,1);for(b=re(b,2),C=re(C,2);!O(b);){var R=M.add(b);0>=R.l(k)&&(N=N.add(C),M=R),b=re(b,1),C=re(C,1)}return P=se(k,N.j(P)),new te(N,P)}for(N=T;0<=k.l(P);){for(C=Math.max(1,Math.floor(k.m()/P.m())),b=Math.ceil(Math.log(C)/Math.LN2),b=48>=b?1:Math.pow(2,b-48),M=y(C),R=M.j(P);j(R)||0<R.l(k);)C-=b,M=y(C),R=M.j(P);O(M)&&(M=S),N=N.add(M),k=se(k,R)}return new te(N,k)}n.A=function(k){return ae(this,k).h},n.and=function(k){for(var P=Math.max(this.g.length,k.g.length),C=[],b=0;b<P;b++)C[b]=this.i(b)&k.i(b);return new h(C,this.h&k.h)},n.or=function(k){for(var P=Math.max(this.g.length,k.g.length),C=[],b=0;b<P;b++)C[b]=this.i(b)|k.i(b);return new h(C,this.h|k.h)},n.xor=function(k){for(var P=Math.max(this.g.length,k.g.length),C=[],b=0;b<P;b++)C[b]=this.i(b)^k.i(b);return new h(C,this.h^k.h)};function we(k){for(var P=k.g.length+1,C=[],b=0;b<P;b++)C[b]=k.i(b)<<1|k.i(b-1)>>>31;return new h(C,k.h)}function re(k,P){var C=P>>5;P%=32;for(var b=k.g.length-C,N=[],M=0;M<b;M++)N[M]=0<P?k.i(M+C)>>>P|k.i(M+C+1)<<32-P:k.i(M+C);return new h(N,k.h)}i.prototype.digest=i.prototype.v,i.prototype.reset=i.prototype.s,i.prototype.update=i.prototype.u,B_=i,h.prototype.add=h.prototype.add,h.prototype.multiply=h.prototype.j,h.prototype.modulo=h.prototype.A,h.prototype.compare=h.prototype.l,h.prototype.toNumber=h.prototype.m,h.prototype.toString=h.prototype.toString,h.prototype.getBits=h.prototype.i,h.fromNumber=y,h.fromString=w,Ni=h}).apply(typeof by<"u"?by:typeof self<"u"?self:typeof window<"u"?window:{});var Hu=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var $_,Ka,W_,nc,cf,H_,q_,G_;(function(){var n,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(u,m,v){return u==Array.prototype||u==Object.prototype||(u[m]=v.value),u};function t(u){u=[typeof globalThis=="object"&&globalThis,u,typeof window=="object"&&window,typeof self=="object"&&self,typeof Hu=="object"&&Hu];for(var m=0;m<u.length;++m){var v=u[m];if(v&&v.Math==Math)return v}throw Error("Cannot find global object")}var i=t(this);function o(u,m){if(m)e:{var v=i;u=u.split(".");for(var I=0;I<u.length-1;I++){var U=u[I];if(!(U in v))break e;v=v[U]}u=u[u.length-1],I=v[u],m=m(I),m!=I&&m!=null&&e(v,u,{configurable:!0,writable:!0,value:m})}}function l(u,m){u instanceof String&&(u+="");var v=0,I=!1,U={next:function(){if(!I&&v<u.length){var W=v++;return{value:m(W,u[W]),done:!1}}return I=!0,{done:!0,value:void 0}}};return U[Symbol.iterator]=function(){return U},U}o("Array.prototype.values",function(u){return u||function(){return l(this,function(m,v){return v})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var h=h||{},f=this||self;function p(u){var m=typeof u;return m=m!="object"?m:u?Array.isArray(u)?"array":m:"null",m=="array"||m=="object"&&typeof u.length=="number"}function y(u){var m=typeof u;return m=="object"&&u!=null||m=="function"}function w(u,m,v){return u.call.apply(u.bind,arguments)}function T(u,m,v){if(!u)throw Error();if(2<arguments.length){var I=Array.prototype.slice.call(arguments,2);return function(){var U=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(U,I),u.apply(m,U)}}return function(){return u.apply(m,arguments)}}function S(u,m,v){return S=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?w:T,S.apply(null,arguments)}function V(u,m){var v=Array.prototype.slice.call(arguments,1);return function(){var I=v.slice();return I.push.apply(I,arguments),u.apply(this,I)}}function O(u,m){function v(){}v.prototype=m.prototype,u.aa=m.prototype,u.prototype=new v,u.prototype.constructor=u,u.Qb=function(I,U,W){for(var ie=Array(arguments.length-2),We=2;We<arguments.length;We++)ie[We-2]=arguments[We];return m.prototype[U].apply(I,ie)}}function j(u){const m=u.length;if(0<m){const v=Array(m);for(let I=0;I<m;I++)v[I]=u[I];return v}return[]}function L(u,m){for(let v=1;v<arguments.length;v++){const I=arguments[v];if(p(I)){const U=u.length||0,W=I.length||0;u.length=U+W;for(let ie=0;ie<W;ie++)u[U+ie]=I[ie]}else u.push(I)}}class se{constructor(m,v){this.i=m,this.j=v,this.h=0,this.g=null}get(){let m;return 0<this.h?(this.h--,m=this.g,this.g=m.next,m.next=null):m=this.i(),m}}function q(u){return/^[\s\xa0]*$/.test(u)}function te(){var u=f.navigator;return u&&(u=u.userAgent)?u:""}function ae(u){return ae[" "](u),u}ae[" "]=function(){};var we=te().indexOf("Gecko")!=-1&&!(te().toLowerCase().indexOf("webkit")!=-1&&te().indexOf("Edge")==-1)&&!(te().indexOf("Trident")!=-1||te().indexOf("MSIE")!=-1)&&te().indexOf("Edge")==-1;function re(u,m,v){for(const I in u)m.call(v,u[I],I,u)}function k(u,m){for(const v in u)m.call(void 0,u[v],v,u)}function P(u){const m={};for(const v in u)m[v]=u[v];return m}const C="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function b(u,m){let v,I;for(let U=1;U<arguments.length;U++){I=arguments[U];for(v in I)u[v]=I[v];for(let W=0;W<C.length;W++)v=C[W],Object.prototype.hasOwnProperty.call(I,v)&&(u[v]=I[v])}}function N(u){var m=1;u=u.split(":");const v=[];for(;0<m&&u.length;)v.push(u.shift()),m--;return u.length&&v.push(u.join(":")),v}function M(u){f.setTimeout(()=>{throw u},0)}function R(){var u=ve;let m=null;return u.g&&(m=u.g,u.g=u.g.next,u.g||(u.h=null),m.next=null),m}class He{constructor(){this.h=this.g=null}add(m,v){const I=Ze.get();I.set(m,v),this.h?this.h.next=I:this.g=I,this.h=I}}var Ze=new se(()=>new at,u=>u.reset());class at{constructor(){this.next=this.g=this.h=null}set(m,v){this.h=m,this.g=v,this.next=null}reset(){this.next=this.g=this.h=null}}let ze,oe=!1,ve=new He,ce=()=>{const u=f.Promise.resolve(void 0);ze=()=>{u.then(F)}};var F=()=>{for(var u;u=R();){try{u.h.call(u.g)}catch(v){M(v)}var m=Ze;m.j(u),100>m.h&&(m.h++,u.next=m.g,m.g=u)}oe=!1};function Q(){this.s=this.s,this.C=this.C}Q.prototype.s=!1,Q.prototype.ma=function(){this.s||(this.s=!0,this.N())},Q.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function fe(u,m){this.type=u,this.g=this.target=m,this.defaultPrevented=!1}fe.prototype.h=function(){this.defaultPrevented=!0};var Ce=(function(){if(!f.addEventListener||!Object.defineProperty)return!1;var u=!1,m=Object.defineProperty({},"passive",{get:function(){u=!0}});try{const v=()=>{};f.addEventListener("test",v,m),f.removeEventListener("test",v,m)}catch{}return u})();function ke(u,m){if(fe.call(this,u?u.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,u){var v=this.type=u.type,I=u.changedTouches&&u.changedTouches.length?u.changedTouches[0]:null;if(this.target=u.target||u.srcElement,this.g=m,m=u.relatedTarget){if(we){e:{try{ae(m.nodeName);var U=!0;break e}catch{}U=!1}U||(m=null)}}else v=="mouseover"?m=u.fromElement:v=="mouseout"&&(m=u.toElement);this.relatedTarget=m,I?(this.clientX=I.clientX!==void 0?I.clientX:I.pageX,this.clientY=I.clientY!==void 0?I.clientY:I.pageY,this.screenX=I.screenX||0,this.screenY=I.screenY||0):(this.clientX=u.clientX!==void 0?u.clientX:u.pageX,this.clientY=u.clientY!==void 0?u.clientY:u.pageY,this.screenX=u.screenX||0,this.screenY=u.screenY||0),this.button=u.button,this.key=u.key||"",this.ctrlKey=u.ctrlKey,this.altKey=u.altKey,this.shiftKey=u.shiftKey,this.metaKey=u.metaKey,this.pointerId=u.pointerId||0,this.pointerType=typeof u.pointerType=="string"?u.pointerType:K[u.pointerType]||"",this.state=u.state,this.i=u,u.defaultPrevented&&ke.aa.h.call(this)}}O(ke,fe);var K={2:"touch",3:"pen",4:"mouse"};ke.prototype.h=function(){ke.aa.h.call(this);var u=this.i;u.preventDefault?u.preventDefault():u.returnValue=!1};var ee="closure_listenable_"+(1e6*Math.random()|0),le=0;function xe(u,m,v,I,U){this.listener=u,this.proxy=null,this.src=m,this.type=v,this.capture=!!I,this.ha=U,this.key=++le,this.da=this.fa=!1}function $e(u){u.da=!0,u.listener=null,u.proxy=null,u.src=null,u.ha=null}function Pt(u){this.src=u,this.g={},this.h=0}Pt.prototype.add=function(u,m,v,I,U){var W=u.toString();u=this.g[W],u||(u=this.g[W]=[],this.h++);var ie=xn(u,m,I,U);return-1<ie?(m=u[ie],v||(m.fa=!1)):(m=new xe(m,this.src,W,!!I,U),m.fa=v,u.push(m)),m};function Nn(u,m){var v=m.type;if(v in u.g){var I=u.g[v],U=Array.prototype.indexOf.call(I,m,void 0),W;(W=0<=U)&&Array.prototype.splice.call(I,U,1),W&&($e(m),u.g[v].length==0&&(delete u.g[v],u.h--))}}function xn(u,m,v,I){for(var U=0;U<u.length;++U){var W=u[U];if(!W.da&&W.listener==m&&W.capture==!!v&&W.ha==I)return U}return-1}var yr="closure_lm_"+(1e6*Math.random()|0),Ds={};function Jo(u,m,v,I,U){if(Array.isArray(m)){for(var W=0;W<m.length;W++)Jo(u,m[W],v,I,U);return null}return v=ea(v),u&&u[ee]?u.K(m,v,y(I)?!!I.capture:!1,U):Xo(u,m,v,!1,I,U)}function Xo(u,m,v,I,U,W){if(!m)throw Error("Invalid event type");var ie=y(U)?!!U.capture:!!U,We=Os(u);if(We||(u[yr]=We=new Pt(u)),v=We.add(m,v,I,ie,W),v.proxy)return v;if(I=Rl(),v.proxy=I,I.src=u,I.listener=v,u.addEventListener)Ce||(U=ie),U===void 0&&(U=!1),u.addEventListener(m.toString(),I,U);else if(u.attachEvent)u.attachEvent(_r(m.toString()),I);else if(u.addListener&&u.removeListener)u.addListener(I);else throw Error("addEventListener and attachEvent are unavailable.");return v}function Rl(){function u(v){return m.call(u.src,u.listener,v)}const m=Zo;return u}function Vs(u,m,v,I,U){if(Array.isArray(m))for(var W=0;W<m.length;W++)Vs(u,m[W],v,I,U);else I=y(I)?!!I.capture:!!I,v=ea(v),u&&u[ee]?(u=u.i,m=String(m).toString(),m in u.g&&(W=u.g[m],v=xn(W,v,I,U),-1<v&&($e(W[v]),Array.prototype.splice.call(W,v,1),W.length==0&&(delete u.g[m],u.h--)))):u&&(u=Os(u))&&(m=u.g[m.toString()],u=-1,m&&(u=xn(m,v,I,U)),(v=-1<u?m[u]:null)&&vr(v))}function vr(u){if(typeof u!="number"&&u&&!u.da){var m=u.src;if(m&&m[ee])Nn(m.i,u);else{var v=u.type,I=u.proxy;m.removeEventListener?m.removeEventListener(v,I,u.capture):m.detachEvent?m.detachEvent(_r(v),I):m.addListener&&m.removeListener&&m.removeListener(I),(v=Os(m))?(Nn(v,u),v.h==0&&(v.src=null,m[yr]=null)):$e(u)}}}function _r(u){return u in Ds?Ds[u]:Ds[u]="on"+u}function Zo(u,m){if(u.da)u=!0;else{m=new ke(m,this);var v=u.listener,I=u.ha||u.src;u.fa&&vr(u),u=v.call(I,m)}return u}function Os(u){return u=u[yr],u instanceof Pt?u:null}var Ls="__closure_events_fn_"+(1e9*Math.random()>>>0);function ea(u){return typeof u=="function"?u:(u[Ls]||(u[Ls]=function(m){return u.handleEvent(m)}),u[Ls])}function _t(){Q.call(this),this.i=new Pt(this),this.M=this,this.F=null}O(_t,Q),_t.prototype[ee]=!0,_t.prototype.removeEventListener=function(u,m,v,I){Vs(this,u,m,v,I)};function wt(u,m){var v,I=u.F;if(I)for(v=[];I;I=I.F)v.push(I);if(u=u.M,I=m.type||m,typeof m=="string")m=new fe(m,u);else if(m instanceof fe)m.target=m.target||u;else{var U=m;m=new fe(I,u),b(m,U)}if(U=!0,v)for(var W=v.length-1;0<=W;W--){var ie=m.g=v[W];U=wr(ie,I,!0,m)&&U}if(ie=m.g=u,U=wr(ie,I,!0,m)&&U,U=wr(ie,I,!1,m)&&U,v)for(W=0;W<v.length;W++)ie=m.g=v[W],U=wr(ie,I,!1,m)&&U}_t.prototype.N=function(){if(_t.aa.N.call(this),this.i){var u=this.i,m;for(m in u.g){for(var v=u.g[m],I=0;I<v.length;I++)$e(v[I]);delete u.g[m],u.h--}}this.F=null},_t.prototype.K=function(u,m,v,I){return this.i.add(String(u),m,!1,v,I)},_t.prototype.L=function(u,m,v,I){return this.i.add(String(u),m,!0,v,I)};function wr(u,m,v,I){if(m=u.i.g[String(m)],!m)return!0;m=m.concat();for(var U=!0,W=0;W<m.length;++W){var ie=m[W];if(ie&&!ie.da&&ie.capture==v){var We=ie.listener,Et=ie.ha||ie.src;ie.fa&&Nn(u.i,ie),U=We.call(Et,I)!==!1&&U}}return U&&!I.defaultPrevented}function ta(u,m,v){if(typeof u=="function")v&&(u=S(u,v));else if(u&&typeof u.handleEvent=="function")u=S(u.handleEvent,u);else throw Error("Invalid listener argument");return 2147483647<Number(m)?-1:f.setTimeout(u,m||0)}function Kr(u){u.g=ta(()=>{u.g=null,u.i&&(u.i=!1,Kr(u))},u.l);const m=u.h;u.h=null,u.m.apply(null,m)}class Wi extends Q{constructor(m,v){super(),this.m=m,this.l=v,this.h=null,this.i=!1,this.g=null}j(m){this.h=arguments,this.g?this.i=!0:Kr(this)}N(){super.N(),this.g&&(f.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Hi(u){Q.call(this),this.h=u,this.g={}}O(Hi,Q);var na=[];function ra(u){re(u.g,function(m,v){this.g.hasOwnProperty(v)&&vr(m)},u),u.g={}}Hi.prototype.N=function(){Hi.aa.N.call(this),ra(this)},Hi.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var ia=f.JSON.stringify,sa=f.JSON.parse,oa=class{stringify(u){return f.JSON.stringify(u,void 0)}parse(u){return f.JSON.parse(u,void 0)}};function qi(){}qi.prototype.h=null;function Ms(u){return u.h||(u.h=u.i())}function js(){}var yn={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function Jn(){fe.call(this,"d")}O(Jn,fe);function Fs(){fe.call(this,"c")}O(Fs,fe);var Xn={},aa=null;function Gi(){return aa=aa||new _t}Xn.La="serverreachability";function la(u){fe.call(this,Xn.La,u)}O(la,fe);function Er(u){const m=Gi();wt(m,new la(m))}Xn.STAT_EVENT="statevent";function ua(u,m){fe.call(this,Xn.STAT_EVENT,u),this.stat=m}O(ua,fe);function lt(u){const m=Gi();wt(m,new ua(m,u))}Xn.Ma="timingevent";function Us(u,m){fe.call(this,Xn.Ma,u),this.size=m}O(Us,fe);function bn(u,m){if(typeof u!="function")throw Error("Fn must not be null and must be a function");return f.setTimeout(function(){u()},m)}function Ki(){this.g=!0}Ki.prototype.xa=function(){this.g=!1};function Qi(u,m,v,I,U,W){u.info(function(){if(u.g)if(W)for(var ie="",We=W.split("&"),Et=0;Et<We.length;Et++){var Le=We[Et].split("=");if(1<Le.length){var At=Le[0];Le=Le[1];var pt=At.split("_");ie=2<=pt.length&&pt[1]=="type"?ie+(At+"="+Le+"&"):ie+(At+"=redacted&")}}else ie=null;else ie=W;return"XMLHTTP REQ ("+I+") [attempt "+U+"]: "+m+`
`+v+`
`+ie})}function zs(u,m,v,I,U,W,ie){u.info(function(){return"XMLHTTP RESP ("+I+") [ attempt "+U+"]: "+m+`
`+v+`
`+W+" "+ie})}function Dn(u,m,v,I){u.info(function(){return"XMLHTTP TEXT ("+m+"): "+oh(u,v)+(I?" "+I:"")})}function ca(u,m){u.info(function(){return"TIMEOUT: "+m})}Ki.prototype.info=function(){};function oh(u,m){if(!u.g)return m;if(!m)return null;try{var v=JSON.parse(m);if(v){for(u=0;u<v.length;u++)if(Array.isArray(v[u])){var I=v[u];if(!(2>I.length)){var U=I[1];if(Array.isArray(U)&&!(1>U.length)){var W=U[0];if(W!="noop"&&W!="stop"&&W!="close")for(var ie=1;ie<U.length;ie++)U[ie]=""}}}}return ia(v)}catch{return m}}var Bs={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},kl={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},Vn;function Yi(){}O(Yi,qi),Yi.prototype.g=function(){return new XMLHttpRequest},Yi.prototype.i=function(){return{}},Vn=new Yi;function On(u,m,v,I){this.j=u,this.i=m,this.l=v,this.R=I||1,this.U=new Hi(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new Nl}function Nl(){this.i=null,this.g="",this.h=!1}var ha={},$s={};function Ws(u,m,v){u.L=1,u.v=Zr(un(m)),u.m=v,u.P=!0,da(u,null)}function da(u,m){u.F=Date.now(),Ke(u),u.A=un(u.v);var v=u.A,I=u.R;Array.isArray(I)||(I=[String(I)]),ti(v.i,"t",I),u.C=0,v=u.j.J,u.h=new Nl,u.g=Kl(u.j,v?m:null,!u.m),0<u.O&&(u.M=new Wi(S(u.Y,u,u.g),u.O)),m=u.U,v=u.g,I=u.ca;var U="readystatechange";Array.isArray(U)||(U&&(na[0]=U.toString()),U=na);for(var W=0;W<U.length;W++){var ie=Jo(v,U[W],I||m.handleEvent,!1,m.h||m);if(!ie)break;m.g[ie.key]=ie}m=u.H?P(u.H):{},u.m?(u.u||(u.u="POST"),m["Content-Type"]="application/x-www-form-urlencoded",u.g.ea(u.A,u.u,u.m,m)):(u.u="GET",u.g.ea(u.A,u.u,null,m)),Er(),Qi(u.i,u.u,u.A,u.l,u.R,u.m)}On.prototype.ca=function(u){u=u.target;const m=this.M;m&&Jt(u)==3?m.j():this.Y(u)},On.prototype.Y=function(u){try{if(u==this.g)e:{const pt=Jt(this.g);var m=this.g.Ba();const wn=this.g.Z();if(!(3>pt)&&(pt!=3||this.g&&(this.h.h||this.g.oa()||va(this.g)))){this.J||pt!=4||m==7||(m==8||0>=wn?Er(3):Er(2)),Ji(this);var v=this.g.Z();this.X=v;t:if(xl(this)){var I=va(this.g);u="";var U=I.length,W=Jt(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){vn(this),Qr(this);var ie="";break t}this.h.i=new f.TextDecoder}for(m=0;m<U;m++)this.h.h=!0,u+=this.h.i.decode(I[m],{stream:!(W&&m==U-1)});I.length=0,this.h.g+=u,this.C=0,ie=this.h.g}else ie=this.g.oa();if(this.o=v==200,zs(this.i,this.u,this.A,this.l,this.R,pt,v),this.o){if(this.T&&!this.K){t:{if(this.g){var We,Et=this.g;if((We=Et.g?Et.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!q(We)){var Le=We;break t}}Le=null}if(v=Le)Dn(this.i,this.l,v,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,fa(this,v);else{this.o=!1,this.s=3,lt(12),vn(this),Qr(this);break e}}if(this.P){v=!0;let hn;for(;!this.J&&this.C<ie.length;)if(hn=ah(this,ie),hn==$s){pt==4&&(this.s=4,lt(14),v=!1),Dn(this.i,this.l,null,"[Incomplete Response]");break}else if(hn==ha){this.s=4,lt(15),Dn(this.i,this.l,ie,"[Invalid Chunk]"),v=!1;break}else Dn(this.i,this.l,hn,null),fa(this,hn);if(xl(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),pt!=4||ie.length!=0||this.h.h||(this.s=1,lt(16),v=!1),this.o=this.o&&v,!v)Dn(this.i,this.l,ie,"[Invalid Chunked Response]"),vn(this),Qr(this);else if(0<ie.length&&!this.W){this.W=!0;var At=this.j;At.g==this&&At.ba&&!At.M&&(At.j.info("Great, no buffering proxy detected. Bytes received: "+ie.length),wa(At),At.M=!0,lt(11))}}else Dn(this.i,this.l,ie,null),fa(this,ie);pt==4&&vn(this),this.o&&!this.J&&(pt==4?to(this.j,this):(this.o=!1,Ke(this)))}else Ys(this.g),v==400&&0<ie.indexOf("Unknown SID")?(this.s=3,lt(12)):(this.s=0,lt(13)),vn(this),Qr(this)}}}catch{}finally{}};function xl(u){return u.g?u.u=="GET"&&u.L!=2&&u.j.Ca:!1}function ah(u,m){var v=u.C,I=m.indexOf(`
`,v);return I==-1?$s:(v=Number(m.substring(v,I)),isNaN(v)?ha:(I+=1,I+v>m.length?$s:(m=m.slice(I,I+v),u.C=I+v,m)))}On.prototype.cancel=function(){this.J=!0,vn(this)};function Ke(u){u.S=Date.now()+u.I,bl(u,u.I)}function bl(u,m){if(u.B!=null)throw Error("WatchDog timer not null");u.B=bn(S(u.ba,u),m)}function Ji(u){u.B&&(f.clearTimeout(u.B),u.B=null)}On.prototype.ba=function(){this.B=null;const u=Date.now();0<=u-this.S?(ca(this.i,this.A),this.L!=2&&(Er(),lt(17)),vn(this),this.s=2,Qr(this)):bl(this,this.S-u)};function Qr(u){u.j.G==0||u.J||to(u.j,u)}function vn(u){Ji(u);var m=u.M;m&&typeof m.ma=="function"&&m.ma(),u.M=null,ra(u.U),u.g&&(m=u.g,u.g=null,m.abort(),m.ma())}function fa(u,m){try{var v=u.j;if(v.G!=0&&(v.g==u||qt(v.h,u))){if(!u.K&&qt(v.h,u)&&v.G==3){try{var I=v.Da.g.parse(m)}catch{I=null}if(Array.isArray(I)&&I.length==3){var U=I;if(U[0]==0){e:if(!v.u){if(v.g)if(v.g.F+3e3<u.F)eo(v),Un(v);else break e;Zs(v),lt(18)}}else v.za=U[1],0<v.za-v.T&&37500>U[2]&&v.F&&v.v==0&&!v.C&&(v.C=bn(S(v.Za,v),6e3));if(1>=Vl(v.h)&&v.ca){try{v.ca()}catch{}v.ca=void 0}}else Ar(v,11)}else if((u.K||v.g==u)&&eo(v),!q(m))for(U=v.Da.g.parse(m),m=0;m<U.length;m++){let Le=U[m];if(v.T=Le[0],Le=Le[1],v.G==2)if(Le[0]=="c"){v.K=Le[1],v.ia=Le[2];const At=Le[3];At!=null&&(v.la=At,v.j.info("VER="+v.la));const pt=Le[4];pt!=null&&(v.Aa=pt,v.j.info("SVER="+v.Aa));const wn=Le[5];wn!=null&&typeof wn=="number"&&0<wn&&(I=1.5*wn,v.L=I,v.j.info("backChannelRequestTimeoutMs_="+I)),I=v;const hn=u.g;if(hn){const is=hn.g?hn.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(is){var W=I.h;W.g||is.indexOf("spdy")==-1&&is.indexOf("quic")==-1&&is.indexOf("h2")==-1||(W.j=W.l,W.g=new Set,W.h&&(pa(W,W.h),W.h=null))}if(I.D){const ro=hn.g?hn.g.getResponseHeader("X-HTTP-Session-Id"):null;ro&&(I.ya=ro,qe(I.I,I.D,ro))}}v.G=3,v.l&&v.l.ua(),v.ba&&(v.R=Date.now()-u.F,v.j.info("Handshake RTT: "+v.R+"ms")),I=v;var ie=u;if(I.qa=Gl(I,I.J?I.ia:null,I.W),ie.K){Ol(I.h,ie);var We=ie,Et=I.L;Et&&(We.I=Et),We.B&&(Ji(We),Ke(We)),I.g=ie}else rs(I);0<v.i.length&&nr(v)}else Le[0]!="stop"&&Le[0]!="close"||Ar(v,7);else v.G==3&&(Le[0]=="stop"||Le[0]=="close"?Le[0]=="stop"?Ar(v,7):bt(v):Le[0]!="noop"&&v.l&&v.l.ta(Le),v.v=0)}}Er(4)}catch{}}var Dl=class{constructor(u,m){this.g=u,this.map=m}};function Xi(u){this.l=u||10,f.PerformanceNavigationTiming?(u=f.performance.getEntriesByType("navigation"),u=0<u.length&&(u[0].nextHopProtocol=="hq"||u[0].nextHopProtocol=="h2")):u=!!(f.chrome&&f.chrome.loadTimes&&f.chrome.loadTimes()&&f.chrome.loadTimes().wasFetchedViaSpdy),this.j=u?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function ln(u){return u.h?!0:u.g?u.g.size>=u.j:!1}function Vl(u){return u.h?1:u.g?u.g.size:0}function qt(u,m){return u.h?u.h==m:u.g?u.g.has(m):!1}function pa(u,m){u.g?u.g.add(m):u.h=m}function Ol(u,m){u.h&&u.h==m?u.h=null:u.g&&u.g.has(m)&&u.g.delete(m)}Xi.prototype.cancel=function(){if(this.i=Ll(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const u of this.g.values())u.cancel();this.g.clear()}};function Ll(u){if(u.h!=null)return u.i.concat(u.h.D);if(u.g!=null&&u.g.size!==0){let m=u.i;for(const v of u.g.values())m=m.concat(v.D);return m}return j(u.i)}function Hs(u){if(u.V&&typeof u.V=="function")return u.V();if(typeof Map<"u"&&u instanceof Map||typeof Set<"u"&&u instanceof Set)return Array.from(u.values());if(typeof u=="string")return u.split("");if(p(u)){for(var m=[],v=u.length,I=0;I<v;I++)m.push(u[I]);return m}m=[],v=0;for(I in u)m[v++]=u[I];return m}function qs(u){if(u.na&&typeof u.na=="function")return u.na();if(!u.V||typeof u.V!="function"){if(typeof Map<"u"&&u instanceof Map)return Array.from(u.keys());if(!(typeof Set<"u"&&u instanceof Set)){if(p(u)||typeof u=="string"){var m=[];u=u.length;for(var v=0;v<u;v++)m.push(v);return m}m=[],v=0;for(const I in u)m[v++]=I;return m}}}function Yr(u,m){if(u.forEach&&typeof u.forEach=="function")u.forEach(m,void 0);else if(p(u)||typeof u=="string")Array.prototype.forEach.call(u,m,void 0);else for(var v=qs(u),I=Hs(u),U=I.length,W=0;W<U;W++)m.call(void 0,I[W],v&&v[W],u)}var Zi=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function lh(u,m){if(u){u=u.split("&");for(var v=0;v<u.length;v++){var I=u[v].indexOf("="),U=null;if(0<=I){var W=u[v].substring(0,I);U=u[v].substring(I+1)}else W=u[v];m(W,U?decodeURIComponent(U.replace(/\+/g," ")):"")}}}function Tr(u){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,u instanceof Tr){this.h=u.h,es(this,u.j),this.o=u.o,this.g=u.g,Jr(this,u.s),this.l=u.l;var m=u.i,v=new Zn;v.i=m.i,m.g&&(v.g=new Map(m.g),v.h=m.h),Xr(this,v),this.m=u.m}else u&&(m=String(u).match(Zi))?(this.h=!1,es(this,m[1]||"",!0),this.o=Oe(m[2]||""),this.g=Oe(m[3]||"",!0),Jr(this,m[4]),this.l=Oe(m[5]||"",!0),Xr(this,m[6]||"",!0),this.m=Oe(m[7]||"")):(this.h=!1,this.i=new Zn(null,this.h))}Tr.prototype.toString=function(){var u=[],m=this.j;m&&u.push(ei(m,Gs,!0),":");var v=this.g;return(v||m=="file")&&(u.push("//"),(m=this.o)&&u.push(ei(m,Gs,!0),"@"),u.push(encodeURIComponent(String(v)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),v=this.s,v!=null&&u.push(":",String(v))),(v=this.l)&&(this.g&&v.charAt(0)!="/"&&u.push("/"),u.push(ei(v,v.charAt(0)=="/"?Fl:jl,!0))),(v=this.i.toString())&&u.push("?",v),(v=this.m)&&u.push("#",ei(v,ma)),u.join("")};function un(u){return new Tr(u)}function es(u,m,v){u.j=v?Oe(m,!0):m,u.j&&(u.j=u.j.replace(/:$/,""))}function Jr(u,m){if(m){if(m=Number(m),isNaN(m)||0>m)throw Error("Bad port number "+m);u.s=m}else u.s=null}function Xr(u,m,v){m instanceof Zn?(u.i=m,er(u.i,u.h)):(v||(m=ei(m,Ul)),u.i=new Zn(m,u.h))}function qe(u,m,v){u.i.set(m,v)}function Zr(u){return qe(u,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),u}function Oe(u,m){return u?m?decodeURI(u.replace(/%25/g,"%2525")):decodeURIComponent(u):""}function ei(u,m,v){return typeof u=="string"?(u=encodeURI(u).replace(m,Ml),v&&(u=u.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),u):null}function Ml(u){return u=u.charCodeAt(0),"%"+(u>>4&15).toString(16)+(u&15).toString(16)}var Gs=/[#\/\?@]/g,jl=/[#\?:]/g,Fl=/[#\?]/g,Ul=/[#\?@]/g,ma=/#/g;function Zn(u,m){this.h=this.g=null,this.i=u||null,this.j=!!m}function xt(u){u.g||(u.g=new Map,u.h=0,u.i&&lh(u.i,function(m,v){u.add(decodeURIComponent(m.replace(/\+/g," ")),v)}))}n=Zn.prototype,n.add=function(u,m){xt(this),this.i=null,u=_n(this,u);var v=this.g.get(u);return v||this.g.set(u,v=[]),v.push(m),this.h+=1,this};function Ln(u,m){xt(u),m=_n(u,m),u.g.has(m)&&(u.i=null,u.h-=u.g.get(m).length,u.g.delete(m))}function Mn(u,m){return xt(u),m=_n(u,m),u.g.has(m)}n.forEach=function(u,m){xt(this),this.g.forEach(function(v,I){v.forEach(function(U){u.call(m,U,I,this)},this)},this)},n.na=function(){xt(this);const u=Array.from(this.g.values()),m=Array.from(this.g.keys()),v=[];for(let I=0;I<m.length;I++){const U=u[I];for(let W=0;W<U.length;W++)v.push(m[I])}return v},n.V=function(u){xt(this);let m=[];if(typeof u=="string")Mn(this,u)&&(m=m.concat(this.g.get(_n(this,u))));else{u=Array.from(this.g.values());for(let v=0;v<u.length;v++)m=m.concat(u[v])}return m},n.set=function(u,m){return xt(this),this.i=null,u=_n(this,u),Mn(this,u)&&(this.h-=this.g.get(u).length),this.g.set(u,[m]),this.h+=1,this},n.get=function(u,m){return u?(u=this.V(u),0<u.length?String(u[0]):m):m};function ti(u,m,v){Ln(u,m),0<v.length&&(u.i=null,u.g.set(_n(u,m),j(v)),u.h+=v.length)}n.toString=function(){if(this.i)return this.i;if(!this.g)return"";const u=[],m=Array.from(this.g.keys());for(var v=0;v<m.length;v++){var I=m[v];const W=encodeURIComponent(String(I)),ie=this.V(I);for(I=0;I<ie.length;I++){var U=W;ie[I]!==""&&(U+="="+encodeURIComponent(String(ie[I]))),u.push(U)}}return this.i=u.join("&")};function _n(u,m){return m=String(m),u.j&&(m=m.toLowerCase()),m}function er(u,m){m&&!u.j&&(xt(u),u.i=null,u.g.forEach(function(v,I){var U=I.toLowerCase();I!=U&&(Ln(this,I),ti(this,U,v))},u)),u.j=m}function uh(u,m){const v=new Ki;if(f.Image){const I=new Image;I.onload=V(Yt,v,"TestLoadImage: loaded",!0,m,I),I.onerror=V(Yt,v,"TestLoadImage: error",!1,m,I),I.onabort=V(Yt,v,"TestLoadImage: abort",!1,m,I),I.ontimeout=V(Yt,v,"TestLoadImage: timeout",!1,m,I),f.setTimeout(function(){I.ontimeout&&I.ontimeout()},1e4),I.src=u}else m(!1)}function zl(u,m){const v=new Ki,I=new AbortController,U=setTimeout(()=>{I.abort(),Yt(v,"TestPingServer: timeout",!1,m)},1e4);fetch(u,{signal:I.signal}).then(W=>{clearTimeout(U),W.ok?Yt(v,"TestPingServer: ok",!0,m):Yt(v,"TestPingServer: server error",!1,m)}).catch(()=>{clearTimeout(U),Yt(v,"TestPingServer: error",!1,m)})}function Yt(u,m,v,I,U){try{U&&(U.onload=null,U.onerror=null,U.onabort=null,U.ontimeout=null),I(v)}catch{}}function ch(){this.g=new oa}function Bl(u,m,v){const I=v||"";try{Yr(u,function(U,W){let ie=U;y(U)&&(ie=ia(U)),m.push(I+W+"="+encodeURIComponent(ie))})}catch(U){throw m.push(I+"type="+encodeURIComponent("_badmap")),U}}function Ir(u){this.l=u.Ub||null,this.j=u.eb||!1}O(Ir,qi),Ir.prototype.g=function(){return new ts(this.l,this.j)},Ir.prototype.i=(function(u){return function(){return u}})({});function ts(u,m){_t.call(this),this.D=u,this.o=m,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}O(ts,_t),n=ts.prototype,n.open=function(u,m){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=u,this.A=m,this.readyState=1,Fn(this)},n.send=function(u){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const m={headers:this.u,method:this.B,credentials:this.m,cache:void 0};u&&(m.body=u),(this.D||f).fetch(new Request(this.A,m)).then(this.Sa.bind(this),this.ga.bind(this))},n.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,jn(this)),this.readyState=0},n.Sa=function(u){if(this.g&&(this.l=u,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=u.headers,this.readyState=2,Fn(this)),this.g&&(this.readyState=3,Fn(this),this.g)))if(this.responseType==="arraybuffer")u.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof f.ReadableStream<"u"&&"body"in u){if(this.j=u.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;$l(this)}else u.text().then(this.Ra.bind(this),this.ga.bind(this))};function $l(u){u.j.read().then(u.Pa.bind(u)).catch(u.ga.bind(u))}n.Pa=function(u){if(this.g){if(this.o&&u.value)this.response.push(u.value);else if(!this.o){var m=u.value?u.value:new Uint8Array(0);(m=this.v.decode(m,{stream:!u.done}))&&(this.response=this.responseText+=m)}u.done?jn(this):Fn(this),this.readyState==3&&$l(this)}},n.Ra=function(u){this.g&&(this.response=this.responseText=u,jn(this))},n.Qa=function(u){this.g&&(this.response=u,jn(this))},n.ga=function(){this.g&&jn(this)};function jn(u){u.readyState=4,u.l=null,u.j=null,u.v=null,Fn(u)}n.setRequestHeader=function(u,m){this.u.append(u,m)},n.getResponseHeader=function(u){return this.h&&this.h.get(u.toLowerCase())||""},n.getAllResponseHeaders=function(){if(!this.h)return"";const u=[],m=this.h.entries();for(var v=m.next();!v.done;)v=v.value,u.push(v[0]+": "+v[1]),v=m.next();return u.join(`\r
`)};function Fn(u){u.onreadystatechange&&u.onreadystatechange.call(u)}Object.defineProperty(ts.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(u){this.m=u?"include":"same-origin"}});function Sr(u){let m="";return re(u,function(v,I){m+=I,m+=":",m+=v,m+=`\r
`}),m}function ni(u,m,v){e:{for(I in v){var I=!1;break e}I=!0}I||(v=Sr(v),typeof u=="string"?v!=null&&encodeURIComponent(String(v)):qe(u,m,v))}function et(u){_t.call(this),this.headers=new Map,this.o=u||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}O(et,_t);var hh=/^https?$/i,ga=["POST","PUT"];n=et.prototype,n.Ha=function(u){this.J=u},n.ea=function(u,m,v,I){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+u);m=m?m.toUpperCase():"GET",this.D=u,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Vn.g(),this.v=this.o?Ms(this.o):Ms(Vn),this.g.onreadystatechange=S(this.Ea,this);try{this.B=!0,this.g.open(m,String(u),!0),this.B=!1}catch(W){ns(this,W);return}if(u=v||"",v=new Map(this.headers),I)if(Object.getPrototypeOf(I)===Object.prototype)for(var U in I)v.set(U,I[U]);else if(typeof I.keys=="function"&&typeof I.get=="function")for(const W of I.keys())v.set(W,I.get(W));else throw Error("Unknown input type for opt_headers: "+String(I));I=Array.from(v.keys()).find(W=>W.toLowerCase()=="content-type"),U=f.FormData&&u instanceof f.FormData,!(0<=Array.prototype.indexOf.call(ga,m,void 0))||I||U||v.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[W,ie]of v)this.g.setRequestHeader(W,ie);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{Qs(this),this.u=!0,this.g.send(u),this.u=!1}catch(W){ns(this,W)}};function ns(u,m){u.h=!1,u.g&&(u.j=!0,u.g.abort(),u.j=!1),u.l=m,u.m=5,Ks(u),cn(u)}function Ks(u){u.A||(u.A=!0,wt(u,"complete"),wt(u,"error"))}n.abort=function(u){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=u||7,wt(this,"complete"),wt(this,"abort"),cn(this))},n.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),cn(this,!0)),et.aa.N.call(this)},n.Ea=function(){this.s||(this.B||this.u||this.j?ya(this):this.bb())},n.bb=function(){ya(this)};function ya(u){if(u.h&&typeof h<"u"&&(!u.v[1]||Jt(u)!=4||u.Z()!=2)){if(u.u&&Jt(u)==4)ta(u.Ea,0,u);else if(wt(u,"readystatechange"),Jt(u)==4){u.h=!1;try{const ie=u.Z();e:switch(ie){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var m=!0;break e;default:m=!1}var v;if(!(v=m)){var I;if(I=ie===0){var U=String(u.D).match(Zi)[1]||null;!U&&f.self&&f.self.location&&(U=f.self.location.protocol.slice(0,-1)),I=!hh.test(U?U.toLowerCase():"")}v=I}if(v)wt(u,"complete"),wt(u,"success");else{u.m=6;try{var W=2<Jt(u)?u.g.statusText:""}catch{W=""}u.l=W+" ["+u.Z()+"]",Ks(u)}}finally{cn(u)}}}}function cn(u,m){if(u.g){Qs(u);const v=u.g,I=u.v[0]?()=>{}:null;u.g=null,u.v=null,m||wt(u,"ready");try{v.onreadystatechange=I}catch{}}}function Qs(u){u.I&&(f.clearTimeout(u.I),u.I=null)}n.isActive=function(){return!!this.g};function Jt(u){return u.g?u.g.readyState:0}n.Z=function(){try{return 2<Jt(this)?this.g.status:-1}catch{return-1}},n.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},n.Oa=function(u){if(this.g){var m=this.g.responseText;return u&&m.indexOf(u)==0&&(m=m.substring(u.length)),sa(m)}};function va(u){try{if(!u.g)return null;if("response"in u.g)return u.g.response;switch(u.H){case"":case"text":return u.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in u.g)return u.g.mozResponseArrayBuffer}return null}catch{return null}}function Ys(u){const m={};u=(u.g&&2<=Jt(u)&&u.g.getAllResponseHeaders()||"").split(`\r
`);for(let I=0;I<u.length;I++){if(q(u[I]))continue;var v=N(u[I]);const U=v[0];if(v=v[1],typeof v!="string")continue;v=v.trim();const W=m[U]||[];m[U]=W,W.push(v)}k(m,function(I){return I.join(", ")})}n.Ba=function(){return this.m},n.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function tr(u,m,v){return v&&v.internalChannelParams&&v.internalChannelParams[u]||m}function _a(u){this.Aa=0,this.i=[],this.j=new Ki,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=tr("failFast",!1,u),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=tr("baseRetryDelayMs",5e3,u),this.cb=tr("retryDelaySeedMs",1e4,u),this.Wa=tr("forwardChannelMaxRetries",2,u),this.wa=tr("forwardChannelRequestTimeoutMs",2e4,u),this.pa=u&&u.xmlHttpFactory||void 0,this.Xa=u&&u.Tb||void 0,this.Ca=u&&u.useFetchStreams||!1,this.L=void 0,this.J=u&&u.supportsCrossDomainXhr||!1,this.K="",this.h=new Xi(u&&u.concurrentRequestLimit),this.Da=new ch,this.P=u&&u.fastHandshake||!1,this.O=u&&u.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=u&&u.Rb||!1,u&&u.xa&&this.j.xa(),u&&u.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&u&&u.detectBufferingProxy||!1,this.ja=void 0,u&&u.longPollingTimeout&&0<u.longPollingTimeout&&(this.ja=u.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}n=_a.prototype,n.la=8,n.G=1,n.connect=function(u,m,v,I){lt(0),this.W=u,this.H=m||{},v&&I!==void 0&&(this.H.OSID=v,this.H.OAID=I),this.F=this.X,this.I=Gl(this,null,this.W),nr(this)};function bt(u){if(Js(u),u.G==3){var m=u.U++,v=un(u.I);if(qe(v,"SID",u.K),qe(v,"RID",m),qe(v,"TYPE","terminate"),Pr(u,v),m=new On(u,u.j,m),m.L=2,m.v=Zr(un(v)),v=!1,f.navigator&&f.navigator.sendBeacon)try{v=f.navigator.sendBeacon(m.v.toString(),"")}catch{}!v&&f.Image&&(new Image().src=m.v,v=!0),v||(m.g=Kl(m.j,null),m.g.ea(m.v)),m.F=Date.now(),Ke(m)}ql(u)}function Un(u){u.g&&(wa(u),u.g.cancel(),u.g=null)}function Js(u){Un(u),u.u&&(f.clearTimeout(u.u),u.u=null),eo(u),u.h.cancel(),u.s&&(typeof u.s=="number"&&f.clearTimeout(u.s),u.s=null)}function nr(u){if(!ln(u.h)&&!u.s){u.s=!0;var m=u.Ga;ze||ce(),oe||(ze(),oe=!0),ve.add(m,u),u.B=0}}function dh(u,m){return Vl(u.h)>=u.h.j-(u.s?1:0)?!1:u.s?(u.i=m.D.concat(u.i),!0):u.G==1||u.G==2||u.B>=(u.Va?0:u.Wa)?!1:(u.s=bn(S(u.Ga,u,m),Hl(u,u.B)),u.B++,!0)}n.Ga=function(u){if(this.s)if(this.s=null,this.G==1){if(!u){this.U=Math.floor(1e5*Math.random()),u=this.U++;const U=new On(this,this.j,u);let W=this.o;if(this.S&&(W?(W=P(W),b(W,this.S)):W=this.S),this.m!==null||this.O||(U.H=W,W=null),this.P)e:{for(var m=0,v=0;v<this.i.length;v++){t:{var I=this.i[v];if("__data__"in I.map&&(I=I.map.__data__,typeof I=="string")){I=I.length;break t}I=void 0}if(I===void 0)break;if(m+=I,4096<m){m=v;break e}if(m===4096||v===this.i.length-1){m=v+1;break e}}m=1e3}else m=1e3;m=ri(this,U,m),v=un(this.I),qe(v,"RID",u),qe(v,"CVER",22),this.D&&qe(v,"X-HTTP-Session-Id",this.D),Pr(this,v),W&&(this.O?m="headers="+encodeURIComponent(String(Sr(W)))+"&"+m:this.m&&ni(v,this.m,W)),pa(this.h,U),this.Ua&&qe(v,"TYPE","init"),this.P?(qe(v,"$req",m),qe(v,"SID","null"),U.T=!0,Ws(U,v,null)):Ws(U,v,m),this.G=2}}else this.G==3&&(u?Xs(this,u):this.i.length==0||ln(this.h)||Xs(this))};function Xs(u,m){var v;m?v=m.l:v=u.U++;const I=un(u.I);qe(I,"SID",u.K),qe(I,"RID",v),qe(I,"AID",u.T),Pr(u,I),u.m&&u.o&&ni(I,u.m,u.o),v=new On(u,u.j,v,u.B+1),u.m===null&&(v.H=u.o),m&&(u.i=m.D.concat(u.i)),m=ri(u,v,1e3),v.I=Math.round(.5*u.wa)+Math.round(.5*u.wa*Math.random()),pa(u.h,v),Ws(v,I,m)}function Pr(u,m){u.H&&re(u.H,function(v,I){qe(m,I,v)}),u.l&&Yr({},function(v,I){qe(m,I,v)})}function ri(u,m,v){v=Math.min(u.i.length,v);var I=u.l?S(u.l.Na,u.l,u):null;e:{var U=u.i;let W=-1;for(;;){const ie=["count="+v];W==-1?0<v?(W=U[0].g,ie.push("ofs="+W)):W=0:ie.push("ofs="+W);let We=!0;for(let Et=0;Et<v;Et++){let Le=U[Et].g;const At=U[Et].map;if(Le-=W,0>Le)W=Math.max(0,U[Et].g-100),We=!1;else try{Bl(At,ie,"req"+Le+"_")}catch{I&&I(At)}}if(We){I=ie.join("&");break e}}}return u=u.i.splice(0,v),m.D=u,I}function rs(u){if(!u.g&&!u.u){u.Y=1;var m=u.Fa;ze||ce(),oe||(ze(),oe=!0),ve.add(m,u),u.v=0}}function Zs(u){return u.g||u.u||3<=u.v?!1:(u.Y++,u.u=bn(S(u.Fa,u),Hl(u,u.v)),u.v++,!0)}n.Fa=function(){if(this.u=null,Wl(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var u=2*this.R;this.j.info("BP detection timer enabled: "+u),this.A=bn(S(this.ab,this),u)}},n.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,lt(10),Un(this),Wl(this))};function wa(u){u.A!=null&&(f.clearTimeout(u.A),u.A=null)}function Wl(u){u.g=new On(u,u.j,"rpc",u.Y),u.m===null&&(u.g.H=u.o),u.g.O=0;var m=un(u.qa);qe(m,"RID","rpc"),qe(m,"SID",u.K),qe(m,"AID",u.T),qe(m,"CI",u.F?"0":"1"),!u.F&&u.ja&&qe(m,"TO",u.ja),qe(m,"TYPE","xmlhttp"),Pr(u,m),u.m&&u.o&&ni(m,u.m,u.o),u.L&&(u.g.I=u.L);var v=u.g;u=u.ia,v.L=1,v.v=Zr(un(m)),v.m=null,v.P=!0,da(v,u)}n.Za=function(){this.C!=null&&(this.C=null,Un(this),Zs(this),lt(19))};function eo(u){u.C!=null&&(f.clearTimeout(u.C),u.C=null)}function to(u,m){var v=null;if(u.g==m){eo(u),wa(u),u.g=null;var I=2}else if(qt(u.h,m))v=m.D,Ol(u.h,m),I=1;else return;if(u.G!=0){if(m.o)if(I==1){v=m.m?m.m.length:0,m=Date.now()-m.F;var U=u.B;I=Gi(),wt(I,new Us(I,v)),nr(u)}else rs(u);else if(U=m.s,U==3||U==0&&0<m.X||!(I==1&&dh(u,m)||I==2&&Zs(u)))switch(v&&0<v.length&&(m=u.h,m.i=m.i.concat(v)),U){case 1:Ar(u,5);break;case 4:Ar(u,10);break;case 3:Ar(u,6);break;default:Ar(u,2)}}}function Hl(u,m){let v=u.Ta+Math.floor(Math.random()*u.cb);return u.isActive()||(v*=2),v*m}function Ar(u,m){if(u.j.info("Error code "+m),m==2){var v=S(u.fb,u),I=u.Xa;const U=!I;I=new Tr(I||"//www.google.com/images/cleardot.gif"),f.location&&f.location.protocol=="http"||es(I,"https"),Zr(I),U?uh(I.toString(),v):zl(I.toString(),v)}else lt(2);u.G=0,u.l&&u.l.sa(m),ql(u),Js(u)}n.fb=function(u){u?(this.j.info("Successfully pinged google.com"),lt(2)):(this.j.info("Failed to ping google.com"),lt(1))};function ql(u){if(u.G=0,u.ka=[],u.l){const m=Ll(u.h);(m.length!=0||u.i.length!=0)&&(L(u.ka,m),L(u.ka,u.i),u.h.i.length=0,j(u.i),u.i.length=0),u.l.ra()}}function Gl(u,m,v){var I=v instanceof Tr?un(v):new Tr(v);if(I.g!="")m&&(I.g=m+"."+I.g),Jr(I,I.s);else{var U=f.location;I=U.protocol,m=m?m+"."+U.hostname:U.hostname,U=+U.port;var W=new Tr(null);I&&es(W,I),m&&(W.g=m),U&&Jr(W,U),v&&(W.l=v),I=W}return v=u.D,m=u.ya,v&&m&&qe(I,v,m),qe(I,"VER",u.la),Pr(u,I),I}function Kl(u,m,v){if(m&&!u.J)throw Error("Can't create secondary domain capable XhrIo object.");return m=u.Ca&&!u.pa?new et(new Ir({eb:v})):new et(u.pa),m.Ha(u.J),m}n.isActive=function(){return!!this.l&&this.l.isActive(this)};function Ea(){}n=Ea.prototype,n.ua=function(){},n.ta=function(){},n.sa=function(){},n.ra=function(){},n.isActive=function(){return!0},n.Na=function(){};function no(){}no.prototype.g=function(u,m){return new Gt(u,m)};function Gt(u,m){_t.call(this),this.g=new _a(m),this.l=u,this.h=m&&m.messageUrlParams||null,u=m&&m.messageHeaders||null,m&&m.clientProtocolHeaderRequired&&(u?u["X-Client-Protocol"]="webchannel":u={"X-Client-Protocol":"webchannel"}),this.g.o=u,u=m&&m.initMessageHeaders||null,m&&m.messageContentType&&(u?u["X-WebChannel-Content-Type"]=m.messageContentType:u={"X-WebChannel-Content-Type":m.messageContentType}),m&&m.va&&(u?u["X-WebChannel-Client-Profile"]=m.va:u={"X-WebChannel-Client-Profile":m.va}),this.g.S=u,(u=m&&m.Sb)&&!q(u)&&(this.g.m=u),this.v=m&&m.supportsCrossDomainXhr||!1,this.u=m&&m.sendRawJson||!1,(m=m&&m.httpSessionIdParam)&&!q(m)&&(this.g.D=m,u=this.h,u!==null&&m in u&&(u=this.h,m in u&&delete u[m])),this.j=new rr(this)}O(Gt,_t),Gt.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},Gt.prototype.close=function(){bt(this.g)},Gt.prototype.o=function(u){var m=this.g;if(typeof u=="string"){var v={};v.__data__=u,u=v}else this.u&&(v={},v.__data__=ia(u),u=v);m.i.push(new Dl(m.Ya++,u)),m.G==3&&nr(m)},Gt.prototype.N=function(){this.g.l=null,delete this.j,bt(this.g),delete this.g,Gt.aa.N.call(this)};function Ql(u){Jn.call(this),u.__headers__&&(this.headers=u.__headers__,this.statusCode=u.__status__,delete u.__headers__,delete u.__status__);var m=u.__sm__;if(m){e:{for(const v in m){u=v;break e}u=void 0}(this.i=u)&&(u=this.i,m=m!==null&&u in m?m[u]:void 0),this.data=m}else this.data=u}O(Ql,Jn);function Yl(){Fs.call(this),this.status=1}O(Yl,Fs);function rr(u){this.g=u}O(rr,Ea),rr.prototype.ua=function(){wt(this.g,"a")},rr.prototype.ta=function(u){wt(this.g,new Ql(u))},rr.prototype.sa=function(u){wt(this.g,new Yl)},rr.prototype.ra=function(){wt(this.g,"b")},no.prototype.createWebChannel=no.prototype.g,Gt.prototype.send=Gt.prototype.o,Gt.prototype.open=Gt.prototype.m,Gt.prototype.close=Gt.prototype.close,G_=function(){return new no},q_=function(){return Gi()},H_=Xn,cf={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},Bs.NO_ERROR=0,Bs.TIMEOUT=8,Bs.HTTP_ERROR=6,nc=Bs,kl.COMPLETE="complete",W_=kl,js.EventType=yn,yn.OPEN="a",yn.CLOSE="b",yn.ERROR="c",yn.MESSAGE="d",_t.prototype.listen=_t.prototype.K,Ka=js,et.prototype.listenOnce=et.prototype.L,et.prototype.getLastError=et.prototype.Ka,et.prototype.getLastErrorCode=et.prototype.Ba,et.prototype.getStatus=et.prototype.Z,et.prototype.getResponseJson=et.prototype.Oa,et.prototype.getResponseText=et.prototype.oa,et.prototype.send=et.prototype.ea,et.prototype.setWithCredentials=et.prototype.Ha,$_=et}).apply(typeof Hu<"u"?Hu:typeof self<"u"?self:typeof window<"u"?window:{});const Dy="@firebase/firestore",Vy="4.8.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $t{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}$t.UNAUTHENTICATED=new $t(null),$t.GOOGLE_CREDENTIALS=new $t("google-credentials-uid"),$t.FIRST_PARTY=new $t("first-party-uid"),$t.MOCK_USER=new $t("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Go="11.10.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const As=new Of("@firebase/firestore");function Po(){return As.logLevel}function de(n,...e){if(As.logLevel<=De.DEBUG){const t=e.map(Gf);As.debug(`Firestore (${Go}): ${n}`,...t)}}function Br(n,...e){if(As.logLevel<=De.ERROR){const t=e.map(Gf);As.error(`Firestore (${Go}): ${n}`,...t)}}function bi(n,...e){if(As.logLevel<=De.WARN){const t=e.map(Gf);As.warn(`Firestore (${Go}): ${n}`,...t)}}function Gf(n){if(typeof n=="string")return n;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return(function(t){return JSON.stringify(t)})(n)}catch{return n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Se(n,e,t){let i="Unexpected state";typeof e=="string"?i=e:t=e,K_(n,i,t)}function K_(n,e,t){let i=`FIRESTORE (${Go}) INTERNAL ASSERTION FAILED: ${e} (ID: ${n.toString(16)})`;if(t!==void 0)try{i+=" CONTEXT: "+JSON.stringify(t)}catch{i+=" CONTEXT: "+t}throw Br(i),new Error(i)}function Be(n,e,t,i){let o="Unexpected state";typeof t=="string"?o=t:i=t,n||K_(e,o,i)}function Re(n,e){return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const G={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class ue extends qr{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jr{constructor(){this.promise=new Promise(((e,t)=>{this.resolve=e,this.reject=t}))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Q_{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class BP{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable((()=>t($t.UNAUTHENTICATED)))}shutdown(){}}class $P{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable((()=>t(this.token.user)))}shutdown(){this.changeListener=null}}class WP{constructor(e){this.t=e,this.currentUser=$t.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){Be(this.o===void 0,42304);let i=this.i;const o=p=>this.i!==i?(i=this.i,t(p)):Promise.resolve();let l=new jr;this.o=()=>{this.i++,this.currentUser=this.u(),l.resolve(),l=new jr,e.enqueueRetryable((()=>o(this.currentUser)))};const h=()=>{const p=l;e.enqueueRetryable((async()=>{await p.promise,await o(this.currentUser)}))},f=p=>{de("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=p,this.o&&(this.auth.addAuthTokenListener(this.o),h())};this.t.onInit((p=>f(p))),setTimeout((()=>{if(!this.auth){const p=this.t.getImmediate({optional:!0});p?f(p):(de("FirebaseAuthCredentialsProvider","Auth not yet detected"),l.resolve(),l=new jr)}}),0),h()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then((i=>this.i!==e?(de("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):i?(Be(typeof i.accessToken=="string",31837,{l:i}),new Q_(i.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return Be(e===null||typeof e=="string",2055,{h:e}),new $t(e)}}class HP{constructor(e,t,i){this.P=e,this.T=t,this.I=i,this.type="FirstParty",this.user=$t.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class qP{constructor(e,t,i){this.P=e,this.T=t,this.I=i}getToken(){return Promise.resolve(new HP(this.P,this.T,this.I))}start(e,t){e.enqueueRetryable((()=>t($t.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class Oy{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class GP{constructor(e,t){this.V=t,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,Cn(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,t){Be(this.o===void 0,3512);const i=l=>{l.error!=null&&de("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${l.error.message}`);const h=l.token!==this.m;return this.m=l.token,de("FirebaseAppCheckTokenProvider",`Received ${h?"new":"existing"} token.`),h?t(l.token):Promise.resolve()};this.o=l=>{e.enqueueRetryable((()=>i(l)))};const o=l=>{de("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=l,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit((l=>o(l))),setTimeout((()=>{if(!this.appCheck){const l=this.V.getImmediate({optional:!0});l?o(l):de("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){if(this.p)return Promise.resolve(new Oy(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((t=>t?(Be(typeof t.token=="string",44558,{tokenResult:t}),this.m=t.token,new Oy(t.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function KP(n){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let i=0;i<n;i++)t[i]=Math.floor(256*Math.random());return t}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Y_(){return new TextEncoder}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kf{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(4.129032258064516);let i="";for(;i.length<20;){const o=KP(40);for(let l=0;l<o.length;++l)i.length<20&&o[l]<t&&(i+=e.charAt(o[l]%62))}return i}}function Ne(n,e){return n<e?-1:n>e?1:0}function hf(n,e){let t=0;for(;t<n.length&&t<e.length;){const i=n.codePointAt(t),o=e.codePointAt(t);if(i!==o){if(i<128&&o<128)return Ne(i,o);{const l=Y_(),h=QP(l.encode(Ly(n,t)),l.encode(Ly(e,t)));return h!==0?h:Ne(i,o)}}t+=i>65535?2:1}return Ne(n.length,e.length)}function Ly(n,e){return n.codePointAt(e)>65535?n.substring(e,e+2):n.substring(e,e+1)}function QP(n,e){for(let t=0;t<n.length&&t<e.length;++t)if(n[t]!==e[t])return Ne(n[t],e[t]);return Ne(n.length,e.length)}function Lo(n,e,t){return n.length===e.length&&n.every(((i,o)=>t(i,e[o])))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const My="__name__";class lr{constructor(e,t,i){t===void 0?t=0:t>e.length&&Se(637,{offset:t,range:e.length}),i===void 0?i=e.length-t:i>e.length-t&&Se(1746,{length:i,range:e.length-t}),this.segments=e,this.offset=t,this.len=i}get length(){return this.len}isEqual(e){return lr.comparator(this,e)===0}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof lr?e.forEach((i=>{t.push(i)})):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,i=this.limit();t<i;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const i=Math.min(e.length,t.length);for(let o=0;o<i;o++){const l=lr.compareSegments(e.get(o),t.get(o));if(l!==0)return l}return Ne(e.length,t.length)}static compareSegments(e,t){const i=lr.isNumericId(e),o=lr.isNumericId(t);return i&&!o?-1:!i&&o?1:i&&o?lr.extractNumericId(e).compare(lr.extractNumericId(t)):hf(e,t)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return Ni.fromString(e.substring(4,e.length-2))}}class Ye extends lr{construct(e,t,i){return new Ye(e,t,i)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const t=[];for(const i of e){if(i.indexOf("//")>=0)throw new ue(G.INVALID_ARGUMENT,`Invalid segment (${i}). Paths must not contain // in them.`);t.push(...i.split("/").filter((o=>o.length>0)))}return new Ye(t)}static emptyPath(){return new Ye([])}}const YP=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Lt extends lr{construct(e,t,i){return new Lt(e,t,i)}static isValidIdentifier(e){return YP.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Lt.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===My}static keyField(){return new Lt([My])}static fromServerFormat(e){const t=[];let i="",o=0;const l=()=>{if(i.length===0)throw new ue(G.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(i),i=""};let h=!1;for(;o<e.length;){const f=e[o];if(f==="\\"){if(o+1===e.length)throw new ue(G.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const p=e[o+1];if(p!=="\\"&&p!=="."&&p!=="`")throw new ue(G.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);i+=p,o+=2}else f==="`"?(h=!h,o++):f!=="."||h?(i+=f,o++):(l(),o++)}if(l(),h)throw new ue(G.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Lt(t)}static emptyPath(){return new Lt([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _e{constructor(e){this.path=e}static fromPath(e){return new _e(Ye.fromString(e))}static fromName(e){return new _e(Ye.fromString(e).popFirst(5))}static empty(){return new _e(Ye.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Ye.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return Ye.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new _e(new Ye(e.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function J_(n,e,t){if(!t)throw new ue(G.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function JP(n,e,t,i){if(e===!0&&i===!0)throw new ue(G.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function jy(n){if(!_e.isDocumentKey(n))throw new ue(G.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function Fy(n){if(_e.isDocumentKey(n))throw new ue(G.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function X_(n){return typeof n=="object"&&n!==null&&(Object.getPrototypeOf(n)===Object.prototype||Object.getPrototypeOf(n)===null)}function Uc(n){if(n===void 0)return"undefined";if(n===null)return"null";if(typeof n=="string")return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if(typeof n=="number"||typeof n=="boolean")return""+n;if(typeof n=="object"){if(n instanceof Array)return"an array";{const e=(function(i){return i.constructor?i.constructor.name:null})(n);return e?`a custom ${e} object`:"an object"}}return typeof n=="function"?"a function":Se(12329,{type:typeof n})}function an(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new ue(G.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=Uc(n);throw new ue(G.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vt(n,e){const t={typeString:n};return e&&(t.value=e),t}function wl(n,e){if(!X_(n))throw new ue(G.INVALID_ARGUMENT,"JSON must be an object");let t;for(const i in e)if(e[i]){const o=e[i].typeString,l="value"in e[i]?{value:e[i].value}:void 0;if(!(i in n)){t=`JSON missing required field: '${i}'`;break}const h=n[i];if(o&&typeof h!==o){t=`JSON field '${i}' must be a ${o}.`;break}if(l!==void 0&&h!==l.value){t=`Expected '${i}' field to equal '${l.value}'`;break}}if(t)throw new ue(G.INVALID_ARGUMENT,t);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Uy=-62135596800,zy=1e6;class Ge{static now(){return Ge.fromMillis(Date.now())}static fromDate(e){return Ge.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),i=Math.floor((e-1e3*t)*zy);return new Ge(t,i)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new ue(G.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new ue(G.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<Uy)throw new ue(G.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new ue(G.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/zy}_compareTo(e){return this.seconds===e.seconds?Ne(this.nanoseconds,e.nanoseconds):Ne(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:Ge._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(wl(e,Ge._jsonSchema))return new Ge(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-Uy;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}Ge._jsonSchemaVersion="firestore/timestamp/1.0",Ge._jsonSchema={type:vt("string",Ge._jsonSchemaVersion),seconds:vt("number"),nanoseconds:vt("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ae{static fromTimestamp(e){return new Ae(e)}static min(){return new Ae(new Ge(0,0))}static max(){return new Ae(new Ge(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ll=-1;function XP(n,e){const t=n.toTimestamp().seconds,i=n.toTimestamp().nanoseconds+1,o=Ae.fromTimestamp(i===1e9?new Ge(t+1,0):new Ge(t,i));return new Di(o,_e.empty(),e)}function ZP(n){return new Di(n.readTime,n.key,ll)}class Di{constructor(e,t,i){this.readTime=e,this.documentKey=t,this.largestBatchId=i}static min(){return new Di(Ae.min(),_e.empty(),ll)}static max(){return new Di(Ae.max(),_e.empty(),ll)}}function eA(n,e){let t=n.readTime.compareTo(e.readTime);return t!==0?t:(t=_e.comparator(n.documentKey,e.documentKey),t!==0?t:Ne(n.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tA="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class nA{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ko(n){if(n.code!==G.FAILED_PRECONDITION||n.message!==tA)throw n;de("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Y{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)}),(t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)}))}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&Se(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new Y(((i,o)=>{this.nextCallback=l=>{this.wrapSuccess(e,l).next(i,o)},this.catchCallback=l=>{this.wrapFailure(t,l).next(i,o)}}))}toPromise(){return new Promise(((e,t)=>{this.next(e,t)}))}wrapUserFunction(e){try{const t=e();return t instanceof Y?t:Y.resolve(t)}catch(t){return Y.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction((()=>e(t))):Y.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction((()=>e(t))):Y.reject(t)}static resolve(e){return new Y(((t,i)=>{t(e)}))}static reject(e){return new Y(((t,i)=>{i(e)}))}static waitFor(e){return new Y(((t,i)=>{let o=0,l=0,h=!1;e.forEach((f=>{++o,f.next((()=>{++l,h&&l===o&&t()}),(p=>i(p)))})),h=!0,l===o&&t()}))}static or(e){let t=Y.resolve(!1);for(const i of e)t=t.next((o=>o?Y.resolve(o):i()));return t}static forEach(e,t){const i=[];return e.forEach(((o,l)=>{i.push(t.call(this,o,l))})),this.waitFor(i)}static mapArray(e,t){return new Y(((i,o)=>{const l=e.length,h=new Array(l);let f=0;for(let p=0;p<l;p++){const y=p;t(e[y]).next((w=>{h[y]=w,++f,f===l&&i(h)}),(w=>o(w)))}}))}static doWhile(e,t){return new Y(((i,o)=>{const l=()=>{e()===!0?t().next((()=>{l()}),o):i()};l()}))}}function rA(n){const e=n.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}function Qo(n){return n.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zc{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=i=>this._e(i),this.ae=i=>t.writeSequenceNumber(i))}_e(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ae&&this.ae(e),e}}zc.ue=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qf=-1;function Bc(n){return n==null}function vc(n){return n===0&&1/n==-1/0}function iA(n){return typeof n=="number"&&Number.isInteger(n)&&!vc(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Z_="";function sA(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=By(e)),e=oA(n.get(t),e);return By(e)}function oA(n,e){let t=e;const i=n.length;for(let o=0;o<i;o++){const l=n.charAt(o);switch(l){case"\0":t+="";break;case Z_:t+="";break;default:t+=l}}return t}function By(n){return n+Z_+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $y(n){let e=0;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function zi(n,e){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function ew(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class it{constructor(e,t){this.comparator=e,this.root=t||Ot.EMPTY}insert(e,t){return new it(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,Ot.BLACK,null,null))}remove(e){return new it(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Ot.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const i=this.comparator(e,t.key);if(i===0)return t.value;i<0?t=t.left:i>0&&(t=t.right)}return null}indexOf(e){let t=0,i=this.root;for(;!i.isEmpty();){const o=this.comparator(e,i.key);if(o===0)return t+i.left.size;o<0?i=i.left:(t+=i.left.size+1,i=i.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((t,i)=>(e(t,i),!1)))}toString(){const e=[];return this.inorderTraversal(((t,i)=>(e.push(`${t}:${i}`),!1))),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new qu(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new qu(this.root,e,this.comparator,!1)}getReverseIterator(){return new qu(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new qu(this.root,e,this.comparator,!0)}}class qu{constructor(e,t,i,o){this.isReverse=o,this.nodeStack=[];let l=1;for(;!e.isEmpty();)if(l=t?i(e.key,t):1,t&&o&&(l*=-1),l<0)e=this.isReverse?e.left:e.right;else{if(l===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Ot{constructor(e,t,i,o,l){this.key=e,this.value=t,this.color=i??Ot.RED,this.left=o??Ot.EMPTY,this.right=l??Ot.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,i,o,l){return new Ot(e??this.key,t??this.value,i??this.color,o??this.left,l??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,i){let o=this;const l=i(e,o.key);return o=l<0?o.copy(null,null,null,o.left.insert(e,t,i),null):l===0?o.copy(null,t,null,null,null):o.copy(null,null,null,null,o.right.insert(e,t,i)),o.fixUp()}removeMin(){if(this.left.isEmpty())return Ot.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let i,o=this;if(t(e,o.key)<0)o.left.isEmpty()||o.left.isRed()||o.left.left.isRed()||(o=o.moveRedLeft()),o=o.copy(null,null,null,o.left.remove(e,t),null);else{if(o.left.isRed()&&(o=o.rotateRight()),o.right.isEmpty()||o.right.isRed()||o.right.left.isRed()||(o=o.moveRedRight()),t(e,o.key)===0){if(o.right.isEmpty())return Ot.EMPTY;i=o.right.min(),o=o.copy(i.key,i.value,null,null,o.right.removeMin())}o=o.copy(null,null,null,null,o.right.remove(e,t))}return o.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Ot.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Ot.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw Se(43730,{key:this.key,value:this.value});if(this.right.isRed())throw Se(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw Se(27949);return e+(this.isRed()?0:1)}}Ot.EMPTY=null,Ot.RED=!0,Ot.BLACK=!1;Ot.EMPTY=new class{constructor(){this.size=0}get key(){throw Se(57766)}get value(){throw Se(16141)}get color(){throw Se(16727)}get left(){throw Se(29726)}get right(){throw Se(36894)}copy(e,t,i,o,l){return this}insert(e,t,i){return new Ot(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class St{constructor(e){this.comparator=e,this.data=new it(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((t,i)=>(e(t),!1)))}forEachInRange(e,t){const i=this.data.getIteratorFrom(e[0]);for(;i.hasNext();){const o=i.getNext();if(this.comparator(o.key,e[1])>=0)return;t(o.key)}}forEachWhile(e,t){let i;for(i=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();i.hasNext();)if(!e(i.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new Wy(this.data.getIterator())}getIteratorFrom(e){return new Wy(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach((i=>{t=t.add(i)})),t}isEqual(e){if(!(e instanceof St)||this.size!==e.size)return!1;const t=this.data.getIterator(),i=e.data.getIterator();for(;t.hasNext();){const o=t.getNext().key,l=i.getNext().key;if(this.comparator(o,l)!==0)return!1}return!0}toArray(){const e=[];return this.forEach((t=>{e.push(t)})),e}toString(){const e=[];return this.forEach((t=>e.push(t))),"SortedSet("+e.toString()+")"}copy(e){const t=new St(this.comparator);return t.data=e,t}}class Wy{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gn{constructor(e){this.fields=e,e.sort(Lt.comparator)}static empty(){return new gn([])}unionWith(e){let t=new St(Lt.comparator);for(const i of this.fields)t=t.add(i);for(const i of e)t=t.add(i);return new gn(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return Lo(this.fields,e.fields,((t,i)=>t.isEqual(i)))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tw extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mt{constructor(e){this.binaryString=e}static fromBase64String(e){const t=(function(o){try{return atob(o)}catch(l){throw typeof DOMException<"u"&&l instanceof DOMException?new tw("Invalid base64 string: "+l):l}})(e);return new Mt(t)}static fromUint8Array(e){const t=(function(o){let l="";for(let h=0;h<o.length;++h)l+=String.fromCharCode(o[h]);return l})(e);return new Mt(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(t){return btoa(t)})(this.binaryString)}toUint8Array(){return(function(t){const i=new Uint8Array(t.length);for(let o=0;o<t.length;o++)i[o]=t.charCodeAt(o);return i})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Ne(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Mt.EMPTY_BYTE_STRING=new Mt("");const aA=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Vi(n){if(Be(!!n,39018),typeof n=="string"){let e=0;const t=aA.exec(n);if(Be(!!t,46558,{timestamp:n}),t[1]){let o=t[1];o=(o+"000000000").substr(0,9),e=Number(o)}const i=new Date(n);return{seconds:Math.floor(i.getTime()/1e3),nanos:e}}return{seconds:ct(n.seconds),nanos:ct(n.nanos)}}function ct(n){return typeof n=="number"?n:typeof n=="string"?Number(n):0}function Oi(n){return typeof n=="string"?Mt.fromBase64String(n):Mt.fromUint8Array(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nw="server_timestamp",rw="__type__",iw="__previous_value__",sw="__local_write_time__";function Yf(n){var e,t;return((t=(((e=n==null?void 0:n.mapValue)===null||e===void 0?void 0:e.fields)||{})[rw])===null||t===void 0?void 0:t.stringValue)===nw}function $c(n){const e=n.mapValue.fields[iw];return Yf(e)?$c(e):e}function ul(n){const e=Vi(n.mapValue.fields[sw].timestampValue);return new Ge(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lA{constructor(e,t,i,o,l,h,f,p,y,w){this.databaseId=e,this.appId=t,this.persistenceKey=i,this.host=o,this.ssl=l,this.forceLongPolling=h,this.autoDetectLongPolling=f,this.longPollingOptions=p,this.useFetchStreams=y,this.isUsingEmulator=w}}const _c="(default)";class cl{constructor(e,t){this.projectId=e,this.database=t||_c}static empty(){return new cl("","")}get isDefaultDatabase(){return this.database===_c}isEqual(e){return e instanceof cl&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ow="__type__",uA="__max__",Gu={mapValue:{}},aw="__vector__",wc="value";function Li(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?Yf(n)?4:hA(n)?9007199254740991:cA(n)?10:11:Se(28295,{value:n})}function gr(n,e){if(n===e)return!0;const t=Li(n);if(t!==Li(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return ul(n).isEqual(ul(e));case 3:return(function(o,l){if(typeof o.timestampValue=="string"&&typeof l.timestampValue=="string"&&o.timestampValue.length===l.timestampValue.length)return o.timestampValue===l.timestampValue;const h=Vi(o.timestampValue),f=Vi(l.timestampValue);return h.seconds===f.seconds&&h.nanos===f.nanos})(n,e);case 5:return n.stringValue===e.stringValue;case 6:return(function(o,l){return Oi(o.bytesValue).isEqual(Oi(l.bytesValue))})(n,e);case 7:return n.referenceValue===e.referenceValue;case 8:return(function(o,l){return ct(o.geoPointValue.latitude)===ct(l.geoPointValue.latitude)&&ct(o.geoPointValue.longitude)===ct(l.geoPointValue.longitude)})(n,e);case 2:return(function(o,l){if("integerValue"in o&&"integerValue"in l)return ct(o.integerValue)===ct(l.integerValue);if("doubleValue"in o&&"doubleValue"in l){const h=ct(o.doubleValue),f=ct(l.doubleValue);return h===f?vc(h)===vc(f):isNaN(h)&&isNaN(f)}return!1})(n,e);case 9:return Lo(n.arrayValue.values||[],e.arrayValue.values||[],gr);case 10:case 11:return(function(o,l){const h=o.mapValue.fields||{},f=l.mapValue.fields||{};if($y(h)!==$y(f))return!1;for(const p in h)if(h.hasOwnProperty(p)&&(f[p]===void 0||!gr(h[p],f[p])))return!1;return!0})(n,e);default:return Se(52216,{left:n})}}function hl(n,e){return(n.values||[]).find((t=>gr(t,e)))!==void 0}function Mo(n,e){if(n===e)return 0;const t=Li(n),i=Li(e);if(t!==i)return Ne(t,i);switch(t){case 0:case 9007199254740991:return 0;case 1:return Ne(n.booleanValue,e.booleanValue);case 2:return(function(l,h){const f=ct(l.integerValue||l.doubleValue),p=ct(h.integerValue||h.doubleValue);return f<p?-1:f>p?1:f===p?0:isNaN(f)?isNaN(p)?0:-1:1})(n,e);case 3:return Hy(n.timestampValue,e.timestampValue);case 4:return Hy(ul(n),ul(e));case 5:return hf(n.stringValue,e.stringValue);case 6:return(function(l,h){const f=Oi(l),p=Oi(h);return f.compareTo(p)})(n.bytesValue,e.bytesValue);case 7:return(function(l,h){const f=l.split("/"),p=h.split("/");for(let y=0;y<f.length&&y<p.length;y++){const w=Ne(f[y],p[y]);if(w!==0)return w}return Ne(f.length,p.length)})(n.referenceValue,e.referenceValue);case 8:return(function(l,h){const f=Ne(ct(l.latitude),ct(h.latitude));return f!==0?f:Ne(ct(l.longitude),ct(h.longitude))})(n.geoPointValue,e.geoPointValue);case 9:return qy(n.arrayValue,e.arrayValue);case 10:return(function(l,h){var f,p,y,w;const T=l.fields||{},S=h.fields||{},V=(f=T[wc])===null||f===void 0?void 0:f.arrayValue,O=(p=S[wc])===null||p===void 0?void 0:p.arrayValue,j=Ne(((y=V==null?void 0:V.values)===null||y===void 0?void 0:y.length)||0,((w=O==null?void 0:O.values)===null||w===void 0?void 0:w.length)||0);return j!==0?j:qy(V,O)})(n.mapValue,e.mapValue);case 11:return(function(l,h){if(l===Gu.mapValue&&h===Gu.mapValue)return 0;if(l===Gu.mapValue)return 1;if(h===Gu.mapValue)return-1;const f=l.fields||{},p=Object.keys(f),y=h.fields||{},w=Object.keys(y);p.sort(),w.sort();for(let T=0;T<p.length&&T<w.length;++T){const S=hf(p[T],w[T]);if(S!==0)return S;const V=Mo(f[p[T]],y[w[T]]);if(V!==0)return V}return Ne(p.length,w.length)})(n.mapValue,e.mapValue);default:throw Se(23264,{le:t})}}function Hy(n,e){if(typeof n=="string"&&typeof e=="string"&&n.length===e.length)return Ne(n,e);const t=Vi(n),i=Vi(e),o=Ne(t.seconds,i.seconds);return o!==0?o:Ne(t.nanos,i.nanos)}function qy(n,e){const t=n.values||[],i=e.values||[];for(let o=0;o<t.length&&o<i.length;++o){const l=Mo(t[o],i[o]);if(l)return l}return Ne(t.length,i.length)}function jo(n){return df(n)}function df(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?(function(t){const i=Vi(t);return`time(${i.seconds},${i.nanos})`})(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?(function(t){return Oi(t).toBase64()})(n.bytesValue):"referenceValue"in n?(function(t){return _e.fromName(t).toString()})(n.referenceValue):"geoPointValue"in n?(function(t){return`geo(${t.latitude},${t.longitude})`})(n.geoPointValue):"arrayValue"in n?(function(t){let i="[",o=!0;for(const l of t.values||[])o?o=!1:i+=",",i+=df(l);return i+"]"})(n.arrayValue):"mapValue"in n?(function(t){const i=Object.keys(t.fields||{}).sort();let o="{",l=!0;for(const h of i)l?l=!1:o+=",",o+=`${h}:${df(t.fields[h])}`;return o+"}"})(n.mapValue):Se(61005,{value:n})}function rc(n){switch(Li(n)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=$c(n);return e?16+rc(e):16;case 5:return 2*n.stringValue.length;case 6:return Oi(n.bytesValue).approximateByteSize();case 7:return n.referenceValue.length;case 9:return(function(i){return(i.values||[]).reduce(((o,l)=>o+rc(l)),0)})(n.arrayValue);case 10:case 11:return(function(i){let o=0;return zi(i.fields,((l,h)=>{o+=l.length+rc(h)})),o})(n.mapValue);default:throw Se(13486,{value:n})}}function Gy(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function ff(n){return!!n&&"integerValue"in n}function Jf(n){return!!n&&"arrayValue"in n}function Ky(n){return!!n&&"nullValue"in n}function Qy(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function ic(n){return!!n&&"mapValue"in n}function cA(n){var e,t;return((t=(((e=n==null?void 0:n.mapValue)===null||e===void 0?void 0:e.fields)||{})[ow])===null||t===void 0?void 0:t.stringValue)===aw}function el(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&typeof n.timestampValue=="object")return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){const e={mapValue:{fields:{}}};return zi(n.mapValue.fields,((t,i)=>e.mapValue.fields[t]=el(i))),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=el(n.arrayValue.values[t]);return e}return Object.assign({},n)}function hA(n){return(((n.mapValue||{}).fields||{}).__type__||{}).stringValue===uA}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class on{constructor(e){this.value=e}static empty(){return new on({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let i=0;i<e.length-1;++i)if(t=(t.mapValue.fields||{})[e.get(i)],!ic(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=el(t)}setAll(e){let t=Lt.emptyPath(),i={},o=[];e.forEach(((h,f)=>{if(!t.isImmediateParentOf(f)){const p=this.getFieldsMap(t);this.applyChanges(p,i,o),i={},o=[],t=f.popLast()}h?i[f.lastSegment()]=el(h):o.push(f.lastSegment())}));const l=this.getFieldsMap(t);this.applyChanges(l,i,o)}delete(e){const t=this.field(e.popLast());ic(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return gr(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let i=0;i<e.length;++i){let o=t.mapValue.fields[e.get(i)];ic(o)&&o.mapValue.fields||(o={mapValue:{fields:{}}},t.mapValue.fields[e.get(i)]=o),t=o}return t.mapValue.fields}applyChanges(e,t,i){zi(t,((o,l)=>e[o]=l));for(const o of i)delete e[o]}clone(){return new on(el(this.value))}}function lw(n){const e=[];return zi(n.fields,((t,i)=>{const o=new Lt([t]);if(ic(i)){const l=lw(i.mapValue).fields;if(l.length===0)e.push(o);else for(const h of l)e.push(o.child(h))}else e.push(o)})),new gn(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wt{constructor(e,t,i,o,l,h,f){this.key=e,this.documentType=t,this.version=i,this.readTime=o,this.createTime=l,this.data=h,this.documentState=f}static newInvalidDocument(e){return new Wt(e,0,Ae.min(),Ae.min(),Ae.min(),on.empty(),0)}static newFoundDocument(e,t,i,o){return new Wt(e,1,t,Ae.min(),i,o,0)}static newNoDocument(e,t){return new Wt(e,2,t,Ae.min(),Ae.min(),on.empty(),0)}static newUnknownDocument(e,t){return new Wt(e,3,t,Ae.min(),Ae.min(),on.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(Ae.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=on.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=on.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Ae.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof Wt&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Wt(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ec{constructor(e,t){this.position=e,this.inclusive=t}}function Yy(n,e,t){let i=0;for(let o=0;o<n.position.length;o++){const l=e[o],h=n.position[o];if(l.field.isKeyField()?i=_e.comparator(_e.fromName(h.referenceValue),t.key):i=Mo(h,t.data.field(l.field)),l.dir==="desc"&&(i*=-1),i!==0)break}return i}function Jy(n,e){if(n===null)return e===null;if(e===null||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!gr(n.position[t],e.position[t]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tc{constructor(e,t="asc"){this.field=e,this.dir=t}}function dA(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uw{}class yt extends uw{constructor(e,t,i){super(),this.field=e,this.op=t,this.value=i}static create(e,t,i){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,i):new pA(e,t,i):t==="array-contains"?new yA(e,i):t==="in"?new vA(e,i):t==="not-in"?new _A(e,i):t==="array-contains-any"?new wA(e,i):new yt(e,t,i)}static createKeyFieldInFilter(e,t,i){return t==="in"?new mA(e,i):new gA(e,i)}matches(e){const t=e.data.field(this.field);return this.op==="!="?t!==null&&t.nullValue===void 0&&this.matchesComparison(Mo(t,this.value)):t!==null&&Li(this.value)===Li(t)&&this.matchesComparison(Mo(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Se(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Yn extends uw{constructor(e,t){super(),this.filters=e,this.op=t,this.he=null}static create(e,t){return new Yn(e,t)}matches(e){return cw(this)?this.filters.find((t=>!t.matches(e)))===void 0:this.filters.find((t=>t.matches(e)))!==void 0}getFlattenedFilters(){return this.he!==null||(this.he=this.filters.reduce(((e,t)=>e.concat(t.getFlattenedFilters())),[])),this.he}getFilters(){return Object.assign([],this.filters)}}function cw(n){return n.op==="and"}function hw(n){return fA(n)&&cw(n)}function fA(n){for(const e of n.filters)if(e instanceof Yn)return!1;return!0}function pf(n){if(n instanceof yt)return n.field.canonicalString()+n.op.toString()+jo(n.value);if(hw(n))return n.filters.map((e=>pf(e))).join(",");{const e=n.filters.map((t=>pf(t))).join(",");return`${n.op}(${e})`}}function dw(n,e){return n instanceof yt?(function(i,o){return o instanceof yt&&i.op===o.op&&i.field.isEqual(o.field)&&gr(i.value,o.value)})(n,e):n instanceof Yn?(function(i,o){return o instanceof Yn&&i.op===o.op&&i.filters.length===o.filters.length?i.filters.reduce(((l,h,f)=>l&&dw(h,o.filters[f])),!0):!1})(n,e):void Se(19439)}function fw(n){return n instanceof yt?(function(t){return`${t.field.canonicalString()} ${t.op} ${jo(t.value)}`})(n):n instanceof Yn?(function(t){return t.op.toString()+" {"+t.getFilters().map(fw).join(" ,")+"}"})(n):"Filter"}class pA extends yt{constructor(e,t,i){super(e,t,i),this.key=_e.fromName(i.referenceValue)}matches(e){const t=_e.comparator(e.key,this.key);return this.matchesComparison(t)}}class mA extends yt{constructor(e,t){super(e,"in",t),this.keys=pw("in",t)}matches(e){return this.keys.some((t=>t.isEqual(e.key)))}}class gA extends yt{constructor(e,t){super(e,"not-in",t),this.keys=pw("not-in",t)}matches(e){return!this.keys.some((t=>t.isEqual(e.key)))}}function pw(n,e){var t;return(((t=e.arrayValue)===null||t===void 0?void 0:t.values)||[]).map((i=>_e.fromName(i.referenceValue)))}class yA extends yt{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return Jf(t)&&hl(t.arrayValue,this.value)}}class vA extends yt{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return t!==null&&hl(this.value.arrayValue,t)}}class _A extends yt{constructor(e,t){super(e,"not-in",t)}matches(e){if(hl(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return t!==null&&t.nullValue===void 0&&!hl(this.value.arrayValue,t)}}class wA extends yt{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!Jf(t)||!t.arrayValue.values)&&t.arrayValue.values.some((i=>hl(this.value.arrayValue,i)))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class EA{constructor(e,t=null,i=[],o=[],l=null,h=null,f=null){this.path=e,this.collectionGroup=t,this.orderBy=i,this.filters=o,this.limit=l,this.startAt=h,this.endAt=f,this.Pe=null}}function Xy(n,e=null,t=[],i=[],o=null,l=null,h=null){return new EA(n,e,t,i,o,l,h)}function Xf(n){const e=Re(n);if(e.Pe===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map((i=>pf(i))).join(","),t+="|ob:",t+=e.orderBy.map((i=>(function(l){return l.field.canonicalString()+l.dir})(i))).join(","),Bc(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map((i=>jo(i))).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map((i=>jo(i))).join(",")),e.Pe=t}return e.Pe}function Zf(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!dA(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!dw(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!Jy(n.startAt,e.startAt)&&Jy(n.endAt,e.endAt)}function mf(n){return _e.isDocumentKey(n.path)&&n.collectionGroup===null&&n.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class El{constructor(e,t=null,i=[],o=[],l=null,h="F",f=null,p=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=i,this.filters=o,this.limit=l,this.limitType=h,this.startAt=f,this.endAt=p,this.Te=null,this.Ie=null,this.de=null,this.startAt,this.endAt}}function TA(n,e,t,i,o,l,h,f){return new El(n,e,t,i,o,l,h,f)}function Wc(n){return new El(n)}function Zy(n){return n.filters.length===0&&n.limit===null&&n.startAt==null&&n.endAt==null&&(n.explicitOrderBy.length===0||n.explicitOrderBy.length===1&&n.explicitOrderBy[0].field.isKeyField())}function mw(n){return n.collectionGroup!==null}function tl(n){const e=Re(n);if(e.Te===null){e.Te=[];const t=new Set;for(const l of e.explicitOrderBy)e.Te.push(l),t.add(l.field.canonicalString());const i=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(h){let f=new St(Lt.comparator);return h.filters.forEach((p=>{p.getFlattenedFilters().forEach((y=>{y.isInequality()&&(f=f.add(y.field))}))})),f})(e).forEach((l=>{t.has(l.canonicalString())||l.isKeyField()||e.Te.push(new Tc(l,i))})),t.has(Lt.keyField().canonicalString())||e.Te.push(new Tc(Lt.keyField(),i))}return e.Te}function dr(n){const e=Re(n);return e.Ie||(e.Ie=IA(e,tl(n))),e.Ie}function IA(n,e){if(n.limitType==="F")return Xy(n.path,n.collectionGroup,e,n.filters,n.limit,n.startAt,n.endAt);{e=e.map((o=>{const l=o.dir==="desc"?"asc":"desc";return new Tc(o.field,l)}));const t=n.endAt?new Ec(n.endAt.position,n.endAt.inclusive):null,i=n.startAt?new Ec(n.startAt.position,n.startAt.inclusive):null;return Xy(n.path,n.collectionGroup,e,n.filters,n.limit,t,i)}}function gf(n,e){const t=n.filters.concat([e]);return new El(n.path,n.collectionGroup,n.explicitOrderBy.slice(),t,n.limit,n.limitType,n.startAt,n.endAt)}function yf(n,e,t){return new El(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function Hc(n,e){return Zf(dr(n),dr(e))&&n.limitType===e.limitType}function gw(n){return`${Xf(dr(n))}|lt:${n.limitType}`}function Ao(n){return`Query(target=${(function(t){let i=t.path.canonicalString();return t.collectionGroup!==null&&(i+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(i+=`, filters: [${t.filters.map((o=>fw(o))).join(", ")}]`),Bc(t.limit)||(i+=", limit: "+t.limit),t.orderBy.length>0&&(i+=`, orderBy: [${t.orderBy.map((o=>(function(h){return`${h.field.canonicalString()} (${h.dir})`})(o))).join(", ")}]`),t.startAt&&(i+=", startAt: ",i+=t.startAt.inclusive?"b:":"a:",i+=t.startAt.position.map((o=>jo(o))).join(",")),t.endAt&&(i+=", endAt: ",i+=t.endAt.inclusive?"a:":"b:",i+=t.endAt.position.map((o=>jo(o))).join(",")),`Target(${i})`})(dr(n))}; limitType=${n.limitType})`}function qc(n,e){return e.isFoundDocument()&&(function(i,o){const l=o.key.path;return i.collectionGroup!==null?o.key.hasCollectionId(i.collectionGroup)&&i.path.isPrefixOf(l):_e.isDocumentKey(i.path)?i.path.isEqual(l):i.path.isImmediateParentOf(l)})(n,e)&&(function(i,o){for(const l of tl(i))if(!l.field.isKeyField()&&o.data.field(l.field)===null)return!1;return!0})(n,e)&&(function(i,o){for(const l of i.filters)if(!l.matches(o))return!1;return!0})(n,e)&&(function(i,o){return!(i.startAt&&!(function(h,f,p){const y=Yy(h,f,p);return h.inclusive?y<=0:y<0})(i.startAt,tl(i),o)||i.endAt&&!(function(h,f,p){const y=Yy(h,f,p);return h.inclusive?y>=0:y>0})(i.endAt,tl(i),o))})(n,e)}function SA(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function yw(n){return(e,t)=>{let i=!1;for(const o of tl(n)){const l=PA(o,e,t);if(l!==0)return l;i=i||o.field.isKeyField()}return 0}}function PA(n,e,t){const i=n.field.isKeyField()?_e.comparator(e.key,t.key):(function(l,h,f){const p=h.data.field(l),y=f.data.field(l);return p!==null&&y!==null?Mo(p,y):Se(42886)})(n.field,e,t);switch(n.dir){case"asc":return i;case"desc":return-1*i;default:return Se(19790,{direction:n.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ns{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),i=this.inner[t];if(i!==void 0){for(const[o,l]of i)if(this.equalsFn(o,e))return l}}has(e){return this.get(e)!==void 0}set(e,t){const i=this.mapKeyFn(e),o=this.inner[i];if(o===void 0)return this.inner[i]=[[e,t]],void this.innerSize++;for(let l=0;l<o.length;l++)if(this.equalsFn(o[l][0],e))return void(o[l]=[e,t]);o.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),i=this.inner[t];if(i===void 0)return!1;for(let o=0;o<i.length;o++)if(this.equalsFn(i[o][0],e))return i.length===1?delete this.inner[t]:i.splice(o,1),this.innerSize--,!0;return!1}forEach(e){zi(this.inner,((t,i)=>{for(const[o,l]of i)e(o,l)}))}isEmpty(){return ew(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const AA=new it(_e.comparator);function $r(){return AA}const vw=new it(_e.comparator);function Qa(...n){let e=vw;for(const t of n)e=e.insert(t.key,t);return e}function _w(n){let e=vw;return n.forEach(((t,i)=>e=e.insert(t,i.overlayedDocument))),e}function _s(){return nl()}function ww(){return nl()}function nl(){return new Ns((n=>n.toString()),((n,e)=>n.isEqual(e)))}const CA=new it(_e.comparator),RA=new St(_e.comparator);function Ve(...n){let e=RA;for(const t of n)e=e.add(t);return e}const kA=new St(Ne);function NA(){return kA}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ep(n,e){if(n.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:vc(e)?"-0":e}}function Ew(n){return{integerValue:""+n}}function xA(n,e){return iA(e)?Ew(e):ep(n,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gc{constructor(){this._=void 0}}function bA(n,e,t){return n instanceof Ic?(function(o,l){const h={fields:{[rw]:{stringValue:nw},[sw]:{timestampValue:{seconds:o.seconds,nanos:o.nanoseconds}}}};return l&&Yf(l)&&(l=$c(l)),l&&(h.fields[iw]=l),{mapValue:h}})(t,e):n instanceof dl?Iw(n,e):n instanceof fl?Sw(n,e):(function(o,l){const h=Tw(o,l),f=ev(h)+ev(o.Ee);return ff(h)&&ff(o.Ee)?Ew(f):ep(o.serializer,f)})(n,e)}function DA(n,e,t){return n instanceof dl?Iw(n,e):n instanceof fl?Sw(n,e):t}function Tw(n,e){return n instanceof Sc?(function(i){return ff(i)||(function(l){return!!l&&"doubleValue"in l})(i)})(e)?e:{integerValue:0}:null}class Ic extends Gc{}class dl extends Gc{constructor(e){super(),this.elements=e}}function Iw(n,e){const t=Pw(e);for(const i of n.elements)t.some((o=>gr(o,i)))||t.push(i);return{arrayValue:{values:t}}}class fl extends Gc{constructor(e){super(),this.elements=e}}function Sw(n,e){let t=Pw(e);for(const i of n.elements)t=t.filter((o=>!gr(o,i)));return{arrayValue:{values:t}}}class Sc extends Gc{constructor(e,t){super(),this.serializer=e,this.Ee=t}}function ev(n){return ct(n.integerValue||n.doubleValue)}function Pw(n){return Jf(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}function VA(n,e){return n.field.isEqual(e.field)&&(function(i,o){return i instanceof dl&&o instanceof dl||i instanceof fl&&o instanceof fl?Lo(i.elements,o.elements,gr):i instanceof Sc&&o instanceof Sc?gr(i.Ee,o.Ee):i instanceof Ic&&o instanceof Ic})(n.transform,e.transform)}class OA{constructor(e,t){this.version=e,this.transformResults=t}}class kn{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new kn}static exists(e){return new kn(void 0,e)}static updateTime(e){return new kn(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function sc(n,e){return n.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(n.updateTime):n.exists===void 0||n.exists===e.isFoundDocument()}class Kc{}function Aw(n,e){if(!n.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return n.isNoDocument()?new tp(n.key,kn.none()):new Tl(n.key,n.data,kn.none());{const t=n.data,i=on.empty();let o=new St(Lt.comparator);for(let l of e.fields)if(!o.has(l)){let h=t.field(l);h===null&&l.length>1&&(l=l.popLast(),h=t.field(l)),h===null?i.delete(l):i.set(l,h),o=o.add(l)}return new Bi(n.key,i,new gn(o.toArray()),kn.none())}}function LA(n,e,t){n instanceof Tl?(function(o,l,h){const f=o.value.clone(),p=nv(o.fieldTransforms,l,h.transformResults);f.setAll(p),l.convertToFoundDocument(h.version,f).setHasCommittedMutations()})(n,e,t):n instanceof Bi?(function(o,l,h){if(!sc(o.precondition,l))return void l.convertToUnknownDocument(h.version);const f=nv(o.fieldTransforms,l,h.transformResults),p=l.data;p.setAll(Cw(o)),p.setAll(f),l.convertToFoundDocument(h.version,p).setHasCommittedMutations()})(n,e,t):(function(o,l,h){l.convertToNoDocument(h.version).setHasCommittedMutations()})(0,e,t)}function rl(n,e,t,i){return n instanceof Tl?(function(l,h,f,p){if(!sc(l.precondition,h))return f;const y=l.value.clone(),w=rv(l.fieldTransforms,p,h);return y.setAll(w),h.convertToFoundDocument(h.version,y).setHasLocalMutations(),null})(n,e,t,i):n instanceof Bi?(function(l,h,f,p){if(!sc(l.precondition,h))return f;const y=rv(l.fieldTransforms,p,h),w=h.data;return w.setAll(Cw(l)),w.setAll(y),h.convertToFoundDocument(h.version,w).setHasLocalMutations(),f===null?null:f.unionWith(l.fieldMask.fields).unionWith(l.fieldTransforms.map((T=>T.field)))})(n,e,t,i):(function(l,h,f){return sc(l.precondition,h)?(h.convertToNoDocument(h.version).setHasLocalMutations(),null):f})(n,e,t)}function MA(n,e){let t=null;for(const i of n.fieldTransforms){const o=e.data.field(i.field),l=Tw(i.transform,o||null);l!=null&&(t===null&&(t=on.empty()),t.set(i.field,l))}return t||null}function tv(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&!!(function(i,o){return i===void 0&&o===void 0||!(!i||!o)&&Lo(i,o,((l,h)=>VA(l,h)))})(n.fieldTransforms,e.fieldTransforms)&&(n.type===0?n.value.isEqual(e.value):n.type!==1||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask))}class Tl extends Kc{constructor(e,t,i,o=[]){super(),this.key=e,this.value=t,this.precondition=i,this.fieldTransforms=o,this.type=0}getFieldMask(){return null}}class Bi extends Kc{constructor(e,t,i,o,l=[]){super(),this.key=e,this.data=t,this.fieldMask=i,this.precondition=o,this.fieldTransforms=l,this.type=1}getFieldMask(){return this.fieldMask}}function Cw(n){const e=new Map;return n.fieldMask.fields.forEach((t=>{if(!t.isEmpty()){const i=n.data.field(t);e.set(t,i)}})),e}function nv(n,e,t){const i=new Map;Be(n.length===t.length,32656,{Ae:t.length,Re:n.length});for(let o=0;o<t.length;o++){const l=n[o],h=l.transform,f=e.data.field(l.field);i.set(l.field,DA(h,f,t[o]))}return i}function rv(n,e,t){const i=new Map;for(const o of n){const l=o.transform,h=t.data.field(o.field);i.set(o.field,bA(l,h,e))}return i}class tp extends Kc{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class jA extends Kc{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FA{constructor(e,t,i,o){this.batchId=e,this.localWriteTime=t,this.baseMutations=i,this.mutations=o}applyToRemoteDocument(e,t){const i=t.mutationResults;for(let o=0;o<this.mutations.length;o++){const l=this.mutations[o];l.key.isEqual(e.key)&&LA(l,e,i[o])}}applyToLocalView(e,t){for(const i of this.baseMutations)i.key.isEqual(e.key)&&(t=rl(i,e,t,this.localWriteTime));for(const i of this.mutations)i.key.isEqual(e.key)&&(t=rl(i,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const i=ww();return this.mutations.forEach((o=>{const l=e.get(o.key),h=l.overlayedDocument;let f=this.applyToLocalView(h,l.mutatedFields);f=t.has(o.key)?null:f;const p=Aw(h,f);p!==null&&i.set(o.key,p),h.isValidDocument()||h.convertToNoDocument(Ae.min())})),i}keys(){return this.mutations.reduce(((e,t)=>e.add(t.key)),Ve())}isEqual(e){return this.batchId===e.batchId&&Lo(this.mutations,e.mutations,((t,i)=>tv(t,i)))&&Lo(this.baseMutations,e.baseMutations,((t,i)=>tv(t,i)))}}class np{constructor(e,t,i,o){this.batch=e,this.commitVersion=t,this.mutationResults=i,this.docVersions=o}static from(e,t,i){Be(e.mutations.length===i.length,58842,{Ve:e.mutations.length,me:i.length});let o=(function(){return CA})();const l=e.mutations;for(let h=0;h<l.length;h++)o=o.insert(l[h].key,i[h].version);return new np(e,t,i,o)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UA{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zA{constructor(e,t){this.count=e,this.unchangedNames=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var gt,Me;function BA(n){switch(n){case G.OK:return Se(64938);case G.CANCELLED:case G.UNKNOWN:case G.DEADLINE_EXCEEDED:case G.RESOURCE_EXHAUSTED:case G.INTERNAL:case G.UNAVAILABLE:case G.UNAUTHENTICATED:return!1;case G.INVALID_ARGUMENT:case G.NOT_FOUND:case G.ALREADY_EXISTS:case G.PERMISSION_DENIED:case G.FAILED_PRECONDITION:case G.ABORTED:case G.OUT_OF_RANGE:case G.UNIMPLEMENTED:case G.DATA_LOSS:return!0;default:return Se(15467,{code:n})}}function Rw(n){if(n===void 0)return Br("GRPC error has no .code"),G.UNKNOWN;switch(n){case gt.OK:return G.OK;case gt.CANCELLED:return G.CANCELLED;case gt.UNKNOWN:return G.UNKNOWN;case gt.DEADLINE_EXCEEDED:return G.DEADLINE_EXCEEDED;case gt.RESOURCE_EXHAUSTED:return G.RESOURCE_EXHAUSTED;case gt.INTERNAL:return G.INTERNAL;case gt.UNAVAILABLE:return G.UNAVAILABLE;case gt.UNAUTHENTICATED:return G.UNAUTHENTICATED;case gt.INVALID_ARGUMENT:return G.INVALID_ARGUMENT;case gt.NOT_FOUND:return G.NOT_FOUND;case gt.ALREADY_EXISTS:return G.ALREADY_EXISTS;case gt.PERMISSION_DENIED:return G.PERMISSION_DENIED;case gt.FAILED_PRECONDITION:return G.FAILED_PRECONDITION;case gt.ABORTED:return G.ABORTED;case gt.OUT_OF_RANGE:return G.OUT_OF_RANGE;case gt.UNIMPLEMENTED:return G.UNIMPLEMENTED;case gt.DATA_LOSS:return G.DATA_LOSS;default:return Se(39323,{code:n})}}(Me=gt||(gt={}))[Me.OK=0]="OK",Me[Me.CANCELLED=1]="CANCELLED",Me[Me.UNKNOWN=2]="UNKNOWN",Me[Me.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Me[Me.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Me[Me.NOT_FOUND=5]="NOT_FOUND",Me[Me.ALREADY_EXISTS=6]="ALREADY_EXISTS",Me[Me.PERMISSION_DENIED=7]="PERMISSION_DENIED",Me[Me.UNAUTHENTICATED=16]="UNAUTHENTICATED",Me[Me.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Me[Me.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Me[Me.ABORTED=10]="ABORTED",Me[Me.OUT_OF_RANGE=11]="OUT_OF_RANGE",Me[Me.UNIMPLEMENTED=12]="UNIMPLEMENTED",Me[Me.INTERNAL=13]="INTERNAL",Me[Me.UNAVAILABLE=14]="UNAVAILABLE",Me[Me.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $A=new Ni([4294967295,4294967295],0);function iv(n){const e=Y_().encode(n),t=new B_;return t.update(e),new Uint8Array(t.digest())}function sv(n){const e=new DataView(n.buffer),t=e.getUint32(0,!0),i=e.getUint32(4,!0),o=e.getUint32(8,!0),l=e.getUint32(12,!0);return[new Ni([t,i],0),new Ni([o,l],0)]}class rp{constructor(e,t,i){if(this.bitmap=e,this.padding=t,this.hashCount=i,t<0||t>=8)throw new Ya(`Invalid padding: ${t}`);if(i<0)throw new Ya(`Invalid hash count: ${i}`);if(e.length>0&&this.hashCount===0)throw new Ya(`Invalid hash count: ${i}`);if(e.length===0&&t!==0)throw new Ya(`Invalid padding when bitmap length is 0: ${t}`);this.fe=8*e.length-t,this.ge=Ni.fromNumber(this.fe)}pe(e,t,i){let o=e.add(t.multiply(Ni.fromNumber(i)));return o.compare($A)===1&&(o=new Ni([o.getBits(0),o.getBits(1)],0)),o.modulo(this.ge).toNumber()}ye(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.fe===0)return!1;const t=iv(e),[i,o]=sv(t);for(let l=0;l<this.hashCount;l++){const h=this.pe(i,o,l);if(!this.ye(h))return!1}return!0}static create(e,t,i){const o=e%8==0?0:8-e%8,l=new Uint8Array(Math.ceil(e/8)),h=new rp(l,o,t);return i.forEach((f=>h.insert(f))),h}insert(e){if(this.fe===0)return;const t=iv(e),[i,o]=sv(t);for(let l=0;l<this.hashCount;l++){const h=this.pe(i,o,l);this.we(h)}}we(e){const t=Math.floor(e/8),i=e%8;this.bitmap[t]|=1<<i}}class Ya extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qc{constructor(e,t,i,o,l){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=i,this.documentUpdates=o,this.resolvedLimboDocuments=l}static createSynthesizedRemoteEventForCurrentChange(e,t,i){const o=new Map;return o.set(e,Il.createSynthesizedTargetChangeForCurrentChange(e,t,i)),new Qc(Ae.min(),o,new it(Ne),$r(),Ve())}}class Il{constructor(e,t,i,o,l){this.resumeToken=e,this.current=t,this.addedDocuments=i,this.modifiedDocuments=o,this.removedDocuments=l}static createSynthesizedTargetChangeForCurrentChange(e,t,i){return new Il(i,t,Ve(),Ve(),Ve())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oc{constructor(e,t,i,o){this.Se=e,this.removedTargetIds=t,this.key=i,this.be=o}}class kw{constructor(e,t){this.targetId=e,this.De=t}}class Nw{constructor(e,t,i=Mt.EMPTY_BYTE_STRING,o=null){this.state=e,this.targetIds=t,this.resumeToken=i,this.cause=o}}class ov{constructor(){this.ve=0,this.Ce=av(),this.Fe=Mt.EMPTY_BYTE_STRING,this.Me=!1,this.xe=!0}get current(){return this.Me}get resumeToken(){return this.Fe}get Oe(){return this.ve!==0}get Ne(){return this.xe}Be(e){e.approximateByteSize()>0&&(this.xe=!0,this.Fe=e)}Le(){let e=Ve(),t=Ve(),i=Ve();return this.Ce.forEach(((o,l)=>{switch(l){case 0:e=e.add(o);break;case 2:t=t.add(o);break;case 1:i=i.add(o);break;default:Se(38017,{changeType:l})}})),new Il(this.Fe,this.Me,e,t,i)}ke(){this.xe=!1,this.Ce=av()}qe(e,t){this.xe=!0,this.Ce=this.Ce.insert(e,t)}Qe(e){this.xe=!0,this.Ce=this.Ce.remove(e)}$e(){this.ve+=1}Ue(){this.ve-=1,Be(this.ve>=0,3241,{ve:this.ve})}Ke(){this.xe=!0,this.Me=!0}}class WA{constructor(e){this.We=e,this.Ge=new Map,this.ze=$r(),this.je=Ku(),this.Je=Ku(),this.He=new it(Ne)}Ye(e){for(const t of e.Se)e.be&&e.be.isFoundDocument()?this.Ze(t,e.be):this.Xe(t,e.key,e.be);for(const t of e.removedTargetIds)this.Xe(t,e.key,e.be)}et(e){this.forEachTarget(e,(t=>{const i=this.tt(t);switch(e.state){case 0:this.nt(t)&&i.Be(e.resumeToken);break;case 1:i.Ue(),i.Oe||i.ke(),i.Be(e.resumeToken);break;case 2:i.Ue(),i.Oe||this.removeTarget(t);break;case 3:this.nt(t)&&(i.Ke(),i.Be(e.resumeToken));break;case 4:this.nt(t)&&(this.rt(t),i.Be(e.resumeToken));break;default:Se(56790,{state:e.state})}}))}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.Ge.forEach(((i,o)=>{this.nt(o)&&t(o)}))}it(e){const t=e.targetId,i=e.De.count,o=this.st(t);if(o){const l=o.target;if(mf(l))if(i===0){const h=new _e(l.path);this.Xe(t,h,Wt.newNoDocument(h,Ae.min()))}else Be(i===1,20013,{expectedCount:i});else{const h=this.ot(t);if(h!==i){const f=this._t(e),p=f?this.ut(f,e,h):1;if(p!==0){this.rt(t);const y=p===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.He=this.He.insert(t,y)}}}}}_t(e){const t=e.De.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:i="",padding:o=0},hashCount:l=0}=t;let h,f;try{h=Oi(i).toUint8Array()}catch(p){if(p instanceof tw)return bi("Decoding the base64 bloom filter in existence filter failed ("+p.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw p}try{f=new rp(h,o,l)}catch(p){return bi(p instanceof Ya?"BloomFilter error: ":"Applying bloom filter failed: ",p),null}return f.fe===0?null:f}ut(e,t,i){return t.De.count===i-this.ht(e,t.targetId)?0:2}ht(e,t){const i=this.We.getRemoteKeysForTarget(t);let o=0;return i.forEach((l=>{const h=this.We.lt(),f=`projects/${h.projectId}/databases/${h.database}/documents/${l.path.canonicalString()}`;e.mightContain(f)||(this.Xe(t,l,null),o++)})),o}Pt(e){const t=new Map;this.Ge.forEach(((l,h)=>{const f=this.st(h);if(f){if(l.current&&mf(f.target)){const p=new _e(f.target.path);this.Tt(p).has(h)||this.It(h,p)||this.Xe(h,p,Wt.newNoDocument(p,e))}l.Ne&&(t.set(h,l.Le()),l.ke())}}));let i=Ve();this.Je.forEach(((l,h)=>{let f=!0;h.forEachWhile((p=>{const y=this.st(p);return!y||y.purpose==="TargetPurposeLimboResolution"||(f=!1,!1)})),f&&(i=i.add(l))})),this.ze.forEach(((l,h)=>h.setReadTime(e)));const o=new Qc(e,t,this.He,this.ze,i);return this.ze=$r(),this.je=Ku(),this.Je=Ku(),this.He=new it(Ne),o}Ze(e,t){if(!this.nt(e))return;const i=this.It(e,t.key)?2:0;this.tt(e).qe(t.key,i),this.ze=this.ze.insert(t.key,t),this.je=this.je.insert(t.key,this.Tt(t.key).add(e)),this.Je=this.Je.insert(t.key,this.dt(t.key).add(e))}Xe(e,t,i){if(!this.nt(e))return;const o=this.tt(e);this.It(e,t)?o.qe(t,1):o.Qe(t),this.Je=this.Je.insert(t,this.dt(t).delete(e)),this.Je=this.Je.insert(t,this.dt(t).add(e)),i&&(this.ze=this.ze.insert(t,i))}removeTarget(e){this.Ge.delete(e)}ot(e){const t=this.tt(e).Le();return this.We.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}$e(e){this.tt(e).$e()}tt(e){let t=this.Ge.get(e);return t||(t=new ov,this.Ge.set(e,t)),t}dt(e){let t=this.Je.get(e);return t||(t=new St(Ne),this.Je=this.Je.insert(e,t)),t}Tt(e){let t=this.je.get(e);return t||(t=new St(Ne),this.je=this.je.insert(e,t)),t}nt(e){const t=this.st(e)!==null;return t||de("WatchChangeAggregator","Detected inactive target",e),t}st(e){const t=this.Ge.get(e);return t&&t.Oe?null:this.We.Et(e)}rt(e){this.Ge.set(e,new ov),this.We.getRemoteKeysForTarget(e).forEach((t=>{this.Xe(e,t,null)}))}It(e,t){return this.We.getRemoteKeysForTarget(e).has(t)}}function Ku(){return new it(_e.comparator)}function av(){return new it(_e.comparator)}const HA={asc:"ASCENDING",desc:"DESCENDING"},qA={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},GA={and:"AND",or:"OR"};class KA{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function vf(n,e){return n.useProto3Json||Bc(e)?e:{value:e}}function Pc(n,e){return n.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function xw(n,e){return n.useProto3Json?e.toBase64():e.toUint8Array()}function QA(n,e){return Pc(n,e.toTimestamp())}function fr(n){return Be(!!n,49232),Ae.fromTimestamp((function(t){const i=Vi(t);return new Ge(i.seconds,i.nanos)})(n))}function ip(n,e){return _f(n,e).canonicalString()}function _f(n,e){const t=(function(o){return new Ye(["projects",o.projectId,"databases",o.database])})(n).child("documents");return e===void 0?t:t.child(e)}function bw(n){const e=Ye.fromString(n);return Be(Mw(e),10190,{key:e.toString()}),e}function wf(n,e){return ip(n.databaseId,e.path)}function Hd(n,e){const t=bw(e);if(t.get(1)!==n.databaseId.projectId)throw new ue(G.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new ue(G.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new _e(Vw(t))}function Dw(n,e){return ip(n.databaseId,e)}function YA(n){const e=bw(n);return e.length===4?Ye.emptyPath():Vw(e)}function Ef(n){return new Ye(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function Vw(n){return Be(n.length>4&&n.get(4)==="documents",29091,{key:n.toString()}),n.popFirst(5)}function lv(n,e,t){return{name:wf(n,e),fields:t.value.mapValue.fields}}function JA(n,e){let t;if("targetChange"in e){e.targetChange;const i=(function(y){return y==="NO_CHANGE"?0:y==="ADD"?1:y==="REMOVE"?2:y==="CURRENT"?3:y==="RESET"?4:Se(39313,{state:y})})(e.targetChange.targetChangeType||"NO_CHANGE"),o=e.targetChange.targetIds||[],l=(function(y,w){return y.useProto3Json?(Be(w===void 0||typeof w=="string",58123),Mt.fromBase64String(w||"")):(Be(w===void 0||w instanceof Buffer||w instanceof Uint8Array,16193),Mt.fromUint8Array(w||new Uint8Array))})(n,e.targetChange.resumeToken),h=e.targetChange.cause,f=h&&(function(y){const w=y.code===void 0?G.UNKNOWN:Rw(y.code);return new ue(w,y.message||"")})(h);t=new Nw(i,o,l,f||null)}else if("documentChange"in e){e.documentChange;const i=e.documentChange;i.document,i.document.name,i.document.updateTime;const o=Hd(n,i.document.name),l=fr(i.document.updateTime),h=i.document.createTime?fr(i.document.createTime):Ae.min(),f=new on({mapValue:{fields:i.document.fields}}),p=Wt.newFoundDocument(o,l,h,f),y=i.targetIds||[],w=i.removedTargetIds||[];t=new oc(y,w,p.key,p)}else if("documentDelete"in e){e.documentDelete;const i=e.documentDelete;i.document;const o=Hd(n,i.document),l=i.readTime?fr(i.readTime):Ae.min(),h=Wt.newNoDocument(o,l),f=i.removedTargetIds||[];t=new oc([],f,h.key,h)}else if("documentRemove"in e){e.documentRemove;const i=e.documentRemove;i.document;const o=Hd(n,i.document),l=i.removedTargetIds||[];t=new oc([],l,o,null)}else{if(!("filter"in e))return Se(11601,{At:e});{e.filter;const i=e.filter;i.targetId;const{count:o=0,unchangedNames:l}=i,h=new zA(o,l),f=i.targetId;t=new kw(f,h)}}return t}function XA(n,e){let t;if(e instanceof Tl)t={update:lv(n,e.key,e.value)};else if(e instanceof tp)t={delete:wf(n,e.key)};else if(e instanceof Bi)t={update:lv(n,e.key,e.data),updateMask:aC(e.fieldMask)};else{if(!(e instanceof jA))return Se(16599,{Rt:e.type});t={verify:wf(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map((i=>(function(l,h){const f=h.transform;if(f instanceof Ic)return{fieldPath:h.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(f instanceof dl)return{fieldPath:h.field.canonicalString(),appendMissingElements:{values:f.elements}};if(f instanceof fl)return{fieldPath:h.field.canonicalString(),removeAllFromArray:{values:f.elements}};if(f instanceof Sc)return{fieldPath:h.field.canonicalString(),increment:f.Ee};throw Se(20930,{transform:h.transform})})(0,i)))),e.precondition.isNone||(t.currentDocument=(function(o,l){return l.updateTime!==void 0?{updateTime:QA(o,l.updateTime)}:l.exists!==void 0?{exists:l.exists}:Se(27497)})(n,e.precondition)),t}function ZA(n,e){return n&&n.length>0?(Be(e!==void 0,14353),n.map((t=>(function(o,l){let h=o.updateTime?fr(o.updateTime):fr(l);return h.isEqual(Ae.min())&&(h=fr(l)),new OA(h,o.transformResults||[])})(t,e)))):[]}function eC(n,e){return{documents:[Dw(n,e.path)]}}function tC(n,e){const t={structuredQuery:{}},i=e.path;let o;e.collectionGroup!==null?(o=i,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(o=i.popLast(),t.structuredQuery.from=[{collectionId:i.lastSegment()}]),t.parent=Dw(n,o);const l=(function(y){if(y.length!==0)return Lw(Yn.create(y,"and"))})(e.filters);l&&(t.structuredQuery.where=l);const h=(function(y){if(y.length!==0)return y.map((w=>(function(S){return{field:Co(S.field),direction:iC(S.dir)}})(w)))})(e.orderBy);h&&(t.structuredQuery.orderBy=h);const f=vf(n,e.limit);return f!==null&&(t.structuredQuery.limit=f),e.startAt&&(t.structuredQuery.startAt=(function(y){return{before:y.inclusive,values:y.position}})(e.startAt)),e.endAt&&(t.structuredQuery.endAt=(function(y){return{before:!y.inclusive,values:y.position}})(e.endAt)),{Vt:t,parent:o}}function nC(n){let e=YA(n.parent);const t=n.structuredQuery,i=t.from?t.from.length:0;let o=null;if(i>0){Be(i===1,65062);const w=t.from[0];w.allDescendants?o=w.collectionId:e=e.child(w.collectionId)}let l=[];t.where&&(l=(function(T){const S=Ow(T);return S instanceof Yn&&hw(S)?S.getFilters():[S]})(t.where));let h=[];t.orderBy&&(h=(function(T){return T.map((S=>(function(O){return new Tc(Ro(O.field),(function(L){switch(L){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(O.direction))})(S)))})(t.orderBy));let f=null;t.limit&&(f=(function(T){let S;return S=typeof T=="object"?T.value:T,Bc(S)?null:S})(t.limit));let p=null;t.startAt&&(p=(function(T){const S=!!T.before,V=T.values||[];return new Ec(V,S)})(t.startAt));let y=null;return t.endAt&&(y=(function(T){const S=!T.before,V=T.values||[];return new Ec(V,S)})(t.endAt)),TA(e,o,h,l,f,"F",p,y)}function rC(n,e){const t=(function(o){switch(o){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Se(28987,{purpose:o})}})(e.purpose);return t==null?null:{"goog-listen-tags":t}}function Ow(n){return n.unaryFilter!==void 0?(function(t){switch(t.unaryFilter.op){case"IS_NAN":const i=Ro(t.unaryFilter.field);return yt.create(i,"==",{doubleValue:NaN});case"IS_NULL":const o=Ro(t.unaryFilter.field);return yt.create(o,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const l=Ro(t.unaryFilter.field);return yt.create(l,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const h=Ro(t.unaryFilter.field);return yt.create(h,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return Se(61313);default:return Se(60726)}})(n):n.fieldFilter!==void 0?(function(t){return yt.create(Ro(t.fieldFilter.field),(function(o){switch(o){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return Se(58110);default:return Se(50506)}})(t.fieldFilter.op),t.fieldFilter.value)})(n):n.compositeFilter!==void 0?(function(t){return Yn.create(t.compositeFilter.filters.map((i=>Ow(i))),(function(o){switch(o){case"AND":return"and";case"OR":return"or";default:return Se(1026)}})(t.compositeFilter.op))})(n):Se(30097,{filter:n})}function iC(n){return HA[n]}function sC(n){return qA[n]}function oC(n){return GA[n]}function Co(n){return{fieldPath:n.canonicalString()}}function Ro(n){return Lt.fromServerFormat(n.fieldPath)}function Lw(n){return n instanceof yt?(function(t){if(t.op==="=="){if(Qy(t.value))return{unaryFilter:{field:Co(t.field),op:"IS_NAN"}};if(Ky(t.value))return{unaryFilter:{field:Co(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(Qy(t.value))return{unaryFilter:{field:Co(t.field),op:"IS_NOT_NAN"}};if(Ky(t.value))return{unaryFilter:{field:Co(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Co(t.field),op:sC(t.op),value:t.value}}})(n):n instanceof Yn?(function(t){const i=t.getFilters().map((o=>Lw(o)));return i.length===1?i[0]:{compositeFilter:{op:oC(t.op),filters:i}}})(n):Se(54877,{filter:n})}function aC(n){const e=[];return n.fields.forEach((t=>e.push(t.canonicalString()))),{fieldPaths:e}}function Mw(n){return n.length>=4&&n.get(0)==="projects"&&n.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pi{constructor(e,t,i,o,l=Ae.min(),h=Ae.min(),f=Mt.EMPTY_BYTE_STRING,p=null){this.target=e,this.targetId=t,this.purpose=i,this.sequenceNumber=o,this.snapshotVersion=l,this.lastLimboFreeSnapshotVersion=h,this.resumeToken=f,this.expectedCount=p}withSequenceNumber(e){return new Pi(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new Pi(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Pi(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Pi(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lC{constructor(e){this.gt=e}}function uC(n){const e=nC({parent:n.parent,structuredQuery:n.structuredQuery});return n.limitType==="LAST"?yf(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cC{constructor(){this.Dn=new hC}addToCollectionParentIndex(e,t){return this.Dn.add(t),Y.resolve()}getCollectionParents(e,t){return Y.resolve(this.Dn.getEntries(t))}addFieldIndex(e,t){return Y.resolve()}deleteFieldIndex(e,t){return Y.resolve()}deleteAllFieldIndexes(e){return Y.resolve()}createTargetIndexes(e,t){return Y.resolve()}getDocumentsMatchingTarget(e,t){return Y.resolve(null)}getIndexType(e,t){return Y.resolve(0)}getFieldIndexes(e,t){return Y.resolve([])}getNextCollectionGroupToUpdate(e){return Y.resolve(null)}getMinOffset(e,t){return Y.resolve(Di.min())}getMinOffsetFromCollectionGroup(e,t){return Y.resolve(Di.min())}updateCollectionGroup(e,t,i){return Y.resolve()}updateIndexEntries(e,t){return Y.resolve()}}class hC{constructor(){this.index={}}add(e){const t=e.lastSegment(),i=e.popLast(),o=this.index[t]||new St(Ye.comparator),l=!o.has(i);return this.index[t]=o.add(i),l}has(e){const t=e.lastSegment(),i=e.popLast(),o=this.index[t];return o&&o.has(i)}getEntries(e){return(this.index[e]||new St(Ye.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uv={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},jw=41943040;class sn{static withCacheSize(e){return new sn(e,sn.DEFAULT_COLLECTION_PERCENTILE,sn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,i){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */sn.DEFAULT_COLLECTION_PERCENTILE=10,sn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,sn.DEFAULT=new sn(jw,sn.DEFAULT_COLLECTION_PERCENTILE,sn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),sn.DISABLED=new sn(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fo{constructor(e){this._r=e}next(){return this._r+=2,this._r}static ar(){return new Fo(0)}static ur(){return new Fo(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cv="LruGarbageCollector",dC=1048576;function hv([n,e],[t,i]){const o=Ne(n,t);return o===0?Ne(e,i):o}class fC{constructor(e){this.Tr=e,this.buffer=new St(hv),this.Ir=0}dr(){return++this.Ir}Er(e){const t=[e,this.dr()];if(this.buffer.size<this.Tr)this.buffer=this.buffer.add(t);else{const i=this.buffer.last();hv(t,i)<0&&(this.buffer=this.buffer.delete(i).add(t))}}get maxValue(){return this.buffer.last()[0]}}class pC{constructor(e,t,i){this.garbageCollector=e,this.asyncQueue=t,this.localStore=i,this.Ar=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Rr(6e4)}stop(){this.Ar&&(this.Ar.cancel(),this.Ar=null)}get started(){return this.Ar!==null}Rr(e){de(cv,`Garbage collection scheduled in ${e}ms`),this.Ar=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(async()=>{this.Ar=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(t){Qo(t)?de(cv,"Ignoring IndexedDB error during garbage collection: ",t):await Ko(t)}await this.Rr(3e5)}))}}class mC{constructor(e,t){this.Vr=e,this.params=t}calculateTargetCount(e,t){return this.Vr.mr(e).next((i=>Math.floor(t/100*i)))}nthSequenceNumber(e,t){if(t===0)return Y.resolve(zc.ue);const i=new fC(t);return this.Vr.forEachTarget(e,(o=>i.Er(o.sequenceNumber))).next((()=>this.Vr.gr(e,(o=>i.Er(o))))).next((()=>i.maxValue))}removeTargets(e,t,i){return this.Vr.removeTargets(e,t,i)}removeOrphanedDocuments(e,t){return this.Vr.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?(de("LruGarbageCollector","Garbage collection skipped; disabled"),Y.resolve(uv)):this.getCacheSize(e).next((i=>i<this.params.cacheSizeCollectionThreshold?(de("LruGarbageCollector",`Garbage collection skipped; Cache size ${i} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),uv):this.pr(e,t)))}getCacheSize(e){return this.Vr.getCacheSize(e)}pr(e,t){let i,o,l,h,f,p,y;const w=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((T=>(T>this.params.maximumSequenceNumbersToCollect?(de("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${T}`),o=this.params.maximumSequenceNumbersToCollect):o=T,h=Date.now(),this.nthSequenceNumber(e,o)))).next((T=>(i=T,f=Date.now(),this.removeTargets(e,i,t)))).next((T=>(l=T,p=Date.now(),this.removeOrphanedDocuments(e,i)))).next((T=>(y=Date.now(),Po()<=De.DEBUG&&de("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${h-w}ms
	Determined least recently used ${o} in `+(f-h)+`ms
	Removed ${l} targets in `+(p-f)+`ms
	Removed ${T} documents in `+(y-p)+`ms
Total Duration: ${y-w}ms`),Y.resolve({didRun:!0,sequenceNumbersCollected:o,targetsRemoved:l,documentsRemoved:T}))))}}function gC(n,e){return new mC(n,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yC{constructor(){this.changes=new Ns((e=>e.toString()),((e,t)=>e.isEqual(t))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,Wt.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const i=this.changes.get(t);return i!==void 0?Y.resolve(i):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vC{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _C{constructor(e,t,i,o){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=i,this.indexManager=o}getDocument(e,t){let i=null;return this.documentOverlayCache.getOverlay(e,t).next((o=>(i=o,this.remoteDocumentCache.getEntry(e,t)))).next((o=>(i!==null&&rl(i.mutation,o,gn.empty(),Ge.now()),o)))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next((i=>this.getLocalViewOfDocuments(e,i,Ve()).next((()=>i))))}getLocalViewOfDocuments(e,t,i=Ve()){const o=_s();return this.populateOverlays(e,o,t).next((()=>this.computeViews(e,t,o,i).next((l=>{let h=Qa();return l.forEach(((f,p)=>{h=h.insert(f,p.overlayedDocument)})),h}))))}getOverlayedDocuments(e,t){const i=_s();return this.populateOverlays(e,i,t).next((()=>this.computeViews(e,t,i,Ve())))}populateOverlays(e,t,i){const o=[];return i.forEach((l=>{t.has(l)||o.push(l)})),this.documentOverlayCache.getOverlays(e,o).next((l=>{l.forEach(((h,f)=>{t.set(h,f)}))}))}computeViews(e,t,i,o){let l=$r();const h=nl(),f=(function(){return nl()})();return t.forEach(((p,y)=>{const w=i.get(y.key);o.has(y.key)&&(w===void 0||w.mutation instanceof Bi)?l=l.insert(y.key,y):w!==void 0?(h.set(y.key,w.mutation.getFieldMask()),rl(w.mutation,y,w.mutation.getFieldMask(),Ge.now())):h.set(y.key,gn.empty())})),this.recalculateAndSaveOverlays(e,l).next((p=>(p.forEach(((y,w)=>h.set(y,w))),t.forEach(((y,w)=>{var T;return f.set(y,new vC(w,(T=h.get(y))!==null&&T!==void 0?T:null))})),f)))}recalculateAndSaveOverlays(e,t){const i=nl();let o=new it(((h,f)=>h-f)),l=Ve();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next((h=>{for(const f of h)f.keys().forEach((p=>{const y=t.get(p);if(y===null)return;let w=i.get(p)||gn.empty();w=f.applyToLocalView(y,w),i.set(p,w);const T=(o.get(f.batchId)||Ve()).add(p);o=o.insert(f.batchId,T)}))})).next((()=>{const h=[],f=o.getReverseIterator();for(;f.hasNext();){const p=f.getNext(),y=p.key,w=p.value,T=ww();w.forEach((S=>{if(!l.has(S)){const V=Aw(t.get(S),i.get(S));V!==null&&T.set(S,V),l=l.add(S)}})),h.push(this.documentOverlayCache.saveOverlays(e,y,T))}return Y.waitFor(h)})).next((()=>i))}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next((i=>this.recalculateAndSaveOverlays(e,i)))}getDocumentsMatchingQuery(e,t,i,o){return(function(h){return _e.isDocumentKey(h.path)&&h.collectionGroup===null&&h.filters.length===0})(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):mw(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,i,o):this.getDocumentsMatchingCollectionQuery(e,t,i,o)}getNextDocuments(e,t,i,o){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,i,o).next((l=>{const h=o-l.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,i.largestBatchId,o-l.size):Y.resolve(_s());let f=ll,p=l;return h.next((y=>Y.forEach(y,((w,T)=>(f<T.largestBatchId&&(f=T.largestBatchId),l.get(w)?Y.resolve():this.remoteDocumentCache.getEntry(e,w).next((S=>{p=p.insert(w,S)}))))).next((()=>this.populateOverlays(e,y,l))).next((()=>this.computeViews(e,p,y,Ve()))).next((w=>({batchId:f,changes:_w(w)})))))}))}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new _e(t)).next((i=>{let o=Qa();return i.isFoundDocument()&&(o=o.insert(i.key,i)),o}))}getDocumentsMatchingCollectionGroupQuery(e,t,i,o){const l=t.collectionGroup;let h=Qa();return this.indexManager.getCollectionParents(e,l).next((f=>Y.forEach(f,(p=>{const y=(function(T,S){return new El(S,null,T.explicitOrderBy.slice(),T.filters.slice(),T.limit,T.limitType,T.startAt,T.endAt)})(t,p.child(l));return this.getDocumentsMatchingCollectionQuery(e,y,i,o).next((w=>{w.forEach(((T,S)=>{h=h.insert(T,S)}))}))})).next((()=>h))))}getDocumentsMatchingCollectionQuery(e,t,i,o){let l;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,i.largestBatchId).next((h=>(l=h,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,i,l,o)))).next((h=>{l.forEach(((p,y)=>{const w=y.getKey();h.get(w)===null&&(h=h.insert(w,Wt.newInvalidDocument(w)))}));let f=Qa();return h.forEach(((p,y)=>{const w=l.get(p);w!==void 0&&rl(w.mutation,y,gn.empty(),Ge.now()),qc(t,y)&&(f=f.insert(p,y))})),f}))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wC{constructor(e){this.serializer=e,this.Br=new Map,this.Lr=new Map}getBundleMetadata(e,t){return Y.resolve(this.Br.get(t))}saveBundleMetadata(e,t){return this.Br.set(t.id,(function(o){return{id:o.id,version:o.version,createTime:fr(o.createTime)}})(t)),Y.resolve()}getNamedQuery(e,t){return Y.resolve(this.Lr.get(t))}saveNamedQuery(e,t){return this.Lr.set(t.name,(function(o){return{name:o.name,query:uC(o.bundledQuery),readTime:fr(o.readTime)}})(t)),Y.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class EC{constructor(){this.overlays=new it(_e.comparator),this.kr=new Map}getOverlay(e,t){return Y.resolve(this.overlays.get(t))}getOverlays(e,t){const i=_s();return Y.forEach(t,(o=>this.getOverlay(e,o).next((l=>{l!==null&&i.set(o,l)})))).next((()=>i))}saveOverlays(e,t,i){return i.forEach(((o,l)=>{this.wt(e,t,l)})),Y.resolve()}removeOverlaysForBatchId(e,t,i){const o=this.kr.get(i);return o!==void 0&&(o.forEach((l=>this.overlays=this.overlays.remove(l))),this.kr.delete(i)),Y.resolve()}getOverlaysForCollection(e,t,i){const o=_s(),l=t.length+1,h=new _e(t.child("")),f=this.overlays.getIteratorFrom(h);for(;f.hasNext();){const p=f.getNext().value,y=p.getKey();if(!t.isPrefixOf(y.path))break;y.path.length===l&&p.largestBatchId>i&&o.set(p.getKey(),p)}return Y.resolve(o)}getOverlaysForCollectionGroup(e,t,i,o){let l=new it(((y,w)=>y-w));const h=this.overlays.getIterator();for(;h.hasNext();){const y=h.getNext().value;if(y.getKey().getCollectionGroup()===t&&y.largestBatchId>i){let w=l.get(y.largestBatchId);w===null&&(w=_s(),l=l.insert(y.largestBatchId,w)),w.set(y.getKey(),y)}}const f=_s(),p=l.getIterator();for(;p.hasNext()&&(p.getNext().value.forEach(((y,w)=>f.set(y,w))),!(f.size()>=o)););return Y.resolve(f)}wt(e,t,i){const o=this.overlays.get(i.key);if(o!==null){const h=this.kr.get(o.largestBatchId).delete(i.key);this.kr.set(o.largestBatchId,h)}this.overlays=this.overlays.insert(i.key,new UA(t,i));let l=this.kr.get(t);l===void 0&&(l=Ve(),this.kr.set(t,l)),this.kr.set(t,l.add(i.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TC{constructor(){this.sessionToken=Mt.EMPTY_BYTE_STRING}getSessionToken(e){return Y.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,Y.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sp{constructor(){this.qr=new St(Nt.Qr),this.$r=new St(Nt.Ur)}isEmpty(){return this.qr.isEmpty()}addReference(e,t){const i=new Nt(e,t);this.qr=this.qr.add(i),this.$r=this.$r.add(i)}Kr(e,t){e.forEach((i=>this.addReference(i,t)))}removeReference(e,t){this.Wr(new Nt(e,t))}Gr(e,t){e.forEach((i=>this.removeReference(i,t)))}zr(e){const t=new _e(new Ye([])),i=new Nt(t,e),o=new Nt(t,e+1),l=[];return this.$r.forEachInRange([i,o],(h=>{this.Wr(h),l.push(h.key)})),l}jr(){this.qr.forEach((e=>this.Wr(e)))}Wr(e){this.qr=this.qr.delete(e),this.$r=this.$r.delete(e)}Jr(e){const t=new _e(new Ye([])),i=new Nt(t,e),o=new Nt(t,e+1);let l=Ve();return this.$r.forEachInRange([i,o],(h=>{l=l.add(h.key)})),l}containsKey(e){const t=new Nt(e,0),i=this.qr.firstAfterOrEqual(t);return i!==null&&e.isEqual(i.key)}}class Nt{constructor(e,t){this.key=e,this.Hr=t}static Qr(e,t){return _e.comparator(e.key,t.key)||Ne(e.Hr,t.Hr)}static Ur(e,t){return Ne(e.Hr,t.Hr)||_e.comparator(e.key,t.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IC{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.er=1,this.Yr=new St(Nt.Qr)}checkEmpty(e){return Y.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,i,o){const l=this.er;this.er++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const h=new FA(l,t,i,o);this.mutationQueue.push(h);for(const f of o)this.Yr=this.Yr.add(new Nt(f.key,l)),this.indexManager.addToCollectionParentIndex(e,f.key.path.popLast());return Y.resolve(h)}lookupMutationBatch(e,t){return Y.resolve(this.Zr(t))}getNextMutationBatchAfterBatchId(e,t){const i=t+1,o=this.Xr(i),l=o<0?0:o;return Y.resolve(this.mutationQueue.length>l?this.mutationQueue[l]:null)}getHighestUnacknowledgedBatchId(){return Y.resolve(this.mutationQueue.length===0?Qf:this.er-1)}getAllMutationBatches(e){return Y.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const i=new Nt(t,0),o=new Nt(t,Number.POSITIVE_INFINITY),l=[];return this.Yr.forEachInRange([i,o],(h=>{const f=this.Zr(h.Hr);l.push(f)})),Y.resolve(l)}getAllMutationBatchesAffectingDocumentKeys(e,t){let i=new St(Ne);return t.forEach((o=>{const l=new Nt(o,0),h=new Nt(o,Number.POSITIVE_INFINITY);this.Yr.forEachInRange([l,h],(f=>{i=i.add(f.Hr)}))})),Y.resolve(this.ei(i))}getAllMutationBatchesAffectingQuery(e,t){const i=t.path,o=i.length+1;let l=i;_e.isDocumentKey(l)||(l=l.child(""));const h=new Nt(new _e(l),0);let f=new St(Ne);return this.Yr.forEachWhile((p=>{const y=p.key.path;return!!i.isPrefixOf(y)&&(y.length===o&&(f=f.add(p.Hr)),!0)}),h),Y.resolve(this.ei(f))}ei(e){const t=[];return e.forEach((i=>{const o=this.Zr(i);o!==null&&t.push(o)})),t}removeMutationBatch(e,t){Be(this.ti(t.batchId,"removed")===0,55003),this.mutationQueue.shift();let i=this.Yr;return Y.forEach(t.mutations,(o=>{const l=new Nt(o.key,t.batchId);return i=i.delete(l),this.referenceDelegate.markPotentiallyOrphaned(e,o.key)})).next((()=>{this.Yr=i}))}rr(e){}containsKey(e,t){const i=new Nt(t,0),o=this.Yr.firstAfterOrEqual(i);return Y.resolve(t.isEqual(o&&o.key))}performConsistencyCheck(e){return this.mutationQueue.length,Y.resolve()}ti(e,t){return this.Xr(e)}Xr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Zr(e){const t=this.Xr(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SC{constructor(e){this.ni=e,this.docs=(function(){return new it(_e.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const i=t.key,o=this.docs.get(i),l=o?o.size:0,h=this.ni(t);return this.docs=this.docs.insert(i,{document:t.mutableCopy(),size:h}),this.size+=h-l,this.indexManager.addToCollectionParentIndex(e,i.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const i=this.docs.get(t);return Y.resolve(i?i.document.mutableCopy():Wt.newInvalidDocument(t))}getEntries(e,t){let i=$r();return t.forEach((o=>{const l=this.docs.get(o);i=i.insert(o,l?l.document.mutableCopy():Wt.newInvalidDocument(o))})),Y.resolve(i)}getDocumentsMatchingQuery(e,t,i,o){let l=$r();const h=t.path,f=new _e(h.child("__id-9223372036854775808__")),p=this.docs.getIteratorFrom(f);for(;p.hasNext();){const{key:y,value:{document:w}}=p.getNext();if(!h.isPrefixOf(y.path))break;y.path.length>h.length+1||eA(ZP(w),i)<=0||(o.has(w.key)||qc(t,w))&&(l=l.insert(w.key,w.mutableCopy()))}return Y.resolve(l)}getAllFromCollectionGroup(e,t,i,o){Se(9500)}ri(e,t){return Y.forEach(this.docs,(i=>t(i)))}newChangeBuffer(e){return new PC(this)}getSize(e){return Y.resolve(this.size)}}class PC extends yC{constructor(e){super(),this.Or=e}applyChanges(e){const t=[];return this.changes.forEach(((i,o)=>{o.isValidDocument()?t.push(this.Or.addEntry(e,o)):this.Or.removeEntry(i)})),Y.waitFor(t)}getFromCache(e,t){return this.Or.getEntry(e,t)}getAllFromCache(e,t){return this.Or.getEntries(e,t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AC{constructor(e){this.persistence=e,this.ii=new Ns((t=>Xf(t)),Zf),this.lastRemoteSnapshotVersion=Ae.min(),this.highestTargetId=0,this.si=0,this.oi=new sp,this.targetCount=0,this._i=Fo.ar()}forEachTarget(e,t){return this.ii.forEach(((i,o)=>t(o))),Y.resolve()}getLastRemoteSnapshotVersion(e){return Y.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return Y.resolve(this.si)}allocateTargetId(e){return this.highestTargetId=this._i.next(),Y.resolve(this.highestTargetId)}setTargetsMetadata(e,t,i){return i&&(this.lastRemoteSnapshotVersion=i),t>this.si&&(this.si=t),Y.resolve()}hr(e){this.ii.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this._i=new Fo(t),this.highestTargetId=t),e.sequenceNumber>this.si&&(this.si=e.sequenceNumber)}addTargetData(e,t){return this.hr(t),this.targetCount+=1,Y.resolve()}updateTargetData(e,t){return this.hr(t),Y.resolve()}removeTargetData(e,t){return this.ii.delete(t.target),this.oi.zr(t.targetId),this.targetCount-=1,Y.resolve()}removeTargets(e,t,i){let o=0;const l=[];return this.ii.forEach(((h,f)=>{f.sequenceNumber<=t&&i.get(f.targetId)===null&&(this.ii.delete(h),l.push(this.removeMatchingKeysForTargetId(e,f.targetId)),o++)})),Y.waitFor(l).next((()=>o))}getTargetCount(e){return Y.resolve(this.targetCount)}getTargetData(e,t){const i=this.ii.get(t)||null;return Y.resolve(i)}addMatchingKeys(e,t,i){return this.oi.Kr(t,i),Y.resolve()}removeMatchingKeys(e,t,i){this.oi.Gr(t,i);const o=this.persistence.referenceDelegate,l=[];return o&&t.forEach((h=>{l.push(o.markPotentiallyOrphaned(e,h))})),Y.waitFor(l)}removeMatchingKeysForTargetId(e,t){return this.oi.zr(t),Y.resolve()}getMatchingKeysForTargetId(e,t){const i=this.oi.Jr(t);return Y.resolve(i)}containsKey(e,t){return Y.resolve(this.oi.containsKey(t))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fw{constructor(e,t){this.ai={},this.overlays={},this.ui=new zc(0),this.ci=!1,this.ci=!0,this.li=new TC,this.referenceDelegate=e(this),this.hi=new AC(this),this.indexManager=new cC,this.remoteDocumentCache=(function(o){return new SC(o)})((i=>this.referenceDelegate.Pi(i))),this.serializer=new lC(t),this.Ti=new wC(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.ci=!1,Promise.resolve()}get started(){return this.ci}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new EC,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let i=this.ai[e.toKey()];return i||(i=new IC(t,this.referenceDelegate),this.ai[e.toKey()]=i),i}getGlobalsCache(){return this.li}getTargetCache(){return this.hi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ti}runTransaction(e,t,i){de("MemoryPersistence","Starting transaction:",e);const o=new CC(this.ui.next());return this.referenceDelegate.Ii(),i(o).next((l=>this.referenceDelegate.di(o).next((()=>l)))).toPromise().then((l=>(o.raiseOnCommittedEvent(),l)))}Ei(e,t){return Y.or(Object.values(this.ai).map((i=>()=>i.containsKey(e,t))))}}class CC extends nA{constructor(e){super(),this.currentSequenceNumber=e}}class op{constructor(e){this.persistence=e,this.Ai=new sp,this.Ri=null}static Vi(e){return new op(e)}get mi(){if(this.Ri)return this.Ri;throw Se(60996)}addReference(e,t,i){return this.Ai.addReference(i,t),this.mi.delete(i.toString()),Y.resolve()}removeReference(e,t,i){return this.Ai.removeReference(i,t),this.mi.add(i.toString()),Y.resolve()}markPotentiallyOrphaned(e,t){return this.mi.add(t.toString()),Y.resolve()}removeTarget(e,t){this.Ai.zr(t.targetId).forEach((o=>this.mi.add(o.toString())));const i=this.persistence.getTargetCache();return i.getMatchingKeysForTargetId(e,t.targetId).next((o=>{o.forEach((l=>this.mi.add(l.toString())))})).next((()=>i.removeTargetData(e,t)))}Ii(){this.Ri=new Set}di(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return Y.forEach(this.mi,(i=>{const o=_e.fromPath(i);return this.fi(e,o).next((l=>{l||t.removeEntry(o,Ae.min())}))})).next((()=>(this.Ri=null,t.apply(e))))}updateLimboDocument(e,t){return this.fi(e,t).next((i=>{i?this.mi.delete(t.toString()):this.mi.add(t.toString())}))}Pi(e){return 0}fi(e,t){return Y.or([()=>Y.resolve(this.Ai.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ei(e,t)])}}class Ac{constructor(e,t){this.persistence=e,this.gi=new Ns((i=>sA(i.path)),((i,o)=>i.isEqual(o))),this.garbageCollector=gC(this,t)}static Vi(e,t){return new Ac(e,t)}Ii(){}di(e){return Y.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}mr(e){const t=this.yr(e);return this.persistence.getTargetCache().getTargetCount(e).next((i=>t.next((o=>i+o))))}yr(e){let t=0;return this.gr(e,(i=>{t++})).next((()=>t))}gr(e,t){return Y.forEach(this.gi,((i,o)=>this.Sr(e,i,o).next((l=>l?Y.resolve():t(o)))))}removeTargets(e,t,i){return this.persistence.getTargetCache().removeTargets(e,t,i)}removeOrphanedDocuments(e,t){let i=0;const o=this.persistence.getRemoteDocumentCache(),l=o.newChangeBuffer();return o.ri(e,(h=>this.Sr(e,h,t).next((f=>{f||(i++,l.removeEntry(h,Ae.min()))})))).next((()=>l.apply(e))).next((()=>i))}markPotentiallyOrphaned(e,t){return this.gi.set(t,e.currentSequenceNumber),Y.resolve()}removeTarget(e,t){const i=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,i)}addReference(e,t,i){return this.gi.set(i,e.currentSequenceNumber),Y.resolve()}removeReference(e,t,i){return this.gi.set(i,e.currentSequenceNumber),Y.resolve()}updateLimboDocument(e,t){return this.gi.set(t,e.currentSequenceNumber),Y.resolve()}Pi(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=rc(e.data.value)),t}Sr(e,t,i){return Y.or([()=>this.persistence.Ei(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{const o=this.gi.get(t);return Y.resolve(o!==void 0&&o>i)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ap{constructor(e,t,i,o){this.targetId=e,this.fromCache=t,this.Is=i,this.ds=o}static Es(e,t){let i=Ve(),o=Ve();for(const l of t.docChanges)switch(l.type){case 0:i=i.add(l.doc.key);break;case 1:o=o.add(l.doc.key)}return new ap(e,t.fromCache,i,o)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RC{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kC{constructor(){this.As=!1,this.Rs=!1,this.Vs=100,this.fs=(function(){return iI()?8:rA(Ht())>0?6:4})()}initialize(e,t){this.gs=e,this.indexManager=t,this.As=!0}getDocumentsMatchingQuery(e,t,i,o){const l={result:null};return this.ps(e,t).next((h=>{l.result=h})).next((()=>{if(!l.result)return this.ys(e,t,o,i).next((h=>{l.result=h}))})).next((()=>{if(l.result)return;const h=new RC;return this.ws(e,t,h).next((f=>{if(l.result=f,this.Rs)return this.Ss(e,t,h,f.size)}))})).next((()=>l.result))}Ss(e,t,i,o){return i.documentReadCount<this.Vs?(Po()<=De.DEBUG&&de("QueryEngine","SDK will not create cache indexes for query:",Ao(t),"since it only creates cache indexes for collection contains","more than or equal to",this.Vs,"documents"),Y.resolve()):(Po()<=De.DEBUG&&de("QueryEngine","Query:",Ao(t),"scans",i.documentReadCount,"local documents and returns",o,"documents as results."),i.documentReadCount>this.fs*o?(Po()<=De.DEBUG&&de("QueryEngine","The SDK decides to create cache indexes for query:",Ao(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,dr(t))):Y.resolve())}ps(e,t){if(Zy(t))return Y.resolve(null);let i=dr(t);return this.indexManager.getIndexType(e,i).next((o=>o===0?null:(t.limit!==null&&o===1&&(t=yf(t,null,"F"),i=dr(t)),this.indexManager.getDocumentsMatchingTarget(e,i).next((l=>{const h=Ve(...l);return this.gs.getDocuments(e,h).next((f=>this.indexManager.getMinOffset(e,i).next((p=>{const y=this.bs(t,f);return this.Ds(t,y,h,p.readTime)?this.ps(e,yf(t,null,"F")):this.vs(e,y,t,p)}))))})))))}ys(e,t,i,o){return Zy(t)||o.isEqual(Ae.min())?Y.resolve(null):this.gs.getDocuments(e,i).next((l=>{const h=this.bs(t,l);return this.Ds(t,h,i,o)?Y.resolve(null):(Po()<=De.DEBUG&&de("QueryEngine","Re-using previous result from %s to execute query: %s",o.toString(),Ao(t)),this.vs(e,h,t,XP(o,ll)).next((f=>f)))}))}bs(e,t){let i=new St(yw(e));return t.forEach(((o,l)=>{qc(e,l)&&(i=i.add(l))})),i}Ds(e,t,i,o){if(e.limit===null)return!1;if(i.size!==t.size)return!0;const l=e.limitType==="F"?t.last():t.first();return!!l&&(l.hasPendingWrites||l.version.compareTo(o)>0)}ws(e,t,i){return Po()<=De.DEBUG&&de("QueryEngine","Using full collection scan to execute query:",Ao(t)),this.gs.getDocumentsMatchingQuery(e,t,Di.min(),i)}vs(e,t,i,o){return this.gs.getDocumentsMatchingQuery(e,i,o).next((l=>(t.forEach((h=>{l=l.insert(h.key,h)})),l)))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lp="LocalStore",NC=3e8;class xC{constructor(e,t,i,o){this.persistence=e,this.Cs=t,this.serializer=o,this.Fs=new it(Ne),this.Ms=new Ns((l=>Xf(l)),Zf),this.xs=new Map,this.Os=e.getRemoteDocumentCache(),this.hi=e.getTargetCache(),this.Ti=e.getBundleCache(),this.Ns(i)}Ns(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new _C(this.Os,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Os.setIndexManager(this.indexManager),this.Cs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(t=>e.collect(t,this.Fs)))}}function bC(n,e,t,i){return new xC(n,e,t,i)}async function Uw(n,e){const t=Re(n);return await t.persistence.runTransaction("Handle user change","readonly",(i=>{let o;return t.mutationQueue.getAllMutationBatches(i).next((l=>(o=l,t.Ns(e),t.mutationQueue.getAllMutationBatches(i)))).next((l=>{const h=[],f=[];let p=Ve();for(const y of o){h.push(y.batchId);for(const w of y.mutations)p=p.add(w.key)}for(const y of l){f.push(y.batchId);for(const w of y.mutations)p=p.add(w.key)}return t.localDocuments.getDocuments(i,p).next((y=>({Bs:y,removedBatchIds:h,addedBatchIds:f})))}))}))}function DC(n,e){const t=Re(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",(i=>{const o=e.batch.keys(),l=t.Os.newChangeBuffer({trackRemovals:!0});return(function(f,p,y,w){const T=y.batch,S=T.keys();let V=Y.resolve();return S.forEach((O=>{V=V.next((()=>w.getEntry(p,O))).next((j=>{const L=y.docVersions.get(O);Be(L!==null,48541),j.version.compareTo(L)<0&&(T.applyToRemoteDocument(j,y),j.isValidDocument()&&(j.setReadTime(y.commitVersion),w.addEntry(j)))}))})),V.next((()=>f.mutationQueue.removeMutationBatch(p,T)))})(t,i,e,l).next((()=>l.apply(i))).next((()=>t.mutationQueue.performConsistencyCheck(i))).next((()=>t.documentOverlayCache.removeOverlaysForBatchId(i,o,e.batch.batchId))).next((()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(i,(function(f){let p=Ve();for(let y=0;y<f.mutationResults.length;++y)f.mutationResults[y].transformResults.length>0&&(p=p.add(f.batch.mutations[y].key));return p})(e)))).next((()=>t.localDocuments.getDocuments(i,o)))}))}function zw(n){const e=Re(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(t=>e.hi.getLastRemoteSnapshotVersion(t)))}function VC(n,e){const t=Re(n),i=e.snapshotVersion;let o=t.Fs;return t.persistence.runTransaction("Apply remote event","readwrite-primary",(l=>{const h=t.Os.newChangeBuffer({trackRemovals:!0});o=t.Fs;const f=[];e.targetChanges.forEach(((w,T)=>{const S=o.get(T);if(!S)return;f.push(t.hi.removeMatchingKeys(l,w.removedDocuments,T).next((()=>t.hi.addMatchingKeys(l,w.addedDocuments,T))));let V=S.withSequenceNumber(l.currentSequenceNumber);e.targetMismatches.get(T)!==null?V=V.withResumeToken(Mt.EMPTY_BYTE_STRING,Ae.min()).withLastLimboFreeSnapshotVersion(Ae.min()):w.resumeToken.approximateByteSize()>0&&(V=V.withResumeToken(w.resumeToken,i)),o=o.insert(T,V),(function(j,L,se){return j.resumeToken.approximateByteSize()===0||L.snapshotVersion.toMicroseconds()-j.snapshotVersion.toMicroseconds()>=NC?!0:se.addedDocuments.size+se.modifiedDocuments.size+se.removedDocuments.size>0})(S,V,w)&&f.push(t.hi.updateTargetData(l,V))}));let p=$r(),y=Ve();if(e.documentUpdates.forEach((w=>{e.resolvedLimboDocuments.has(w)&&f.push(t.persistence.referenceDelegate.updateLimboDocument(l,w))})),f.push(OC(l,h,e.documentUpdates).next((w=>{p=w.Ls,y=w.ks}))),!i.isEqual(Ae.min())){const w=t.hi.getLastRemoteSnapshotVersion(l).next((T=>t.hi.setTargetsMetadata(l,l.currentSequenceNumber,i)));f.push(w)}return Y.waitFor(f).next((()=>h.apply(l))).next((()=>t.localDocuments.getLocalViewOfDocuments(l,p,y))).next((()=>p))})).then((l=>(t.Fs=o,l)))}function OC(n,e,t){let i=Ve(),o=Ve();return t.forEach((l=>i=i.add(l))),e.getEntries(n,i).next((l=>{let h=$r();return t.forEach(((f,p)=>{const y=l.get(f);p.isFoundDocument()!==y.isFoundDocument()&&(o=o.add(f)),p.isNoDocument()&&p.version.isEqual(Ae.min())?(e.removeEntry(f,p.readTime),h=h.insert(f,p)):!y.isValidDocument()||p.version.compareTo(y.version)>0||p.version.compareTo(y.version)===0&&y.hasPendingWrites?(e.addEntry(p),h=h.insert(f,p)):de(lp,"Ignoring outdated watch update for ",f,". Current version:",y.version," Watch version:",p.version)})),{Ls:h,ks:o}}))}function LC(n,e){const t=Re(n);return t.persistence.runTransaction("Get next mutation batch","readonly",(i=>(e===void 0&&(e=Qf),t.mutationQueue.getNextMutationBatchAfterBatchId(i,e))))}function MC(n,e){const t=Re(n);return t.persistence.runTransaction("Allocate target","readwrite",(i=>{let o;return t.hi.getTargetData(i,e).next((l=>l?(o=l,Y.resolve(o)):t.hi.allocateTargetId(i).next((h=>(o=new Pi(e,h,"TargetPurposeListen",i.currentSequenceNumber),t.hi.addTargetData(i,o).next((()=>o)))))))})).then((i=>{const o=t.Fs.get(i.targetId);return(o===null||i.snapshotVersion.compareTo(o.snapshotVersion)>0)&&(t.Fs=t.Fs.insert(i.targetId,i),t.Ms.set(e,i.targetId)),i}))}async function Tf(n,e,t){const i=Re(n),o=i.Fs.get(e),l=t?"readwrite":"readwrite-primary";try{t||await i.persistence.runTransaction("Release target",l,(h=>i.persistence.referenceDelegate.removeTarget(h,o)))}catch(h){if(!Qo(h))throw h;de(lp,`Failed to update sequence numbers for target ${e}: ${h}`)}i.Fs=i.Fs.remove(e),i.Ms.delete(o.target)}function dv(n,e,t){const i=Re(n);let o=Ae.min(),l=Ve();return i.persistence.runTransaction("Execute query","readwrite",(h=>(function(p,y,w){const T=Re(p),S=T.Ms.get(w);return S!==void 0?Y.resolve(T.Fs.get(S)):T.hi.getTargetData(y,w)})(i,h,dr(e)).next((f=>{if(f)return o=f.lastLimboFreeSnapshotVersion,i.hi.getMatchingKeysForTargetId(h,f.targetId).next((p=>{l=p}))})).next((()=>i.Cs.getDocumentsMatchingQuery(h,e,t?o:Ae.min(),t?l:Ve()))).next((f=>(jC(i,SA(e),f),{documents:f,qs:l})))))}function jC(n,e,t){let i=n.xs.get(e)||Ae.min();t.forEach(((o,l)=>{l.readTime.compareTo(i)>0&&(i=l.readTime)})),n.xs.set(e,i)}class fv{constructor(){this.activeTargetIds=NA()}Gs(e){this.activeTargetIds=this.activeTargetIds.add(e)}zs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Ws(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class FC{constructor(){this.Fo=new fv,this.Mo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,i){}addLocalQueryTarget(e,t=!0){return t&&this.Fo.Gs(e),this.Mo[e]||"not-current"}updateQueryState(e,t,i){this.Mo[e]=t}removeLocalQueryTarget(e){this.Fo.zs(e)}isLocalQueryTarget(e){return this.Fo.activeTargetIds.has(e)}clearQueryState(e){delete this.Mo[e]}getAllActiveQueryTargets(){return this.Fo.activeTargetIds}isActiveQueryTarget(e){return this.Fo.activeTargetIds.has(e)}start(){return this.Fo=new fv,Promise.resolve()}handleUserChange(e,t,i){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UC{xo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pv="ConnectivityMonitor";class mv{constructor(){this.Oo=()=>this.No(),this.Bo=()=>this.Lo(),this.ko=[],this.qo()}xo(e){this.ko.push(e)}shutdown(){window.removeEventListener("online",this.Oo),window.removeEventListener("offline",this.Bo)}qo(){window.addEventListener("online",this.Oo),window.addEventListener("offline",this.Bo)}No(){de(pv,"Network connectivity changed: AVAILABLE");for(const e of this.ko)e(0)}Lo(){de(pv,"Network connectivity changed: UNAVAILABLE");for(const e of this.ko)e(1)}static C(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Qu=null;function If(){return Qu===null?Qu=(function(){return 268435456+Math.round(2147483648*Math.random())})():Qu++,"0x"+Qu.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qd="RestConnection",zC={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class BC{get Qo(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const t=e.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),o=encodeURIComponent(this.databaseId.database);this.$o=t+"://"+e.host,this.Uo=`projects/${i}/databases/${o}`,this.Ko=this.databaseId.database===_c?`project_id=${i}`:`project_id=${i}&database_id=${o}`}Wo(e,t,i,o,l){const h=If(),f=this.Go(e,t.toUriEncodedString());de(qd,`Sending RPC '${e}' ${h}:`,f,i);const p={"google-cloud-resource-prefix":this.Uo,"x-goog-request-params":this.Ko};this.zo(p,o,l);const{host:y}=new URL(f),w=Ho(y);return this.jo(e,f,p,i,w).then((T=>(de(qd,`Received RPC '${e}' ${h}: `,T),T)),(T=>{throw bi(qd,`RPC '${e}' ${h} failed with error: `,T,"url: ",f,"request:",i),T}))}Jo(e,t,i,o,l,h){return this.Wo(e,t,i,o,l)}zo(e,t,i){e["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+Go})(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach(((o,l)=>e[l]=o)),i&&i.headers.forEach(((o,l)=>e[l]=o))}Go(e,t){const i=zC[e];return`${this.$o}/v1/${t}:${i}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $C{constructor(e){this.Ho=e.Ho,this.Yo=e.Yo}Zo(e){this.Xo=e}e_(e){this.t_=e}n_(e){this.r_=e}onMessage(e){this.i_=e}close(){this.Yo()}send(e){this.Ho(e)}s_(){this.Xo()}o_(){this.t_()}__(e){this.r_(e)}a_(e){this.i_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Bt="WebChannelConnection";class WC extends BC{constructor(e){super(e),this.u_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}jo(e,t,i,o,l){const h=If();return new Promise(((f,p)=>{const y=new $_;y.setWithCredentials(!0),y.listenOnce(W_.COMPLETE,(()=>{try{switch(y.getLastErrorCode()){case nc.NO_ERROR:const T=y.getResponseJson();de(Bt,`XHR for RPC '${e}' ${h} received:`,JSON.stringify(T)),f(T);break;case nc.TIMEOUT:de(Bt,`RPC '${e}' ${h} timed out`),p(new ue(G.DEADLINE_EXCEEDED,"Request time out"));break;case nc.HTTP_ERROR:const S=y.getStatus();if(de(Bt,`RPC '${e}' ${h} failed with status:`,S,"response text:",y.getResponseText()),S>0){let V=y.getResponseJson();Array.isArray(V)&&(V=V[0]);const O=V==null?void 0:V.error;if(O&&O.status&&O.message){const j=(function(se){const q=se.toLowerCase().replace(/_/g,"-");return Object.values(G).indexOf(q)>=0?q:G.UNKNOWN})(O.status);p(new ue(j,O.message))}else p(new ue(G.UNKNOWN,"Server responded with status "+y.getStatus()))}else p(new ue(G.UNAVAILABLE,"Connection failed."));break;default:Se(9055,{c_:e,streamId:h,l_:y.getLastErrorCode(),h_:y.getLastError()})}}finally{de(Bt,`RPC '${e}' ${h} completed.`)}}));const w=JSON.stringify(o);de(Bt,`RPC '${e}' ${h} sending request:`,o),y.send(t,"POST",w,i,15)}))}P_(e,t,i){const o=If(),l=[this.$o,"/","google.firestore.v1.Firestore","/",e,"/channel"],h=G_(),f=q_(),p={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},y=this.longPollingOptions.timeoutSeconds;y!==void 0&&(p.longPollingTimeout=Math.round(1e3*y)),this.useFetchStreams&&(p.useFetchStreams=!0),this.zo(p.initMessageHeaders,t,i),p.encodeInitMessageHeaders=!0;const w=l.join("");de(Bt,`Creating RPC '${e}' stream ${o}: ${w}`,p);const T=h.createWebChannel(w,p);this.T_(T);let S=!1,V=!1;const O=new $C({Ho:L=>{V?de(Bt,`Not sending because RPC '${e}' stream ${o} is closed:`,L):(S||(de(Bt,`Opening RPC '${e}' stream ${o} transport.`),T.open(),S=!0),de(Bt,`RPC '${e}' stream ${o} sending:`,L),T.send(L))},Yo:()=>T.close()}),j=(L,se,q)=>{L.listen(se,(te=>{try{q(te)}catch(ae){setTimeout((()=>{throw ae}),0)}}))};return j(T,Ka.EventType.OPEN,(()=>{V||(de(Bt,`RPC '${e}' stream ${o} transport opened.`),O.s_())})),j(T,Ka.EventType.CLOSE,(()=>{V||(V=!0,de(Bt,`RPC '${e}' stream ${o} transport closed`),O.__(),this.I_(T))})),j(T,Ka.EventType.ERROR,(L=>{V||(V=!0,bi(Bt,`RPC '${e}' stream ${o} transport errored. Name:`,L.name,"Message:",L.message),O.__(new ue(G.UNAVAILABLE,"The operation could not be completed")))})),j(T,Ka.EventType.MESSAGE,(L=>{var se;if(!V){const q=L.data[0];Be(!!q,16349);const te=q,ae=(te==null?void 0:te.error)||((se=te[0])===null||se===void 0?void 0:se.error);if(ae){de(Bt,`RPC '${e}' stream ${o} received error:`,ae);const we=ae.status;let re=(function(C){const b=gt[C];if(b!==void 0)return Rw(b)})(we),k=ae.message;re===void 0&&(re=G.INTERNAL,k="Unknown error status: "+we+" with message "+ae.message),V=!0,O.__(new ue(re,k)),T.close()}else de(Bt,`RPC '${e}' stream ${o} received:`,q),O.a_(q)}})),j(f,H_.STAT_EVENT,(L=>{L.stat===cf.PROXY?de(Bt,`RPC '${e}' stream ${o} detected buffering proxy`):L.stat===cf.NOPROXY&&de(Bt,`RPC '${e}' stream ${o} detected no buffering proxy`)})),setTimeout((()=>{O.o_()}),0),O}terminate(){this.u_.forEach((e=>e.close())),this.u_=[]}T_(e){this.u_.push(e)}I_(e){this.u_=this.u_.filter((t=>t===e))}}function Gd(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Yc(n){return new KA(n,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bw{constructor(e,t,i=1e3,o=1.5,l=6e4){this.Fi=e,this.timerId=t,this.d_=i,this.E_=o,this.A_=l,this.R_=0,this.V_=null,this.m_=Date.now(),this.reset()}reset(){this.R_=0}f_(){this.R_=this.A_}g_(e){this.cancel();const t=Math.floor(this.R_+this.p_()),i=Math.max(0,Date.now()-this.m_),o=Math.max(0,t-i);o>0&&de("ExponentialBackoff",`Backing off for ${o} ms (base delay: ${this.R_} ms, delay with jitter: ${t} ms, last attempt: ${i} ms ago)`),this.V_=this.Fi.enqueueAfterDelay(this.timerId,o,(()=>(this.m_=Date.now(),e()))),this.R_*=this.E_,this.R_<this.d_&&(this.R_=this.d_),this.R_>this.A_&&(this.R_=this.A_)}y_(){this.V_!==null&&(this.V_.skipDelay(),this.V_=null)}cancel(){this.V_!==null&&(this.V_.cancel(),this.V_=null)}p_(){return(Math.random()-.5)*this.R_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gv="PersistentStream";class $w{constructor(e,t,i,o,l,h,f,p){this.Fi=e,this.w_=i,this.S_=o,this.connection=l,this.authCredentialsProvider=h,this.appCheckCredentialsProvider=f,this.listener=p,this.state=0,this.b_=0,this.D_=null,this.v_=null,this.stream=null,this.C_=0,this.F_=new Bw(e,t)}M_(){return this.state===1||this.state===5||this.x_()}x_(){return this.state===2||this.state===3}start(){this.C_=0,this.state!==4?this.auth():this.O_()}async stop(){this.M_()&&await this.close(0)}N_(){this.state=0,this.F_.reset()}B_(){this.x_()&&this.D_===null&&(this.D_=this.Fi.enqueueAfterDelay(this.w_,6e4,(()=>this.L_())))}k_(e){this.q_(),this.stream.send(e)}async L_(){if(this.x_())return this.close(0)}q_(){this.D_&&(this.D_.cancel(),this.D_=null)}Q_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,t){this.q_(),this.Q_(),this.F_.cancel(),this.b_++,e!==4?this.F_.reset():t&&t.code===G.RESOURCE_EXHAUSTED?(Br(t.toString()),Br("Using maximum backoff delay to prevent overloading the backend."),this.F_.f_()):t&&t.code===G.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.U_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.n_(t)}U_(){}auth(){this.state=1;const e=this.K_(this.b_),t=this.b_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([i,o])=>{this.b_===t&&this.W_(i,o)}),(i=>{e((()=>{const o=new ue(G.UNKNOWN,"Fetching auth token failed: "+i.message);return this.G_(o)}))}))}W_(e,t){const i=this.K_(this.b_);this.stream=this.z_(e,t),this.stream.Zo((()=>{i((()=>this.listener.Zo()))})),this.stream.e_((()=>{i((()=>(this.state=2,this.v_=this.Fi.enqueueAfterDelay(this.S_,1e4,(()=>(this.x_()&&(this.state=3),Promise.resolve()))),this.listener.e_())))})),this.stream.n_((o=>{i((()=>this.G_(o)))})),this.stream.onMessage((o=>{i((()=>++this.C_==1?this.j_(o):this.onNext(o)))}))}O_(){this.state=5,this.F_.g_((async()=>{this.state=0,this.start()}))}G_(e){return de(gv,`close with error: ${e}`),this.stream=null,this.close(4,e)}K_(e){return t=>{this.Fi.enqueueAndForget((()=>this.b_===e?t():(de(gv,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class HC extends $w{constructor(e,t,i,o,l,h){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,i,o,h),this.serializer=l}z_(e,t){return this.connection.P_("Listen",e,t)}j_(e){return this.onNext(e)}onNext(e){this.F_.reset();const t=JA(this.serializer,e),i=(function(l){if(!("targetChange"in l))return Ae.min();const h=l.targetChange;return h.targetIds&&h.targetIds.length?Ae.min():h.readTime?fr(h.readTime):Ae.min()})(e);return this.listener.J_(t,i)}H_(e){const t={};t.database=Ef(this.serializer),t.addTarget=(function(l,h){let f;const p=h.target;if(f=mf(p)?{documents:eC(l,p)}:{query:tC(l,p).Vt},f.targetId=h.targetId,h.resumeToken.approximateByteSize()>0){f.resumeToken=xw(l,h.resumeToken);const y=vf(l,h.expectedCount);y!==null&&(f.expectedCount=y)}else if(h.snapshotVersion.compareTo(Ae.min())>0){f.readTime=Pc(l,h.snapshotVersion.toTimestamp());const y=vf(l,h.expectedCount);y!==null&&(f.expectedCount=y)}return f})(this.serializer,e);const i=rC(this.serializer,e);i&&(t.labels=i),this.k_(t)}Y_(e){const t={};t.database=Ef(this.serializer),t.removeTarget=e,this.k_(t)}}class qC extends $w{constructor(e,t,i,o,l,h){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,i,o,h),this.serializer=l}get Z_(){return this.C_>0}start(){this.lastStreamToken=void 0,super.start()}U_(){this.Z_&&this.X_([])}z_(e,t){return this.connection.P_("Write",e,t)}j_(e){return Be(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,Be(!e.writeResults||e.writeResults.length===0,55816),this.listener.ea()}onNext(e){Be(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.F_.reset();const t=ZA(e.writeResults,e.commitTime),i=fr(e.commitTime);return this.listener.ta(i,t)}na(){const e={};e.database=Ef(this.serializer),this.k_(e)}X_(e){const t={streamToken:this.lastStreamToken,writes:e.map((i=>XA(this.serializer,i)))};this.k_(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GC{}class KC extends GC{constructor(e,t,i,o){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=i,this.serializer=o,this.ra=!1}ia(){if(this.ra)throw new ue(G.FAILED_PRECONDITION,"The client has already been terminated.")}Wo(e,t,i,o){return this.ia(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([l,h])=>this.connection.Wo(e,_f(t,i),o,l,h))).catch((l=>{throw l.name==="FirebaseError"?(l.code===G.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),l):new ue(G.UNKNOWN,l.toString())}))}Jo(e,t,i,o,l){return this.ia(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([h,f])=>this.connection.Jo(e,_f(t,i),o,h,f,l))).catch((h=>{throw h.name==="FirebaseError"?(h.code===G.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),h):new ue(G.UNKNOWN,h.toString())}))}terminate(){this.ra=!0,this.connection.terminate()}}class QC{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.sa=0,this.oa=null,this._a=!0}aa(){this.sa===0&&(this.ua("Unknown"),this.oa=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this.oa=null,this.ca("Backend didn't respond within 10 seconds."),this.ua("Offline"),Promise.resolve()))))}la(e){this.state==="Online"?this.ua("Unknown"):(this.sa++,this.sa>=1&&(this.ha(),this.ca(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ua("Offline")))}set(e){this.ha(),this.sa=0,e==="Online"&&(this._a=!1),this.ua(e)}ua(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}ca(e){const t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this._a?(Br(t),this._a=!1):de("OnlineStateTracker",t)}ha(){this.oa!==null&&(this.oa.cancel(),this.oa=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Cs="RemoteStore";class YC{constructor(e,t,i,o,l){this.localStore=e,this.datastore=t,this.asyncQueue=i,this.remoteSyncer={},this.Pa=[],this.Ta=new Map,this.Ia=new Set,this.da=[],this.Ea=l,this.Ea.xo((h=>{i.enqueueAndForget((async()=>{xs(this)&&(de(Cs,"Restarting streams for network reachability change."),await(async function(p){const y=Re(p);y.Ia.add(4),await Sl(y),y.Aa.set("Unknown"),y.Ia.delete(4),await Jc(y)})(this))}))})),this.Aa=new QC(i,o)}}async function Jc(n){if(xs(n))for(const e of n.da)await e(!0)}async function Sl(n){for(const e of n.da)await e(!1)}function Ww(n,e){const t=Re(n);t.Ta.has(e.targetId)||(t.Ta.set(e.targetId,e),dp(t)?hp(t):Yo(t).x_()&&cp(t,e))}function up(n,e){const t=Re(n),i=Yo(t);t.Ta.delete(e),i.x_()&&Hw(t,e),t.Ta.size===0&&(i.x_()?i.B_():xs(t)&&t.Aa.set("Unknown"))}function cp(n,e){if(n.Ra.$e(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Ae.min())>0){const t=n.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}Yo(n).H_(e)}function Hw(n,e){n.Ra.$e(e),Yo(n).Y_(e)}function hp(n){n.Ra=new WA({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),Et:e=>n.Ta.get(e)||null,lt:()=>n.datastore.serializer.databaseId}),Yo(n).start(),n.Aa.aa()}function dp(n){return xs(n)&&!Yo(n).M_()&&n.Ta.size>0}function xs(n){return Re(n).Ia.size===0}function qw(n){n.Ra=void 0}async function JC(n){n.Aa.set("Online")}async function XC(n){n.Ta.forEach(((e,t)=>{cp(n,e)}))}async function ZC(n,e){qw(n),dp(n)?(n.Aa.la(e),hp(n)):n.Aa.set("Unknown")}async function eR(n,e,t){if(n.Aa.set("Online"),e instanceof Nw&&e.state===2&&e.cause)try{await(async function(o,l){const h=l.cause;for(const f of l.targetIds)o.Ta.has(f)&&(await o.remoteSyncer.rejectListen(f,h),o.Ta.delete(f),o.Ra.removeTarget(f))})(n,e)}catch(i){de(Cs,"Failed to remove targets %s: %s ",e.targetIds.join(","),i),await Cc(n,i)}else if(e instanceof oc?n.Ra.Ye(e):e instanceof kw?n.Ra.it(e):n.Ra.et(e),!t.isEqual(Ae.min()))try{const i=await zw(n.localStore);t.compareTo(i)>=0&&await(function(l,h){const f=l.Ra.Pt(h);return f.targetChanges.forEach(((p,y)=>{if(p.resumeToken.approximateByteSize()>0){const w=l.Ta.get(y);w&&l.Ta.set(y,w.withResumeToken(p.resumeToken,h))}})),f.targetMismatches.forEach(((p,y)=>{const w=l.Ta.get(p);if(!w)return;l.Ta.set(p,w.withResumeToken(Mt.EMPTY_BYTE_STRING,w.snapshotVersion)),Hw(l,p);const T=new Pi(w.target,p,y,w.sequenceNumber);cp(l,T)})),l.remoteSyncer.applyRemoteEvent(f)})(n,t)}catch(i){de(Cs,"Failed to raise snapshot:",i),await Cc(n,i)}}async function Cc(n,e,t){if(!Qo(e))throw e;n.Ia.add(1),await Sl(n),n.Aa.set("Offline"),t||(t=()=>zw(n.localStore)),n.asyncQueue.enqueueRetryable((async()=>{de(Cs,"Retrying IndexedDB access"),await t(),n.Ia.delete(1),await Jc(n)}))}function Gw(n,e){return e().catch((t=>Cc(n,t,e)))}async function Xc(n){const e=Re(n),t=Mi(e);let i=e.Pa.length>0?e.Pa[e.Pa.length-1].batchId:Qf;for(;tR(e);)try{const o=await LC(e.localStore,i);if(o===null){e.Pa.length===0&&t.B_();break}i=o.batchId,nR(e,o)}catch(o){await Cc(e,o)}Kw(e)&&Qw(e)}function tR(n){return xs(n)&&n.Pa.length<10}function nR(n,e){n.Pa.push(e);const t=Mi(n);t.x_()&&t.Z_&&t.X_(e.mutations)}function Kw(n){return xs(n)&&!Mi(n).M_()&&n.Pa.length>0}function Qw(n){Mi(n).start()}async function rR(n){Mi(n).na()}async function iR(n){const e=Mi(n);for(const t of n.Pa)e.X_(t.mutations)}async function sR(n,e,t){const i=n.Pa.shift(),o=np.from(i,e,t);await Gw(n,(()=>n.remoteSyncer.applySuccessfulWrite(o))),await Xc(n)}async function oR(n,e){e&&Mi(n).Z_&&await(async function(i,o){if((function(h){return BA(h)&&h!==G.ABORTED})(o.code)){const l=i.Pa.shift();Mi(i).N_(),await Gw(i,(()=>i.remoteSyncer.rejectFailedWrite(l.batchId,o))),await Xc(i)}})(n,e),Kw(n)&&Qw(n)}async function yv(n,e){const t=Re(n);t.asyncQueue.verifyOperationInProgress(),de(Cs,"RemoteStore received new credentials");const i=xs(t);t.Ia.add(3),await Sl(t),i&&t.Aa.set("Unknown"),await t.remoteSyncer.handleCredentialChange(e),t.Ia.delete(3),await Jc(t)}async function aR(n,e){const t=Re(n);e?(t.Ia.delete(2),await Jc(t)):e||(t.Ia.add(2),await Sl(t),t.Aa.set("Unknown"))}function Yo(n){return n.Va||(n.Va=(function(t,i,o){const l=Re(t);return l.ia(),new HC(i,l.connection,l.authCredentials,l.appCheckCredentials,l.serializer,o)})(n.datastore,n.asyncQueue,{Zo:JC.bind(null,n),e_:XC.bind(null,n),n_:ZC.bind(null,n),J_:eR.bind(null,n)}),n.da.push((async e=>{e?(n.Va.N_(),dp(n)?hp(n):n.Aa.set("Unknown")):(await n.Va.stop(),qw(n))}))),n.Va}function Mi(n){return n.ma||(n.ma=(function(t,i,o){const l=Re(t);return l.ia(),new qC(i,l.connection,l.authCredentials,l.appCheckCredentials,l.serializer,o)})(n.datastore,n.asyncQueue,{Zo:()=>Promise.resolve(),e_:rR.bind(null,n),n_:oR.bind(null,n),ea:iR.bind(null,n),ta:sR.bind(null,n)}),n.da.push((async e=>{e?(n.ma.N_(),await Xc(n)):(await n.ma.stop(),n.Pa.length>0&&(de(Cs,`Stopping write stream with ${n.Pa.length} pending writes`),n.Pa=[]))}))),n.ma}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fp{constructor(e,t,i,o,l){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=i,this.op=o,this.removalCallback=l,this.deferred=new jr,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((h=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,t,i,o,l){const h=Date.now()+i,f=new fp(e,t,h,o,l);return f.start(i),f}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new ue(G.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function pp(n,e){if(Br("AsyncQueue",`${e}: ${n}`),Qo(n))return new ue(G.UNAVAILABLE,`${e}: ${n}`);throw n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Do{static emptySet(e){return new Do(e.comparator)}constructor(e){this.comparator=e?(t,i)=>e(t,i)||_e.comparator(t.key,i.key):(t,i)=>_e.comparator(t.key,i.key),this.keyedMap=Qa(),this.sortedSet=new it(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((t,i)=>(e(t),!1)))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof Do)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),i=e.sortedSet.getIterator();for(;t.hasNext();){const o=t.getNext().key,l=i.getNext().key;if(!o.isEqual(l))return!1}return!0}toString(){const e=[];return this.forEach((t=>{e.push(t.toString())})),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){const i=new Do;return i.comparator=this.comparator,i.keyedMap=e,i.sortedSet=t,i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vv{constructor(){this.fa=new it(_e.comparator)}track(e){const t=e.doc.key,i=this.fa.get(t);i?e.type!==0&&i.type===3?this.fa=this.fa.insert(t,e):e.type===3&&i.type!==1?this.fa=this.fa.insert(t,{type:i.type,doc:e.doc}):e.type===2&&i.type===2?this.fa=this.fa.insert(t,{type:2,doc:e.doc}):e.type===2&&i.type===0?this.fa=this.fa.insert(t,{type:0,doc:e.doc}):e.type===1&&i.type===0?this.fa=this.fa.remove(t):e.type===1&&i.type===2?this.fa=this.fa.insert(t,{type:1,doc:i.doc}):e.type===0&&i.type===1?this.fa=this.fa.insert(t,{type:2,doc:e.doc}):Se(63341,{At:e,ga:i}):this.fa=this.fa.insert(t,e)}pa(){const e=[];return this.fa.inorderTraversal(((t,i)=>{e.push(i)})),e}}class Uo{constructor(e,t,i,o,l,h,f,p,y){this.query=e,this.docs=t,this.oldDocs=i,this.docChanges=o,this.mutatedKeys=l,this.fromCache=h,this.syncStateChanged=f,this.excludesMetadataChanges=p,this.hasCachedResults=y}static fromInitialDocuments(e,t,i,o,l){const h=[];return t.forEach((f=>{h.push({type:0,doc:f})})),new Uo(e,t,Do.emptySet(t),h,i,o,!0,!1,l)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Hc(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,i=e.docChanges;if(t.length!==i.length)return!1;for(let o=0;o<t.length;o++)if(t[o].type!==i[o].type||!t[o].doc.isEqual(i[o].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lR{constructor(){this.ya=void 0,this.wa=[]}Sa(){return this.wa.some((e=>e.ba()))}}class uR{constructor(){this.queries=_v(),this.onlineState="Unknown",this.Da=new Set}terminate(){(function(t,i){const o=Re(t),l=o.queries;o.queries=_v(),l.forEach(((h,f)=>{for(const p of f.wa)p.onError(i)}))})(this,new ue(G.ABORTED,"Firestore shutting down"))}}function _v(){return new Ns((n=>gw(n)),Hc)}async function mp(n,e){const t=Re(n);let i=3;const o=e.query;let l=t.queries.get(o);l?!l.Sa()&&e.ba()&&(i=2):(l=new lR,i=e.ba()?0:1);try{switch(i){case 0:l.ya=await t.onListen(o,!0);break;case 1:l.ya=await t.onListen(o,!1);break;case 2:await t.onFirstRemoteStoreListen(o)}}catch(h){const f=pp(h,`Initialization of query '${Ao(e.query)}' failed`);return void e.onError(f)}t.queries.set(o,l),l.wa.push(e),e.va(t.onlineState),l.ya&&e.Ca(l.ya)&&yp(t)}async function gp(n,e){const t=Re(n),i=e.query;let o=3;const l=t.queries.get(i);if(l){const h=l.wa.indexOf(e);h>=0&&(l.wa.splice(h,1),l.wa.length===0?o=e.ba()?0:1:!l.Sa()&&e.ba()&&(o=2))}switch(o){case 0:return t.queries.delete(i),t.onUnlisten(i,!0);case 1:return t.queries.delete(i),t.onUnlisten(i,!1);case 2:return t.onLastRemoteStoreUnlisten(i);default:return}}function cR(n,e){const t=Re(n);let i=!1;for(const o of e){const l=o.query,h=t.queries.get(l);if(h){for(const f of h.wa)f.Ca(o)&&(i=!0);h.ya=o}}i&&yp(t)}function hR(n,e,t){const i=Re(n),o=i.queries.get(e);if(o)for(const l of o.wa)l.onError(t);i.queries.delete(e)}function yp(n){n.Da.forEach((e=>{e.next()}))}var Sf,wv;(wv=Sf||(Sf={})).Fa="default",wv.Cache="cache";class vp{constructor(e,t,i){this.query=e,this.Ma=t,this.xa=!1,this.Oa=null,this.onlineState="Unknown",this.options=i||{}}Ca(e){if(!this.options.includeMetadataChanges){const i=[];for(const o of e.docChanges)o.type!==3&&i.push(o);e=new Uo(e.query,e.docs,e.oldDocs,i,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.xa?this.Na(e)&&(this.Ma.next(e),t=!0):this.Ba(e,this.onlineState)&&(this.La(e),t=!0),this.Oa=e,t}onError(e){this.Ma.error(e)}va(e){this.onlineState=e;let t=!1;return this.Oa&&!this.xa&&this.Ba(this.Oa,e)&&(this.La(this.Oa),t=!0),t}Ba(e,t){if(!e.fromCache||!this.ba())return!0;const i=t!=="Offline";return(!this.options.ka||!i)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}Na(e){if(e.docChanges.length>0)return!0;const t=this.Oa&&this.Oa.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}La(e){e=Uo.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.xa=!0,this.Ma.next(e)}ba(){return this.options.source!==Sf.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yw{constructor(e){this.key=e}}class Jw{constructor(e){this.key=e}}class dR{constructor(e,t){this.query=e,this.Ha=t,this.Ya=null,this.hasCachedResults=!1,this.current=!1,this.Za=Ve(),this.mutatedKeys=Ve(),this.Xa=yw(e),this.eu=new Do(this.Xa)}get tu(){return this.Ha}nu(e,t){const i=t?t.ru:new vv,o=t?t.eu:this.eu;let l=t?t.mutatedKeys:this.mutatedKeys,h=o,f=!1;const p=this.query.limitType==="F"&&o.size===this.query.limit?o.last():null,y=this.query.limitType==="L"&&o.size===this.query.limit?o.first():null;if(e.inorderTraversal(((w,T)=>{const S=o.get(w),V=qc(this.query,T)?T:null,O=!!S&&this.mutatedKeys.has(S.key),j=!!V&&(V.hasLocalMutations||this.mutatedKeys.has(V.key)&&V.hasCommittedMutations);let L=!1;S&&V?S.data.isEqual(V.data)?O!==j&&(i.track({type:3,doc:V}),L=!0):this.iu(S,V)||(i.track({type:2,doc:V}),L=!0,(p&&this.Xa(V,p)>0||y&&this.Xa(V,y)<0)&&(f=!0)):!S&&V?(i.track({type:0,doc:V}),L=!0):S&&!V&&(i.track({type:1,doc:S}),L=!0,(p||y)&&(f=!0)),L&&(V?(h=h.add(V),l=j?l.add(w):l.delete(w)):(h=h.delete(w),l=l.delete(w)))})),this.query.limit!==null)for(;h.size>this.query.limit;){const w=this.query.limitType==="F"?h.last():h.first();h=h.delete(w.key),l=l.delete(w.key),i.track({type:1,doc:w})}return{eu:h,ru:i,Ds:f,mutatedKeys:l}}iu(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,i,o){const l=this.eu;this.eu=e.eu,this.mutatedKeys=e.mutatedKeys;const h=e.ru.pa();h.sort(((w,T)=>(function(V,O){const j=L=>{switch(L){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Se(20277,{At:L})}};return j(V)-j(O)})(w.type,T.type)||this.Xa(w.doc,T.doc))),this.su(i),o=o!=null&&o;const f=t&&!o?this.ou():[],p=this.Za.size===0&&this.current&&!o?1:0,y=p!==this.Ya;return this.Ya=p,h.length!==0||y?{snapshot:new Uo(this.query,e.eu,l,h,e.mutatedKeys,p===0,y,!1,!!i&&i.resumeToken.approximateByteSize()>0),_u:f}:{_u:f}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({eu:this.eu,ru:new vv,mutatedKeys:this.mutatedKeys,Ds:!1},!1)):{_u:[]}}au(e){return!this.Ha.has(e)&&!!this.eu.has(e)&&!this.eu.get(e).hasLocalMutations}su(e){e&&(e.addedDocuments.forEach((t=>this.Ha=this.Ha.add(t))),e.modifiedDocuments.forEach((t=>{})),e.removedDocuments.forEach((t=>this.Ha=this.Ha.delete(t))),this.current=e.current)}ou(){if(!this.current)return[];const e=this.Za;this.Za=Ve(),this.eu.forEach((i=>{this.au(i.key)&&(this.Za=this.Za.add(i.key))}));const t=[];return e.forEach((i=>{this.Za.has(i)||t.push(new Jw(i))})),this.Za.forEach((i=>{e.has(i)||t.push(new Yw(i))})),t}uu(e){this.Ha=e.qs,this.Za=Ve();const t=this.nu(e.documents);return this.applyChanges(t,!0)}cu(){return Uo.fromInitialDocuments(this.query,this.eu,this.mutatedKeys,this.Ya===0,this.hasCachedResults)}}const _p="SyncEngine";class fR{constructor(e,t,i){this.query=e,this.targetId=t,this.view=i}}class pR{constructor(e){this.key=e,this.lu=!1}}class mR{constructor(e,t,i,o,l,h){this.localStore=e,this.remoteStore=t,this.eventManager=i,this.sharedClientState=o,this.currentUser=l,this.maxConcurrentLimboResolutions=h,this.hu={},this.Pu=new Ns((f=>gw(f)),Hc),this.Tu=new Map,this.Iu=new Set,this.du=new it(_e.comparator),this.Eu=new Map,this.Au=new sp,this.Ru={},this.Vu=new Map,this.mu=Fo.ur(),this.onlineState="Unknown",this.fu=void 0}get isPrimaryClient(){return this.fu===!0}}async function gR(n,e,t=!0){const i=rE(n);let o;const l=i.Pu.get(e);return l?(i.sharedClientState.addLocalQueryTarget(l.targetId),o=l.view.cu()):o=await Xw(i,e,t,!0),o}async function yR(n,e){const t=rE(n);await Xw(t,e,!0,!1)}async function Xw(n,e,t,i){const o=await MC(n.localStore,dr(e)),l=o.targetId,h=n.sharedClientState.addLocalQueryTarget(l,t);let f;return i&&(f=await vR(n,e,l,h==="current",o.resumeToken)),n.isPrimaryClient&&t&&Ww(n.remoteStore,o),f}async function vR(n,e,t,i,o){n.gu=(T,S,V)=>(async function(j,L,se,q){let te=L.view.nu(se);te.Ds&&(te=await dv(j.localStore,L.query,!1).then((({documents:k})=>L.view.nu(k,te))));const ae=q&&q.targetChanges.get(L.targetId),we=q&&q.targetMismatches.get(L.targetId)!=null,re=L.view.applyChanges(te,j.isPrimaryClient,ae,we);return Tv(j,L.targetId,re._u),re.snapshot})(n,T,S,V);const l=await dv(n.localStore,e,!0),h=new dR(e,l.qs),f=h.nu(l.documents),p=Il.createSynthesizedTargetChangeForCurrentChange(t,i&&n.onlineState!=="Offline",o),y=h.applyChanges(f,n.isPrimaryClient,p);Tv(n,t,y._u);const w=new fR(e,t,h);return n.Pu.set(e,w),n.Tu.has(t)?n.Tu.get(t).push(e):n.Tu.set(t,[e]),y.snapshot}async function _R(n,e,t){const i=Re(n),o=i.Pu.get(e),l=i.Tu.get(o.targetId);if(l.length>1)return i.Tu.set(o.targetId,l.filter((h=>!Hc(h,e)))),void i.Pu.delete(e);i.isPrimaryClient?(i.sharedClientState.removeLocalQueryTarget(o.targetId),i.sharedClientState.isActiveQueryTarget(o.targetId)||await Tf(i.localStore,o.targetId,!1).then((()=>{i.sharedClientState.clearQueryState(o.targetId),t&&up(i.remoteStore,o.targetId),Pf(i,o.targetId)})).catch(Ko)):(Pf(i,o.targetId),await Tf(i.localStore,o.targetId,!0))}async function wR(n,e){const t=Re(n),i=t.Pu.get(e),o=t.Tu.get(i.targetId);t.isPrimaryClient&&o.length===1&&(t.sharedClientState.removeLocalQueryTarget(i.targetId),up(t.remoteStore,i.targetId))}async function ER(n,e,t){const i=RR(n);try{const o=await(function(h,f){const p=Re(h),y=Ge.now(),w=f.reduce(((V,O)=>V.add(O.key)),Ve());let T,S;return p.persistence.runTransaction("Locally write mutations","readwrite",(V=>{let O=$r(),j=Ve();return p.Os.getEntries(V,w).next((L=>{O=L,O.forEach(((se,q)=>{q.isValidDocument()||(j=j.add(se))}))})).next((()=>p.localDocuments.getOverlayedDocuments(V,O))).next((L=>{T=L;const se=[];for(const q of f){const te=MA(q,T.get(q.key).overlayedDocument);te!=null&&se.push(new Bi(q.key,te,lw(te.value.mapValue),kn.exists(!0)))}return p.mutationQueue.addMutationBatch(V,y,se,f)})).next((L=>{S=L;const se=L.applyToLocalDocumentSet(T,j);return p.documentOverlayCache.saveOverlays(V,L.batchId,se)}))})).then((()=>({batchId:S.batchId,changes:_w(T)})))})(i.localStore,e);i.sharedClientState.addPendingMutation(o.batchId),(function(h,f,p){let y=h.Ru[h.currentUser.toKey()];y||(y=new it(Ne)),y=y.insert(f,p),h.Ru[h.currentUser.toKey()]=y})(i,o.batchId,t),await Pl(i,o.changes),await Xc(i.remoteStore)}catch(o){const l=pp(o,"Failed to persist write");t.reject(l)}}async function Zw(n,e){const t=Re(n);try{const i=await VC(t.localStore,e);e.targetChanges.forEach(((o,l)=>{const h=t.Eu.get(l);h&&(Be(o.addedDocuments.size+o.modifiedDocuments.size+o.removedDocuments.size<=1,22616),o.addedDocuments.size>0?h.lu=!0:o.modifiedDocuments.size>0?Be(h.lu,14607):o.removedDocuments.size>0&&(Be(h.lu,42227),h.lu=!1))})),await Pl(t,i,e)}catch(i){await Ko(i)}}function Ev(n,e,t){const i=Re(n);if(i.isPrimaryClient&&t===0||!i.isPrimaryClient&&t===1){const o=[];i.Pu.forEach(((l,h)=>{const f=h.view.va(e);f.snapshot&&o.push(f.snapshot)})),(function(h,f){const p=Re(h);p.onlineState=f;let y=!1;p.queries.forEach(((w,T)=>{for(const S of T.wa)S.va(f)&&(y=!0)})),y&&yp(p)})(i.eventManager,e),o.length&&i.hu.J_(o),i.onlineState=e,i.isPrimaryClient&&i.sharedClientState.setOnlineState(e)}}async function TR(n,e,t){const i=Re(n);i.sharedClientState.updateQueryState(e,"rejected",t);const o=i.Eu.get(e),l=o&&o.key;if(l){let h=new it(_e.comparator);h=h.insert(l,Wt.newNoDocument(l,Ae.min()));const f=Ve().add(l),p=new Qc(Ae.min(),new Map,new it(Ne),h,f);await Zw(i,p),i.du=i.du.remove(l),i.Eu.delete(e),wp(i)}else await Tf(i.localStore,e,!1).then((()=>Pf(i,e,t))).catch(Ko)}async function IR(n,e){const t=Re(n),i=e.batch.batchId;try{const o=await DC(t.localStore,e);tE(t,i,null),eE(t,i),t.sharedClientState.updateMutationState(i,"acknowledged"),await Pl(t,o)}catch(o){await Ko(o)}}async function SR(n,e,t){const i=Re(n);try{const o=await(function(h,f){const p=Re(h);return p.persistence.runTransaction("Reject batch","readwrite-primary",(y=>{let w;return p.mutationQueue.lookupMutationBatch(y,f).next((T=>(Be(T!==null,37113),w=T.keys(),p.mutationQueue.removeMutationBatch(y,T)))).next((()=>p.mutationQueue.performConsistencyCheck(y))).next((()=>p.documentOverlayCache.removeOverlaysForBatchId(y,w,f))).next((()=>p.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(y,w))).next((()=>p.localDocuments.getDocuments(y,w)))}))})(i.localStore,e);tE(i,e,t),eE(i,e),i.sharedClientState.updateMutationState(e,"rejected",t),await Pl(i,o)}catch(o){await Ko(o)}}function eE(n,e){(n.Vu.get(e)||[]).forEach((t=>{t.resolve()})),n.Vu.delete(e)}function tE(n,e,t){const i=Re(n);let o=i.Ru[i.currentUser.toKey()];if(o){const l=o.get(e);l&&(t?l.reject(t):l.resolve(),o=o.remove(e)),i.Ru[i.currentUser.toKey()]=o}}function Pf(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(const i of n.Tu.get(e))n.Pu.delete(i),t&&n.hu.pu(i,t);n.Tu.delete(e),n.isPrimaryClient&&n.Au.zr(e).forEach((i=>{n.Au.containsKey(i)||nE(n,i)}))}function nE(n,e){n.Iu.delete(e.path.canonicalString());const t=n.du.get(e);t!==null&&(up(n.remoteStore,t),n.du=n.du.remove(e),n.Eu.delete(t),wp(n))}function Tv(n,e,t){for(const i of t)i instanceof Yw?(n.Au.addReference(i.key,e),PR(n,i)):i instanceof Jw?(de(_p,"Document no longer in limbo: "+i.key),n.Au.removeReference(i.key,e),n.Au.containsKey(i.key)||nE(n,i.key)):Se(19791,{yu:i})}function PR(n,e){const t=e.key,i=t.path.canonicalString();n.du.get(t)||n.Iu.has(i)||(de(_p,"New document in limbo: "+t),n.Iu.add(i),wp(n))}function wp(n){for(;n.Iu.size>0&&n.du.size<n.maxConcurrentLimboResolutions;){const e=n.Iu.values().next().value;n.Iu.delete(e);const t=new _e(Ye.fromString(e)),i=n.mu.next();n.Eu.set(i,new pR(t)),n.du=n.du.insert(t,i),Ww(n.remoteStore,new Pi(dr(Wc(t.path)),i,"TargetPurposeLimboResolution",zc.ue))}}async function Pl(n,e,t){const i=Re(n),o=[],l=[],h=[];i.Pu.isEmpty()||(i.Pu.forEach(((f,p)=>{h.push(i.gu(p,e,t).then((y=>{var w;if((y||t)&&i.isPrimaryClient){const T=y?!y.fromCache:(w=t==null?void 0:t.targetChanges.get(p.targetId))===null||w===void 0?void 0:w.current;i.sharedClientState.updateQueryState(p.targetId,T?"current":"not-current")}if(y){o.push(y);const T=ap.Es(p.targetId,y);l.push(T)}})))})),await Promise.all(h),i.hu.J_(o),await(async function(p,y){const w=Re(p);try{await w.persistence.runTransaction("notifyLocalViewChanges","readwrite",(T=>Y.forEach(y,(S=>Y.forEach(S.Is,(V=>w.persistence.referenceDelegate.addReference(T,S.targetId,V))).next((()=>Y.forEach(S.ds,(V=>w.persistence.referenceDelegate.removeReference(T,S.targetId,V)))))))))}catch(T){if(!Qo(T))throw T;de(lp,"Failed to update sequence numbers: "+T)}for(const T of y){const S=T.targetId;if(!T.fromCache){const V=w.Fs.get(S),O=V.snapshotVersion,j=V.withLastLimboFreeSnapshotVersion(O);w.Fs=w.Fs.insert(S,j)}}})(i.localStore,l))}async function AR(n,e){const t=Re(n);if(!t.currentUser.isEqual(e)){de(_p,"User change. New user:",e.toKey());const i=await Uw(t.localStore,e);t.currentUser=e,(function(l,h){l.Vu.forEach((f=>{f.forEach((p=>{p.reject(new ue(G.CANCELLED,h))}))})),l.Vu.clear()})(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,i.removedBatchIds,i.addedBatchIds),await Pl(t,i.Bs)}}function CR(n,e){const t=Re(n),i=t.Eu.get(e);if(i&&i.lu)return Ve().add(i.key);{let o=Ve();const l=t.Tu.get(e);if(!l)return o;for(const h of l){const f=t.Pu.get(h);o=o.unionWith(f.view.tu)}return o}}function rE(n){const e=Re(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=Zw.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=CR.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=TR.bind(null,e),e.hu.J_=cR.bind(null,e.eventManager),e.hu.pu=hR.bind(null,e.eventManager),e}function RR(n){const e=Re(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=IR.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=SR.bind(null,e),e}class Rc{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Yc(e.databaseInfo.databaseId),this.sharedClientState=this.bu(e),this.persistence=this.Du(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Cu(e,this.localStore),this.indexBackfillerScheduler=this.Fu(e,this.localStore)}Cu(e,t){return null}Fu(e,t){return null}vu(e){return bC(this.persistence,new kC,e.initialUser,this.serializer)}Du(e){return new Fw(op.Vi,this.serializer)}bu(e){return new FC}async terminate(){var e,t;(e=this.gcScheduler)===null||e===void 0||e.stop(),(t=this.indexBackfillerScheduler)===null||t===void 0||t.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Rc.provider={build:()=>new Rc};class kR extends Rc{constructor(e){super(),this.cacheSizeBytes=e}Cu(e,t){Be(this.persistence.referenceDelegate instanceof Ac,46915);const i=this.persistence.referenceDelegate.garbageCollector;return new pC(i,e.asyncQueue,t)}Du(e){const t=this.cacheSizeBytes!==void 0?sn.withCacheSize(this.cacheSizeBytes):sn.DEFAULT;return new Fw((i=>Ac.Vi(i,t)),this.serializer)}}class Af{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=i=>Ev(this.syncEngine,i,1),this.remoteStore.remoteSyncer.handleCredentialChange=AR.bind(null,this.syncEngine),await aR(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return(function(){return new uR})()}createDatastore(e){const t=Yc(e.databaseInfo.databaseId),i=(function(l){return new WC(l)})(e.databaseInfo);return(function(l,h,f,p){return new KC(l,h,f,p)})(e.authCredentials,e.appCheckCredentials,i,t)}createRemoteStore(e){return(function(i,o,l,h,f){return new YC(i,o,l,h,f)})(this.localStore,this.datastore,e.asyncQueue,(t=>Ev(this.syncEngine,t,0)),(function(){return mv.C()?new mv:new UC})())}createSyncEngine(e,t){return(function(o,l,h,f,p,y,w){const T=new mR(o,l,h,f,p,y);return w&&(T.fu=!0),T})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){var e,t;await(async function(o){const l=Re(o);de(Cs,"RemoteStore shutting down."),l.Ia.add(5),await Sl(l),l.Ea.shutdown(),l.Aa.set("Unknown")})(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(t=this.eventManager)===null||t===void 0||t.terminate()}}Af.provider={build:()=>new Af};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ep{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.xu(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.xu(this.observer.error,e):Br("Uncaught Error in snapshot listener:",e.toString()))}Ou(){this.muted=!0}xu(e,t){setTimeout((()=>{this.muted||e(t)}),0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ji="FirestoreClient";class NR{constructor(e,t,i,o,l){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=i,this.databaseInfo=o,this.user=$t.UNAUTHENTICATED,this.clientId=Kf.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=l,this.authCredentials.start(i,(async h=>{de(ji,"Received user=",h.uid),await this.authCredentialListener(h),this.user=h})),this.appCheckCredentials.start(i,(h=>(de(ji,"Received new app check token=",h),this.appCheckCredentialListener(h,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new jr;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const i=pp(t,"Failed to shutdown persistence");e.reject(i)}})),e.promise}}async function Kd(n,e){n.asyncQueue.verifyOperationInProgress(),de(ji,"Initializing OfflineComponentProvider");const t=n.configuration;await e.initialize(t);let i=t.initialUser;n.setCredentialChangeListener((async o=>{i.isEqual(o)||(await Uw(e.localStore,o),i=o)})),e.persistence.setDatabaseDeletedListener((()=>{bi("Terminating Firestore due to IndexedDb database deletion"),n.terminate().then((()=>{de("Terminating Firestore due to IndexedDb database deletion completed successfully")})).catch((o=>{bi("Terminating Firestore due to IndexedDb database deletion failed",o)}))})),n._offlineComponents=e}async function Iv(n,e){n.asyncQueue.verifyOperationInProgress();const t=await xR(n);de(ji,"Initializing OnlineComponentProvider"),await e.initialize(t,n.configuration),n.setCredentialChangeListener((i=>yv(e.remoteStore,i))),n.setAppCheckTokenChangeListener(((i,o)=>yv(e.remoteStore,o))),n._onlineComponents=e}async function xR(n){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){de(ji,"Using user provided OfflineComponentProvider");try{await Kd(n,n._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!(function(o){return o.name==="FirebaseError"?o.code===G.FAILED_PRECONDITION||o.code===G.UNIMPLEMENTED:!(typeof DOMException<"u"&&o instanceof DOMException)||o.code===22||o.code===20||o.code===11})(t))throw t;bi("Error using user provided cache. Falling back to memory cache: "+t),await Kd(n,new Rc)}}else de(ji,"Using default OfflineComponentProvider"),await Kd(n,new kR(void 0));return n._offlineComponents}async function iE(n){return n._onlineComponents||(n._uninitializedComponentsProvider?(de(ji,"Using user provided OnlineComponentProvider"),await Iv(n,n._uninitializedComponentsProvider._online)):(de(ji,"Using default OnlineComponentProvider"),await Iv(n,new Af))),n._onlineComponents}function bR(n){return iE(n).then((e=>e.syncEngine))}async function kc(n){const e=await iE(n),t=e.eventManager;return t.onListen=gR.bind(null,e.syncEngine),t.onUnlisten=_R.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=yR.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=wR.bind(null,e.syncEngine),t}function DR(n,e,t={}){const i=new jr;return n.asyncQueue.enqueueAndForget((async()=>(function(l,h,f,p,y){const w=new Ep({next:S=>{w.Ou(),h.enqueueAndForget((()=>gp(l,T)));const V=S.docs.has(f);!V&&S.fromCache?y.reject(new ue(G.UNAVAILABLE,"Failed to get document because the client is offline.")):V&&S.fromCache&&p&&p.source==="server"?y.reject(new ue(G.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):y.resolve(S)},error:S=>y.reject(S)}),T=new vp(Wc(f.path),w,{includeMetadataChanges:!0,ka:!0});return mp(l,T)})(await kc(n),n.asyncQueue,e,t,i))),i.promise}function VR(n,e,t={}){const i=new jr;return n.asyncQueue.enqueueAndForget((async()=>(function(l,h,f,p,y){const w=new Ep({next:S=>{w.Ou(),h.enqueueAndForget((()=>gp(l,T))),S.fromCache&&p.source==="server"?y.reject(new ue(G.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):y.resolve(S)},error:S=>y.reject(S)}),T=new vp(f,w,{includeMetadataChanges:!0,ka:!0});return mp(l,T)})(await kc(n),n.asyncQueue,e,t,i))),i.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sE(n){const e={};return n.timeoutSeconds!==void 0&&(e.timeoutSeconds=n.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Sv=new Map;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oE="firestore.googleapis.com",Pv=!0;class Av{constructor(e){var t,i;if(e.host===void 0){if(e.ssl!==void 0)throw new ue(G.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=oE,this.ssl=Pv}else this.host=e.host,this.ssl=(t=e.ssl)!==null&&t!==void 0?t:Pv;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=jw;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<dC)throw new ue(G.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}JP("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=sE((i=e.experimentalLongPollingOptions)!==null&&i!==void 0?i:{}),(function(l){if(l.timeoutSeconds!==void 0){if(isNaN(l.timeoutSeconds))throw new ue(G.INVALID_ARGUMENT,`invalid long polling timeout: ${l.timeoutSeconds} (must not be NaN)`);if(l.timeoutSeconds<5)throw new ue(G.INVALID_ARGUMENT,`invalid long polling timeout: ${l.timeoutSeconds} (minimum allowed value is 5)`);if(l.timeoutSeconds>30)throw new ue(G.INVALID_ARGUMENT,`invalid long polling timeout: ${l.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(i,o){return i.timeoutSeconds===o.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Zc{constructor(e,t,i,o){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=i,this._app=o,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Av({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new ue(G.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new ue(G.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Av(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=(function(i){if(!i)return new BP;switch(i.type){case"firstParty":return new qP(i.sessionIndex||"0",i.iamToken||null,i.authTokenFactory||null);case"provider":return i.client;default:throw new ue(G.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(t){const i=Sv.get(t);i&&(de("ComponentProvider","Removing Datastore"),Sv.delete(t),i.terminate())})(this),Promise.resolve()}}function OR(n,e,t,i={}){var o;n=an(n,Zc);const l=Ho(e),h=n._getSettings(),f=Object.assign(Object.assign({},h),{emulatorOptions:n._getEmulatorOptions()}),p=`${e}:${t}`;l&&(Zv(`https://${p}`),e_("Firestore",!0)),h.host!==oE&&h.host!==p&&bi("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const y=Object.assign(Object.assign({},h),{host:p,ssl:l,emulatorOptions:i});if(!Ts(y,f)&&(n._setSettings(y),i.mockUserToken)){let w,T;if(typeof i.mockUserToken=="string")w=i.mockUserToken,T=$t.MOCK_USER;else{w=QT(i.mockUserToken,(o=n._app)===null||o===void 0?void 0:o.options.projectId);const S=i.mockUserToken.sub||i.mockUserToken.user_id;if(!S)throw new ue(G.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");T=new $t(S)}n._authCredentials=new $P(new Q_(w,T))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bs{constructor(e,t,i){this.converter=t,this._query=i,this.type="query",this.firestore=e}withConverter(e){return new bs(this.firestore,e,this._query)}}class ot{constructor(e,t,i){this.converter=t,this._key=i,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new xi(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new ot(this.firestore,e,this._key)}toJSON(){return{type:ot._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,t,i){if(wl(t,ot._jsonSchema))return new ot(e,i||null,new _e(Ye.fromString(t.referencePath)))}}ot._jsonSchemaVersion="firestore/documentReference/1.0",ot._jsonSchema={type:vt("string",ot._jsonSchemaVersion),referencePath:vt("string")};class xi extends bs{constructor(e,t,i){super(e,t,Wc(i)),this._path=i,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new ot(this.firestore,null,new _e(e))}withConverter(e){return new xi(this.firestore,e,this._path)}}function Fr(n,e,...t){if(n=ft(n),J_("collection","path",e),n instanceof Zc){const i=Ye.fromString(e,...t);return Fy(i),new xi(n,null,i)}{if(!(n instanceof ot||n instanceof xi))throw new ue(G.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=n._path.child(Ye.fromString(e,...t));return Fy(i),new xi(n.firestore,null,i)}}function mn(n,e,...t){if(n=ft(n),arguments.length===1&&(e=Kf.newId()),J_("doc","path",e),n instanceof Zc){const i=Ye.fromString(e,...t);return jy(i),new ot(n,null,new _e(i))}{if(!(n instanceof ot||n instanceof xi))throw new ue(G.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=n._path.child(Ye.fromString(e,...t));return jy(i),new ot(n.firestore,n instanceof xi?n.converter:null,new _e(i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Cv="AsyncQueue";class Rv{constructor(e=Promise.resolve()){this.Zu=[],this.Xu=!1,this.ec=[],this.tc=null,this.nc=!1,this.rc=!1,this.sc=[],this.F_=new Bw(this,"async_queue_retry"),this.oc=()=>{const i=Gd();i&&de(Cv,"Visibility state changed to "+i.visibilityState),this.F_.y_()},this._c=e;const t=Gd();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this.oc)}get isShuttingDown(){return this.Xu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.ac(),this.uc(e)}enterRestrictedMode(e){if(!this.Xu){this.Xu=!0,this.rc=e||!1;const t=Gd();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this.oc)}}enqueue(e){if(this.ac(),this.Xu)return new Promise((()=>{}));const t=new jr;return this.uc((()=>this.Xu&&this.rc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise))).then((()=>t.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Zu.push(e),this.cc())))}async cc(){if(this.Zu.length!==0){try{await this.Zu[0](),this.Zu.shift(),this.F_.reset()}catch(e){if(!Qo(e))throw e;de(Cv,"Operation failed with retryable error: "+e)}this.Zu.length>0&&this.F_.g_((()=>this.cc()))}}uc(e){const t=this._c.then((()=>(this.nc=!0,e().catch((i=>{throw this.tc=i,this.nc=!1,Br("INTERNAL UNHANDLED ERROR: ",kv(i)),i})).then((i=>(this.nc=!1,i))))));return this._c=t,t}enqueueAfterDelay(e,t,i){this.ac(),this.sc.indexOf(e)>-1&&(t=0);const o=fp.createAndSchedule(this,e,t,i,(l=>this.lc(l)));return this.ec.push(o),o}ac(){this.tc&&Se(47125,{hc:kv(this.tc)})}verifyOperationInProgress(){}async Pc(){let e;do e=this._c,await e;while(e!==this._c)}Tc(e){for(const t of this.ec)if(t.timerId===e)return!0;return!1}Ic(e){return this.Pc().then((()=>{this.ec.sort(((t,i)=>t.targetTimeMs-i.targetTimeMs));for(const t of this.ec)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.Pc()}))}dc(e){this.sc.push(e)}lc(e){const t=this.ec.indexOf(e);this.ec.splice(t,1)}}function kv(n){let e=n.message||"";return n.stack&&(e=n.stack.includes(n.message)?n.stack:n.message+`
`+n.stack),e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Nv(n){return(function(t,i){if(typeof t!="object"||t===null)return!1;const o=t;for(const l of i)if(l in o&&typeof o[l]=="function")return!0;return!1})(n,["next","error","complete"])}class Wr extends Zc{constructor(e,t,i,o){super(e,t,i,o),this.type="firestore",this._queue=new Rv,this._persistenceKey=(o==null?void 0:o.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new Rv(e),this._firestoreClient=void 0,await e}}}function LR(n,e){const t=typeof n=="object"?n:i_(),i=typeof n=="string"?n:_c,o=Mf(t,"firestore").getImmediate({identifier:i});if(!o._initialized){const l=GT("firestore");l&&OR(o,...l)}return o}function eh(n){if(n._terminated)throw new ue(G.FAILED_PRECONDITION,"The client has already been terminated.");return n._firestoreClient||MR(n),n._firestoreClient}function MR(n){var e,t,i;const o=n._freezeSettings(),l=(function(f,p,y,w){return new lA(f,p,y,w.host,w.ssl,w.experimentalForceLongPolling,w.experimentalAutoDetectLongPolling,sE(w.experimentalLongPollingOptions),w.useFetchStreams,w.isUsingEmulator)})(n._databaseId,((e=n._app)===null||e===void 0?void 0:e.options.appId)||"",n._persistenceKey,o);n._componentsProvider||!((t=o.localCache)===null||t===void 0)&&t._offlineComponentProvider&&(!((i=o.localCache)===null||i===void 0)&&i._onlineComponentProvider)&&(n._componentsProvider={_offline:o.localCache._offlineComponentProvider,_online:o.localCache._onlineComponentProvider}),n._firestoreClient=new NR(n._authCredentials,n._appCheckCredentials,n._queue,l,n._componentsProvider&&(function(f){const p=f==null?void 0:f._online.build();return{_offline:f==null?void 0:f._offline.build(p),_online:p}})(n._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rn{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Rn(Mt.fromBase64String(e))}catch(t){throw new ue(G.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new Rn(Mt.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:Rn._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(wl(e,Rn._jsonSchema))return Rn.fromBase64String(e.bytes)}}Rn._jsonSchemaVersion="firestore/bytes/1.0",Rn._jsonSchema={type:vt("string",Rn._jsonSchemaVersion),bytes:vt("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class th{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new ue(G.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Lt(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tp{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pr{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new ue(G.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new ue(G.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return Ne(this._lat,e._lat)||Ne(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:pr._jsonSchemaVersion}}static fromJSON(e){if(wl(e,pr._jsonSchema))return new pr(e.latitude,e.longitude)}}pr._jsonSchemaVersion="firestore/geoPoint/1.0",pr._jsonSchema={type:vt("string",pr._jsonSchemaVersion),latitude:vt("number"),longitude:vt("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mr{constructor(e){this._values=(e||[]).map((t=>t))}toArray(){return this._values.map((e=>e))}isEqual(e){return(function(i,o){if(i.length!==o.length)return!1;for(let l=0;l<i.length;++l)if(i[l]!==o[l])return!1;return!0})(this._values,e._values)}toJSON(){return{type:mr._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(wl(e,mr._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every((t=>typeof t=="number")))return new mr(e.vectorValues);throw new ue(G.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}mr._jsonSchemaVersion="firestore/vectorValue/1.0",mr._jsonSchema={type:vt("string",mr._jsonSchemaVersion),vectorValues:vt("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jR=/^__.*__$/;class FR{constructor(e,t,i){this.data=e,this.fieldMask=t,this.fieldTransforms=i}toMutation(e,t){return this.fieldMask!==null?new Bi(e,this.data,this.fieldMask,t,this.fieldTransforms):new Tl(e,this.data,t,this.fieldTransforms)}}class aE{constructor(e,t,i){this.data=e,this.fieldMask=t,this.fieldTransforms=i}toMutation(e,t){return new Bi(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function lE(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Se(40011,{Ec:n})}}class Ip{constructor(e,t,i,o,l,h){this.settings=e,this.databaseId=t,this.serializer=i,this.ignoreUndefinedProperties=o,l===void 0&&this.Ac(),this.fieldTransforms=l||[],this.fieldMask=h||[]}get path(){return this.settings.path}get Ec(){return this.settings.Ec}Rc(e){return new Ip(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Vc(e){var t;const i=(t=this.path)===null||t===void 0?void 0:t.child(e),o=this.Rc({path:i,mc:!1});return o.fc(e),o}gc(e){var t;const i=(t=this.path)===null||t===void 0?void 0:t.child(e),o=this.Rc({path:i,mc:!1});return o.Ac(),o}yc(e){return this.Rc({path:void 0,mc:!0})}wc(e){return Nc(e,this.settings.methodName,this.settings.Sc||!1,this.path,this.settings.bc)}contains(e){return this.fieldMask.find((t=>e.isPrefixOf(t)))!==void 0||this.fieldTransforms.find((t=>e.isPrefixOf(t.field)))!==void 0}Ac(){if(this.path)for(let e=0;e<this.path.length;e++)this.fc(this.path.get(e))}fc(e){if(e.length===0)throw this.wc("Document fields must not be empty");if(lE(this.Ec)&&jR.test(e))throw this.wc('Document fields cannot begin and end with "__"')}}class UR{constructor(e,t,i){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=i||Yc(e)}Dc(e,t,i,o=!1){return new Ip({Ec:e,methodName:t,bc:i,path:Lt.emptyPath(),mc:!1,Sc:o},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function nh(n){const e=n._freezeSettings(),t=Yc(n._databaseId);return new UR(n._databaseId,!!e.ignoreUndefinedProperties,t)}function uE(n,e,t,i,o,l={}){const h=n.Dc(l.merge||l.mergeFields?2:0,e,t,o);Sp("Data must be an object, but it was:",h,i);const f=cE(i,h);let p,y;if(l.merge)p=new gn(h.fieldMask),y=h.fieldTransforms;else if(l.mergeFields){const w=[];for(const T of l.mergeFields){const S=Cf(e,T,t);if(!h.contains(S))throw new ue(G.INVALID_ARGUMENT,`Field '${S}' is specified in your field mask but missing from your input data.`);dE(w,S)||w.push(S)}p=new gn(w),y=h.fieldTransforms.filter((T=>p.covers(T.field)))}else p=null,y=h.fieldTransforms;return new FR(new on(f),p,y)}class rh extends Tp{_toFieldTransform(e){if(e.Ec!==2)throw e.Ec===1?e.wc(`${this._methodName}() can only appear at the top level of your update data`):e.wc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof rh}}function zR(n,e,t,i){const o=n.Dc(1,e,t);Sp("Data must be an object, but it was:",o,i);const l=[],h=on.empty();zi(i,((p,y)=>{const w=Pp(e,p,t);y=ft(y);const T=o.gc(w);if(y instanceof rh)l.push(w);else{const S=Al(y,T);S!=null&&(l.push(w),h.set(w,S))}}));const f=new gn(l);return new aE(h,f,o.fieldTransforms)}function BR(n,e,t,i,o,l){const h=n.Dc(1,e,t),f=[Cf(e,i,t)],p=[o];if(l.length%2!=0)throw new ue(G.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let S=0;S<l.length;S+=2)f.push(Cf(e,l[S])),p.push(l[S+1]);const y=[],w=on.empty();for(let S=f.length-1;S>=0;--S)if(!dE(y,f[S])){const V=f[S];let O=p[S];O=ft(O);const j=h.gc(V);if(O instanceof rh)y.push(V);else{const L=Al(O,j);L!=null&&(y.push(V),w.set(V,L))}}const T=new gn(y);return new aE(w,T,h.fieldTransforms)}function $R(n,e,t,i=!1){return Al(t,n.Dc(i?4:3,e))}function Al(n,e){if(hE(n=ft(n)))return Sp("Unsupported field value:",e,n),cE(n,e);if(n instanceof Tp)return(function(i,o){if(!lE(o.Ec))throw o.wc(`${i._methodName}() can only be used with update() and set()`);if(!o.path)throw o.wc(`${i._methodName}() is not currently supported inside arrays`);const l=i._toFieldTransform(o);l&&o.fieldTransforms.push(l)})(n,e),null;if(n===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.mc&&e.Ec!==4)throw e.wc("Nested arrays are not supported");return(function(i,o){const l=[];let h=0;for(const f of i){let p=Al(f,o.yc(h));p==null&&(p={nullValue:"NULL_VALUE"}),l.push(p),h++}return{arrayValue:{values:l}}})(n,e)}return(function(i,o){if((i=ft(i))===null)return{nullValue:"NULL_VALUE"};if(typeof i=="number")return xA(o.serializer,i);if(typeof i=="boolean")return{booleanValue:i};if(typeof i=="string")return{stringValue:i};if(i instanceof Date){const l=Ge.fromDate(i);return{timestampValue:Pc(o.serializer,l)}}if(i instanceof Ge){const l=new Ge(i.seconds,1e3*Math.floor(i.nanoseconds/1e3));return{timestampValue:Pc(o.serializer,l)}}if(i instanceof pr)return{geoPointValue:{latitude:i.latitude,longitude:i.longitude}};if(i instanceof Rn)return{bytesValue:xw(o.serializer,i._byteString)};if(i instanceof ot){const l=o.databaseId,h=i.firestore._databaseId;if(!h.isEqual(l))throw o.wc(`Document reference is for database ${h.projectId}/${h.database} but should be for database ${l.projectId}/${l.database}`);return{referenceValue:ip(i.firestore._databaseId||o.databaseId,i._key.path)}}if(i instanceof mr)return(function(h,f){return{mapValue:{fields:{[ow]:{stringValue:aw},[wc]:{arrayValue:{values:h.toArray().map((y=>{if(typeof y!="number")throw f.wc("VectorValues must only contain numeric values.");return ep(f.serializer,y)}))}}}}}})(i,o);throw o.wc(`Unsupported field value: ${Uc(i)}`)})(n,e)}function cE(n,e){const t={};return ew(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):zi(n,((i,o)=>{const l=Al(o,e.Vc(i));l!=null&&(t[i]=l)})),{mapValue:{fields:t}}}function hE(n){return!(typeof n!="object"||n===null||n instanceof Array||n instanceof Date||n instanceof Ge||n instanceof pr||n instanceof Rn||n instanceof ot||n instanceof Tp||n instanceof mr)}function Sp(n,e,t){if(!hE(t)||!X_(t)){const i=Uc(t);throw i==="an object"?e.wc(n+" a custom object"):e.wc(n+" "+i)}}function Cf(n,e,t){if((e=ft(e))instanceof th)return e._internalPath;if(typeof e=="string")return Pp(n,e);throw Nc("Field path arguments must be of type string or ",n,!1,void 0,t)}const WR=new RegExp("[~\\*/\\[\\]]");function Pp(n,e,t){if(e.search(WR)>=0)throw Nc(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new th(...e.split("."))._internalPath}catch{throw Nc(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function Nc(n,e,t,i,o){const l=i&&!i.isEmpty(),h=o!==void 0;let f=`Function ${e}() called with invalid data`;t&&(f+=" (via `toFirestore()`)"),f+=". ";let p="";return(l||h)&&(p+=" (found",l&&(p+=` in field ${i}`),h&&(p+=` in document ${o}`),p+=")"),new ue(G.INVALID_ARGUMENT,f+n+p)}function dE(n,e){return n.some((t=>t.isEqual(e)))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fE{constructor(e,t,i,o,l){this._firestore=e,this._userDataWriter=t,this._key=i,this._document=o,this._converter=l}get id(){return this._key.path.lastSegment()}get ref(){return new ot(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new HR(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(Ap("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}}class HR extends fE{data(){return super.data()}}function Ap(n,e){return typeof e=="string"?Pp(n,e):e instanceof th?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pE(n){if(n.limitType==="L"&&n.explicitOrderBy.length===0)throw new ue(G.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Cp{}class qR extends Cp{}function Rp(n,e,...t){let i=[];e instanceof Cp&&i.push(e),i=i.concat(t),(function(l){const h=l.filter((p=>p instanceof Np)).length,f=l.filter((p=>p instanceof ih)).length;if(h>1||h>0&&f>0)throw new ue(G.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")})(i);for(const o of i)n=o._apply(n);return n}class ih extends qR{constructor(e,t,i){super(),this._field=e,this._op=t,this._value=i,this.type="where"}static _create(e,t,i){return new ih(e,t,i)}_apply(e){const t=this._parse(e);return mE(e._query,t),new bs(e.firestore,e.converter,gf(e._query,t))}_parse(e){const t=nh(e.firestore);return(function(l,h,f,p,y,w,T){let S;if(y.isKeyField()){if(w==="array-contains"||w==="array-contains-any")throw new ue(G.INVALID_ARGUMENT,`Invalid Query. You can't perform '${w}' queries on documentId().`);if(w==="in"||w==="not-in"){bv(T,w);const O=[];for(const j of T)O.push(xv(p,l,j));S={arrayValue:{values:O}}}else S=xv(p,l,T)}else w!=="in"&&w!=="not-in"&&w!=="array-contains-any"||bv(T,w),S=$R(f,h,T,w==="in"||w==="not-in");return yt.create(y,w,S)})(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value)}}function kp(n,e,t){const i=e,o=Ap("where",n);return ih._create(o,i,t)}class Np extends Cp{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new Np(e,t)}_parse(e){const t=this._queryConstraints.map((i=>i._parse(e))).filter((i=>i.getFilters().length>0));return t.length===1?t[0]:Yn.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return t.getFilters().length===0?e:((function(o,l){let h=o;const f=l.getFlattenedFilters();for(const p of f)mE(h,p),h=gf(h,p)})(e._query,t),new bs(e.firestore,e.converter,gf(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}function xv(n,e,t){if(typeof(t=ft(t))=="string"){if(t==="")throw new ue(G.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!mw(e)&&t.indexOf("/")!==-1)throw new ue(G.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const i=e.path.child(Ye.fromString(t));if(!_e.isDocumentKey(i))throw new ue(G.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${i}' is not because it has an odd number of segments (${i.length}).`);return Gy(n,new _e(i))}if(t instanceof ot)return Gy(n,t._key);throw new ue(G.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Uc(t)}.`)}function bv(n,e){if(!Array.isArray(n)||n.length===0)throw new ue(G.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function mE(n,e){const t=(function(o,l){for(const h of o)for(const f of h.getFlattenedFilters())if(l.indexOf(f.op)>=0)return f.op;return null})(n.filters,(function(o){switch(o){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}})(e.op));if(t!==null)throw t===e.op?new ue(G.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new ue(G.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}class GR{convertValue(e,t="none"){switch(Li(e)){case 0:return null;case 1:return e.booleanValue;case 2:return ct(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(Oi(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw Se(62114,{value:e})}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const i={};return zi(e,((o,l)=>{i[o]=this.convertValue(l,t)})),i}convertVectorValue(e){var t,i,o;const l=(o=(i=(t=e.fields)===null||t===void 0?void 0:t[wc].arrayValue)===null||i===void 0?void 0:i.values)===null||o===void 0?void 0:o.map((h=>ct(h.doubleValue)));return new mr(l)}convertGeoPoint(e){return new pr(ct(e.latitude),ct(e.longitude))}convertArray(e,t){return(e.values||[]).map((i=>this.convertValue(i,t)))}convertServerTimestamp(e,t){switch(t){case"previous":const i=$c(e);return i==null?null:this.convertValue(i,t);case"estimate":return this.convertTimestamp(ul(e));default:return null}}convertTimestamp(e){const t=Vi(e);return new Ge(t.seconds,t.nanos)}convertDocumentKey(e,t){const i=Ye.fromString(e);Be(Mw(i),9688,{name:e});const o=new cl(i.get(1),i.get(3)),l=new _e(i.popFirst(5));return o.isEqual(t)||Br(`Document ${l} contains a document reference within a different database (${o.projectId}/${o.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),l}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gE(n,e,t){let i;return i=n?n.toFirestore(e):e,i}class Ja{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class ws extends fE{constructor(e,t,i,o,l,h){super(e,t,i,o,h),this._firestore=e,this._firestoreImpl=e,this.metadata=l}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new ac(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const i=this._document.data.field(Ap("DocumentSnapshot.get",e));if(i!==null)return this._userDataWriter.convertValue(i,t.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new ue(G.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,t={};return t.type=ws._jsonSchemaVersion,t.bundle="",t.bundleSource="DocumentSnapshot",t.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?t:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),t.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),t)}}ws._jsonSchemaVersion="firestore/documentSnapshot/1.0",ws._jsonSchema={type:vt("string",ws._jsonSchemaVersion),bundleSource:vt("string","DocumentSnapshot"),bundleName:vt("string"),bundle:vt("string")};class ac extends ws{data(e={}){return super.data(e)}}class Es{constructor(e,t,i,o){this._firestore=e,this._userDataWriter=t,this._snapshot=o,this.metadata=new Ja(o.hasPendingWrites,o.fromCache),this.query=i}get docs(){const e=[];return this.forEach((t=>e.push(t))),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach((i=>{e.call(t,new ac(this._firestore,this._userDataWriter,i.key,i,new Ja(this._snapshot.mutatedKeys.has(i.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new ue(G.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=(function(o,l){if(o._snapshot.oldDocs.isEmpty()){let h=0;return o._snapshot.docChanges.map((f=>{const p=new ac(o._firestore,o._userDataWriter,f.doc.key,f.doc,new Ja(o._snapshot.mutatedKeys.has(f.doc.key),o._snapshot.fromCache),o.query.converter);return f.doc,{type:"added",doc:p,oldIndex:-1,newIndex:h++}}))}{let h=o._snapshot.oldDocs;return o._snapshot.docChanges.filter((f=>l||f.type!==3)).map((f=>{const p=new ac(o._firestore,o._userDataWriter,f.doc.key,f.doc,new Ja(o._snapshot.mutatedKeys.has(f.doc.key),o._snapshot.fromCache),o.query.converter);let y=-1,w=-1;return f.type!==0&&(y=h.indexOf(f.doc.key),h=h.delete(f.doc.key)),f.type!==1&&(h=h.add(f.doc),w=h.indexOf(f.doc.key)),{type:KR(f.type),doc:p,oldIndex:y,newIndex:w}}))}})(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new ue(G.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=Es._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=Kf.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const t=[],i=[],o=[];return this.docs.forEach((l=>{l._document!==null&&(t.push(l._document),i.push(this._userDataWriter.convertObjectMap(l._document.data.value.mapValue.fields,"previous")),o.push(l.ref.path))})),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function KR(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Se(61501,{type:n})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function QR(n){n=an(n,ot);const e=an(n.firestore,Wr);return DR(eh(e),n._key).then((t=>vE(e,n,t)))}Es._jsonSchemaVersion="firestore/querySnapshot/1.0",Es._jsonSchema={type:vt("string",Es._jsonSchemaVersion),bundleSource:vt("string","QuerySnapshot"),bundleName:vt("string"),bundle:vt("string")};class xp extends GR{constructor(e){super(),this.firestore=e}convertBytes(e){return new Rn(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new ot(this.firestore,null,t)}}function Cl(n){n=an(n,bs);const e=an(n.firestore,Wr),t=eh(e),i=new xp(e);return pE(n._query),VR(t,n._query).then((o=>new Es(e,i,n,o)))}function YR(n,e,t){n=an(n,ot);const i=an(n.firestore,Wr),o=gE(n.converter,e);return sh(i,[uE(nh(i),"setDoc",n._key,o,n.converter!==null,t).toMutation(n._key,kn.none())])}function vs(n,e,t,...i){n=an(n,ot);const o=an(n.firestore,Wr),l=nh(o);let h;return h=typeof(e=ft(e))=="string"||e instanceof th?BR(l,"updateDoc",n._key,e,t,i):zR(l,"updateDoc",n._key,e),sh(o,[h.toMutation(n._key,kn.exists(!0))])}function yE(n){return sh(an(n.firestore,Wr),[new tp(n._key,kn.none())])}function JR(n,e){const t=an(n.firestore,Wr),i=mn(n),o=gE(n.converter,e);return sh(t,[uE(nh(n.firestore),"addDoc",i._key,o,n.converter!==null,{}).toMutation(i._key,kn.exists(!1))]).then((()=>i))}function xc(n,...e){var t,i,o;n=ft(n);let l={includeMetadataChanges:!1,source:"default"},h=0;typeof e[h]!="object"||Nv(e[h])||(l=e[h++]);const f={includeMetadataChanges:l.includeMetadataChanges,source:l.source};if(Nv(e[h])){const T=e[h];e[h]=(t=T.next)===null||t===void 0?void 0:t.bind(T),e[h+1]=(i=T.error)===null||i===void 0?void 0:i.bind(T),e[h+2]=(o=T.complete)===null||o===void 0?void 0:o.bind(T)}let p,y,w;if(n instanceof ot)y=an(n.firestore,Wr),w=Wc(n._key.path),p={next:T=>{e[h]&&e[h](vE(y,n,T))},error:e[h+1],complete:e[h+2]};else{const T=an(n,bs);y=an(T.firestore,Wr),w=T._query;const S=new xp(y);p={next:V=>{e[h]&&e[h](new Es(y,S,T,V))},error:e[h+1],complete:e[h+2]},pE(n._query)}return(function(S,V,O,j){const L=new Ep(j),se=new vp(V,L,O);return S.asyncQueue.enqueueAndForget((async()=>mp(await kc(S),se))),()=>{L.Ou(),S.asyncQueue.enqueueAndForget((async()=>gp(await kc(S),se)))}})(eh(y),w,f,p)}function sh(n,e){return(function(i,o){const l=new jr;return i.asyncQueue.enqueueAndForget((async()=>ER(await bR(i),o,l))),l.promise})(eh(n),e)}function vE(n,e,t){const i=t.docs.get(e._key),o=new xp(n);return new ws(n,o,e._key,i,new Ja(t.hasPendingWrites,t.fromCache),e.converter)}(function(e,t=!0){(function(o){Go=o})(qo),Vo(new Is("firestore",((i,{instanceIdentifier:o,options:l})=>{const h=i.getProvider("app").getImmediate(),f=new Wr(new WP(i.getProvider("auth-internal")),new GP(h,i.getProvider("app-check-internal")),(function(y,w){if(!Object.prototype.hasOwnProperty.apply(y.options,["projectId"]))throw new ue(G.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new cl(y.options.projectId,w)})(h,o),h);return l=Object.assign({useFetchStreams:t},l),f._setSettings(l),f}),"PUBLIC").setMultipleInstances(!0)),ki(Dy,Vy,e),ki(Dy,Vy,"esm2017")})();const XR={apiKey:"AIzaSyCTDtoGl-VnlE33xKZsRocfstdnCSZMyek",authDomain:"golfgang-f00e3.firebaseapp.com",projectId:"golfgang-f00e3",storageBucket:"golfgang-f00e3.firebasestorage.app",messagingSenderId:"787603935494",appId:"1:787603935494:web:82f634dc12cdd3b42cce87"},_E=r_(XR),bc=jP(_E),ht=LR(_E),wE=H.createContext(null);function ZR({children:n}){const[e,t]=H.useState(null),[i,o]=H.useState(null),[l,h]=H.useState(!1),[f,p]=H.useState(!0);H.useEffect(()=>{const T=A1(bc,async S=>{if(!S){t(null),o(null),h(!1),p(!1);return}t(S);try{const V=mn(ht,"users",S.uid),O=await QR(V);if(O.exists()){const j=O.data();o(j),h((j==null?void 0:j.isAdmin)===!0)}else o({}),h(!1)}catch(V){console.error("Error loading user profile:",V),o({})}p(!1)});return()=>T()},[]);const w={user:e,profile:i,isAdmin:l,loading:f,logout:async()=>{try{await C1(bc)}catch(T){console.error("Error signing out:",T)}}};return _.jsx(wE.Provider,{value:w,children:n})}function $i(){return H.useContext(wE)}function ek(){const{user:n,isAdmin:e}=$i();return _.jsx("nav",{className:"navbar",children:_.jsxs("div",{className:"navbar-content",children:[_.jsxs(ur,{to:"/",className:"navbar-brand",children:[_.jsx("span",{className:"navbar-logo",children:""}),_.jsx("span",{className:"navbar-title",children:"GolfGang"})]}),_.jsx("div",{className:"navbar-actions",children:n?_.jsxs(_.Fragment,{children:[e&&_.jsx(ur,{to:"/admin",className:"btn btn-ghost btn-sm",children:"Admin"}),_.jsx(ur,{to:"/profile",className:"btn btn-ghost btn-sm",children:"Profile"})]}):_.jsx(ur,{to:"/login",className:"btn btn-primary btn-sm",children:"Login"})})]})})}function tk(){const n=$o(),e=Wo(),{user:t}=$i();if(!t||["/login","/signup"].includes(n.pathname))return null;const o=[{path:"/",icon:"",label:"Home"},{path:"/profile",icon:"",label:"Profile"}],l=h=>h==="/"?n.pathname==="/":n.pathname.startsWith(h);return _.jsx("nav",{className:"bottom-nav",children:_.jsx("div",{className:"bottom-nav-content",children:o.map(h=>_.jsxs("button",{className:`nav-item ${l(h.path)?"active":""}`,onClick:()=>e(h.path),children:[_.jsx("span",{className:"nav-item-icon",children:h.icon}),_.jsx("span",{className:"nav-item-label",children:h.label})]},h.path))})})}function je(n,e="default"){const t=document.querySelector(".toast-notification");t&&t.remove();const i=document.createElement("div");i.className=`toast-notification toast-${e}`,i.textContent=n,document.body.appendChild(i),requestAnimationFrame(()=>{i.classList.add("show")}),setTimeout(()=>{i.classList.remove("show"),setTimeout(()=>i.remove(),300)},3e3)}function Gn(n="light"){if(navigator.vibrate){const e={light:[10],medium:[20],heavy:[30],success:[10,50,10],error:[50,30,50]};navigator.vibrate(e[n]||e.light)}}function nk(){const n=["#0f7b6c","#10b981","#3b82f6","#f59e0b","#ef4444"];for(let t=0;t<50;t++){const i=document.createElement("div");i.className="confetti",i.style.left=Math.random()*100+"vw",i.style.backgroundColor=n[Math.floor(Math.random()*n.length)],i.style.animationDelay=Math.random()*.5+"s",i.style.animationDuration=Math.random()*1+2+"s",document.body.appendChild(i),setTimeout(()=>i.remove(),3e3)}}function Dc(n){if(!n)return"??";const e=n.trim().split(/[\s_]+/);return e.length>=2?(e[0][0]+e[1][0]).toUpperCase():n.slice(0,2).toUpperCase()}function Vc(n){const e=[{bg:"#dbeafe",text:"#1e40af"},{bg:"#dcfce7",text:"#166534"},{bg:"#fef3c7",text:"#92400e"},{bg:"#fce7f3",text:"#9d174d"},{bg:"#e0e7ff",text:"#3730a3"},{bg:"#ccfbf1",text:"#0f766e"},{bg:"#fee2e2",text:"#991b1b"},{bg:"#f3e8ff",text:"#6b21a8"}];let t=0;for(let i=0;i<(n||"").length;i++)t=n.charCodeAt(i)+((t<<5)-t);return e[Math.abs(t)%e.length]}function Dv(n){return n?(n instanceof Date?n:n.toDate()).toLocaleDateString("en-AU",{weekday:"long",day:"numeric",month:"long"}):""}function rk(n){return n?(n instanceof Date?n:n.toDate()).toLocaleDateString("en-AU",{weekday:"short",day:"numeric",month:"short"}):""}function Rf(n,e){var p,y;const i=(((y=(p=n.date)==null?void 0:p.toDate)==null?void 0:y.call(p))||new Date).toISOString().split("T")[0].replace(/-/g,"");let o="";if(n.tee){const[w,T]=n.tee.split(":"),S=parseInt(w),V=S>=12?"pm":"am",O=S%12||12;o+=` ${O}:${T}${V}`}n.courseName&&(n.tee?o+=" - ":o+=" ",o+=n.courseName);const l=encodeURIComponent(o),h=encodeURIComponent(n.courseName||""),f=encodeURIComponent(`${n.notes||""}

Event details: ${e}`);return`https://calendar.google.com/calendar/render?action=TEMPLATE&text=${l}&dates=${i}/${i}&location=${h}&details=${f}`}const Vv=n=>n?typeof n=="string"?n:n.status:null;function Ov({event:n,users:e}){var f;const{user:t}=$i(),i=(f=n.date)==null?void 0:f.toDate(),o=t&&n.responses?Vv(n.responses[t.uid]):null,l=n.responses?Object.values(n.responses).filter(p=>Vv(p)==="available").length:0,h=p=>{p.preventDefault(),p.stopPropagation(),Gn("light");const w=`${window.location.origin+(window.location.pathname.includes("/golfgang")?"/golfgang":"/golfgang/")}/event/${n.id}`,T=Rf(n,w);window.open(T,"_blank")};return _.jsxs(ur,{to:`/event/${n.id}`,style:{display:"block",padding:"16px 18px",borderRadius:16,textDecoration:"none",color:"inherit",background:n.booked?"linear-gradient(135deg, #f0fdf4 0%, #dcfce7 100%)":"white",border:n.booked?"1px solid #86efac":"1px solid var(--color-border)",boxShadow:n.booked?"0 2px 8px rgba(34, 197, 94, 0.1)":"0 2px 8px rgba(0,0,0,0.04)",transition:"all 0.2s ease"},children:[_.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:10},children:[_.jsxs("span",{style:{fontSize:13,color:"var(--color-text-secondary)",fontWeight:500},children:[i==null?void 0:i.toLocaleDateString("en-AU",{weekday:"short",day:"numeric",month:"short"}),n.tee&&_.jsxs("span",{style:{color:"var(--color-text-tertiary)"},children:["  ",n.tee]})]}),_.jsx("span",{style:{padding:"5px 10px",borderRadius:20,fontSize:11,fontWeight:600,background:n.booked?"#22c55e":"#e0e7ff",color:n.booked?"white":"#4f46e5"},children:n.booked?" Booked":"Proposed"})]}),n.courseName&&_.jsxs("div",{style:{fontSize:15,fontWeight:600,color:"var(--color-text)",marginBottom:8},children:[" ",n.courseName]}),_.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",gap:12},children:[_.jsxs("span",{style:{fontSize:13,color:"var(--color-text-secondary)",fontWeight:500},children:[" ",l,"/4 ",o==="available"&&" You're in"]}),_.jsx("button",{onClick:h,style:{padding:"6px 12px",borderRadius:8,fontSize:12,fontWeight:600,background:n.booked?"#3b82f6":"#e0e7ff",color:n.booked?"white":"#4f46e5",border:"none",cursor:"pointer",transition:"all 0.2s ease",display:"flex",alignItems:"center",gap:4},onMouseEnter:p=>{p.currentTarget.style.transform="scale(1.05)"},onMouseLeave:p=>{p.currentTarget.style.transform="scale(1)"},children:" Add"})]})]})}function ik(){const{user:n,profile:e}=$i(),[t,i]=H.useState([]),[o,l]=H.useState([]),[h,f]=H.useState(!0),[p,y]=H.useState(!1),[w,T]=H.useState(!1),[S,V]=H.useState({date:"",tee:"",courseName:"",notes:""}),[O,j]=H.useState({timePreference:"",cartPreference:"",formatPreference:"",coursePreference:""});H.useEffect(()=>{const re=xc(Fr(ht,"events"),k=>{const P=k.docs.map(C=>({id:C.id,...C.data()}));i(P),f(!1)});return()=>re()},[]),H.useEffect(()=>{async function re(){const k=await Cl(Fr(ht,"users"));l(k.docs.map(P=>({id:P.id,...P.data()})))}re()},[]);const L=re=>{if(!re)return"";const[k,P,C]=re.split("-").map(Number),b=new Date(k,P-1,C),N=b.toLocaleDateString("en-AU",{weekday:"long"}),M=b.toLocaleDateString("en-AU",{month:"long"});return`${N} ${(He=>{const Ze=["th","st","nd","rd"],at=He%100;return He+(Ze[(at-20)%10]||Ze[at]||Ze[0])})(C)} ${M}`},se=async re=>{var k;if(re.preventDefault(),!S.date){je("Please select a date","error");return}T(!0),Gn("medium");try{const[P,C,b]=S.date.split("-").map(Number),N=new Date(P,C-1,b);await JR(Fr(ht,"events"),{title:L(S.date),date:Ge.fromDate(N),tee:S.tee||null,courseName:S.courseName||null,notes:S.notes||null,proposedBy:n.uid,proposedByName:(e==null?void 0:e.username)||((k=n.email)==null?void 0:k.split("@")[0]),booked:!1,createdAt:Ge.now(),responses:{[n.uid]:{status:"available",preferences:{timePreference:O.timePreference||null,cartPreference:O.cartPreference||null,formatPreference:O.formatPreference||null,coursePreference:O.coursePreference||null},updatedAt:new Date().toISOString()}}}),je("Round proposed! ","success"),V({date:"",tee:"",courseName:"",notes:""}),j({timePreference:"",cartPreference:"",formatPreference:"",coursePreference:""}),y(!1)}catch(P){console.error("Error creating event:",P),je("Failed to create event","error")}finally{T(!1)}},q=new Date;q.setHours(0,0,0,0);const te=t.filter(re=>{var P,C;const k=(C=(P=re.date)==null?void 0:P.toDate)==null?void 0:C.call(P);return k&&k>=q}).sort((re,k)=>re.date.toMillis()-k.date.toMillis()),ae=t.filter(re=>{var P,C;const k=(C=(P=re.date)==null?void 0:P.toDate)==null?void 0:C.call(P);return k&&k<q}).sort((re,k)=>k.date.toMillis()-re.date.toMillis()).slice(0,5),we=()=>{const re=new Date;return re.setDate(re.getDate()+1),re.toISOString().split("T")[0]};return h?_.jsx("div",{className:"page",children:_.jsxs("div",{className:"page-content",children:[_.jsx("div",{className:"skeleton",style:{height:60,marginBottom:16}}),_.jsx("div",{className:"skeleton",style:{height:100,marginBottom:12}}),_.jsx("div",{className:"skeleton",style:{height:100,marginBottom:12}}),_.jsx("div",{className:"skeleton",style:{height:100}})]})}):_.jsx("div",{className:"page",children:_.jsxs("div",{className:"page-content",children:[_.jsxs("div",{className:"page-header",children:[_.jsx("h1",{className:"page-title",children:"Upcoming Rounds"}),_.jsx("button",{className:"btn btn-primary",onClick:()=>y(!p),children:p?"Cancel":"+ Propose"})]}),p&&_.jsxs("div",{className:"card",style:{marginBottom:24},children:[_.jsx("h3",{style:{marginTop:0,marginBottom:16},children:"Propose a Round"}),_.jsxs("form",{onSubmit:se,children:[_.jsxs("div",{className:"form-group",children:[_.jsx("label",{htmlFor:"date",children:"Date *"}),_.jsx("input",{id:"date",type:"date",className:"input",value:S.date,onChange:re=>V({...S,date:re.target.value}),min:we(),required:!0})]}),_.jsxs("div",{className:"form-group",children:[_.jsx("label",{htmlFor:"tee",children:"Tee Time (if known)"}),_.jsx("input",{id:"tee",type:"time",className:"input",value:S.tee,onChange:re=>V({...S,tee:re.target.value})})]}),_.jsxs("div",{className:"form-group",children:[_.jsx("label",{htmlFor:"course",children:"Course (if known)"}),_.jsx("input",{id:"course",type:"text",className:"input",value:S.courseName,onChange:re=>V({...S,courseName:re.target.value}),placeholder:"e.g., Royal Melbourne"})]}),_.jsxs("div",{className:"preferences-section",children:[_.jsx("h4",{className:"preferences-title",children:"Your Preferences"}),_.jsxs("div",{className:"form-group",children:[_.jsx("label",{children:"Time Preference"}),_.jsxs("div",{className:"toggle-group",children:[_.jsx("button",{type:"button",className:`toggle-btn ${O.timePreference==="AM"?"active":""}`,onClick:()=>j({...O,timePreference:O.timePreference==="AM"?"":"AM"}),children:" AM"}),_.jsx("button",{type:"button",className:`toggle-btn ${O.timePreference==="PM"?"active":""}`,onClick:()=>j({...O,timePreference:O.timePreference==="PM"?"":"PM"}),children:" PM"}),_.jsx("button",{type:"button",className:`toggle-btn ${O.timePreference==="Any"?"active":""}`,onClick:()=>j({...O,timePreference:O.timePreference==="Any"?"":"Any"}),children:" Any"})]})]}),_.jsxs("div",{className:"form-group",children:[_.jsx("label",{children:"Walk or Cart?"}),_.jsxs("div",{className:"toggle-group",children:[_.jsx("button",{type:"button",className:`toggle-btn ${O.cartPreference==="Walk"?"active":""}`,onClick:()=>j({...O,cartPreference:O.cartPreference==="Walk"?"":"Walk"}),children:" Walk"}),_.jsx("button",{type:"button",className:`toggle-btn ${O.cartPreference==="Cart"?"active":""}`,onClick:()=>j({...O,cartPreference:O.cartPreference==="Cart"?"":"Cart"}),children:" Cart"}),_.jsx("button",{type:"button",className:`toggle-btn ${O.cartPreference==="Any"?"active":""}`,onClick:()=>j({...O,cartPreference:O.cartPreference==="Any"?"":"Any"}),children:" Any"})]})]}),_.jsxs("div",{className:"form-group",children:[_.jsx("label",{children:"Game Format"}),_.jsxs("div",{className:"toggle-group",children:[_.jsx("button",{type:"button",className:`toggle-btn ${O.formatPreference==="Stroke"?"active":""}`,onClick:()=>j({...O,formatPreference:O.formatPreference==="Stroke"?"":"Stroke"}),children:" Stroke"}),_.jsx("button",{type:"button",className:`toggle-btn ${O.formatPreference==="Scramble"?"active":""}`,onClick:()=>j({...O,formatPreference:O.formatPreference==="Scramble"?"":"Scramble"}),children:" Scramble"}),_.jsx("button",{type:"button",className:`toggle-btn ${O.formatPreference==="Any"?"active":""}`,onClick:()=>j({...O,formatPreference:O.formatPreference==="Any"?"":"Any"}),children:" Any"})]})]}),_.jsxs("div",{className:"form-group",children:[_.jsx("label",{htmlFor:"coursePreference",children:"Course Preference"}),_.jsx("input",{id:"coursePreference",type:"text",className:"input",value:O.coursePreference,onChange:re=>j({...O,coursePreference:re.target.value}),placeholder:"e.g., Somewhere close to CBD"})]})]}),_.jsxs("div",{className:"form-group",children:[_.jsx("label",{htmlFor:"notes",children:"Notes (optional)"}),_.jsx("textarea",{id:"notes",className:"input",rows:2,value:S.notes,onChange:re=>V({...S,notes:re.target.value}),placeholder:"Any additional details..."})]}),_.jsx("button",{type:"submit",className:"btn btn-primary btn-full",disabled:w,children:w?"Creating...":"Propose This Round"})]})]}),te.length===0?_.jsxs("div",{className:"card empty-state",children:[_.jsx("div",{className:"empty-state-icon",children:""}),_.jsx("div",{className:"empty-state-title",children:"No upcoming rounds"}),_.jsx("p",{children:"Be the first to propose a round!"})]}):_.jsx("div",{className:"event-list",children:te.map(re=>_.jsx(Ov,{event:re,users:o},re.id))}),ae.length>0&&_.jsxs(_.Fragment,{children:[_.jsx("div",{className:"section-divider",children:_.jsx("span",{children:"Past Rounds"})}),_.jsx("div",{className:"event-list event-list-past",children:ae.map(re=>_.jsx(Ov,{event:re,users:o},re.id))})]})]})})}function sk(){const n=Wo(),[e,t]=H.useState(""),[i,o]=H.useState(""),[l,h]=H.useState(""),[f,p]=H.useState(!1);async function y(w){w.preventDefault(),h(""),p(!0);try{let T=e.trim();if(!e.includes("@")){const S=Rp(Fr(ht,"users"),kp("username","==",e.trim().toLowerCase())),V=await Cl(S);if(V.empty)throw new Error("Username not found.");T=V.docs[0].data().email}await E1(bc,T,i),n("/")}catch(T){console.error(T),T.code==="auth/user-not-found"||T.code==="auth/wrong-password"?h("Invalid email/username or password."):T.code==="auth/invalid-email"?h("Invalid email format."):h(T.message||"Failed to sign in.")}p(!1)}return _.jsx("div",{className:"auth-page",children:_.jsxs("div",{className:"card auth-card",children:[_.jsxs("div",{className:"auth-header",children:[_.jsx("h1",{className:"auth-logo",children:" GolfGang"}),_.jsx("h2",{className:"auth-title",children:"Welcome back"}),_.jsx("p",{className:"auth-subtitle",children:"Sign in to coordinate your rounds"})]}),l&&_.jsx("div",{className:"toast toast-danger",children:l}),_.jsxs("form",{onSubmit:y,className:"auth-form",children:[_.jsxs("div",{className:"form-group",children:[_.jsx("label",{htmlFor:"identifier",children:"Email or Username"}),_.jsx("input",{id:"identifier",type:"text",className:"input",value:e,onChange:w=>t(w.target.value),placeholder:"you@example.com",required:!0,autoComplete:"username"})]}),_.jsxs("div",{className:"form-group",children:[_.jsx("label",{htmlFor:"password",children:"Password"}),_.jsx("input",{id:"password",type:"password",className:"input",value:i,onChange:w=>o(w.target.value),placeholder:"",required:!0,autoComplete:"current-password"})]}),_.jsx("button",{type:"submit",className:"btn btn-primary btn-full",disabled:f,children:f?"Signing in...":"Sign In"})]}),_.jsx("div",{className:"auth-footer",children:_.jsxs("p",{children:["Don't have an account?"," ",_.jsx(ur,{to:"/signup",className:"link",children:"Sign up"})]})})]})})}function ok(){const n=Wo(),[e,t]=H.useState(""),[i,o]=H.useState(""),[l,h]=H.useState(""),[f,p]=H.useState(""),[y,w]=H.useState(!1);async function T(V){const O=V.toLowerCase(),j=Rp(Fr(ht,"users"),kp("username","==",O));return!(await Cl(j)).empty}async function S(V){V.preventDefault(),p("");const O=i.trim().toLowerCase();if(!O.match(/^[a-z0-9_]+$/)){p("Username can only contain letters, numbers, and underscores.");return}if(O.length<3){p("Username must be at least 3 characters.");return}if(l.length<6){p("Password must be at least 6 characters.");return}w(!0);try{if(await T(O)){p("That username is already taken."),w(!1);return}const j=await w1(bc,e,l);await YR(mn(ht,"users",j.user.uid),{email:e,username:O,isAdmin:!1,createdAt:new Date().toISOString()}),n("/")}catch(j){console.error(j),j.code==="auth/email-already-in-use"?p("An account with this email already exists."):j.code==="auth/invalid-email"?p("Invalid email format."):j.code==="auth/weak-password"?p("Password is too weak. Use at least 6 characters."):p(j.message||"Signup failed.")}w(!1)}return _.jsx("div",{className:"auth-page",children:_.jsxs("div",{className:"card auth-card",children:[_.jsxs("div",{className:"auth-header",children:[_.jsx("h1",{className:"auth-logo",children:" GolfGang"}),_.jsx("h2",{className:"auth-title",children:"Create account"}),_.jsx("p",{className:"auth-subtitle",children:"Join the crew and start playing"})]}),f&&_.jsx("div",{className:"toast toast-danger",children:f}),_.jsxs("form",{onSubmit:S,className:"auth-form",children:[_.jsxs("div",{className:"form-group",children:[_.jsx("label",{htmlFor:"email",children:"Email"}),_.jsx("input",{id:"email",type:"email",className:"input",value:e,onChange:V=>t(V.target.value),placeholder:"you@example.com",required:!0,autoComplete:"email"})]}),_.jsxs("div",{className:"form-group",children:[_.jsx("label",{htmlFor:"username",children:"Username"}),_.jsx("input",{id:"username",type:"text",className:"input",value:i,onChange:V=>o(V.target.value),placeholder:"golfer123",required:!0,autoComplete:"username"}),_.jsx("span",{className:"input-hint",children:"Letters, numbers, and underscores only"})]}),_.jsxs("div",{className:"form-group",children:[_.jsx("label",{htmlFor:"password",children:"Password"}),_.jsx("input",{id:"password",type:"password",className:"input",value:l,onChange:V=>h(V.target.value),placeholder:"",required:!0,autoComplete:"new-password"}),_.jsx("span",{className:"input-hint",children:"At least 6 characters"})]}),_.jsx("button",{type:"submit",className:"btn btn-primary btn-full",disabled:y,children:y?"Creating account...":"Create Account"})]}),_.jsx("div",{className:"auth-footer",children:_.jsxs("p",{children:["Already have an account?"," ",_.jsx(ur,{to:"/login",className:"link",children:"Sign in"})]})})]})})}async function ak(n,e=null,t=""){var i,o,l,h,f,p,y;try{let w=-33.8688,T=151.2093;e&&console.log("Place ID provided:",e);const S=new Date;S.setHours(0,0,0,0);const V=new Date(n);V.setHours(0,0,0,0);const O=Math.floor((V-S)/(1e3*60*60*24));let j;if(O>=0&&O<=16){const L=V.toISOString().split("T")[0],se=await fetch(`https://api.open-meteo.com/v1/forecast?latitude=${w}&longitude=${T}&daily=temperature_2m_max,temperature_2m_min,precipitation_probability_max,wind_speed_10m_max,wind_gusts_10m_max&hourly=temperature_2m,relative_humidity_2m,apparent_temperature,precipitation_probability,weather_code,wind_speed_10m,wind_gusts_10m&timezone=auto&start_date=${L}&end_date=${L}`);if(!se.ok)throw new Error("Weather API error");const q=await se.json(),ae=n.getHours()||10;if(!q.hourly||!q.daily)throw new Error("Invalid weather data");const we=(i=q.hourly.temperature_2m)==null?void 0:i[ae],re=(o=q.hourly.apparent_temperature)==null?void 0:o[ae],k=(l=q.hourly.relative_humidity_2m)==null?void 0:l[ae],P=(h=q.hourly.wind_speed_10m)==null?void 0:h[ae],C=(f=q.hourly.wind_gusts_10m)==null?void 0:f[ae],b=(p=q.hourly.weather_code)==null?void 0:p[ae],N=(y=q.hourly.precipitation_probability)==null?void 0:y[ae];j={temp:Math.round(we||q.daily.temperature_2m_max[0]),feelsLike:Math.round(re||we||q.daily.temperature_2m_max[0]),humidity:Math.round(k||65),windSpeed:Math.round(P||q.daily.wind_speed_10m_max[0]),windGust:C?Math.round(C):null,description:lk(b||0),main:uk(b||0),pop:Math.round(N||q.daily.precipitation_probability_max[0]||0),icon:ck(b||0)}}else O<0,j=Lv(n);return j}catch(w){return console.error("Error fetching weather:",w),pk()}}function lk(n){return{0:"clear sky",1:"mainly clear",2:"partly cloudy",3:"overcast",45:"foggy",48:"depositing rime fog",51:"light drizzle",53:"moderate drizzle",55:"dense drizzle",61:"slight rain",63:"moderate rain",65:"heavy rain",71:"slight snow",73:"moderate snow",75:"heavy snow",77:"snow grains",80:"slight rain showers",81:"moderate rain showers",82:"violent rain showers",85:"slight snow showers",86:"heavy snow showers",95:"thunderstorm",96:"thunderstorm with slight hail",99:"thunderstorm with heavy hail"}[n]||"clear"}function uk(n){return n===0||n===1?"Clear":n===2||n===3?"Clouds":n>=45&&n<=48?"Fog":n>=51&&n<=57?"Drizzle":n>=61&&n<=67?"Rain":n>=71&&n<=77?"Snow":n>=80&&n<=82?"Rain":n>=85&&n<=86?"Snow":n>=95&&n<=99?"Thunderstorm":"Clear"}function ck(n){return n===0||n===1?"":n===2?"":n===3?"":n>=45&&n<=48?"":n>=51&&n<=57?"":n>=61&&n<=67?"":n>=71&&n<=77?"":n>=80&&n<=82?"":n>=85&&n<=86?"":n>=95&&n<=99?"":""}function hk(n){let e=10;const t=n.temp;t<10||t>35?e-=3:t<15||t>30?e-=2:(t<18||t>26)&&(e-=1);const i=n.windSpeed;i>40?e-=3:i>30?e-=2:i>20&&(e-=1);const o=n.main.toLowerCase(),l=n.pop;return o.includes("thunderstorm")?e-=5:o.includes("rain")?l>70?e-=3:l>40?e-=2:e-=1:o.includes("drizzle")&&(e-=1),n.humidity>80&&(e-=1),Math.max(0,Math.min(10,e))}function dk(n){return n>=9?"Perfect golf weather! ":n>=7?"Great conditions for golf":n>=5?"Good, playable conditions":n>=3?"Challenging conditions":n>=1?"Difficult conditions":"Poor conditions - consider rescheduling"}function fk(n){return n>=9?"":n>=7?"":n>=5?"":n>=3?"":n>=1?"":""}function pk(){return{temp:24,feelsLike:23,humidity:65,windSpeed:15,windGust:null,description:"partly cloudy",main:"Clouds",pop:20,icon:"02d"}}function Lv(n){const e=n.getMonth(),i={11:{temp:26,humidity:65,windSpeed:20},0:{temp:27,humidity:65,windSpeed:20},1:{temp:27,humidity:70,windSpeed:18},2:{temp:25,humidity:70,windSpeed:15},3:{temp:22,humidity:70,windSpeed:15},4:{temp:19,humidity:65,windSpeed:15},5:{temp:17,humidity:65,windSpeed:18},6:{temp:16,humidity:60,windSpeed:20},7:{temp:18,humidity:60,windSpeed:20},8:{temp:20,humidity:65,windSpeed:20},9:{temp:22,humidity:65,windSpeed:22},10:{temp:24,humidity:65,windSpeed:22}}[e];return{temp:i.temp,feelsLike:i.temp,humidity:i.humidity,windSpeed:i.windSpeed,windGust:null,description:"seasonal average",main:"Clear",pop:30,icon:"01d",isEstimate:!0}}function mk({event:n}){const[e,t]=H.useState(null),[i,o]=H.useState(!0),[l,h]=H.useState(null);if(H.useEffect(()=>{async function w(){if(!(n!=null&&n.date)){o(!1);return}try{o(!0),h(null);const T=n.date.toDate?n.date.toDate():n.date,S=await ak(T,n.coursePlaceId,n.courseName);t(S)}catch(T){console.error("Error loading weather:",T),h("Unable to load weather")}finally{o(!1)}}w()},[n==null?void 0:n.date,n==null?void 0:n.coursePlaceId,n==null?void 0:n.courseName]),i)return _.jsxs("div",{className:"card golf-conditions-loading",children:[_.jsx("div",{className:"loading-spinner"}),_.jsx("span",{children:"Loading conditions..."})]});if(l||!e)return null;const f=hk(e),p=dk(f),y=fk(f);return _.jsxs("div",{className:"card golf-conditions",children:[_.jsx("h3",{className:"card-title",children:" Golf Conditions"}),_.jsxs("div",{className:"conditions-score",children:[_.jsx("div",{className:"score-emoji",children:y}),_.jsxs("div",{className:"score-details",children:[_.jsxs("div",{className:"score-number",children:[f,"/10"]}),_.jsx("div",{className:"score-message",children:p})]})]}),_.jsxs("div",{className:"weather-details",children:[_.jsxs("div",{className:"weather-item",children:[_.jsx("span",{className:"weather-icon",children:""}),_.jsxs("div",{className:"weather-info",children:[_.jsx("span",{className:"weather-label",children:"Temperature"}),_.jsxs("span",{className:"weather-value",children:[e.temp,"C"]}),e.feelsLike!==e.temp&&_.jsxs("span",{className:"weather-subvalue",children:["Feels like ",e.feelsLike,"C"]})]})]}),_.jsxs("div",{className:"weather-item",children:[_.jsx("span",{className:"weather-icon",children:""}),_.jsxs("div",{className:"weather-info",children:[_.jsx("span",{className:"weather-label",children:"Wind"}),_.jsxs("span",{className:"weather-value",children:[e.windSpeed," km/h"]}),e.windGust&&_.jsxs("span",{className:"weather-subvalue",children:["Gusts to ",e.windGust," km/h"]})]})]}),_.jsxs("div",{className:"weather-item",children:[_.jsx("span",{className:"weather-icon",children:""}),_.jsxs("div",{className:"weather-info",children:[_.jsx("span",{className:"weather-label",children:"Rain Chance"}),_.jsxs("span",{className:"weather-value",children:[e.pop,"%"]})]})]}),_.jsxs("div",{className:"weather-item",children:[_.jsx("span",{className:"weather-icon",children:""}),_.jsxs("div",{className:"weather-info",children:[_.jsx("span",{className:"weather-label",children:"Humidity"}),_.jsxs("span",{className:"weather-value",children:[e.humidity,"%"]})]})]})]}),_.jsxs("div",{className:"weather-description",children:[_.jsx("span",{className:"weather-summary",children:e.description}),e.isEstimate&&_.jsx("span",{className:"weather-estimate",children:"(Seasonal average - beyond 5-day forecast)"})]}),_.jsxs("details",{className:"conditions-breakdown",children:[_.jsx("summary",{children:"Score Breakdown"}),_.jsxs("div",{className:"breakdown-content",children:[_.jsx("p",{children:_.jsx("strong",{children:"How the score is calculated:"})}),_.jsxs("ul",{children:[_.jsx("li",{children:" Ideal temperature: 18-26C"}),_.jsx("li",{children:" Ideal wind: <15 km/h"}),_.jsx("li",{children:" Rain reduces score significantly"}),_.jsx("li",{children:" High humidity (80%+) reduces comfort"})]})]})]})]})}function gk({value:n,onChange:e,placeholder:t="Search golf courses..."}){const i=H.useRef(null),o=H.useRef(null),[l,h]=H.useState(n||""),[f,p]=H.useState("loading"),y="AIzaSyAJynS43fA-QT1a5i6VVn1l5T611F6o7gU",w=H.useCallback(j=>{var L;j&&j.name&&(h(j.name),e({name:j.name,address:j.formatted_address||"",placeId:j.place_id||"",location:(L=j.geometry)!=null&&L.location?{lat:j.geometry.location.lat(),lng:j.geometry.location.lng()}:null}))},[e]);H.useEffect(()=>{var se,q;if(console.log(" API Key found:",y.substring(0,10)+"..."),(q=(se=window.google)==null?void 0:se.maps)!=null&&q.places){console.log(" Google Maps already loaded"),p("ready");return}if(document.querySelector('script[src*="maps.googleapis.com"]')){console.log(" Script exists, waiting for load...");const te=setInterval(()=>{var ae,we;(we=(ae=window.google)==null?void 0:ae.maps)!=null&&we.places&&(console.log(" Google Maps loaded"),p("ready"),clearInterval(te))},200);setTimeout(()=>{var ae,we;clearInterval(te),(we=(ae=window.google)==null?void 0:ae.maps)!=null&&we.places||(console.error(" Timeout waiting for Google Maps"),p("error-timeout"))},1e4);return}console.log(" Loading Google Maps script...");const L=document.createElement("script");return L.src=`https://maps.googleapis.com/maps/api/js?key=${y}&libraries=places&callback=initGoogleMaps`,L.async=!0,L.defer=!0,window.initGoogleMaps=()=>{console.log(" Google Maps loaded via callback"),p("ready")},L.onerror=te=>{console.error(" Failed to load Google Maps script:",te),p("error-load")},document.head.appendChild(L),()=>{delete window.initGoogleMaps}},[y]),H.useEffect(()=>{if(!(f!=="ready"||!i.current)&&!o.current)try{console.log(" Initializing Places Autocomplete..."),o.current=new window.google.maps.places.Autocomplete(i.current,{types:["establishment"],fields:["name","formatted_address","place_id","geometry","types"],componentRestrictions:{country:"au"}}),o.current.addListener("place_changed",()=>{const j=o.current.getPlace();console.log(" Place selected:",j),w(j)}),console.log(" Autocomplete initialized successfully")}catch(j){console.error(" Error initializing autocomplete:",j),p("error-init")}},[f,w]),H.useEffect(()=>{n!==void 0&&n!==l&&h(n)},[n]);const T=j=>{h(j.target.value)},S=()=>{l&&e({name:l,address:"",placeId:"",location:null})},O=(()=>{switch(f){case"loading":return"Loading Google Maps...";case"error-no-key":return" API key missing - check .env file";case"error-load":return" Failed to load Google Maps";case"error-timeout":return" Google Maps load timeout";case"error-init":return" Failed to initialize search";default:return null}})();return _.jsxs("div",{className:"course-search",children:[_.jsx("input",{ref:i,type:"text",className:"input",placeholder:f==="ready"?t:"Loading...",value:l,onChange:T,onBlur:S}),O&&_.jsx("span",{className:"input-hint",style:{color:f.includes("error")?"var(--color-danger)":"var(--color-text-secondary)"},children:O})]})}const Qd=4,Yu=n=>n?typeof n=="string"?n:n.status:null,Ju=n=>!n||typeof n=="string"?null:n.preferences||null;function yk(){var Ce,ke;const{id:n}=dT(),e=Wo(),{user:t,isAdmin:i}=$i(),[o,l]=H.useState(null),[h,f]=H.useState([]),[p,y]=H.useState(!0),[w,T]=H.useState(!1),[S,V]=H.useState(!1),[O,j]=H.useState(!1),[L,se]=H.useState({tee:"",courseName:"",coursePlaceId:"",notes:""}),[q,te]=H.useState({timePreference:"",cartPreference:"",formatPreference:"",coursePreference:""});H.useEffect(()=>{const K=xc(mn(ht,"events",n),ee=>{ee.exists()?(l({id:ee.id,...ee.data()}),se({tee:ee.data().tee||"",courseName:ee.data().courseName||"",coursePlaceId:ee.data().coursePlaceId||"",notes:ee.data().notes||""})):l(null),y(!1)});return()=>K()},[n]),H.useEffect(()=>{var K;if(o&&t){const ee=(K=o.responses)==null?void 0:K[t.uid],le=Ju(ee);le&&te({timePreference:le.timePreference||"",cartPreference:le.cartPreference||"",formatPreference:le.formatPreference||"",coursePreference:le.coursePreference||""})}},[o,t]),H.useEffect(()=>{async function K(){const ee=await Cl(Fr(ht,"users"));f(ee.docs.map(le=>({id:le.id,...le.data()})))}K()},[]);const ae=K=>{var le;const ee=h.find(xe=>xe.id===K);return(ee==null?void 0:ee.username)||((le=ee==null?void 0:ee.email)==null?void 0:le.split("@")[0])||"Unknown"},we=(o==null?void 0:o.responses)||{},re=t?Yu(we[t.uid]):null,k=t?Ju(we[t.uid]):null,P=Object.entries(we).filter(([K,ee])=>Yu(ee)==="available").map(([K])=>K),C=Object.entries(we).filter(([K,ee])=>Yu(ee)==="unavailable").map(([K])=>K),b=(t==null?void 0:t.uid)===(o==null?void 0:o.proposedBy),N=i||b,M=async K=>{if(!(!o||!t)){Gn("medium");try{const ee=mn(ht,"events",o.id),le={...we};K===null?delete le[t.uid]:le[t.uid]={status:K,preferences:K==="available"?{timePreference:q.timePreference||null,cartPreference:q.cartPreference||null,formatPreference:q.formatPreference||null,coursePreference:q.coursePreference||null}:null,updatedAt:new Date().toISOString()},await vs(ee,{responses:le}),K==="available"?(je("You're in! ","success"),j(!1)):K==="unavailable"&&(je("Response saved","default"),j(!1))}catch(ee){console.error("Error updating RSVP:",ee),je("Failed to save response","error")}}},R=async K=>{if(!(!o||!K)){Gn("medium");try{const ee=mn(ht,"events",o.id),le={...we};delete le[K],await vs(ee,{responses:le}),je("Player removed","default")}catch(ee){console.error("Error removing player:",ee),je("Failed to remove player","error")}}},He=async()=>{if(o){Gn("success");try{const K=mn(ht,"events",o.id);await vs(K,{booked:!0,bookedAt:new Date().toISOString()}),nk(),je("Round confirmed! ","success")}catch(K){console.error("Error booking:",K),je("Failed to book","error")}}},Ze=async()=>{if(o){Gn("medium");try{const K=mn(ht,"events",o.id);await vs(K,{booked:!1,bookedAt:null}),je("Booking removed","default")}catch(K){console.error("Error:",K),je("Failed to update","error")}}},at=async()=>{if(o){V(!0);try{const K=mn(ht,"events",o.id);await vs(K,{tee:L.tee||null,courseName:L.courseName||null,coursePlaceId:L.coursePlaceId||null,notes:L.notes||null}),T(!1),je("Changes saved","success")}catch(K){console.error("Error saving:",K),je("Failed to save","error")}finally{V(!1)}}},ze=async()=>{if(o&&confirm("Are you sure you want to delete this event?")){Gn("heavy");try{await yE(mn(ht,"events",o.id)),je("Event deleted","default"),e("/")}catch(K){console.error("Error deleting:",K),je("Failed to delete","error")}}},oe=async()=>{var Nn,xn;Gn("light");const K=(xn=(Nn=o.date)==null?void 0:Nn.toDate)==null?void 0:xn.call(Nn),ee=Dv(K),xe=`${window.location.origin+(window.location.pathname.includes("/golfgang")?"/golfgang":"/golfgang/")}/event/${o.id}`,$e=P.map(yr=>ae(yr)).join(", ");let Pt=` Golf - ${o.booked?"Booked":"Proposed"}!
`;Pt+=` ${o.title||ee}
`,o.tee&&(Pt+=` ${o.tee}
`),o.courseName&&(Pt+=` ${o.courseName}
`),$e&&(Pt+=` ${$e}
`),o.notes&&(Pt+=`
 ${o.notes}
`),Pt+=`
 ${xe}`,o.booked&&(Pt+=`

 Add to Calendar:
${Rf(o,xe)}`);try{await navigator.clipboard.writeText(Pt),je("Copied to clipboard! ","success")}catch{je("Could not copy","error")}},ve=()=>{Gn("light");const ee=`${window.location.origin+(window.location.pathname.includes("/golfgang")?"/golfgang":"/golfgang/")}/event/${o.id}`,le=Rf(o,ee);window.open(le,"_blank")},ce=()=>{const K=Object.entries(we).filter(([le,xe])=>Yu(xe)==="available").map(([le,xe])=>({uid:le,name:ae(le),prefs:Ju(xe)})).filter(le=>le.prefs);if(K.length===0)return null;const ee={time:{},cart:{},format:{}};return K.forEach(le=>{le.prefs.timePreference&&(ee.time[le.prefs.timePreference]=(ee.time[le.prefs.timePreference]||0)+1),le.prefs.cartPreference&&(ee.cart[le.prefs.cartPreference]=(ee.cart[le.prefs.cartPreference]||0)+1),le.prefs.formatPreference&&(ee.format[le.prefs.formatPreference]=(ee.format[le.prefs.formatPreference]||0)+1)}),{summary:ee,allPrefs:K}};if(p)return _.jsx("div",{className:"page",children:_.jsxs("div",{className:"page-content",children:[_.jsx("div",{className:"skeleton",style:{height:32,width:"60%",marginBottom:16}}),_.jsx("div",{className:"skeleton",style:{height:120,marginBottom:16}}),_.jsx("div",{className:"skeleton",style:{height:80}})]})});if(!o)return _.jsx("div",{className:"page",children:_.jsx("div",{className:"page-content",children:_.jsx("div",{className:"card",children:_.jsxs("div",{className:"empty-state",children:[_.jsx("div",{className:"empty-state-icon",children:""}),_.jsx("div",{className:"empty-state-title",children:"Event not found"}),_.jsx(ur,{to:"/",className:"btn btn-primary",style:{marginTop:16},children:"Back to Home"})]})})})});const F=(ke=(Ce=o.date)==null?void 0:Ce.toDate)==null?void 0:ke.call(Ce),Q=Dv(F),fe=ce();return _.jsx("div",{className:"page",children:_.jsxs("div",{className:"page-content",children:[_.jsx(ur,{to:"/",className:"back-link",children:" Back to rounds"}),_.jsxs("div",{className:"event-header",children:[_.jsx("h1",{className:"event-title",children:o.title||"Golf Round"}),_.jsx("div",{className:"event-status",children:o.booked?_.jsx("span",{className:"badge badge-success",children:" Booked"}):_.jsx("span",{className:"badge badge-info",children:"Proposed"})})]}),_.jsx("div",{className:"card",children:w?_.jsxs("div",{className:"event-edit-form",children:[_.jsxs("div",{className:"form-group",children:[_.jsx("label",{children:"Tee Time"}),_.jsx("input",{type:"time",className:"input",value:L.tee,onChange:K=>se({...L,tee:K.target.value})})]}),_.jsxs("div",{className:"form-group",children:[_.jsx("label",{children:"Course"}),_.jsx(gk,{value:L.courseName,onChange:K=>se({...L,courseName:K.name,coursePlaceId:K.placeId||""}),placeholder:"Search for a golf course..."})]}),_.jsxs("div",{className:"form-group",children:[_.jsx("label",{children:"Notes"}),_.jsx("textarea",{className:"input",rows:2,value:L.notes,onChange:K=>se({...L,notes:K.target.value}),placeholder:"Additional details..."})]}),_.jsxs("div",{className:"form-actions",children:[_.jsx("button",{className:"btn btn-ghost",onClick:()=>T(!1),children:"Cancel"}),_.jsx("button",{className:"btn btn-primary",onClick:at,disabled:S,children:S?"Saving...":"Save Changes"})]})]}):_.jsxs("div",{className:"event-details",children:[_.jsxs("div",{className:"event-detail",children:[_.jsx("span",{className:"event-detail-icon",children:""}),_.jsx("span",{children:Q})]}),_.jsxs("div",{className:"event-detail",children:[_.jsx("span",{className:"event-detail-icon",children:""}),_.jsx("span",{children:o.tee||"Time TBA"})]}),_.jsxs("div",{className:"event-detail",children:[_.jsx("span",{className:"event-detail-icon",children:""}),_.jsx("span",{children:o.courseName||"Course TBA"})]}),_.jsxs("div",{className:"event-detail",children:[_.jsx("span",{className:"event-detail-icon",children:""}),_.jsxs("span",{children:[P.length,"/",Qd," players"]})]}),o.notes&&_.jsxs("div",{className:"event-detail event-notes",children:[_.jsx("span",{className:"event-detail-icon",children:""}),_.jsx("span",{children:o.notes})]}),_.jsxs("div",{className:"event-actions",children:[_.jsx("button",{className:"btn btn-ghost btn-sm",onClick:oe,children:"Share"}),_.jsx("button",{className:"btn btn-ghost btn-sm",onClick:ve,children:" Add to Calendar"}),N&&_.jsx("button",{className:"btn btn-ghost btn-sm",onClick:()=>T(!0),children:"Edit"})]})]})}),_.jsx(mk,{event:o}),!o.booked&&_.jsxs("div",{className:"card",children:[_.jsx("h3",{className:"card-title",style:{marginBottom:20},children:"Are you in?"}),P.length>=Qd&&!re&&_.jsx("div",{className:"toast toast-warning",children:" Group is full  you'll be on the reserve list"}),re&&!O&&_.jsxs("div",{className:"current-rsvp",children:[_.jsx("div",{className:`rsvp-status ${re==="available"?"rsvp-status-in":"rsvp-status-out"}`,children:re==="available"?_.jsxs(_.Fragment,{children:[_.jsx("span",{style:{fontSize:18},children:""}),_.jsx("span",{children:"You're in!"})]}):_.jsxs(_.Fragment,{children:[_.jsx("span",{style:{fontSize:18},children:""}),_.jsx("span",{children:"Can't make it"})]})}),k&&re==="available"&&_.jsxs("div",{className:"my-preferences",children:[k.timePreference&&_.jsxs("span",{className:"pref-tag",children:[" ",k.timePreference]}),k.cartPreference&&_.jsxs("span",{className:"pref-tag",children:[" ",k.cartPreference]}),k.formatPreference&&_.jsxs("span",{className:"pref-tag",children:[" ",k.formatPreference]})]}),_.jsx("button",{className:"btn btn-ghost btn-sm",onClick:()=>j(!0),style:{marginTop:16},children:"Change Response"})]}),(!re||O)&&_.jsxs("div",{className:"rsvp-form",children:[_.jsxs("div",{className:"preferences-section",children:[_.jsx("h4",{className:"preferences-title",children:"Your Preferences (Optional)"}),_.jsxs("div",{className:"form-group",children:[_.jsx("label",{children:" Time Preference"}),_.jsxs("div",{className:"toggle-group",children:[_.jsx("button",{type:"button",className:`toggle-btn ${q.timePreference==="AM"?"active":""}`,onClick:()=>te({...q,timePreference:q.timePreference==="AM"?"":"AM"}),children:" AM"}),_.jsx("button",{type:"button",className:`toggle-btn ${q.timePreference==="PM"?"active":""}`,onClick:()=>te({...q,timePreference:q.timePreference==="PM"?"":"PM"}),children:" PM"}),_.jsx("button",{type:"button",className:`toggle-btn ${q.timePreference==="Any"?"active":""}`,onClick:()=>te({...q,timePreference:q.timePreference==="Any"?"":"Any"}),children:" Any"})]})]}),_.jsxs("div",{className:"form-group",children:[_.jsx("label",{children:" Walk or Cart?"}),_.jsxs("div",{className:"toggle-group",children:[_.jsx("button",{type:"button",className:`toggle-btn ${q.cartPreference==="Walk"?"active":""}`,onClick:()=>te({...q,cartPreference:q.cartPreference==="Walk"?"":"Walk"}),children:" Walk"}),_.jsx("button",{type:"button",className:`toggle-btn ${q.cartPreference==="Cart"?"active":""}`,onClick:()=>te({...q,cartPreference:q.cartPreference==="Cart"?"":"Cart"}),children:" Cart"}),_.jsx("button",{type:"button",className:`toggle-btn ${q.cartPreference==="Any"?"active":""}`,onClick:()=>te({...q,cartPreference:q.cartPreference==="Any"?"":"Any"}),children:" Any"})]})]}),_.jsxs("div",{className:"form-group",children:[_.jsx("label",{children:" Game Format"}),_.jsxs("div",{className:"toggle-group",children:[_.jsx("button",{type:"button",className:`toggle-btn ${q.formatPreference==="Stroke"?"active":""}`,onClick:()=>te({...q,formatPreference:q.formatPreference==="Stroke"?"":"Stroke"}),children:" Stroke"}),_.jsx("button",{type:"button",className:`toggle-btn ${q.formatPreference==="Scramble"?"active":""}`,onClick:()=>te({...q,formatPreference:q.formatPreference==="Scramble"?"":"Scramble"}),children:" Scramble"}),_.jsx("button",{type:"button",className:`toggle-btn ${q.formatPreference==="Any"?"active":""}`,onClick:()=>te({...q,formatPreference:q.formatPreference==="Any"?"":"Any"}),children:" Any"})]})]}),_.jsxs("div",{className:"form-group",children:[_.jsx("label",{children:" Course Preference"}),_.jsx("input",{type:"text",className:"input",value:q.coursePreference,onChange:K=>te({...q,coursePreference:K.target.value}),placeholder:"e.g., Somewhere close to CBD"})]})]}),_.jsxs("div",{className:"rsvp-actions",children:[_.jsxs("button",{className:"rsvp-action-btn btn-available",onClick:()=>M("available"),children:[_.jsx("span",{style:{fontSize:18},children:""}),_.jsx("span",{children:"I'm in"})]}),_.jsxs("button",{className:"rsvp-action-btn btn-unavailable",onClick:()=>M("unavailable"),children:[_.jsx("span",{style:{fontSize:18},children:""}),_.jsx("span",{children:"Can't make it"})]})]}),O&&re&&_.jsx("button",{className:"btn btn-ghost btn-full",onClick:()=>j(!1),style:{marginTop:12},children:"Cancel"})]})]}),o.booked&&re==="available"&&_.jsx("div",{className:"card card-success",children:_.jsxs("div",{style:{display:"flex",alignItems:"center",gap:10},children:[_.jsx("span",{style:{fontSize:20},children:""}),_.jsx("span",{style:{fontWeight:600},children:"You're confirmed for this round"})]})}),_.jsxs("div",{className:"card",children:[_.jsxs("h3",{className:"card-title",children:["Players (",P.length,"/",Qd,")"]}),P.length===0?_.jsx("p",{className:"text-secondary",children:"No one has RSVP'd yet"}):_.jsx("div",{className:"player-list",children:P.map(K=>{const ee=ae(K),le=Vc(ee),xe=K===(t==null?void 0:t.uid),$e=Ju(we[K]);return _.jsxs("div",{className:"player-item",children:[_.jsxs("div",{className:"player-info",children:[_.jsx("div",{className:"avatar",style:{backgroundColor:le.bg,color:le.text},children:Dc(ee)}),_.jsxs("div",{className:"player-details",children:[_.jsxs("span",{className:"player-name",children:[ee," ",xe&&_.jsx("span",{className:"text-secondary",children:"(you)"})]}),$e&&_.jsxs("div",{className:"player-prefs",children:[$e.timePreference&&_.jsx("span",{className:"pref-mini",children:$e.timePreference}),$e.cartPreference&&_.jsx("span",{className:"pref-mini",children:$e.cartPreference}),$e.formatPreference&&_.jsx("span",{className:"pref-mini",children:$e.formatPreference})]})]})]}),i&&!xe&&_.jsx("button",{className:"btn btn-ghost btn-sm btn-danger",onClick:()=>R(K),children:"Remove"})]},K)})}),C.length>0&&_.jsxs(_.Fragment,{children:[_.jsx("h4",{className:"card-subtitle",style:{marginTop:20,marginBottom:12,fontSize:14,fontWeight:600,color:"var(--color-text-secondary)"},children:"Can't make it"}),_.jsx("div",{className:"player-list player-list-unavailable",children:C.map(K=>{const ee=ae(K);return Vc(ee),_.jsx("div",{className:"player-item",children:_.jsxs("div",{className:"player-info",children:[_.jsx("div",{className:"avatar avatar-muted",style:{backgroundColor:"#e5e7eb",color:"#6b7280"},children:Dc(ee)}),_.jsx("span",{className:"player-name text-secondary",children:ee})]})},K)})})]})]}),fe&&P.length>0&&_.jsxs("div",{className:"card",children:[_.jsx("h3",{className:"card-title",children:"Group Preferences"}),_.jsxs("div",{className:"prefs-summary",children:[Object.keys(fe.summary.time).length>0&&_.jsxs("div",{className:"prefs-row",children:[_.jsx("span",{className:"prefs-label",children:" Time:"}),_.jsx("div",{className:"prefs-values",children:Object.entries(fe.summary.time).map(([K,ee])=>_.jsxs("span",{className:"pref-chip",children:[K," (",ee,")"]},K))})]}),Object.keys(fe.summary.cart).length>0&&_.jsxs("div",{className:"prefs-row",children:[_.jsx("span",{className:"prefs-label",children:" Transport:"}),_.jsx("div",{className:"prefs-values",children:Object.entries(fe.summary.cart).map(([K,ee])=>_.jsxs("span",{className:"pref-chip",children:[K," (",ee,")"]},K))})]}),Object.keys(fe.summary.format).length>0&&_.jsxs("div",{className:"prefs-row",children:[_.jsx("span",{className:"prefs-label",children:" Format:"}),_.jsx("div",{className:"prefs-values",children:Object.entries(fe.summary.format).map(([K,ee])=>_.jsxs("span",{className:"pref-chip",children:[K," (",ee,")"]},K))})]}),fe.allPrefs.some(K=>{var ee;return(ee=K.prefs)==null?void 0:ee.coursePreference})&&_.jsxs("div",{className:"prefs-row prefs-row-courses",children:[_.jsx("span",{className:"prefs-label",children:" Courses:"}),_.jsx("div",{className:"prefs-courses",children:fe.allPrefs.filter(K=>{var ee;return(ee=K.prefs)==null?void 0:ee.coursePreference}).map(K=>_.jsxs("div",{className:"pref-course",children:[_.jsxs("span",{className:"pref-course-name",children:[K.name,":"]}),_.jsx("span",{className:"pref-course-value",children:K.prefs.coursePreference})]},K.uid))})]})]})]}),N&&_.jsxs("div",{className:"card",children:[_.jsx("h3",{className:"card-title",children:"Actions"}),_.jsxs("div",{className:"admin-actions",children:[o.booked?_.jsx("button",{className:"btn btn-ghost btn-full",onClick:Ze,children:"Remove Booking"}):_.jsx("button",{className:"btn btn-success btn-full",onClick:He,disabled:P.length===0,children:" Mark as Booked"}),_.jsx("button",{className:"btn btn-danger btn-full",onClick:ze,children:"Delete Event"})]})]})]})})}function vk(){var b;const{user:n,profile:e,isAdmin:t,logout:i}=$i(),o=(e==null?void 0:e.username)||((b=n==null?void 0:n.email)==null?void 0:b.split("@")[0])||"User",l=Vc(o),[h,f]=H.useState(!1),[p,y]=H.useState(!1),[w,T]=H.useState(o),[S,V]=H.useState(""),[O,j]=H.useState(""),[L,se]=H.useState(""),[q,te]=H.useState(!1),[ae,we]=H.useState(!1),re=async()=>{await i()};async function k(N){const M=N.toLowerCase(),R=Rp(Fr(ht,"users"),kp("username","==",M));return(await Cl(R)).docs.some(Ze=>Ze.id!==n.uid)}const P=async()=>{const N=w.trim().toLowerCase();if(!N.match(/^[a-z0-9_]+$/)){je("Username can only contain letters, numbers, and underscores");return}if(N.length<3){je("Username must be at least 3 characters");return}if(N===o.toLowerCase()){f(!1);return}te(!0);try{if(await k(N)){je("That username is already taken"),te(!1);return}await vs(mn(ht,"users",n.uid),{username:N}),je("Username updated! "),f(!1),window.location.reload()}catch(M){console.error("Error updating username:",M),je("Failed to update username")}finally{te(!1)}},C=async()=>{if(!S){je("Please enter your current password");return}if(O.length<6){je("New password must be at least 6 characters");return}if(O!==L){je("New passwords don't match");return}we(!0);try{const N=ks.credential(n.email,S);await _1(n,N),await T1(n,O),je("Password updated! "),y(!1),V(""),j(""),se("")}catch(N){console.error("Error updating password:",N),N.code==="auth/wrong-password"?je("Current password is incorrect"):N.code==="auth/weak-password"?je("New password is too weak"):je("Failed to update password")}finally{we(!1)}};return _.jsx("div",{className:"page",children:_.jsxs("div",{className:"page-content",children:[_.jsxs("div",{className:"card profile-card",children:[_.jsx("div",{className:"avatar avatar-lg",style:{backgroundColor:l.bg,color:l.text,margin:"0 auto 16px"},children:Dc(o)}),_.jsx("h2",{className:"profile-name",children:o}),_.jsx("p",{className:"profile-email",children:n==null?void 0:n.email}),t&&_.jsx("span",{className:"badge badge-success",style:{marginTop:8},children:"Admin"})]}),_.jsxs("div",{className:"card",children:[_.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:16},children:[_.jsx("h3",{className:"card-title",children:"Username"}),!h&&_.jsx("button",{className:"btn btn-ghost btn-sm",onClick:()=>{T(o),f(!0)},children:"Edit"})]}),h?_.jsxs("div",{children:[_.jsxs("div",{className:"form-group",children:[_.jsx("label",{children:"New Username"}),_.jsx("input",{type:"text",className:"input",value:w,onChange:N=>T(N.target.value),placeholder:"golfer123",autoFocus:!0}),_.jsx("span",{className:"input-hint",children:"Letters, numbers, and underscores only"})]}),_.jsxs("div",{className:"form-actions",children:[_.jsx("button",{className:"btn btn-ghost",onClick:()=>{f(!1),T(o)},disabled:q,children:"Cancel"}),_.jsx("button",{className:"btn btn-primary",onClick:P,disabled:q,children:q?"Saving...":"Save Username"})]})]}):_.jsxs("div",{className:"info-row",children:[_.jsx("span",{className:"info-label",children:"Current username"}),_.jsx("span",{className:"info-value",children:o})]})]}),_.jsxs("div",{className:"card",children:[_.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:16},children:[_.jsx("h3",{className:"card-title",children:"Password"}),!p&&_.jsx("button",{className:"btn btn-ghost btn-sm",onClick:()=>y(!0),children:"Change"})]}),p?_.jsxs("div",{children:[_.jsxs("div",{className:"form-group",children:[_.jsx("label",{children:"Current Password"}),_.jsx("input",{type:"password",className:"input",value:S,onChange:N=>V(N.target.value),placeholder:"Enter current password",autoComplete:"current-password"})]}),_.jsxs("div",{className:"form-group",children:[_.jsx("label",{children:"New Password"}),_.jsx("input",{type:"password",className:"input",value:O,onChange:N=>j(N.target.value),placeholder:"Enter new password",autoComplete:"new-password"}),_.jsx("span",{className:"input-hint",children:"At least 6 characters"})]}),_.jsxs("div",{className:"form-group",children:[_.jsx("label",{children:"Confirm New Password"}),_.jsx("input",{type:"password",className:"input",value:L,onChange:N=>se(N.target.value),placeholder:"Confirm new password",autoComplete:"new-password"})]}),_.jsxs("div",{className:"form-actions",children:[_.jsx("button",{className:"btn btn-ghost",onClick:()=>{y(!1),V(""),j(""),se("")},disabled:ae,children:"Cancel"}),_.jsx("button",{className:"btn btn-primary",onClick:C,disabled:ae,children:ae?"Updating...":"Update Password"})]})]}):_.jsxs("div",{className:"info-row",children:[_.jsx("span",{className:"info-label",children:"Password"}),_.jsx("span",{className:"info-value",children:""})]})]}),_.jsxs("div",{className:"card",children:[_.jsx("h3",{className:"card-title",children:"Account Info"}),_.jsxs("div",{className:"info-row",children:[_.jsx("span",{className:"info-label",children:"Email"}),_.jsx("span",{className:"info-value",children:n==null?void 0:n.email})]}),_.jsxs("div",{className:"info-row",children:[_.jsx("span",{className:"info-label",children:"Member since"}),_.jsx("span",{className:"info-value",children:e!=null&&e.createdAt?new Date(e.createdAt).toLocaleDateString("en-AU",{month:"long",year:"numeric"}):"Unknown"})]})]}),_.jsx("button",{className:"btn btn-danger btn-full",onClick:re,children:"Sign Out"})]})})}function _k(){const[n,e]=H.useState([]),[t,i]=H.useState([]),[o,l]=H.useState(!0);H.useEffect(()=>{const p=xc(Fr(ht,"events"),y=>{const w=y.docs.map(T=>({id:T.id,...T.data()}));w.sort((T,S)=>{var V,O;return(((V=S.date)==null?void 0:V.toMillis())||0)-(((O=T.date)==null?void 0:O.toMillis())||0)}),e(w),l(!1)});return()=>p()},[]),H.useEffect(()=>{const p=xc(Fr(ht,"users"),y=>{const w=y.docs.map(T=>({id:T.id,...T.data()}));i(w)});return()=>p()},[]);const h=async p=>{if(confirm("Delete this event?")){Gn("medium");try{await yE(mn(ht,"events",p)),je("Event deleted","default")}catch(y){console.error("Error deleting event:",y),je("Failed to delete","error")}}},f=async(p,y)=>{if(confirm(`${y?"Remove":"Grant"} admin privileges?`)){Gn("medium");try{await vs(mn(ht,"users",p),{isAdmin:!y}),je(`Admin ${y?"removed":"granted"}`,"success")}catch(w){console.error("Error updating user:",w),je("Failed to update","error")}}};return o?_.jsx("div",{className:"page",children:_.jsxs("div",{className:"page-content",children:[_.jsx("div",{className:"skeleton",style:{height:32,width:"40%",marginBottom:24}}),_.jsx("div",{className:"skeleton",style:{height:200,marginBottom:16}}),_.jsx("div",{className:"skeleton",style:{height:200}})]})}):_.jsx("div",{className:"page",children:_.jsxs("div",{className:"page-content",children:[_.jsx("h1",{className:"page-title",children:"Admin Panel"}),_.jsxs("div",{className:"card",children:[_.jsxs("div",{className:"card-header",children:[_.jsx("h3",{className:"card-title",children:"Events"}),_.jsx("span",{className:"badge",children:n.length})]}),n.length===0?_.jsx("p",{className:"text-secondary",children:"No events yet"}):_.jsx("div",{className:"admin-list",children:n.map(p=>{var T,S;const y=rk((S=(T=p.date)==null?void 0:T.toDate)==null?void 0:S.call(T)),w=p.responses?Object.values(p.responses).filter(V=>(typeof V=="string"?V:V==null?void 0:V.status)==="available").length:0;return _.jsxs("div",{className:"admin-list-item",children:[_.jsxs("div",{className:"admin-list-info",children:[_.jsxs("div",{className:"admin-list-title",children:[p.title||"Golf Round",p.booked&&_.jsx("span",{className:"badge badge-success badge-sm",children:"Booked"})]}),_.jsxs("div",{className:"admin-list-meta",children:[y,"  ",w,"/4 players",p.courseName&&`  ${p.courseName}`]})]}),_.jsxs("div",{className:"admin-list-actions",children:[_.jsx(ur,{to:`/event/${p.id}`,className:"btn btn-ghost btn-sm",children:"View"}),_.jsx("button",{className:"btn btn-ghost btn-sm btn-danger",onClick:()=>h(p.id),children:"Delete"})]})]},p.id)})})]}),_.jsxs("div",{className:"card",children:[_.jsxs("div",{className:"card-header",children:[_.jsx("h3",{className:"card-title",children:"Users"}),_.jsx("span",{className:"badge",children:t.length})]}),t.length===0?_.jsx("p",{className:"text-secondary",children:"No users yet"}):_.jsx("div",{className:"admin-list",children:t.map(p=>{var T;const y=p.username||((T=p.email)==null?void 0:T.split("@")[0])||"User",w=Vc(y);return _.jsxs("div",{className:"admin-list-item",children:[_.jsx("div",{className:"admin-list-info",children:_.jsxs("div",{style:{display:"flex",alignItems:"center",gap:12},children:[_.jsx("div",{className:"avatar avatar-sm",style:{backgroundColor:w.bg,color:w.text},children:Dc(y)}),_.jsxs("div",{children:[_.jsxs("div",{className:"admin-list-title",children:[y,p.isAdmin&&_.jsx("span",{className:"badge badge-success badge-sm",children:"Admin"})]}),_.jsx("div",{className:"admin-list-meta",children:p.email})]})]})}),_.jsx("div",{className:"admin-list-actions",children:_.jsx("button",{className:`btn btn-ghost btn-sm ${p.isAdmin?"btn-danger":""}`,onClick:()=>f(p.id,p.isAdmin),children:p.isAdmin?"Remove Admin":"Make Admin"})})]},p.id)})})]})]})})}function Yd({children:n}){const{user:e,loading:t}=$i();return t?_.jsx("div",{className:"page",style:{display:"flex",justifyContent:"center",alignItems:"center",minHeight:"50vh"},children:_.jsx("div",{className:"spinner"})}):e?n:_.jsx(uc,{to:"/login",replace:!0})}function wk({children:n}){const{user:e,isAdmin:t,loading:i}=$i();return i?_.jsx("div",{className:"page",style:{display:"flex",justifyContent:"center",alignItems:"center",minHeight:"50vh"},children:_.jsx("div",{className:"spinner"})}):e?t?n:_.jsx(uc,{to:"/",replace:!0}):_.jsx(uc,{to:"/login",replace:!0})}function Ek(){return _.jsxs("div",{className:"app-shell",children:[_.jsx(ek,{}),_.jsx("main",{className:"main-content",children:_.jsxs(RT,{children:[_.jsx(_i,{path:"/login",element:_.jsx(sk,{})}),_.jsx(_i,{path:"/signup",element:_.jsx(ok,{})}),_.jsx(_i,{path:"/",element:_.jsx(Yd,{children:_.jsx(ik,{})})}),_.jsx(_i,{path:"/event/:id",element:_.jsx(Yd,{children:_.jsx(yk,{})})}),_.jsx(_i,{path:"/profile",element:_.jsx(Yd,{children:_.jsx(vk,{})})}),_.jsx(_i,{path:"/admin",element:_.jsx(wk,{children:_.jsx(_k,{})})}),_.jsx(_i,{path:"*",element:_.jsx(uc,{to:"/",replace:!0})})]})}),_.jsx(tk,{})]})}const Tk="/golfgang/";O0.createRoot(document.getElementById("root")).render(_.jsx(H.StrictMode,{children:_.jsx(OT,{basename:Tk,children:_.jsx(ZR,{children:_.jsx(Ek,{})})})}));
